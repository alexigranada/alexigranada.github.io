function Zw(i,n){for(var l=0;l<n.length;l++){const p=n[l];if(typeof p!="string"&&!Array.isArray(p)){for(const _ in p)if(_!=="default"&&!(_ in i)){const b=Object.getOwnPropertyDescriptor(p,_);b&&Object.defineProperty(i,_,b.get?b:{enumerable:!0,get:()=>p[_]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))p(_);new MutationObserver(_=>{for(const b of _)if(b.type==="childList")for(const x of b.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&p(x)}).observe(document,{childList:!0,subtree:!0});function l(_){const b={};return _.integrity&&(b.integrity=_.integrity),_.referrerPolicy&&(b.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?b.credentials="include":_.crossOrigin==="anonymous"?b.credentials="omit":b.credentials="same-origin",b}function p(_){if(_.ep)return;_.ep=!0;const b=l(_);fetch(_.href,b)}})();var Gw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y_(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var __={exports:{}},xp={},v_={exports:{}},At={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hu=Symbol.for("react.element"),Hw=Symbol.for("react.portal"),Ww=Symbol.for("react.fragment"),Kw=Symbol.for("react.strict_mode"),Xw=Symbol.for("react.profiler"),Yw=Symbol.for("react.provider"),Jw=Symbol.for("react.context"),Qw=Symbol.for("react.forward_ref"),eb=Symbol.for("react.suspense"),tb=Symbol.for("react.memo"),ib=Symbol.for("react.lazy"),Zy=Symbol.iterator;function rb(i){return i===null||typeof i!="object"?null:(i=Zy&&i[Zy]||i["@@iterator"],typeof i=="function"?i:null)}var x_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w_=Object.assign,b_={};function Gl(i,n,l){this.props=i,this.context=n,this.refs=b_,this.updater=l||x_}Gl.prototype.isReactComponent={};Gl.prototype.setState=function(i,n){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,n,"setState")};Gl.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function S_(){}S_.prototype=Gl.prototype;function wg(i,n,l){this.props=i,this.context=n,this.refs=b_,this.updater=l||x_}var bg=wg.prototype=new S_;bg.constructor=wg;w_(bg,Gl.prototype);bg.isPureReactComponent=!0;var Gy=Array.isArray,T_=Object.prototype.hasOwnProperty,Sg={current:null},C_={key:!0,ref:!0,__self:!0,__source:!0};function E_(i,n,l){var p,_={},b=null,x=null;if(n!=null)for(p in n.ref!==void 0&&(x=n.ref),n.key!==void 0&&(b=""+n.key),n)T_.call(n,p)&&!C_.hasOwnProperty(p)&&(_[p]=n[p]);var d=arguments.length-2;if(d===1)_.children=l;else if(1<d){for(var R=Array(d),W=0;W<d;W++)R[W]=arguments[W+2];_.children=R}if(i&&i.defaultProps)for(p in d=i.defaultProps,d)_[p]===void 0&&(_[p]=d[p]);return{$$typeof:Hu,type:i,key:b,ref:x,props:_,_owner:Sg.current}}function nb(i,n){return{$$typeof:Hu,type:i.type,key:n,ref:i.ref,props:i.props,_owner:i._owner}}function Tg(i){return typeof i=="object"&&i!==null&&i.$$typeof===Hu}function sb(i){var n={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(l){return n[l]})}var Hy=/\/+/g;function Zf(i,n){return typeof i=="object"&&i!==null&&i.key!=null?sb(""+i.key):n.toString(36)}function Id(i,n,l,p,_){var b=typeof i;(b==="undefined"||b==="boolean")&&(i=null);var x=!1;if(i===null)x=!0;else switch(b){case"string":case"number":x=!0;break;case"object":switch(i.$$typeof){case Hu:case Hw:x=!0}}if(x)return x=i,_=_(x),i=p===""?"."+Zf(x,0):p,Gy(_)?(l="",i!=null&&(l=i.replace(Hy,"$&/")+"/"),Id(_,n,l,"",function(W){return W})):_!=null&&(Tg(_)&&(_=nb(_,l+(!_.key||x&&x.key===_.key?"":(""+_.key).replace(Hy,"$&/")+"/")+i)),n.push(_)),1;if(x=0,p=p===""?".":p+":",Gy(i))for(var d=0;d<i.length;d++){b=i[d];var R=p+Zf(b,d);x+=Id(b,n,l,R,_)}else if(R=rb(i),typeof R=="function")for(i=R.call(i),d=0;!(b=i.next()).done;)b=b.value,R=p+Zf(b,d++),x+=Id(b,n,l,R,_);else if(b==="object")throw n=String(i),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return x}function cd(i,n,l){if(i==null)return i;var p=[],_=0;return Id(i,p,"","",function(b){return n.call(l,b,_++)}),p}function ab(i){if(i._status===-1){var n=i._result;n=n(),n.then(function(l){(i._status===0||i._status===-1)&&(i._status=1,i._result=l)},function(l){(i._status===0||i._status===-1)&&(i._status=2,i._result=l)}),i._status===-1&&(i._status=0,i._result=n)}if(i._status===1)return i._result.default;throw i._result}var Fr={current:null},Pd={transition:null},ob={ReactCurrentDispatcher:Fr,ReactCurrentBatchConfig:Pd,ReactCurrentOwner:Sg};At.Children={map:cd,forEach:function(i,n,l){cd(i,function(){n.apply(this,arguments)},l)},count:function(i){var n=0;return cd(i,function(){n++}),n},toArray:function(i){return cd(i,function(n){return n})||[]},only:function(i){if(!Tg(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};At.Component=Gl;At.Fragment=Ww;At.Profiler=Xw;At.PureComponent=wg;At.StrictMode=Kw;At.Suspense=eb;At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ob;At.cloneElement=function(i,n,l){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var p=w_({},i.props),_=i.key,b=i.ref,x=i._owner;if(n!=null){if(n.ref!==void 0&&(b=n.ref,x=Sg.current),n.key!==void 0&&(_=""+n.key),i.type&&i.type.defaultProps)var d=i.type.defaultProps;for(R in n)T_.call(n,R)&&!C_.hasOwnProperty(R)&&(p[R]=n[R]===void 0&&d!==void 0?d[R]:n[R])}var R=arguments.length-2;if(R===1)p.children=l;else if(1<R){d=Array(R);for(var W=0;W<R;W++)d[W]=arguments[W+2];p.children=d}return{$$typeof:Hu,type:i.type,key:_,ref:b,props:p,_owner:x}};At.createContext=function(i){return i={$$typeof:Jw,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:Yw,_context:i},i.Consumer=i};At.createElement=E_;At.createFactory=function(i){var n=E_.bind(null,i);return n.type=i,n};At.createRef=function(){return{current:null}};At.forwardRef=function(i){return{$$typeof:Qw,render:i}};At.isValidElement=Tg;At.lazy=function(i){return{$$typeof:ib,_payload:{_status:-1,_result:i},_init:ab}};At.memo=function(i,n){return{$$typeof:tb,type:i,compare:n===void 0?null:n}};At.startTransition=function(i){var n=Pd.transition;Pd.transition={};try{i()}finally{Pd.transition=n}};At.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};At.useCallback=function(i,n){return Fr.current.useCallback(i,n)};At.useContext=function(i){return Fr.current.useContext(i)};At.useDebugValue=function(){};At.useDeferredValue=function(i){return Fr.current.useDeferredValue(i)};At.useEffect=function(i,n){return Fr.current.useEffect(i,n)};At.useId=function(){return Fr.current.useId()};At.useImperativeHandle=function(i,n,l){return Fr.current.useImperativeHandle(i,n,l)};At.useInsertionEffect=function(i,n){return Fr.current.useInsertionEffect(i,n)};At.useLayoutEffect=function(i,n){return Fr.current.useLayoutEffect(i,n)};At.useMemo=function(i,n){return Fr.current.useMemo(i,n)};At.useReducer=function(i,n,l){return Fr.current.useReducer(i,n,l)};At.useRef=function(i){return Fr.current.useRef(i)};At.useState=function(i){return Fr.current.useState(i)};At.useSyncExternalStore=function(i,n,l){return Fr.current.useSyncExternalStore(i,n,l)};At.useTransition=function(){return Fr.current.useTransition()};At.version="18.2.0";v_.exports=At;var Ae=v_.exports;const Rs=y_(Ae),lb=Zw({__proto__:null,default:Rs},[Ae]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cb=Ae,ub=Symbol.for("react.element"),hb=Symbol.for("react.fragment"),db=Object.prototype.hasOwnProperty,pb=cb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fb={key:!0,ref:!0,__self:!0,__source:!0};function k_(i,n,l){var p,_={},b=null,x=null;l!==void 0&&(b=""+l),n.key!==void 0&&(b=""+n.key),n.ref!==void 0&&(x=n.ref);for(p in n)db.call(n,p)&&!fb.hasOwnProperty(p)&&(_[p]=n[p]);if(i&&i.defaultProps)for(p in n=i.defaultProps,n)_[p]===void 0&&(_[p]=n[p]);return{$$typeof:ub,type:i,key:b,ref:x,props:_,_owner:pb.current}}xp.Fragment=hb;xp.jsx=k_;xp.jsxs=k_;__.exports=xp;var ae=__.exports,vm={},I_={exports:{}},hn={},P_={exports:{}},z_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function n(He,ht){var dt=He.length;He.push(ht);e:for(;0<dt;){var It=dt-1>>>1,Mt=He[It];if(0<_(Mt,ht))He[It]=ht,He[dt]=Mt,dt=It;else break e}}function l(He){return He.length===0?null:He[0]}function p(He){if(He.length===0)return null;var ht=He[0],dt=He.pop();if(dt!==ht){He[0]=dt;e:for(var It=0,Mt=He.length,Or=Mt>>>1;It<Or;){var Ai=2*(It+1)-1,Kr=He[Ai],Fi=Ai+1,Ui=He[Fi];if(0>_(Kr,dt))Fi<Mt&&0>_(Ui,Kr)?(He[It]=Ui,He[Fi]=dt,It=Fi):(He[It]=Kr,He[Ai]=dt,It=Ai);else if(Fi<Mt&&0>_(Ui,dt))He[It]=Ui,He[Fi]=dt,It=Fi;else break e}}return ht}function _(He,ht){var dt=He.sortIndex-ht.sortIndex;return dt!==0?dt:He.id-ht.id}if(typeof performance=="object"&&typeof performance.now=="function"){var b=performance;i.unstable_now=function(){return b.now()}}else{var x=Date,d=x.now();i.unstable_now=function(){return x.now()-d}}var R=[],W=[],re=1,K=null,U=3,Te=!1,ke=!1,ze=!1,$e=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function le(He){for(var ht=l(W);ht!==null;){if(ht.callback===null)p(W);else if(ht.startTime<=He)p(W),ht.sortIndex=ht.expirationTime,n(R,ht);else break;ht=l(W)}}function xe(He){if(ze=!1,le(He),!ke)if(l(R)!==null)ke=!0,br(je);else{var ht=l(W);ht!==null&&pn(xe,ht.startTime-He)}}function je(He,ht){ke=!1,ze&&(ze=!1,oe(tt),tt=-1),Te=!0;var dt=U;try{for(le(ht),K=l(R);K!==null&&(!(K.expirationTime>ht)||He&&!Ot());){var It=K.callback;if(typeof It=="function"){K.callback=null,U=K.priorityLevel;var Mt=It(K.expirationTime<=ht);ht=i.unstable_now(),typeof Mt=="function"?K.callback=Mt:K===l(R)&&p(R),le(ht)}else p(R);K=l(R)}if(K!==null)var Or=!0;else{var Ai=l(W);Ai!==null&&pn(xe,Ai.startTime-ht),Or=!1}return Or}finally{K=null,U=dt,Te=!1}}var Xe=!1,Ke=null,tt=-1,Dt=5,xt=-1;function Ot(){return!(i.unstable_now()-xt<Dt)}function Nt(){if(Ke!==null){var He=i.unstable_now();xt=He;var ht=!0;try{ht=Ke(!0,He)}finally{ht?si():(Xe=!1,Ke=null)}}else Xe=!1}var si;if(typeof Q=="function")si=function(){Q(Nt)};else if(typeof MessageChannel<"u"){var ar=new MessageChannel,Pn=ar.port2;ar.port1.onmessage=Nt,si=function(){Pn.postMessage(null)}}else si=function(){$e(Nt,0)};function br(He){Ke=He,Xe||(Xe=!0,si())}function pn(He,ht){tt=$e(function(){He(i.unstable_now())},ht)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(He){He.callback=null},i.unstable_continueExecution=function(){ke||Te||(ke=!0,br(je))},i.unstable_forceFrameRate=function(He){0>He||125<He?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Dt=0<He?Math.floor(1e3/He):5},i.unstable_getCurrentPriorityLevel=function(){return U},i.unstable_getFirstCallbackNode=function(){return l(R)},i.unstable_next=function(He){switch(U){case 1:case 2:case 3:var ht=3;break;default:ht=U}var dt=U;U=ht;try{return He()}finally{U=dt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(He,ht){switch(He){case 1:case 2:case 3:case 4:case 5:break;default:He=3}var dt=U;U=He;try{return ht()}finally{U=dt}},i.unstable_scheduleCallback=function(He,ht,dt){var It=i.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?It+dt:It):dt=It,He){case 1:var Mt=-1;break;case 2:Mt=250;break;case 5:Mt=1073741823;break;case 4:Mt=1e4;break;default:Mt=5e3}return Mt=dt+Mt,He={id:re++,callback:ht,priorityLevel:He,startTime:dt,expirationTime:Mt,sortIndex:-1},dt>It?(He.sortIndex=dt,n(W,He),l(R)===null&&He===l(W)&&(ze?(oe(tt),tt=-1):ze=!0,pn(xe,dt-It))):(He.sortIndex=Mt,n(R,He),ke||Te||(ke=!0,br(je))),He},i.unstable_shouldYield=Ot,i.unstable_wrapCallback=function(He){var ht=U;return function(){var dt=U;U=ht;try{return He.apply(this,arguments)}finally{U=dt}}}})(z_);P_.exports=z_;var mb=P_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A_=Ae,un=mb;function Fe(i){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+i,l=1;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+i+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M_=new Set,Iu={};function zo(i,n){Ol(i,n),Ol(i+"Capture",n)}function Ol(i,n){for(Iu[i]=n,i=0;i<n.length;i++)M_.add(n[i])}var Bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xm=Object.prototype.hasOwnProperty,gb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wy={},Ky={};function yb(i){return xm.call(Ky,i)?!0:xm.call(Wy,i)?!1:gb.test(i)?Ky[i]=!0:(Wy[i]=!0,!1)}function _b(i,n,l,p){if(l!==null&&l.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return p?!1:l!==null?!l.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function vb(i,n,l,p){if(n===null||typeof n>"u"||_b(i,n,l,p))return!0;if(p)return!1;if(l!==null)switch(l.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Br(i,n,l,p,_,b,x){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=p,this.attributeNamespace=_,this.mustUseProperty=l,this.propertyName=i,this.type=n,this.sanitizeURL=b,this.removeEmptyString=x}var sr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){sr[i]=new Br(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var n=i[0];sr[n]=new Br(n,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){sr[i]=new Br(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){sr[i]=new Br(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){sr[i]=new Br(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){sr[i]=new Br(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){sr[i]=new Br(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){sr[i]=new Br(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){sr[i]=new Br(i,5,!1,i.toLowerCase(),null,!1,!1)});var Cg=/[\-:]([a-z])/g;function Eg(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var n=i.replace(Cg,Eg);sr[n]=new Br(n,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var n=i.replace(Cg,Eg);sr[n]=new Br(n,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var n=i.replace(Cg,Eg);sr[n]=new Br(n,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){sr[i]=new Br(i,1,!1,i.toLowerCase(),null,!1,!1)});sr.xlinkHref=new Br("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){sr[i]=new Br(i,1,!1,i.toLowerCase(),null,!0,!0)});function kg(i,n,l,p){var _=sr.hasOwnProperty(n)?sr[n]:null;(_!==null?_.type!==0:p||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(vb(n,l,_,p)&&(l=null),p||_===null?yb(n)&&(l===null?i.removeAttribute(n):i.setAttribute(n,""+l)):_.mustUseProperty?i[_.propertyName]=l===null?_.type===3?!1:"":l:(n=_.attributeName,p=_.attributeNamespace,l===null?i.removeAttribute(n):(_=_.type,l=_===3||_===4&&l===!0?"":""+l,p?i.setAttributeNS(p,n,l):i.setAttribute(n,l))))}var Us=A_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ud=Symbol.for("react.element"),xl=Symbol.for("react.portal"),wl=Symbol.for("react.fragment"),Ig=Symbol.for("react.strict_mode"),wm=Symbol.for("react.profiler"),D_=Symbol.for("react.provider"),L_=Symbol.for("react.context"),Pg=Symbol.for("react.forward_ref"),bm=Symbol.for("react.suspense"),Sm=Symbol.for("react.suspense_list"),zg=Symbol.for("react.memo"),wa=Symbol.for("react.lazy"),R_=Symbol.for("react.offscreen"),Xy=Symbol.iterator;function su(i){return i===null||typeof i!="object"?null:(i=Xy&&i[Xy]||i["@@iterator"],typeof i=="function"?i:null)}var gi=Object.assign,Gf;function pu(i){if(Gf===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);Gf=n&&n[1]||""}return`
`+Gf+i}var Hf=!1;function Wf(i,n){if(!i||Hf)return"";Hf=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(W){var p=W}Reflect.construct(i,[],n)}else{try{n.call()}catch(W){p=W}i.call(n.prototype)}else{try{throw Error()}catch(W){p=W}i()}}catch(W){if(W&&p&&typeof W.stack=="string"){for(var _=W.stack.split(`
`),b=p.stack.split(`
`),x=_.length-1,d=b.length-1;1<=x&&0<=d&&_[x]!==b[d];)d--;for(;1<=x&&0<=d;x--,d--)if(_[x]!==b[d]){if(x!==1||d!==1)do if(x--,d--,0>d||_[x]!==b[d]){var R=`
`+_[x].replace(" at new "," at ");return i.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",i.displayName)),R}while(1<=x&&0<=d);break}}}finally{Hf=!1,Error.prepareStackTrace=l}return(i=i?i.displayName||i.name:"")?pu(i):""}function xb(i){switch(i.tag){case 5:return pu(i.type);case 16:return pu("Lazy");case 13:return pu("Suspense");case 19:return pu("SuspenseList");case 0:case 2:case 15:return i=Wf(i.type,!1),i;case 11:return i=Wf(i.type.render,!1),i;case 1:return i=Wf(i.type,!0),i;default:return""}}function Tm(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case wl:return"Fragment";case xl:return"Portal";case wm:return"Profiler";case Ig:return"StrictMode";case bm:return"Suspense";case Sm:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case L_:return(i.displayName||"Context")+".Consumer";case D_:return(i._context.displayName||"Context")+".Provider";case Pg:var n=i.render;return i=i.displayName,i||(i=n.displayName||n.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case zg:return n=i.displayName||null,n!==null?n:Tm(i.type)||"Memo";case wa:n=i._payload,i=i._init;try{return Tm(i(n))}catch{}}return null}function wb(i){var n=i.type;switch(i.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=n.render,i=i.displayName||i.name||"",n.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tm(n);case 8:return n===Ig?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Oa(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function F_(i){var n=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function bb(i){var n=F_(i)?"checked":"value",l=Object.getOwnPropertyDescriptor(i.constructor.prototype,n),p=""+i[n];if(!i.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var _=l.get,b=l.set;return Object.defineProperty(i,n,{configurable:!0,get:function(){return _.call(this)},set:function(x){p=""+x,b.call(this,x)}}),Object.defineProperty(i,n,{enumerable:l.enumerable}),{getValue:function(){return p},setValue:function(x){p=""+x},stopTracking:function(){i._valueTracker=null,delete i[n]}}}}function hd(i){i._valueTracker||(i._valueTracker=bb(i))}function B_(i){if(!i)return!1;var n=i._valueTracker;if(!n)return!0;var l=n.getValue(),p="";return i&&(p=F_(i)?i.checked?"true":"false":i.value),i=p,i!==l?(n.setValue(i),!0):!1}function $d(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Cm(i,n){var l=n.checked;return gi({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??i._wrapperState.initialChecked})}function Yy(i,n){var l=n.defaultValue==null?"":n.defaultValue,p=n.checked!=null?n.checked:n.defaultChecked;l=Oa(n.value!=null?n.value:l),i._wrapperState={initialChecked:p,initialValue:l,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function O_(i,n){n=n.checked,n!=null&&kg(i,"checked",n,!1)}function Em(i,n){O_(i,n);var l=Oa(n.value),p=n.type;if(l!=null)p==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+l):i.value!==""+l&&(i.value=""+l);else if(p==="submit"||p==="reset"){i.removeAttribute("value");return}n.hasOwnProperty("value")?km(i,n.type,l):n.hasOwnProperty("defaultValue")&&km(i,n.type,Oa(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(i.defaultChecked=!!n.defaultChecked)}function Jy(i,n,l){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var p=n.type;if(!(p!=="submit"&&p!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+i._wrapperState.initialValue,l||n===i.value||(i.value=n),i.defaultValue=n}l=i.name,l!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,l!==""&&(i.name=l)}function km(i,n,l){(n!=="number"||$d(i.ownerDocument)!==i)&&(l==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+l&&(i.defaultValue=""+l))}var fu=Array.isArray;function Ml(i,n,l,p){if(i=i.options,n){n={};for(var _=0;_<l.length;_++)n["$"+l[_]]=!0;for(l=0;l<i.length;l++)_=n.hasOwnProperty("$"+i[l].value),i[l].selected!==_&&(i[l].selected=_),_&&p&&(i[l].defaultSelected=!0)}else{for(l=""+Oa(l),n=null,_=0;_<i.length;_++){if(i[_].value===l){i[_].selected=!0,p&&(i[_].defaultSelected=!0);return}n!==null||i[_].disabled||(n=i[_])}n!==null&&(n.selected=!0)}}function Im(i,n){if(n.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return gi({},n,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Qy(i,n){var l=n.value;if(l==null){if(l=n.children,n=n.defaultValue,l!=null){if(n!=null)throw Error(Fe(92));if(fu(l)){if(1<l.length)throw Error(Fe(93));l=l[0]}n=l}n==null&&(n=""),l=n}i._wrapperState={initialValue:Oa(l)}}function N_(i,n){var l=Oa(n.value),p=Oa(n.defaultValue);l!=null&&(l=""+l,l!==i.value&&(i.value=l),n.defaultValue==null&&i.defaultValue!==l&&(i.defaultValue=l)),p!=null&&(i.defaultValue=""+p)}function e1(i){var n=i.textContent;n===i._wrapperState.initialValue&&n!==""&&n!==null&&(i.value=n)}function j_(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pm(i,n){return i==null||i==="http://www.w3.org/1999/xhtml"?j_(n):i==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var dd,V_=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,l,p,_){MSApp.execUnsafeLocalFunction(function(){return i(n,l,p,_)})}:i}(function(i,n){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=n;else{for(dd=dd||document.createElement("div"),dd.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=dd.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;n.firstChild;)i.appendChild(n.firstChild)}});function Pu(i,n){if(n){var l=i.firstChild;if(l&&l===i.lastChild&&l.nodeType===3){l.nodeValue=n;return}}i.textContent=n}var _u={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sb=["Webkit","ms","Moz","O"];Object.keys(_u).forEach(function(i){Sb.forEach(function(n){n=n+i.charAt(0).toUpperCase()+i.substring(1),_u[n]=_u[i]})});function U_(i,n,l){return n==null||typeof n=="boolean"||n===""?"":l||typeof n!="number"||n===0||_u.hasOwnProperty(i)&&_u[i]?(""+n).trim():n+"px"}function $_(i,n){i=i.style;for(var l in n)if(n.hasOwnProperty(l)){var p=l.indexOf("--")===0,_=U_(l,n[l],p);l==="float"&&(l="cssFloat"),p?i.setProperty(l,_):i[l]=_}}var Tb=gi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zm(i,n){if(n){if(Tb[i]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(Fe(137,i));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(Fe(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(Fe(61))}if(n.style!=null&&typeof n.style!="object")throw Error(Fe(62))}}function Am(i,n){if(i.indexOf("-")===-1)return typeof n.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mm=null;function Ag(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Dm=null,Dl=null,Ll=null;function t1(i){if(i=Xu(i)){if(typeof Dm!="function")throw Error(Fe(280));var n=i.stateNode;n&&(n=Cp(n),Dm(i.stateNode,i.type,n))}}function q_(i){Dl?Ll?Ll.push(i):Ll=[i]:Dl=i}function Z_(){if(Dl){var i=Dl,n=Ll;if(Ll=Dl=null,t1(i),n)for(i=0;i<n.length;i++)t1(n[i])}}function G_(i,n){return i(n)}function H_(){}var Kf=!1;function W_(i,n,l){if(Kf)return i(n,l);Kf=!0;try{return G_(i,n,l)}finally{Kf=!1,(Dl!==null||Ll!==null)&&(H_(),Z_())}}function zu(i,n){var l=i.stateNode;if(l===null)return null;var p=Cp(l);if(p===null)return null;l=p[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break e;default:i=!1}if(i)return null;if(l&&typeof l!="function")throw Error(Fe(231,n,typeof l));return l}var Lm=!1;if(Bs)try{var au={};Object.defineProperty(au,"passive",{get:function(){Lm=!0}}),window.addEventListener("test",au,au),window.removeEventListener("test",au,au)}catch{Lm=!1}function Cb(i,n,l,p,_,b,x,d,R){var W=Array.prototype.slice.call(arguments,3);try{n.apply(l,W)}catch(re){this.onError(re)}}var vu=!1,qd=null,Zd=!1,Rm=null,Eb={onError:function(i){vu=!0,qd=i}};function kb(i,n,l,p,_,b,x,d,R){vu=!1,qd=null,Cb.apply(Eb,arguments)}function Ib(i,n,l,p,_,b,x,d,R){if(kb.apply(this,arguments),vu){if(vu){var W=qd;vu=!1,qd=null}else throw Error(Fe(198));Zd||(Zd=!0,Rm=W)}}function Ao(i){var n=i,l=i;if(i.alternate)for(;n.return;)n=n.return;else{i=n;do n=i,n.flags&4098&&(l=n.return),i=n.return;while(i)}return n.tag===3?l:null}function K_(i){if(i.tag===13){var n=i.memoizedState;if(n===null&&(i=i.alternate,i!==null&&(n=i.memoizedState)),n!==null)return n.dehydrated}return null}function i1(i){if(Ao(i)!==i)throw Error(Fe(188))}function Pb(i){var n=i.alternate;if(!n){if(n=Ao(i),n===null)throw Error(Fe(188));return n!==i?null:i}for(var l=i,p=n;;){var _=l.return;if(_===null)break;var b=_.alternate;if(b===null){if(p=_.return,p!==null){l=p;continue}break}if(_.child===b.child){for(b=_.child;b;){if(b===l)return i1(_),i;if(b===p)return i1(_),n;b=b.sibling}throw Error(Fe(188))}if(l.return!==p.return)l=_,p=b;else{for(var x=!1,d=_.child;d;){if(d===l){x=!0,l=_,p=b;break}if(d===p){x=!0,p=_,l=b;break}d=d.sibling}if(!x){for(d=b.child;d;){if(d===l){x=!0,l=b,p=_;break}if(d===p){x=!0,p=b,l=_;break}d=d.sibling}if(!x)throw Error(Fe(189))}}if(l.alternate!==p)throw Error(Fe(190))}if(l.tag!==3)throw Error(Fe(188));return l.stateNode.current===l?i:n}function X_(i){return i=Pb(i),i!==null?Y_(i):null}function Y_(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var n=Y_(i);if(n!==null)return n;i=i.sibling}return null}var J_=un.unstable_scheduleCallback,r1=un.unstable_cancelCallback,zb=un.unstable_shouldYield,Ab=un.unstable_requestPaint,zi=un.unstable_now,Mb=un.unstable_getCurrentPriorityLevel,Mg=un.unstable_ImmediatePriority,Q_=un.unstable_UserBlockingPriority,Gd=un.unstable_NormalPriority,Db=un.unstable_LowPriority,ev=un.unstable_IdlePriority,wp=null,ss=null;function Lb(i){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(wp,i,void 0,(i.current.flags&128)===128)}catch{}}var Vn=Math.clz32?Math.clz32:Bb,Rb=Math.log,Fb=Math.LN2;function Bb(i){return i>>>=0,i===0?32:31-(Rb(i)/Fb|0)|0}var pd=64,fd=4194304;function mu(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Hd(i,n){var l=i.pendingLanes;if(l===0)return 0;var p=0,_=i.suspendedLanes,b=i.pingedLanes,x=l&268435455;if(x!==0){var d=x&~_;d!==0?p=mu(d):(b&=x,b!==0&&(p=mu(b)))}else x=l&~_,x!==0?p=mu(x):b!==0&&(p=mu(b));if(p===0)return 0;if(n!==0&&n!==p&&!(n&_)&&(_=p&-p,b=n&-n,_>=b||_===16&&(b&4194240)!==0))return n;if(p&4&&(p|=l&16),n=i.entangledLanes,n!==0)for(i=i.entanglements,n&=p;0<n;)l=31-Vn(n),_=1<<l,p|=i[l],n&=~_;return p}function Ob(i,n){switch(i){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nb(i,n){for(var l=i.suspendedLanes,p=i.pingedLanes,_=i.expirationTimes,b=i.pendingLanes;0<b;){var x=31-Vn(b),d=1<<x,R=_[x];R===-1?(!(d&l)||d&p)&&(_[x]=Ob(d,n)):R<=n&&(i.expiredLanes|=d),b&=~d}}function Fm(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function tv(){var i=pd;return pd<<=1,!(pd&4194240)&&(pd=64),i}function Xf(i){for(var n=[],l=0;31>l;l++)n.push(i);return n}function Wu(i,n,l){i.pendingLanes|=n,n!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,n=31-Vn(n),i[n]=l}function jb(i,n){var l=i.pendingLanes&~n;i.pendingLanes=n,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=n,i.mutableReadLanes&=n,i.entangledLanes&=n,n=i.entanglements;var p=i.eventTimes;for(i=i.expirationTimes;0<l;){var _=31-Vn(l),b=1<<_;n[_]=0,p[_]=-1,i[_]=-1,l&=~b}}function Dg(i,n){var l=i.entangledLanes|=n;for(i=i.entanglements;l;){var p=31-Vn(l),_=1<<p;_&n|i[p]&n&&(i[p]|=n),l&=~_}}var Zt=0;function iv(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var rv,Lg,nv,sv,av,Bm=!1,md=[],Pa=null,za=null,Aa=null,Au=new Map,Mu=new Map,Sa=[],Vb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n1(i,n){switch(i){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Aa=null;break;case"pointerover":case"pointerout":Au.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mu.delete(n.pointerId)}}function ou(i,n,l,p,_,b){return i===null||i.nativeEvent!==b?(i={blockedOn:n,domEventName:l,eventSystemFlags:p,nativeEvent:b,targetContainers:[_]},n!==null&&(n=Xu(n),n!==null&&Lg(n)),i):(i.eventSystemFlags|=p,n=i.targetContainers,_!==null&&n.indexOf(_)===-1&&n.push(_),i)}function Ub(i,n,l,p,_){switch(n){case"focusin":return Pa=ou(Pa,i,n,l,p,_),!0;case"dragenter":return za=ou(za,i,n,l,p,_),!0;case"mouseover":return Aa=ou(Aa,i,n,l,p,_),!0;case"pointerover":var b=_.pointerId;return Au.set(b,ou(Au.get(b)||null,i,n,l,p,_)),!0;case"gotpointercapture":return b=_.pointerId,Mu.set(b,ou(Mu.get(b)||null,i,n,l,p,_)),!0}return!1}function ov(i){var n=vo(i.target);if(n!==null){var l=Ao(n);if(l!==null){if(n=l.tag,n===13){if(n=K_(l),n!==null){i.blockedOn=n,av(i.priority,function(){nv(l)});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){i.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}i.blockedOn=null}function zd(i){if(i.blockedOn!==null)return!1;for(var n=i.targetContainers;0<n.length;){var l=Om(i.domEventName,i.eventSystemFlags,n[0],i.nativeEvent);if(l===null){l=i.nativeEvent;var p=new l.constructor(l.type,l);Mm=p,l.target.dispatchEvent(p),Mm=null}else return n=Xu(l),n!==null&&Lg(n),i.blockedOn=l,!1;n.shift()}return!0}function s1(i,n,l){zd(i)&&l.delete(n)}function $b(){Bm=!1,Pa!==null&&zd(Pa)&&(Pa=null),za!==null&&zd(za)&&(za=null),Aa!==null&&zd(Aa)&&(Aa=null),Au.forEach(s1),Mu.forEach(s1)}function lu(i,n){i.blockedOn===n&&(i.blockedOn=null,Bm||(Bm=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,$b)))}function Du(i){function n(_){return lu(_,i)}if(0<md.length){lu(md[0],i);for(var l=1;l<md.length;l++){var p=md[l];p.blockedOn===i&&(p.blockedOn=null)}}for(Pa!==null&&lu(Pa,i),za!==null&&lu(za,i),Aa!==null&&lu(Aa,i),Au.forEach(n),Mu.forEach(n),l=0;l<Sa.length;l++)p=Sa[l],p.blockedOn===i&&(p.blockedOn=null);for(;0<Sa.length&&(l=Sa[0],l.blockedOn===null);)ov(l),l.blockedOn===null&&Sa.shift()}var Rl=Us.ReactCurrentBatchConfig,Wd=!0;function qb(i,n,l,p){var _=Zt,b=Rl.transition;Rl.transition=null;try{Zt=1,Rg(i,n,l,p)}finally{Zt=_,Rl.transition=b}}function Zb(i,n,l,p){var _=Zt,b=Rl.transition;Rl.transition=null;try{Zt=4,Rg(i,n,l,p)}finally{Zt=_,Rl.transition=b}}function Rg(i,n,l,p){if(Wd){var _=Om(i,n,l,p);if(_===null)am(i,n,p,Kd,l),n1(i,p);else if(Ub(_,i,n,l,p))p.stopPropagation();else if(n1(i,p),n&4&&-1<Vb.indexOf(i)){for(;_!==null;){var b=Xu(_);if(b!==null&&rv(b),b=Om(i,n,l,p),b===null&&am(i,n,p,Kd,l),b===_)break;_=b}_!==null&&p.stopPropagation()}else am(i,n,p,null,l)}}var Kd=null;function Om(i,n,l,p){if(Kd=null,i=Ag(p),i=vo(i),i!==null)if(n=Ao(i),n===null)i=null;else if(l=n.tag,l===13){if(i=K_(n),i!==null)return i;i=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;i=null}else n!==i&&(i=null);return Kd=i,null}function lv(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mb()){case Mg:return 1;case Q_:return 4;case Gd:case Db:return 16;case ev:return 536870912;default:return 16}default:return 16}}var Ea=null,Fg=null,Ad=null;function cv(){if(Ad)return Ad;var i,n=Fg,l=n.length,p,_="value"in Ea?Ea.value:Ea.textContent,b=_.length;for(i=0;i<l&&n[i]===_[i];i++);var x=l-i;for(p=1;p<=x&&n[l-p]===_[b-p];p++);return Ad=_.slice(i,1<p?1-p:void 0)}function Md(i){var n=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&n===13&&(i=13)):i=n,i===10&&(i=13),32<=i||i===13?i:0}function gd(){return!0}function a1(){return!1}function dn(i){function n(l,p,_,b,x){this._reactName=l,this._targetInst=_,this.type=p,this.nativeEvent=b,this.target=x,this.currentTarget=null;for(var d in i)i.hasOwnProperty(d)&&(l=i[d],this[d]=l?l(b):b[d]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?gd:a1,this.isPropagationStopped=a1,this}return gi(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=gd)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=gd)},persist:function(){},isPersistent:gd}),n}var Hl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bg=dn(Hl),Ku=gi({},Hl,{view:0,detail:0}),Gb=dn(Ku),Yf,Jf,cu,bp=gi({},Ku,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Og,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==cu&&(cu&&i.type==="mousemove"?(Yf=i.screenX-cu.screenX,Jf=i.screenY-cu.screenY):Jf=Yf=0,cu=i),Yf)},movementY:function(i){return"movementY"in i?i.movementY:Jf}}),o1=dn(bp),Hb=gi({},bp,{dataTransfer:0}),Wb=dn(Hb),Kb=gi({},Ku,{relatedTarget:0}),Qf=dn(Kb),Xb=gi({},Hl,{animationName:0,elapsedTime:0,pseudoElement:0}),Yb=dn(Xb),Jb=gi({},Hl,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Qb=dn(Jb),e3=gi({},Hl,{data:0}),l1=dn(e3),t3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n3(i){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(i):(i=r3[i])?!!n[i]:!1}function Og(){return n3}var s3=gi({},Ku,{key:function(i){if(i.key){var n=t3[i.key]||i.key;if(n!=="Unidentified")return n}return i.type==="keypress"?(i=Md(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?i3[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Og,charCode:function(i){return i.type==="keypress"?Md(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Md(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),a3=dn(s3),o3=gi({},bp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),c1=dn(o3),l3=gi({},Ku,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Og}),c3=dn(l3),u3=gi({},Hl,{propertyName:0,elapsedTime:0,pseudoElement:0}),h3=dn(u3),d3=gi({},bp,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),p3=dn(d3),f3=[9,13,27,32],Ng=Bs&&"CompositionEvent"in window,xu=null;Bs&&"documentMode"in document&&(xu=document.documentMode);var m3=Bs&&"TextEvent"in window&&!xu,uv=Bs&&(!Ng||xu&&8<xu&&11>=xu),u1=" ",h1=!1;function hv(i,n){switch(i){case"keyup":return f3.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dv(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var bl=!1;function g3(i,n){switch(i){case"compositionend":return dv(n);case"keypress":return n.which!==32?null:(h1=!0,u1);case"textInput":return i=n.data,i===u1&&h1?null:i;default:return null}}function y3(i,n){if(bl)return i==="compositionend"||!Ng&&hv(i,n)?(i=cv(),Ad=Fg=Ea=null,bl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return uv&&n.locale!=="ko"?null:n.data;default:return null}}var _3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d1(i){var n=i&&i.nodeName&&i.nodeName.toLowerCase();return n==="input"?!!_3[i.type]:n==="textarea"}function pv(i,n,l,p){q_(p),n=Xd(n,"onChange"),0<n.length&&(l=new Bg("onChange","change",null,l,p),i.push({event:l,listeners:n}))}var wu=null,Lu=null;function v3(i){Tv(i,0)}function Sp(i){var n=Cl(i);if(B_(n))return i}function x3(i,n){if(i==="change")return n}var fv=!1;if(Bs){var em;if(Bs){var tm="oninput"in document;if(!tm){var p1=document.createElement("div");p1.setAttribute("oninput","return;"),tm=typeof p1.oninput=="function"}em=tm}else em=!1;fv=em&&(!document.documentMode||9<document.documentMode)}function f1(){wu&&(wu.detachEvent("onpropertychange",mv),Lu=wu=null)}function mv(i){if(i.propertyName==="value"&&Sp(Lu)){var n=[];pv(n,Lu,i,Ag(i)),W_(v3,n)}}function w3(i,n,l){i==="focusin"?(f1(),wu=n,Lu=l,wu.attachEvent("onpropertychange",mv)):i==="focusout"&&f1()}function b3(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Sp(Lu)}function S3(i,n){if(i==="click")return Sp(n)}function T3(i,n){if(i==="input"||i==="change")return Sp(n)}function C3(i,n){return i===n&&(i!==0||1/i===1/n)||i!==i&&n!==n}var $n=typeof Object.is=="function"?Object.is:C3;function Ru(i,n){if($n(i,n))return!0;if(typeof i!="object"||i===null||typeof n!="object"||n===null)return!1;var l=Object.keys(i),p=Object.keys(n);if(l.length!==p.length)return!1;for(p=0;p<l.length;p++){var _=l[p];if(!xm.call(n,_)||!$n(i[_],n[_]))return!1}return!0}function m1(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function g1(i,n){var l=m1(i);i=0;for(var p;l;){if(l.nodeType===3){if(p=i+l.textContent.length,i<=n&&p>=n)return{node:l,offset:n-i};i=p}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=m1(l)}}function gv(i,n){return i&&n?i===n?!0:i&&i.nodeType===3?!1:n&&n.nodeType===3?gv(i,n.parentNode):"contains"in i?i.contains(n):i.compareDocumentPosition?!!(i.compareDocumentPosition(n)&16):!1:!1}function yv(){for(var i=window,n=$d();n instanceof i.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)i=n.contentWindow;else break;n=$d(i.document)}return n}function jg(i){var n=i&&i.nodeName&&i.nodeName.toLowerCase();return n&&(n==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||n==="textarea"||i.contentEditable==="true")}function E3(i){var n=yv(),l=i.focusedElem,p=i.selectionRange;if(n!==l&&l&&l.ownerDocument&&gv(l.ownerDocument.documentElement,l)){if(p!==null&&jg(l)){if(n=p.start,i=p.end,i===void 0&&(i=n),"selectionStart"in l)l.selectionStart=n,l.selectionEnd=Math.min(i,l.value.length);else if(i=(n=l.ownerDocument||document)&&n.defaultView||window,i.getSelection){i=i.getSelection();var _=l.textContent.length,b=Math.min(p.start,_);p=p.end===void 0?b:Math.min(p.end,_),!i.extend&&b>p&&(_=p,p=b,b=_),_=g1(l,b);var x=g1(l,p);_&&x&&(i.rangeCount!==1||i.anchorNode!==_.node||i.anchorOffset!==_.offset||i.focusNode!==x.node||i.focusOffset!==x.offset)&&(n=n.createRange(),n.setStart(_.node,_.offset),i.removeAllRanges(),b>p?(i.addRange(n),i.extend(x.node,x.offset)):(n.setEnd(x.node,x.offset),i.addRange(n)))}}for(n=[],i=l;i=i.parentNode;)i.nodeType===1&&n.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<n.length;l++)i=n[l],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var k3=Bs&&"documentMode"in document&&11>=document.documentMode,Sl=null,Nm=null,bu=null,jm=!1;function y1(i,n,l){var p=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;jm||Sl==null||Sl!==$d(p)||(p=Sl,"selectionStart"in p&&jg(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),bu&&Ru(bu,p)||(bu=p,p=Xd(Nm,"onSelect"),0<p.length&&(n=new Bg("onSelect","select",null,n,l),i.push({event:n,listeners:p}),n.target=Sl)))}function yd(i,n){var l={};return l[i.toLowerCase()]=n.toLowerCase(),l["Webkit"+i]="webkit"+n,l["Moz"+i]="moz"+n,l}var Tl={animationend:yd("Animation","AnimationEnd"),animationiteration:yd("Animation","AnimationIteration"),animationstart:yd("Animation","AnimationStart"),transitionend:yd("Transition","TransitionEnd")},im={},_v={};Bs&&(_v=document.createElement("div").style,"AnimationEvent"in window||(delete Tl.animationend.animation,delete Tl.animationiteration.animation,delete Tl.animationstart.animation),"TransitionEvent"in window||delete Tl.transitionend.transition);function Tp(i){if(im[i])return im[i];if(!Tl[i])return i;var n=Tl[i],l;for(l in n)if(n.hasOwnProperty(l)&&l in _v)return im[i]=n[l];return i}var vv=Tp("animationend"),xv=Tp("animationiteration"),wv=Tp("animationstart"),bv=Tp("transitionend"),Sv=new Map,_1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ja(i,n){Sv.set(i,n),zo(n,[i])}for(var rm=0;rm<_1.length;rm++){var nm=_1[rm],I3=nm.toLowerCase(),P3=nm[0].toUpperCase()+nm.slice(1);ja(I3,"on"+P3)}ja(vv,"onAnimationEnd");ja(xv,"onAnimationIteration");ja(wv,"onAnimationStart");ja("dblclick","onDoubleClick");ja("focusin","onFocus");ja("focusout","onBlur");ja(bv,"onTransitionEnd");Ol("onMouseEnter",["mouseout","mouseover"]);Ol("onMouseLeave",["mouseout","mouseover"]);Ol("onPointerEnter",["pointerout","pointerover"]);Ol("onPointerLeave",["pointerout","pointerover"]);zo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zo("onBeforeInput",["compositionend","keypress","textInput","paste"]);zo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z3=new Set("cancel close invalid load scroll toggle".split(" ").concat(gu));function v1(i,n,l){var p=i.type||"unknown-event";i.currentTarget=l,Ib(p,n,void 0,i),i.currentTarget=null}function Tv(i,n){n=(n&4)!==0;for(var l=0;l<i.length;l++){var p=i[l],_=p.event;p=p.listeners;e:{var b=void 0;if(n)for(var x=p.length-1;0<=x;x--){var d=p[x],R=d.instance,W=d.currentTarget;if(d=d.listener,R!==b&&_.isPropagationStopped())break e;v1(_,d,W),b=R}else for(x=0;x<p.length;x++){if(d=p[x],R=d.instance,W=d.currentTarget,d=d.listener,R!==b&&_.isPropagationStopped())break e;v1(_,d,W),b=R}}}if(Zd)throw i=Rm,Zd=!1,Rm=null,i}function ri(i,n){var l=n[Zm];l===void 0&&(l=n[Zm]=new Set);var p=i+"__bubble";l.has(p)||(Cv(n,i,2,!1),l.add(p))}function sm(i,n,l){var p=0;n&&(p|=4),Cv(l,i,p,n)}var _d="_reactListening"+Math.random().toString(36).slice(2);function Fu(i){if(!i[_d]){i[_d]=!0,M_.forEach(function(l){l!=="selectionchange"&&(z3.has(l)||sm(l,!1,i),sm(l,!0,i))});var n=i.nodeType===9?i:i.ownerDocument;n===null||n[_d]||(n[_d]=!0,sm("selectionchange",!1,n))}}function Cv(i,n,l,p){switch(lv(n)){case 1:var _=qb;break;case 4:_=Zb;break;default:_=Rg}l=_.bind(null,n,l,i),_=void 0,!Lm||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(_=!0),p?_!==void 0?i.addEventListener(n,l,{capture:!0,passive:_}):i.addEventListener(n,l,!0):_!==void 0?i.addEventListener(n,l,{passive:_}):i.addEventListener(n,l,!1)}function am(i,n,l,p,_){var b=p;if(!(n&1)&&!(n&2)&&p!==null)e:for(;;){if(p===null)return;var x=p.tag;if(x===3||x===4){var d=p.stateNode.containerInfo;if(d===_||d.nodeType===8&&d.parentNode===_)break;if(x===4)for(x=p.return;x!==null;){var R=x.tag;if((R===3||R===4)&&(R=x.stateNode.containerInfo,R===_||R.nodeType===8&&R.parentNode===_))return;x=x.return}for(;d!==null;){if(x=vo(d),x===null)return;if(R=x.tag,R===5||R===6){p=b=x;continue e}d=d.parentNode}}p=p.return}W_(function(){var W=b,re=Ag(l),K=[];e:{var U=Sv.get(i);if(U!==void 0){var Te=Bg,ke=i;switch(i){case"keypress":if(Md(l)===0)break e;case"keydown":case"keyup":Te=a3;break;case"focusin":ke="focus",Te=Qf;break;case"focusout":ke="blur",Te=Qf;break;case"beforeblur":case"afterblur":Te=Qf;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=o1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=Wb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=c3;break;case vv:case xv:case wv:Te=Yb;break;case bv:Te=h3;break;case"scroll":Te=Gb;break;case"wheel":Te=p3;break;case"copy":case"cut":case"paste":Te=Qb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=c1}var ze=(n&4)!==0,$e=!ze&&i==="scroll",oe=ze?U!==null?U+"Capture":null:U;ze=[];for(var Q=W,le;Q!==null;){le=Q;var xe=le.stateNode;if(le.tag===5&&xe!==null&&(le=xe,oe!==null&&(xe=zu(Q,oe),xe!=null&&ze.push(Bu(Q,xe,le)))),$e)break;Q=Q.return}0<ze.length&&(U=new Te(U,ke,null,l,re),K.push({event:U,listeners:ze}))}}if(!(n&7)){e:{if(U=i==="mouseover"||i==="pointerover",Te=i==="mouseout"||i==="pointerout",U&&l!==Mm&&(ke=l.relatedTarget||l.fromElement)&&(vo(ke)||ke[Os]))break e;if((Te||U)&&(U=re.window===re?re:(U=re.ownerDocument)?U.defaultView||U.parentWindow:window,Te?(ke=l.relatedTarget||l.toElement,Te=W,ke=ke?vo(ke):null,ke!==null&&($e=Ao(ke),ke!==$e||ke.tag!==5&&ke.tag!==6)&&(ke=null)):(Te=null,ke=W),Te!==ke)){if(ze=o1,xe="onMouseLeave",oe="onMouseEnter",Q="mouse",(i==="pointerout"||i==="pointerover")&&(ze=c1,xe="onPointerLeave",oe="onPointerEnter",Q="pointer"),$e=Te==null?U:Cl(Te),le=ke==null?U:Cl(ke),U=new ze(xe,Q+"leave",Te,l,re),U.target=$e,U.relatedTarget=le,xe=null,vo(re)===W&&(ze=new ze(oe,Q+"enter",ke,l,re),ze.target=le,ze.relatedTarget=$e,xe=ze),$e=xe,Te&&ke)t:{for(ze=Te,oe=ke,Q=0,le=ze;le;le=vl(le))Q++;for(le=0,xe=oe;xe;xe=vl(xe))le++;for(;0<Q-le;)ze=vl(ze),Q--;for(;0<le-Q;)oe=vl(oe),le--;for(;Q--;){if(ze===oe||oe!==null&&ze===oe.alternate)break t;ze=vl(ze),oe=vl(oe)}ze=null}else ze=null;Te!==null&&x1(K,U,Te,ze,!1),ke!==null&&$e!==null&&x1(K,$e,ke,ze,!0)}}e:{if(U=W?Cl(W):window,Te=U.nodeName&&U.nodeName.toLowerCase(),Te==="select"||Te==="input"&&U.type==="file")var je=x3;else if(d1(U))if(fv)je=T3;else{je=b3;var Xe=w3}else(Te=U.nodeName)&&Te.toLowerCase()==="input"&&(U.type==="checkbox"||U.type==="radio")&&(je=S3);if(je&&(je=je(i,W))){pv(K,je,l,re);break e}Xe&&Xe(i,U,W),i==="focusout"&&(Xe=U._wrapperState)&&Xe.controlled&&U.type==="number"&&km(U,"number",U.value)}switch(Xe=W?Cl(W):window,i){case"focusin":(d1(Xe)||Xe.contentEditable==="true")&&(Sl=Xe,Nm=W,bu=null);break;case"focusout":bu=Nm=Sl=null;break;case"mousedown":jm=!0;break;case"contextmenu":case"mouseup":case"dragend":jm=!1,y1(K,l,re);break;case"selectionchange":if(k3)break;case"keydown":case"keyup":y1(K,l,re)}var Ke;if(Ng)e:{switch(i){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else bl?hv(i,l)&&(tt="onCompositionEnd"):i==="keydown"&&l.keyCode===229&&(tt="onCompositionStart");tt&&(uv&&l.locale!=="ko"&&(bl||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&bl&&(Ke=cv()):(Ea=re,Fg="value"in Ea?Ea.value:Ea.textContent,bl=!0)),Xe=Xd(W,tt),0<Xe.length&&(tt=new l1(tt,i,null,l,re),K.push({event:tt,listeners:Xe}),Ke?tt.data=Ke:(Ke=dv(l),Ke!==null&&(tt.data=Ke)))),(Ke=m3?g3(i,l):y3(i,l))&&(W=Xd(W,"onBeforeInput"),0<W.length&&(re=new l1("onBeforeInput","beforeinput",null,l,re),K.push({event:re,listeners:W}),re.data=Ke))}Tv(K,n)})}function Bu(i,n,l){return{instance:i,listener:n,currentTarget:l}}function Xd(i,n){for(var l=n+"Capture",p=[];i!==null;){var _=i,b=_.stateNode;_.tag===5&&b!==null&&(_=b,b=zu(i,l),b!=null&&p.unshift(Bu(i,b,_)),b=zu(i,n),b!=null&&p.push(Bu(i,b,_))),i=i.return}return p}function vl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function x1(i,n,l,p,_){for(var b=n._reactName,x=[];l!==null&&l!==p;){var d=l,R=d.alternate,W=d.stateNode;if(R!==null&&R===p)break;d.tag===5&&W!==null&&(d=W,_?(R=zu(l,b),R!=null&&x.unshift(Bu(l,R,d))):_||(R=zu(l,b),R!=null&&x.push(Bu(l,R,d)))),l=l.return}x.length!==0&&i.push({event:n,listeners:x})}var A3=/\r\n?/g,M3=/\u0000|\uFFFD/g;function w1(i){return(typeof i=="string"?i:""+i).replace(A3,`
`).replace(M3,"")}function vd(i,n,l){if(n=w1(n),w1(i)!==n&&l)throw Error(Fe(425))}function Yd(){}var Vm=null,Um=null;function $m(i,n){return i==="textarea"||i==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var qm=typeof setTimeout=="function"?setTimeout:void 0,D3=typeof clearTimeout=="function"?clearTimeout:void 0,b1=typeof Promise=="function"?Promise:void 0,L3=typeof queueMicrotask=="function"?queueMicrotask:typeof b1<"u"?function(i){return b1.resolve(null).then(i).catch(R3)}:qm;function R3(i){setTimeout(function(){throw i})}function om(i,n){var l=n,p=0;do{var _=l.nextSibling;if(i.removeChild(l),_&&_.nodeType===8)if(l=_.data,l==="/$"){if(p===0){i.removeChild(_),Du(n);return}p--}else l!=="$"&&l!=="$?"&&l!=="$!"||p++;l=_}while(l);Du(n)}function Ma(i){for(;i!=null;i=i.nextSibling){var n=i.nodeType;if(n===1||n===3)break;if(n===8){if(n=i.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return i}function S1(i){i=i.previousSibling;for(var n=0;i;){if(i.nodeType===8){var l=i.data;if(l==="$"||l==="$!"||l==="$?"){if(n===0)return i;n--}else l==="/$"&&n++}i=i.previousSibling}return null}var Wl=Math.random().toString(36).slice(2),ns="__reactFiber$"+Wl,Ou="__reactProps$"+Wl,Os="__reactContainer$"+Wl,Zm="__reactEvents$"+Wl,F3="__reactListeners$"+Wl,B3="__reactHandles$"+Wl;function vo(i){var n=i[ns];if(n)return n;for(var l=i.parentNode;l;){if(n=l[Os]||l[ns]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(i=S1(i);i!==null;){if(l=i[ns])return l;i=S1(i)}return n}i=l,l=i.parentNode}return null}function Xu(i){return i=i[ns]||i[Os],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Cl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Fe(33))}function Cp(i){return i[Ou]||null}var Gm=[],El=-1;function Va(i){return{current:i}}function ni(i){0>El||(i.current=Gm[El],Gm[El]=null,El--)}function Qt(i,n){El++,Gm[El]=i.current,i.current=n}var Na={},wr=Va(Na),Gr=Va(!1),Co=Na;function Nl(i,n){var l=i.type.contextTypes;if(!l)return Na;var p=i.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===n)return p.__reactInternalMemoizedMaskedChildContext;var _={},b;for(b in l)_[b]=n[b];return p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=n,i.__reactInternalMemoizedMaskedChildContext=_),_}function Hr(i){return i=i.childContextTypes,i!=null}function Jd(){ni(Gr),ni(wr)}function T1(i,n,l){if(wr.current!==Na)throw Error(Fe(168));Qt(wr,n),Qt(Gr,l)}function Ev(i,n,l){var p=i.stateNode;if(n=n.childContextTypes,typeof p.getChildContext!="function")return l;p=p.getChildContext();for(var _ in p)if(!(_ in n))throw Error(Fe(108,wb(i)||"Unknown",_));return gi({},l,p)}function Qd(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Na,Co=wr.current,Qt(wr,i),Qt(Gr,Gr.current),!0}function C1(i,n,l){var p=i.stateNode;if(!p)throw Error(Fe(169));l?(i=Ev(i,n,Co),p.__reactInternalMemoizedMergedChildContext=i,ni(Gr),ni(wr),Qt(wr,i)):ni(Gr),Qt(Gr,l)}var Ms=null,Ep=!1,lm=!1;function kv(i){Ms===null?Ms=[i]:Ms.push(i)}function O3(i){Ep=!0,kv(i)}function Ua(){if(!lm&&Ms!==null){lm=!0;var i=0,n=Zt;try{var l=Ms;for(Zt=1;i<l.length;i++){var p=l[i];do p=p(!0);while(p!==null)}Ms=null,Ep=!1}catch(_){throw Ms!==null&&(Ms=Ms.slice(i+1)),J_(Mg,Ua),_}finally{Zt=n,lm=!1}}return null}var kl=[],Il=0,ep=null,tp=0,Sn=[],Tn=0,Eo=null,Ds=1,Ls="";function yo(i,n){kl[Il++]=tp,kl[Il++]=ep,ep=i,tp=n}function Iv(i,n,l){Sn[Tn++]=Ds,Sn[Tn++]=Ls,Sn[Tn++]=Eo,Eo=i;var p=Ds;i=Ls;var _=32-Vn(p)-1;p&=~(1<<_),l+=1;var b=32-Vn(n)+_;if(30<b){var x=_-_%5;b=(p&(1<<x)-1).toString(32),p>>=x,_-=x,Ds=1<<32-Vn(n)+_|l<<_|p,Ls=b+i}else Ds=1<<b|l<<_|p,Ls=i}function Vg(i){i.return!==null&&(yo(i,1),Iv(i,1,0))}function Ug(i){for(;i===ep;)ep=kl[--Il],kl[Il]=null,tp=kl[--Il],kl[Il]=null;for(;i===Eo;)Eo=Sn[--Tn],Sn[Tn]=null,Ls=Sn[--Tn],Sn[Tn]=null,Ds=Sn[--Tn],Sn[Tn]=null}var cn=null,ln=null,ci=!1,jn=null;function Pv(i,n){var l=Cn(5,null,null,0);l.elementType="DELETED",l.stateNode=n,l.return=i,n=i.deletions,n===null?(i.deletions=[l],i.flags|=16):n.push(l)}function E1(i,n){switch(i.tag){case 5:var l=i.type;return n=n.nodeType!==1||l.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(i.stateNode=n,cn=i,ln=Ma(n.firstChild),!0):!1;case 6:return n=i.pendingProps===""||n.nodeType!==3?null:n,n!==null?(i.stateNode=n,cn=i,ln=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(l=Eo!==null?{id:Ds,overflow:Ls}:null,i.memoizedState={dehydrated:n,treeContext:l,retryLane:1073741824},l=Cn(18,null,null,0),l.stateNode=n,l.return=i,i.child=l,cn=i,ln=null,!0):!1;default:return!1}}function Hm(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Wm(i){if(ci){var n=ln;if(n){var l=n;if(!E1(i,n)){if(Hm(i))throw Error(Fe(418));n=Ma(l.nextSibling);var p=cn;n&&E1(i,n)?Pv(p,l):(i.flags=i.flags&-4097|2,ci=!1,cn=i)}}else{if(Hm(i))throw Error(Fe(418));i.flags=i.flags&-4097|2,ci=!1,cn=i}}}function k1(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;cn=i}function xd(i){if(i!==cn)return!1;if(!ci)return k1(i),ci=!0,!1;var n;if((n=i.tag!==3)&&!(n=i.tag!==5)&&(n=i.type,n=n!=="head"&&n!=="body"&&!$m(i.type,i.memoizedProps)),n&&(n=ln)){if(Hm(i))throw zv(),Error(Fe(418));for(;n;)Pv(i,n),n=Ma(n.nextSibling)}if(k1(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Fe(317));e:{for(i=i.nextSibling,n=0;i;){if(i.nodeType===8){var l=i.data;if(l==="/$"){if(n===0){ln=Ma(i.nextSibling);break e}n--}else l!=="$"&&l!=="$!"&&l!=="$?"||n++}i=i.nextSibling}ln=null}}else ln=cn?Ma(i.stateNode.nextSibling):null;return!0}function zv(){for(var i=ln;i;)i=Ma(i.nextSibling)}function jl(){ln=cn=null,ci=!1}function $g(i){jn===null?jn=[i]:jn.push(i)}var N3=Us.ReactCurrentBatchConfig;function On(i,n){if(i&&i.defaultProps){n=gi({},n),i=i.defaultProps;for(var l in i)n[l]===void 0&&(n[l]=i[l]);return n}return n}var ip=Va(null),rp=null,Pl=null,qg=null;function Zg(){qg=Pl=rp=null}function Gg(i){var n=ip.current;ni(ip),i._currentValue=n}function Km(i,n,l){for(;i!==null;){var p=i.alternate;if((i.childLanes&n)!==n?(i.childLanes|=n,p!==null&&(p.childLanes|=n)):p!==null&&(p.childLanes&n)!==n&&(p.childLanes|=n),i===l)break;i=i.return}}function Fl(i,n){rp=i,qg=Pl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&n&&(Zr=!0),i.firstContext=null)}function kn(i){var n=i._currentValue;if(qg!==i)if(i={context:i,memoizedValue:n,next:null},Pl===null){if(rp===null)throw Error(Fe(308));Pl=i,rp.dependencies={lanes:0,firstContext:i}}else Pl=Pl.next=i;return n}var xo=null;function Hg(i){xo===null?xo=[i]:xo.push(i)}function Av(i,n,l,p){var _=n.interleaved;return _===null?(l.next=l,Hg(n)):(l.next=_.next,_.next=l),n.interleaved=l,Ns(i,p)}function Ns(i,n){i.lanes|=n;var l=i.alternate;for(l!==null&&(l.lanes|=n),l=i,i=i.return;i!==null;)i.childLanes|=n,l=i.alternate,l!==null&&(l.childLanes|=n),l=i,i=i.return;return l.tag===3?l.stateNode:null}var ba=!1;function Wg(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mv(i,n){i=i.updateQueue,n.updateQueue===i&&(n.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function Fs(i,n){return{eventTime:i,lane:n,tag:0,payload:null,callback:null,next:null}}function Da(i,n,l){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,Rt&2){var _=p.pending;return _===null?n.next=n:(n.next=_.next,_.next=n),p.pending=n,Ns(i,l)}return _=p.interleaved,_===null?(n.next=n,Hg(p)):(n.next=_.next,_.next=n),p.interleaved=n,Ns(i,l)}function Dd(i,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194240)!==0)){var p=n.lanes;p&=i.pendingLanes,l|=p,n.lanes=l,Dg(i,l)}}function I1(i,n){var l=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,l===p)){var _=null,b=null;if(l=l.firstBaseUpdate,l!==null){do{var x={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};b===null?_=b=x:b=b.next=x,l=l.next}while(l!==null);b===null?_=b=n:b=b.next=n}else _=b=n;l={baseState:p.baseState,firstBaseUpdate:_,lastBaseUpdate:b,shared:p.shared,effects:p.effects},i.updateQueue=l;return}i=l.lastBaseUpdate,i===null?l.firstBaseUpdate=n:i.next=n,l.lastBaseUpdate=n}function np(i,n,l,p){var _=i.updateQueue;ba=!1;var b=_.firstBaseUpdate,x=_.lastBaseUpdate,d=_.shared.pending;if(d!==null){_.shared.pending=null;var R=d,W=R.next;R.next=null,x===null?b=W:x.next=W,x=R;var re=i.alternate;re!==null&&(re=re.updateQueue,d=re.lastBaseUpdate,d!==x&&(d===null?re.firstBaseUpdate=W:d.next=W,re.lastBaseUpdate=R))}if(b!==null){var K=_.baseState;x=0,re=W=R=null,d=b;do{var U=d.lane,Te=d.eventTime;if((p&U)===U){re!==null&&(re=re.next={eventTime:Te,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var ke=i,ze=d;switch(U=n,Te=l,ze.tag){case 1:if(ke=ze.payload,typeof ke=="function"){K=ke.call(Te,K,U);break e}K=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=ze.payload,U=typeof ke=="function"?ke.call(Te,K,U):ke,U==null)break e;K=gi({},K,U);break e;case 2:ba=!0}}d.callback!==null&&d.lane!==0&&(i.flags|=64,U=_.effects,U===null?_.effects=[d]:U.push(d))}else Te={eventTime:Te,lane:U,tag:d.tag,payload:d.payload,callback:d.callback,next:null},re===null?(W=re=Te,R=K):re=re.next=Te,x|=U;if(d=d.next,d===null){if(d=_.shared.pending,d===null)break;U=d,d=U.next,U.next=null,_.lastBaseUpdate=U,_.shared.pending=null}}while(!0);if(re===null&&(R=K),_.baseState=R,_.firstBaseUpdate=W,_.lastBaseUpdate=re,n=_.shared.interleaved,n!==null){_=n;do x|=_.lane,_=_.next;while(_!==n)}else b===null&&(_.shared.lanes=0);Io|=x,i.lanes=x,i.memoizedState=K}}function P1(i,n,l){if(i=n.effects,n.effects=null,i!==null)for(n=0;n<i.length;n++){var p=i[n],_=p.callback;if(_!==null){if(p.callback=null,p=l,typeof _!="function")throw Error(Fe(191,_));_.call(p)}}}var Dv=new A_.Component().refs;function Xm(i,n,l,p){n=i.memoizedState,l=l(p,n),l=l==null?n:gi({},n,l),i.memoizedState=l,i.lanes===0&&(i.updateQueue.baseState=l)}var kp={isMounted:function(i){return(i=i._reactInternals)?Ao(i)===i:!1},enqueueSetState:function(i,n,l){i=i._reactInternals;var p=Rr(),_=Ra(i),b=Fs(p,_);b.payload=n,l!=null&&(b.callback=l),n=Da(i,b,_),n!==null&&(Un(n,i,_,p),Dd(n,i,_))},enqueueReplaceState:function(i,n,l){i=i._reactInternals;var p=Rr(),_=Ra(i),b=Fs(p,_);b.tag=1,b.payload=n,l!=null&&(b.callback=l),n=Da(i,b,_),n!==null&&(Un(n,i,_,p),Dd(n,i,_))},enqueueForceUpdate:function(i,n){i=i._reactInternals;var l=Rr(),p=Ra(i),_=Fs(l,p);_.tag=2,n!=null&&(_.callback=n),n=Da(i,_,p),n!==null&&(Un(n,i,p,l),Dd(n,i,p))}};function z1(i,n,l,p,_,b,x){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,b,x):n.prototype&&n.prototype.isPureReactComponent?!Ru(l,p)||!Ru(_,b):!0}function Lv(i,n,l){var p=!1,_=Na,b=n.contextType;return typeof b=="object"&&b!==null?b=kn(b):(_=Hr(n)?Co:wr.current,p=n.contextTypes,b=(p=p!=null)?Nl(i,_):Na),n=new n(l,b),i.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=kp,i.stateNode=n,n._reactInternals=i,p&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=_,i.__reactInternalMemoizedMaskedChildContext=b),n}function A1(i,n,l,p){i=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,p),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,p),n.state!==i&&kp.enqueueReplaceState(n,n.state,null)}function Ym(i,n,l,p){var _=i.stateNode;_.props=l,_.state=i.memoizedState,_.refs=Dv,Wg(i);var b=n.contextType;typeof b=="object"&&b!==null?_.context=kn(b):(b=Hr(n)?Co:wr.current,_.context=Nl(i,b)),_.state=i.memoizedState,b=n.getDerivedStateFromProps,typeof b=="function"&&(Xm(i,n,b,l),_.state=i.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(n=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),n!==_.state&&kp.enqueueReplaceState(_,_.state,null),np(i,l,_,p),_.state=i.memoizedState),typeof _.componentDidMount=="function"&&(i.flags|=4194308)}function uu(i,n,l){if(i=l.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(Fe(309));var p=l.stateNode}if(!p)throw Error(Fe(147,i));var _=p,b=""+i;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===b?n.ref:(n=function(x){var d=_.refs;d===Dv&&(d=_.refs={}),x===null?delete d[b]:d[b]=x},n._stringRef=b,n)}if(typeof i!="string")throw Error(Fe(284));if(!l._owner)throw Error(Fe(290,i))}return i}function wd(i,n){throw i=Object.prototype.toString.call(n),Error(Fe(31,i==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":i))}function M1(i){var n=i._init;return n(i._payload)}function Rv(i){function n(oe,Q){if(i){var le=oe.deletions;le===null?(oe.deletions=[Q],oe.flags|=16):le.push(Q)}}function l(oe,Q){if(!i)return null;for(;Q!==null;)n(oe,Q),Q=Q.sibling;return null}function p(oe,Q){for(oe=new Map;Q!==null;)Q.key!==null?oe.set(Q.key,Q):oe.set(Q.index,Q),Q=Q.sibling;return oe}function _(oe,Q){return oe=Fa(oe,Q),oe.index=0,oe.sibling=null,oe}function b(oe,Q,le){return oe.index=le,i?(le=oe.alternate,le!==null?(le=le.index,le<Q?(oe.flags|=2,Q):le):(oe.flags|=2,Q)):(oe.flags|=1048576,Q)}function x(oe){return i&&oe.alternate===null&&(oe.flags|=2),oe}function d(oe,Q,le,xe){return Q===null||Q.tag!==6?(Q=mm(le,oe.mode,xe),Q.return=oe,Q):(Q=_(Q,le),Q.return=oe,Q)}function R(oe,Q,le,xe){var je=le.type;return je===wl?re(oe,Q,le.props.children,xe,le.key):Q!==null&&(Q.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===wa&&M1(je)===Q.type)?(xe=_(Q,le.props),xe.ref=uu(oe,Q,le),xe.return=oe,xe):(xe=Nd(le.type,le.key,le.props,null,oe.mode,xe),xe.ref=uu(oe,Q,le),xe.return=oe,xe)}function W(oe,Q,le,xe){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==le.containerInfo||Q.stateNode.implementation!==le.implementation?(Q=gm(le,oe.mode,xe),Q.return=oe,Q):(Q=_(Q,le.children||[]),Q.return=oe,Q)}function re(oe,Q,le,xe,je){return Q===null||Q.tag!==7?(Q=To(le,oe.mode,xe,je),Q.return=oe,Q):(Q=_(Q,le),Q.return=oe,Q)}function K(oe,Q,le){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=mm(""+Q,oe.mode,le),Q.return=oe,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case ud:return le=Nd(Q.type,Q.key,Q.props,null,oe.mode,le),le.ref=uu(oe,null,Q),le.return=oe,le;case xl:return Q=gm(Q,oe.mode,le),Q.return=oe,Q;case wa:var xe=Q._init;return K(oe,xe(Q._payload),le)}if(fu(Q)||su(Q))return Q=To(Q,oe.mode,le,null),Q.return=oe,Q;wd(oe,Q)}return null}function U(oe,Q,le,xe){var je=Q!==null?Q.key:null;if(typeof le=="string"&&le!==""||typeof le=="number")return je!==null?null:d(oe,Q,""+le,xe);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case ud:return le.key===je?R(oe,Q,le,xe):null;case xl:return le.key===je?W(oe,Q,le,xe):null;case wa:return je=le._init,U(oe,Q,je(le._payload),xe)}if(fu(le)||su(le))return je!==null?null:re(oe,Q,le,xe,null);wd(oe,le)}return null}function Te(oe,Q,le,xe,je){if(typeof xe=="string"&&xe!==""||typeof xe=="number")return oe=oe.get(le)||null,d(Q,oe,""+xe,je);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case ud:return oe=oe.get(xe.key===null?le:xe.key)||null,R(Q,oe,xe,je);case xl:return oe=oe.get(xe.key===null?le:xe.key)||null,W(Q,oe,xe,je);case wa:var Xe=xe._init;return Te(oe,Q,le,Xe(xe._payload),je)}if(fu(xe)||su(xe))return oe=oe.get(le)||null,re(Q,oe,xe,je,null);wd(Q,xe)}return null}function ke(oe,Q,le,xe){for(var je=null,Xe=null,Ke=Q,tt=Q=0,Dt=null;Ke!==null&&tt<le.length;tt++){Ke.index>tt?(Dt=Ke,Ke=null):Dt=Ke.sibling;var xt=U(oe,Ke,le[tt],xe);if(xt===null){Ke===null&&(Ke=Dt);break}i&&Ke&&xt.alternate===null&&n(oe,Ke),Q=b(xt,Q,tt),Xe===null?je=xt:Xe.sibling=xt,Xe=xt,Ke=Dt}if(tt===le.length)return l(oe,Ke),ci&&yo(oe,tt),je;if(Ke===null){for(;tt<le.length;tt++)Ke=K(oe,le[tt],xe),Ke!==null&&(Q=b(Ke,Q,tt),Xe===null?je=Ke:Xe.sibling=Ke,Xe=Ke);return ci&&yo(oe,tt),je}for(Ke=p(oe,Ke);tt<le.length;tt++)Dt=Te(Ke,oe,tt,le[tt],xe),Dt!==null&&(i&&Dt.alternate!==null&&Ke.delete(Dt.key===null?tt:Dt.key),Q=b(Dt,Q,tt),Xe===null?je=Dt:Xe.sibling=Dt,Xe=Dt);return i&&Ke.forEach(function(Ot){return n(oe,Ot)}),ci&&yo(oe,tt),je}function ze(oe,Q,le,xe){var je=su(le);if(typeof je!="function")throw Error(Fe(150));if(le=je.call(le),le==null)throw Error(Fe(151));for(var Xe=je=null,Ke=Q,tt=Q=0,Dt=null,xt=le.next();Ke!==null&&!xt.done;tt++,xt=le.next()){Ke.index>tt?(Dt=Ke,Ke=null):Dt=Ke.sibling;var Ot=U(oe,Ke,xt.value,xe);if(Ot===null){Ke===null&&(Ke=Dt);break}i&&Ke&&Ot.alternate===null&&n(oe,Ke),Q=b(Ot,Q,tt),Xe===null?je=Ot:Xe.sibling=Ot,Xe=Ot,Ke=Dt}if(xt.done)return l(oe,Ke),ci&&yo(oe,tt),je;if(Ke===null){for(;!xt.done;tt++,xt=le.next())xt=K(oe,xt.value,xe),xt!==null&&(Q=b(xt,Q,tt),Xe===null?je=xt:Xe.sibling=xt,Xe=xt);return ci&&yo(oe,tt),je}for(Ke=p(oe,Ke);!xt.done;tt++,xt=le.next())xt=Te(Ke,oe,tt,xt.value,xe),xt!==null&&(i&&xt.alternate!==null&&Ke.delete(xt.key===null?tt:xt.key),Q=b(xt,Q,tt),Xe===null?je=xt:Xe.sibling=xt,Xe=xt);return i&&Ke.forEach(function(Nt){return n(oe,Nt)}),ci&&yo(oe,tt),je}function $e(oe,Q,le,xe){if(typeof le=="object"&&le!==null&&le.type===wl&&le.key===null&&(le=le.props.children),typeof le=="object"&&le!==null){switch(le.$$typeof){case ud:e:{for(var je=le.key,Xe=Q;Xe!==null;){if(Xe.key===je){if(je=le.type,je===wl){if(Xe.tag===7){l(oe,Xe.sibling),Q=_(Xe,le.props.children),Q.return=oe,oe=Q;break e}}else if(Xe.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===wa&&M1(je)===Xe.type){l(oe,Xe.sibling),Q=_(Xe,le.props),Q.ref=uu(oe,Xe,le),Q.return=oe,oe=Q;break e}l(oe,Xe);break}else n(oe,Xe);Xe=Xe.sibling}le.type===wl?(Q=To(le.props.children,oe.mode,xe,le.key),Q.return=oe,oe=Q):(xe=Nd(le.type,le.key,le.props,null,oe.mode,xe),xe.ref=uu(oe,Q,le),xe.return=oe,oe=xe)}return x(oe);case xl:e:{for(Xe=le.key;Q!==null;){if(Q.key===Xe)if(Q.tag===4&&Q.stateNode.containerInfo===le.containerInfo&&Q.stateNode.implementation===le.implementation){l(oe,Q.sibling),Q=_(Q,le.children||[]),Q.return=oe,oe=Q;break e}else{l(oe,Q);break}else n(oe,Q);Q=Q.sibling}Q=gm(le,oe.mode,xe),Q.return=oe,oe=Q}return x(oe);case wa:return Xe=le._init,$e(oe,Q,Xe(le._payload),xe)}if(fu(le))return ke(oe,Q,le,xe);if(su(le))return ze(oe,Q,le,xe);wd(oe,le)}return typeof le=="string"&&le!==""||typeof le=="number"?(le=""+le,Q!==null&&Q.tag===6?(l(oe,Q.sibling),Q=_(Q,le),Q.return=oe,oe=Q):(l(oe,Q),Q=mm(le,oe.mode,xe),Q.return=oe,oe=Q),x(oe)):l(oe,Q)}return $e}var Vl=Rv(!0),Fv=Rv(!1),Yu={},as=Va(Yu),Nu=Va(Yu),ju=Va(Yu);function wo(i){if(i===Yu)throw Error(Fe(174));return i}function Kg(i,n){switch(Qt(ju,n),Qt(Nu,i),Qt(as,Yu),i=n.nodeType,i){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Pm(null,"");break;default:i=i===8?n.parentNode:n,n=i.namespaceURI||null,i=i.tagName,n=Pm(n,i)}ni(as),Qt(as,n)}function Ul(){ni(as),ni(Nu),ni(ju)}function Bv(i){wo(ju.current);var n=wo(as.current),l=Pm(n,i.type);n!==l&&(Qt(Nu,i),Qt(as,l))}function Xg(i){Nu.current===i&&(ni(as),ni(Nu))}var fi=Va(0);function sp(i){for(var n=i;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break;for(;n.sibling===null;){if(n.return===null||n.return===i)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var cm=[];function Yg(){for(var i=0;i<cm.length;i++)cm[i]._workInProgressVersionPrimary=null;cm.length=0}var Ld=Us.ReactCurrentDispatcher,um=Us.ReactCurrentBatchConfig,ko=0,mi=null,ji=null,Ki=null,ap=!1,Su=!1,Vu=0,j3=0;function yr(){throw Error(Fe(321))}function Jg(i,n){if(n===null)return!1;for(var l=0;l<n.length&&l<i.length;l++)if(!$n(i[l],n[l]))return!1;return!0}function Qg(i,n,l,p,_,b){if(ko=b,mi=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ld.current=i===null||i.memoizedState===null?q3:Z3,i=l(p,_),Su){b=0;do{if(Su=!1,Vu=0,25<=b)throw Error(Fe(301));b+=1,Ki=ji=null,n.updateQueue=null,Ld.current=G3,i=l(p,_)}while(Su)}if(Ld.current=op,n=ji!==null&&ji.next!==null,ko=0,Ki=ji=mi=null,ap=!1,n)throw Error(Fe(300));return i}function e0(){var i=Vu!==0;return Vu=0,i}function rs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ki===null?mi.memoizedState=Ki=i:Ki=Ki.next=i,Ki}function In(){if(ji===null){var i=mi.alternate;i=i!==null?i.memoizedState:null}else i=ji.next;var n=Ki===null?mi.memoizedState:Ki.next;if(n!==null)Ki=n,ji=i;else{if(i===null)throw Error(Fe(310));ji=i,i={memoizedState:ji.memoizedState,baseState:ji.baseState,baseQueue:ji.baseQueue,queue:ji.queue,next:null},Ki===null?mi.memoizedState=Ki=i:Ki=Ki.next=i}return Ki}function Uu(i,n){return typeof n=="function"?n(i):n}function hm(i){var n=In(),l=n.queue;if(l===null)throw Error(Fe(311));l.lastRenderedReducer=i;var p=ji,_=p.baseQueue,b=l.pending;if(b!==null){if(_!==null){var x=_.next;_.next=b.next,b.next=x}p.baseQueue=_=b,l.pending=null}if(_!==null){b=_.next,p=p.baseState;var d=x=null,R=null,W=b;do{var re=W.lane;if((ko&re)===re)R!==null&&(R=R.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),p=W.hasEagerState?W.eagerState:i(p,W.action);else{var K={lane:re,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};R===null?(d=R=K,x=p):R=R.next=K,mi.lanes|=re,Io|=re}W=W.next}while(W!==null&&W!==b);R===null?x=p:R.next=d,$n(p,n.memoizedState)||(Zr=!0),n.memoizedState=p,n.baseState=x,n.baseQueue=R,l.lastRenderedState=p}if(i=l.interleaved,i!==null){_=i;do b=_.lane,mi.lanes|=b,Io|=b,_=_.next;while(_!==i)}else _===null&&(l.lanes=0);return[n.memoizedState,l.dispatch]}function dm(i){var n=In(),l=n.queue;if(l===null)throw Error(Fe(311));l.lastRenderedReducer=i;var p=l.dispatch,_=l.pending,b=n.memoizedState;if(_!==null){l.pending=null;var x=_=_.next;do b=i(b,x.action),x=x.next;while(x!==_);$n(b,n.memoizedState)||(Zr=!0),n.memoizedState=b,n.baseQueue===null&&(n.baseState=b),l.lastRenderedState=b}return[b,p]}function Ov(){}function Nv(i,n){var l=mi,p=In(),_=n(),b=!$n(p.memoizedState,_);if(b&&(p.memoizedState=_,Zr=!0),p=p.queue,t0(Uv.bind(null,l,p,i),[i]),p.getSnapshot!==n||b||Ki!==null&&Ki.memoizedState.tag&1){if(l.flags|=2048,$u(9,Vv.bind(null,l,p,_,n),void 0,null),Xi===null)throw Error(Fe(349));ko&30||jv(l,n,_)}return _}function jv(i,n,l){i.flags|=16384,i={getSnapshot:n,value:l},n=mi.updateQueue,n===null?(n={lastEffect:null,stores:null},mi.updateQueue=n,n.stores=[i]):(l=n.stores,l===null?n.stores=[i]:l.push(i))}function Vv(i,n,l,p){n.value=l,n.getSnapshot=p,$v(n)&&qv(i)}function Uv(i,n,l){return l(function(){$v(n)&&qv(i)})}function $v(i){var n=i.getSnapshot;i=i.value;try{var l=n();return!$n(i,l)}catch{return!0}}function qv(i){var n=Ns(i,1);n!==null&&Un(n,i,1,-1)}function D1(i){var n=rs();return typeof i=="function"&&(i=i()),n.memoizedState=n.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:i},n.queue=i,i=i.dispatch=$3.bind(null,mi,i),[n.memoizedState,i]}function $u(i,n,l,p){return i={tag:i,create:n,destroy:l,deps:p,next:null},n=mi.updateQueue,n===null?(n={lastEffect:null,stores:null},mi.updateQueue=n,n.lastEffect=i.next=i):(l=n.lastEffect,l===null?n.lastEffect=i.next=i:(p=l.next,l.next=i,i.next=p,n.lastEffect=i)),i}function Zv(){return In().memoizedState}function Rd(i,n,l,p){var _=rs();mi.flags|=i,_.memoizedState=$u(1|n,l,void 0,p===void 0?null:p)}function Ip(i,n,l,p){var _=In();p=p===void 0?null:p;var b=void 0;if(ji!==null){var x=ji.memoizedState;if(b=x.destroy,p!==null&&Jg(p,x.deps)){_.memoizedState=$u(n,l,b,p);return}}mi.flags|=i,_.memoizedState=$u(1|n,l,b,p)}function L1(i,n){return Rd(8390656,8,i,n)}function t0(i,n){return Ip(2048,8,i,n)}function Gv(i,n){return Ip(4,2,i,n)}function Hv(i,n){return Ip(4,4,i,n)}function Wv(i,n){if(typeof n=="function")return i=i(),n(i),function(){n(null)};if(n!=null)return i=i(),n.current=i,function(){n.current=null}}function Kv(i,n,l){return l=l!=null?l.concat([i]):null,Ip(4,4,Wv.bind(null,n,i),l)}function i0(){}function Xv(i,n){var l=In();n=n===void 0?null:n;var p=l.memoizedState;return p!==null&&n!==null&&Jg(n,p[1])?p[0]:(l.memoizedState=[i,n],i)}function Yv(i,n){var l=In();n=n===void 0?null:n;var p=l.memoizedState;return p!==null&&n!==null&&Jg(n,p[1])?p[0]:(i=i(),l.memoizedState=[i,n],i)}function Jv(i,n,l){return ko&21?($n(l,n)||(l=tv(),mi.lanes|=l,Io|=l,i.baseState=!0),n):(i.baseState&&(i.baseState=!1,Zr=!0),i.memoizedState=l)}function V3(i,n){var l=Zt;Zt=l!==0&&4>l?l:4,i(!0);var p=um.transition;um.transition={};try{i(!1),n()}finally{Zt=l,um.transition=p}}function Qv(){return In().memoizedState}function U3(i,n,l){var p=Ra(i);if(l={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null},ex(i))tx(n,l);else if(l=Av(i,n,l,p),l!==null){var _=Rr();Un(l,i,p,_),ix(l,n,p)}}function $3(i,n,l){var p=Ra(i),_={lane:p,action:l,hasEagerState:!1,eagerState:null,next:null};if(ex(i))tx(n,_);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=n.lastRenderedReducer,b!==null))try{var x=n.lastRenderedState,d=b(x,l);if(_.hasEagerState=!0,_.eagerState=d,$n(d,x)){var R=n.interleaved;R===null?(_.next=_,Hg(n)):(_.next=R.next,R.next=_),n.interleaved=_;return}}catch{}finally{}l=Av(i,n,_,p),l!==null&&(_=Rr(),Un(l,i,p,_),ix(l,n,p))}}function ex(i){var n=i.alternate;return i===mi||n!==null&&n===mi}function tx(i,n){Su=ap=!0;var l=i.pending;l===null?n.next=n:(n.next=l.next,l.next=n),i.pending=n}function ix(i,n,l){if(l&4194240){var p=n.lanes;p&=i.pendingLanes,l|=p,n.lanes=l,Dg(i,l)}}var op={readContext:kn,useCallback:yr,useContext:yr,useEffect:yr,useImperativeHandle:yr,useInsertionEffect:yr,useLayoutEffect:yr,useMemo:yr,useReducer:yr,useRef:yr,useState:yr,useDebugValue:yr,useDeferredValue:yr,useTransition:yr,useMutableSource:yr,useSyncExternalStore:yr,useId:yr,unstable_isNewReconciler:!1},q3={readContext:kn,useCallback:function(i,n){return rs().memoizedState=[i,n===void 0?null:n],i},useContext:kn,useEffect:L1,useImperativeHandle:function(i,n,l){return l=l!=null?l.concat([i]):null,Rd(4194308,4,Wv.bind(null,n,i),l)},useLayoutEffect:function(i,n){return Rd(4194308,4,i,n)},useInsertionEffect:function(i,n){return Rd(4,2,i,n)},useMemo:function(i,n){var l=rs();return n=n===void 0?null:n,i=i(),l.memoizedState=[i,n],i},useReducer:function(i,n,l){var p=rs();return n=l!==void 0?l(n):n,p.memoizedState=p.baseState=n,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:n},p.queue=i,i=i.dispatch=U3.bind(null,mi,i),[p.memoizedState,i]},useRef:function(i){var n=rs();return i={current:i},n.memoizedState=i},useState:D1,useDebugValue:i0,useDeferredValue:function(i){return rs().memoizedState=i},useTransition:function(){var i=D1(!1),n=i[0];return i=V3.bind(null,i[1]),rs().memoizedState=i,[n,i]},useMutableSource:function(){},useSyncExternalStore:function(i,n,l){var p=mi,_=rs();if(ci){if(l===void 0)throw Error(Fe(407));l=l()}else{if(l=n(),Xi===null)throw Error(Fe(349));ko&30||jv(p,n,l)}_.memoizedState=l;var b={value:l,getSnapshot:n};return _.queue=b,L1(Uv.bind(null,p,b,i),[i]),p.flags|=2048,$u(9,Vv.bind(null,p,b,l,n),void 0,null),l},useId:function(){var i=rs(),n=Xi.identifierPrefix;if(ci){var l=Ls,p=Ds;l=(p&~(1<<32-Vn(p)-1)).toString(32)+l,n=":"+n+"R"+l,l=Vu++,0<l&&(n+="H"+l.toString(32)),n+=":"}else l=j3++,n=":"+n+"r"+l.toString(32)+":";return i.memoizedState=n},unstable_isNewReconciler:!1},Z3={readContext:kn,useCallback:Xv,useContext:kn,useEffect:t0,useImperativeHandle:Kv,useInsertionEffect:Gv,useLayoutEffect:Hv,useMemo:Yv,useReducer:hm,useRef:Zv,useState:function(){return hm(Uu)},useDebugValue:i0,useDeferredValue:function(i){var n=In();return Jv(n,ji.memoizedState,i)},useTransition:function(){var i=hm(Uu)[0],n=In().memoizedState;return[i,n]},useMutableSource:Ov,useSyncExternalStore:Nv,useId:Qv,unstable_isNewReconciler:!1},G3={readContext:kn,useCallback:Xv,useContext:kn,useEffect:t0,useImperativeHandle:Kv,useInsertionEffect:Gv,useLayoutEffect:Hv,useMemo:Yv,useReducer:dm,useRef:Zv,useState:function(){return dm(Uu)},useDebugValue:i0,useDeferredValue:function(i){var n=In();return ji===null?n.memoizedState=i:Jv(n,ji.memoizedState,i)},useTransition:function(){var i=dm(Uu)[0],n=In().memoizedState;return[i,n]},useMutableSource:Ov,useSyncExternalStore:Nv,useId:Qv,unstable_isNewReconciler:!1};function $l(i,n){try{var l="",p=n;do l+=xb(p),p=p.return;while(p);var _=l}catch(b){_=`
Error generating stack: `+b.message+`
`+b.stack}return{value:i,source:n,stack:_,digest:null}}function pm(i,n,l){return{value:i,source:null,stack:l??null,digest:n??null}}function Jm(i,n){try{console.error(n.value)}catch(l){setTimeout(function(){throw l})}}var H3=typeof WeakMap=="function"?WeakMap:Map;function rx(i,n,l){l=Fs(-1,l),l.tag=3,l.payload={element:null};var p=n.value;return l.callback=function(){cp||(cp=!0,lg=p),Jm(i,n)},l}function nx(i,n,l){l=Fs(-1,l),l.tag=3;var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var _=n.value;l.payload=function(){return p(_)},l.callback=function(){Jm(i,n)}}var b=i.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(l.callback=function(){Jm(i,n),typeof p!="function"&&(La===null?La=new Set([this]):La.add(this));var x=n.stack;this.componentDidCatch(n.value,{componentStack:x!==null?x:""})}),l}function R1(i,n,l){var p=i.pingCache;if(p===null){p=i.pingCache=new H3;var _=new Set;p.set(n,_)}else _=p.get(n),_===void 0&&(_=new Set,p.set(n,_));_.has(l)||(_.add(l),i=o4.bind(null,i,n,l),n.then(i,i))}function F1(i){do{var n;if((n=i.tag===13)&&(n=i.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return i;i=i.return}while(i!==null);return null}function B1(i,n,l,p,_){return i.mode&1?(i.flags|=65536,i.lanes=_,i):(i===n?i.flags|=65536:(i.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(n=Fs(-1,1),n.tag=2,Da(l,n,1))),l.lanes|=1),i)}var W3=Us.ReactCurrentOwner,Zr=!1;function Lr(i,n,l,p){n.child=i===null?Fv(n,null,l,p):Vl(n,i.child,l,p)}function O1(i,n,l,p,_){l=l.render;var b=n.ref;return Fl(n,_),p=Qg(i,n,l,p,b,_),l=e0(),i!==null&&!Zr?(n.updateQueue=i.updateQueue,n.flags&=-2053,i.lanes&=~_,js(i,n,_)):(ci&&l&&Vg(n),n.flags|=1,Lr(i,n,p,_),n.child)}function N1(i,n,l,p,_){if(i===null){var b=l.type;return typeof b=="function"&&!u0(b)&&b.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(n.tag=15,n.type=b,sx(i,n,b,p,_)):(i=Nd(l.type,null,p,n,n.mode,_),i.ref=n.ref,i.return=n,n.child=i)}if(b=i.child,!(i.lanes&_)){var x=b.memoizedProps;if(l=l.compare,l=l!==null?l:Ru,l(x,p)&&i.ref===n.ref)return js(i,n,_)}return n.flags|=1,i=Fa(b,p),i.ref=n.ref,i.return=n,n.child=i}function sx(i,n,l,p,_){if(i!==null){var b=i.memoizedProps;if(Ru(b,p)&&i.ref===n.ref)if(Zr=!1,n.pendingProps=p=b,(i.lanes&_)!==0)i.flags&131072&&(Zr=!0);else return n.lanes=i.lanes,js(i,n,_)}return Qm(i,n,l,p,_)}function ax(i,n,l){var p=n.pendingProps,_=p.children,b=i!==null?i.memoizedState:null;if(p.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qt(Al,on),on|=l;else{if(!(l&1073741824))return i=b!==null?b.baseLanes|l:l,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:i,cachePool:null,transitions:null},n.updateQueue=null,Qt(Al,on),on|=i,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=b!==null?b.baseLanes:l,Qt(Al,on),on|=p}else b!==null?(p=b.baseLanes|l,n.memoizedState=null):p=l,Qt(Al,on),on|=p;return Lr(i,n,_,l),n.child}function ox(i,n){var l=n.ref;(i===null&&l!==null||i!==null&&i.ref!==l)&&(n.flags|=512,n.flags|=2097152)}function Qm(i,n,l,p,_){var b=Hr(l)?Co:wr.current;return b=Nl(n,b),Fl(n,_),l=Qg(i,n,l,p,b,_),p=e0(),i!==null&&!Zr?(n.updateQueue=i.updateQueue,n.flags&=-2053,i.lanes&=~_,js(i,n,_)):(ci&&p&&Vg(n),n.flags|=1,Lr(i,n,l,_),n.child)}function j1(i,n,l,p,_){if(Hr(l)){var b=!0;Qd(n)}else b=!1;if(Fl(n,_),n.stateNode===null)Fd(i,n),Lv(n,l,p),Ym(n,l,p,_),p=!0;else if(i===null){var x=n.stateNode,d=n.memoizedProps;x.props=d;var R=x.context,W=l.contextType;typeof W=="object"&&W!==null?W=kn(W):(W=Hr(l)?Co:wr.current,W=Nl(n,W));var re=l.getDerivedStateFromProps,K=typeof re=="function"||typeof x.getSnapshotBeforeUpdate=="function";K||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(d!==p||R!==W)&&A1(n,x,p,W),ba=!1;var U=n.memoizedState;x.state=U,np(n,p,x,_),R=n.memoizedState,d!==p||U!==R||Gr.current||ba?(typeof re=="function"&&(Xm(n,l,re,p),R=n.memoizedState),(d=ba||z1(n,l,d,p,U,R,W))?(K||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(n.flags|=4194308)):(typeof x.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=p,n.memoizedState=R),x.props=p,x.state=R,x.context=W,p=d):(typeof x.componentDidMount=="function"&&(n.flags|=4194308),p=!1)}else{x=n.stateNode,Mv(i,n),d=n.memoizedProps,W=n.type===n.elementType?d:On(n.type,d),x.props=W,K=n.pendingProps,U=x.context,R=l.contextType,typeof R=="object"&&R!==null?R=kn(R):(R=Hr(l)?Co:wr.current,R=Nl(n,R));var Te=l.getDerivedStateFromProps;(re=typeof Te=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(d!==K||U!==R)&&A1(n,x,p,R),ba=!1,U=n.memoizedState,x.state=U,np(n,p,x,_);var ke=n.memoizedState;d!==K||U!==ke||Gr.current||ba?(typeof Te=="function"&&(Xm(n,l,Te,p),ke=n.memoizedState),(W=ba||z1(n,l,W,p,U,ke,R)||!1)?(re||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(p,ke,R),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(p,ke,R)),typeof x.componentDidUpdate=="function"&&(n.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof x.componentDidUpdate!="function"||d===i.memoizedProps&&U===i.memoizedState||(n.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||d===i.memoizedProps&&U===i.memoizedState||(n.flags|=1024),n.memoizedProps=p,n.memoizedState=ke),x.props=p,x.state=ke,x.context=R,p=W):(typeof x.componentDidUpdate!="function"||d===i.memoizedProps&&U===i.memoizedState||(n.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||d===i.memoizedProps&&U===i.memoizedState||(n.flags|=1024),p=!1)}return eg(i,n,l,p,b,_)}function eg(i,n,l,p,_,b){ox(i,n);var x=(n.flags&128)!==0;if(!p&&!x)return _&&C1(n,l,!1),js(i,n,b);p=n.stateNode,W3.current=n;var d=x&&typeof l.getDerivedStateFromError!="function"?null:p.render();return n.flags|=1,i!==null&&x?(n.child=Vl(n,i.child,null,b),n.child=Vl(n,null,d,b)):Lr(i,n,d,b),n.memoizedState=p.state,_&&C1(n,l,!0),n.child}function lx(i){var n=i.stateNode;n.pendingContext?T1(i,n.pendingContext,n.pendingContext!==n.context):n.context&&T1(i,n.context,!1),Kg(i,n.containerInfo)}function V1(i,n,l,p,_){return jl(),$g(_),n.flags|=256,Lr(i,n,l,p),n.child}var tg={dehydrated:null,treeContext:null,retryLane:0};function ig(i){return{baseLanes:i,cachePool:null,transitions:null}}function cx(i,n,l){var p=n.pendingProps,_=fi.current,b=!1,x=(n.flags&128)!==0,d;if((d=x)||(d=i!==null&&i.memoizedState===null?!1:(_&2)!==0),d?(b=!0,n.flags&=-129):(i===null||i.memoizedState!==null)&&(_|=1),Qt(fi,_&1),i===null)return Wm(n),i=n.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(n.mode&1?i.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(x=p.children,i=p.fallback,b?(p=n.mode,b=n.child,x={mode:"hidden",children:x},!(p&1)&&b!==null?(b.childLanes=0,b.pendingProps=x):b=Ap(x,p,0,null),i=To(i,p,l,null),b.return=n,i.return=n,b.sibling=i,n.child=b,n.child.memoizedState=ig(l),n.memoizedState=tg,i):r0(n,x));if(_=i.memoizedState,_!==null&&(d=_.dehydrated,d!==null))return K3(i,n,x,p,d,_,l);if(b){b=p.fallback,x=n.mode,_=i.child,d=_.sibling;var R={mode:"hidden",children:p.children};return!(x&1)&&n.child!==_?(p=n.child,p.childLanes=0,p.pendingProps=R,n.deletions=null):(p=Fa(_,R),p.subtreeFlags=_.subtreeFlags&14680064),d!==null?b=Fa(d,b):(b=To(b,x,l,null),b.flags|=2),b.return=n,p.return=n,p.sibling=b,n.child=p,p=b,b=n.child,x=i.child.memoizedState,x=x===null?ig(l):{baseLanes:x.baseLanes|l,cachePool:null,transitions:x.transitions},b.memoizedState=x,b.childLanes=i.childLanes&~l,n.memoizedState=tg,p}return b=i.child,i=b.sibling,p=Fa(b,{mode:"visible",children:p.children}),!(n.mode&1)&&(p.lanes=l),p.return=n,p.sibling=null,i!==null&&(l=n.deletions,l===null?(n.deletions=[i],n.flags|=16):l.push(i)),n.child=p,n.memoizedState=null,p}function r0(i,n){return n=Ap({mode:"visible",children:n},i.mode,0,null),n.return=i,i.child=n}function bd(i,n,l,p){return p!==null&&$g(p),Vl(n,i.child,null,l),i=r0(n,n.pendingProps.children),i.flags|=2,n.memoizedState=null,i}function K3(i,n,l,p,_,b,x){if(l)return n.flags&256?(n.flags&=-257,p=pm(Error(Fe(422))),bd(i,n,x,p)):n.memoizedState!==null?(n.child=i.child,n.flags|=128,null):(b=p.fallback,_=n.mode,p=Ap({mode:"visible",children:p.children},_,0,null),b=To(b,_,x,null),b.flags|=2,p.return=n,b.return=n,p.sibling=b,n.child=p,n.mode&1&&Vl(n,i.child,null,x),n.child.memoizedState=ig(x),n.memoizedState=tg,b);if(!(n.mode&1))return bd(i,n,x,null);if(_.data==="$!"){if(p=_.nextSibling&&_.nextSibling.dataset,p)var d=p.dgst;return p=d,b=Error(Fe(419)),p=pm(b,p,void 0),bd(i,n,x,p)}if(d=(x&i.childLanes)!==0,Zr||d){if(p=Xi,p!==null){switch(x&-x){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(p.suspendedLanes|x)?0:_,_!==0&&_!==b.retryLane&&(b.retryLane=_,Ns(i,_),Un(p,i,_,-1))}return c0(),p=pm(Error(Fe(421))),bd(i,n,x,p)}return _.data==="$?"?(n.flags|=128,n.child=i.child,n=l4.bind(null,i),_._reactRetry=n,null):(i=b.treeContext,ln=Ma(_.nextSibling),cn=n,ci=!0,jn=null,i!==null&&(Sn[Tn++]=Ds,Sn[Tn++]=Ls,Sn[Tn++]=Eo,Ds=i.id,Ls=i.overflow,Eo=n),n=r0(n,p.children),n.flags|=4096,n)}function U1(i,n,l){i.lanes|=n;var p=i.alternate;p!==null&&(p.lanes|=n),Km(i.return,n,l)}function fm(i,n,l,p,_){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:p,tail:l,tailMode:_}:(b.isBackwards=n,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=l,b.tailMode=_)}function ux(i,n,l){var p=n.pendingProps,_=p.revealOrder,b=p.tail;if(Lr(i,n,p.children,l),p=fi.current,p&2)p=p&1|2,n.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=n.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&U1(i,l,n);else if(i.tag===19)U1(i,l,n);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break e;for(;i.sibling===null;){if(i.return===null||i.return===n)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}p&=1}if(Qt(fi,p),!(n.mode&1))n.memoizedState=null;else switch(_){case"forwards":for(l=n.child,_=null;l!==null;)i=l.alternate,i!==null&&sp(i)===null&&(_=l),l=l.sibling;l=_,l===null?(_=n.child,n.child=null):(_=l.sibling,l.sibling=null),fm(n,!1,_,l,b);break;case"backwards":for(l=null,_=n.child,n.child=null;_!==null;){if(i=_.alternate,i!==null&&sp(i)===null){n.child=_;break}i=_.sibling,_.sibling=l,l=_,_=i}fm(n,!0,l,null,b);break;case"together":fm(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Fd(i,n){!(n.mode&1)&&i!==null&&(i.alternate=null,n.alternate=null,n.flags|=2)}function js(i,n,l){if(i!==null&&(n.dependencies=i.dependencies),Io|=n.lanes,!(l&n.childLanes))return null;if(i!==null&&n.child!==i.child)throw Error(Fe(153));if(n.child!==null){for(i=n.child,l=Fa(i,i.pendingProps),n.child=l,l.return=n;i.sibling!==null;)i=i.sibling,l=l.sibling=Fa(i,i.pendingProps),l.return=n;l.sibling=null}return n.child}function X3(i,n,l){switch(n.tag){case 3:lx(n),jl();break;case 5:Bv(n);break;case 1:Hr(n.type)&&Qd(n);break;case 4:Kg(n,n.stateNode.containerInfo);break;case 10:var p=n.type._context,_=n.memoizedProps.value;Qt(ip,p._currentValue),p._currentValue=_;break;case 13:if(p=n.memoizedState,p!==null)return p.dehydrated!==null?(Qt(fi,fi.current&1),n.flags|=128,null):l&n.child.childLanes?cx(i,n,l):(Qt(fi,fi.current&1),i=js(i,n,l),i!==null?i.sibling:null);Qt(fi,fi.current&1);break;case 19:if(p=(l&n.childLanes)!==0,i.flags&128){if(p)return ux(i,n,l);n.flags|=128}if(_=n.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),Qt(fi,fi.current),p)break;return null;case 22:case 23:return n.lanes=0,ax(i,n,l)}return js(i,n,l)}var hx,rg,dx,px;hx=function(i,n){for(var l=n.child;l!==null;){if(l.tag===5||l.tag===6)i.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};rg=function(){};dx=function(i,n,l,p){var _=i.memoizedProps;if(_!==p){i=n.stateNode,wo(as.current);var b=null;switch(l){case"input":_=Cm(i,_),p=Cm(i,p),b=[];break;case"select":_=gi({},_,{value:void 0}),p=gi({},p,{value:void 0}),b=[];break;case"textarea":_=Im(i,_),p=Im(i,p),b=[];break;default:typeof _.onClick!="function"&&typeof p.onClick=="function"&&(i.onclick=Yd)}zm(l,p);var x;l=null;for(W in _)if(!p.hasOwnProperty(W)&&_.hasOwnProperty(W)&&_[W]!=null)if(W==="style"){var d=_[W];for(x in d)d.hasOwnProperty(x)&&(l||(l={}),l[x]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(Iu.hasOwnProperty(W)?b||(b=[]):(b=b||[]).push(W,null));for(W in p){var R=p[W];if(d=_!=null?_[W]:void 0,p.hasOwnProperty(W)&&R!==d&&(R!=null||d!=null))if(W==="style")if(d){for(x in d)!d.hasOwnProperty(x)||R&&R.hasOwnProperty(x)||(l||(l={}),l[x]="");for(x in R)R.hasOwnProperty(x)&&d[x]!==R[x]&&(l||(l={}),l[x]=R[x])}else l||(b||(b=[]),b.push(W,l)),l=R;else W==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,d=d?d.__html:void 0,R!=null&&d!==R&&(b=b||[]).push(W,R)):W==="children"?typeof R!="string"&&typeof R!="number"||(b=b||[]).push(W,""+R):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(Iu.hasOwnProperty(W)?(R!=null&&W==="onScroll"&&ri("scroll",i),b||d===R||(b=[])):(b=b||[]).push(W,R))}l&&(b=b||[]).push("style",l);var W=b;(n.updateQueue=W)&&(n.flags|=4)}};px=function(i,n,l,p){l!==p&&(n.flags|=4)};function hu(i,n){if(!ci)switch(i.tailMode){case"hidden":n=i.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?i.tail=null:l.sibling=null;break;case"collapsed":l=i.tail;for(var p=null;l!==null;)l.alternate!==null&&(p=l),l=l.sibling;p===null?n||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function _r(i){var n=i.alternate!==null&&i.alternate.child===i.child,l=0,p=0;if(n)for(var _=i.child;_!==null;)l|=_.lanes|_.childLanes,p|=_.subtreeFlags&14680064,p|=_.flags&14680064,_.return=i,_=_.sibling;else for(_=i.child;_!==null;)l|=_.lanes|_.childLanes,p|=_.subtreeFlags,p|=_.flags,_.return=i,_=_.sibling;return i.subtreeFlags|=p,i.childLanes=l,n}function Y3(i,n,l){var p=n.pendingProps;switch(Ug(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _r(n),null;case 1:return Hr(n.type)&&Jd(),_r(n),null;case 3:return p=n.stateNode,Ul(),ni(Gr),ni(wr),Yg(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(i===null||i.child===null)&&(xd(n)?n.flags|=4:i===null||i.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,jn!==null&&(hg(jn),jn=null))),rg(i,n),_r(n),null;case 5:Xg(n);var _=wo(ju.current);if(l=n.type,i!==null&&n.stateNode!=null)dx(i,n,l,p,_),i.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!p){if(n.stateNode===null)throw Error(Fe(166));return _r(n),null}if(i=wo(as.current),xd(n)){p=n.stateNode,l=n.type;var b=n.memoizedProps;switch(p[ns]=n,p[Ou]=b,i=(n.mode&1)!==0,l){case"dialog":ri("cancel",p),ri("close",p);break;case"iframe":case"object":case"embed":ri("load",p);break;case"video":case"audio":for(_=0;_<gu.length;_++)ri(gu[_],p);break;case"source":ri("error",p);break;case"img":case"image":case"link":ri("error",p),ri("load",p);break;case"details":ri("toggle",p);break;case"input":Yy(p,b),ri("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!b.multiple},ri("invalid",p);break;case"textarea":Qy(p,b),ri("invalid",p)}zm(l,b),_=null;for(var x in b)if(b.hasOwnProperty(x)){var d=b[x];x==="children"?typeof d=="string"?p.textContent!==d&&(b.suppressHydrationWarning!==!0&&vd(p.textContent,d,i),_=["children",d]):typeof d=="number"&&p.textContent!==""+d&&(b.suppressHydrationWarning!==!0&&vd(p.textContent,d,i),_=["children",""+d]):Iu.hasOwnProperty(x)&&d!=null&&x==="onScroll"&&ri("scroll",p)}switch(l){case"input":hd(p),Jy(p,b,!0);break;case"textarea":hd(p),e1(p);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(p.onclick=Yd)}p=_,n.updateQueue=p,p!==null&&(n.flags|=4)}else{x=_.nodeType===9?_:_.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=j_(l)),i==="http://www.w3.org/1999/xhtml"?l==="script"?(i=x.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof p.is=="string"?i=x.createElement(l,{is:p.is}):(i=x.createElement(l),l==="select"&&(x=i,p.multiple?x.multiple=!0:p.size&&(x.size=p.size))):i=x.createElementNS(i,l),i[ns]=n,i[Ou]=p,hx(i,n,!1,!1),n.stateNode=i;e:{switch(x=Am(l,p),l){case"dialog":ri("cancel",i),ri("close",i),_=p;break;case"iframe":case"object":case"embed":ri("load",i),_=p;break;case"video":case"audio":for(_=0;_<gu.length;_++)ri(gu[_],i);_=p;break;case"source":ri("error",i),_=p;break;case"img":case"image":case"link":ri("error",i),ri("load",i),_=p;break;case"details":ri("toggle",i),_=p;break;case"input":Yy(i,p),_=Cm(i,p),ri("invalid",i);break;case"option":_=p;break;case"select":i._wrapperState={wasMultiple:!!p.multiple},_=gi({},p,{value:void 0}),ri("invalid",i);break;case"textarea":Qy(i,p),_=Im(i,p),ri("invalid",i);break;default:_=p}zm(l,_),d=_;for(b in d)if(d.hasOwnProperty(b)){var R=d[b];b==="style"?$_(i,R):b==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&V_(i,R)):b==="children"?typeof R=="string"?(l!=="textarea"||R!=="")&&Pu(i,R):typeof R=="number"&&Pu(i,""+R):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(Iu.hasOwnProperty(b)?R!=null&&b==="onScroll"&&ri("scroll",i):R!=null&&kg(i,b,R,x))}switch(l){case"input":hd(i),Jy(i,p,!1);break;case"textarea":hd(i),e1(i);break;case"option":p.value!=null&&i.setAttribute("value",""+Oa(p.value));break;case"select":i.multiple=!!p.multiple,b=p.value,b!=null?Ml(i,!!p.multiple,b,!1):p.defaultValue!=null&&Ml(i,!!p.multiple,p.defaultValue,!0);break;default:typeof _.onClick=="function"&&(i.onclick=Yd)}switch(l){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return _r(n),null;case 6:if(i&&n.stateNode!=null)px(i,n,i.memoizedProps,p);else{if(typeof p!="string"&&n.stateNode===null)throw Error(Fe(166));if(l=wo(ju.current),wo(as.current),xd(n)){if(p=n.stateNode,l=n.memoizedProps,p[ns]=n,(b=p.nodeValue!==l)&&(i=cn,i!==null))switch(i.tag){case 3:vd(p.nodeValue,l,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&vd(p.nodeValue,l,(i.mode&1)!==0)}b&&(n.flags|=4)}else p=(l.nodeType===9?l:l.ownerDocument).createTextNode(p),p[ns]=n,n.stateNode=p}return _r(n),null;case 13:if(ni(fi),p=n.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(ci&&ln!==null&&n.mode&1&&!(n.flags&128))zv(),jl(),n.flags|=98560,b=!1;else if(b=xd(n),p!==null&&p.dehydrated!==null){if(i===null){if(!b)throw Error(Fe(318));if(b=n.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(Fe(317));b[ns]=n}else jl(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;_r(n),b=!1}else jn!==null&&(hg(jn),jn=null),b=!0;if(!b)return n.flags&65536?n:null}return n.flags&128?(n.lanes=l,n):(p=p!==null,p!==(i!==null&&i.memoizedState!==null)&&p&&(n.child.flags|=8192,n.mode&1&&(i===null||fi.current&1?Vi===0&&(Vi=3):c0())),n.updateQueue!==null&&(n.flags|=4),_r(n),null);case 4:return Ul(),rg(i,n),i===null&&Fu(n.stateNode.containerInfo),_r(n),null;case 10:return Gg(n.type._context),_r(n),null;case 17:return Hr(n.type)&&Jd(),_r(n),null;case 19:if(ni(fi),b=n.memoizedState,b===null)return _r(n),null;if(p=(n.flags&128)!==0,x=b.rendering,x===null)if(p)hu(b,!1);else{if(Vi!==0||i!==null&&i.flags&128)for(i=n.child;i!==null;){if(x=sp(i),x!==null){for(n.flags|=128,hu(b,!1),p=x.updateQueue,p!==null&&(n.updateQueue=p,n.flags|=4),n.subtreeFlags=0,p=l,l=n.child;l!==null;)b=l,i=p,b.flags&=14680066,x=b.alternate,x===null?(b.childLanes=0,b.lanes=i,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=x.childLanes,b.lanes=x.lanes,b.child=x.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=x.memoizedProps,b.memoizedState=x.memoizedState,b.updateQueue=x.updateQueue,b.type=x.type,i=x.dependencies,b.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),l=l.sibling;return Qt(fi,fi.current&1|2),n.child}i=i.sibling}b.tail!==null&&zi()>ql&&(n.flags|=128,p=!0,hu(b,!1),n.lanes=4194304)}else{if(!p)if(i=sp(x),i!==null){if(n.flags|=128,p=!0,l=i.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),hu(b,!0),b.tail===null&&b.tailMode==="hidden"&&!x.alternate&&!ci)return _r(n),null}else 2*zi()-b.renderingStartTime>ql&&l!==1073741824&&(n.flags|=128,p=!0,hu(b,!1),n.lanes=4194304);b.isBackwards?(x.sibling=n.child,n.child=x):(l=b.last,l!==null?l.sibling=x:n.child=x,b.last=x)}return b.tail!==null?(n=b.tail,b.rendering=n,b.tail=n.sibling,b.renderingStartTime=zi(),n.sibling=null,l=fi.current,Qt(fi,p?l&1|2:l&1),n):(_r(n),null);case 22:case 23:return l0(),p=n.memoizedState!==null,i!==null&&i.memoizedState!==null!==p&&(n.flags|=8192),p&&n.mode&1?on&1073741824&&(_r(n),n.subtreeFlags&6&&(n.flags|=8192)):_r(n),null;case 24:return null;case 25:return null}throw Error(Fe(156,n.tag))}function J3(i,n){switch(Ug(n),n.tag){case 1:return Hr(n.type)&&Jd(),i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 3:return Ul(),ni(Gr),ni(wr),Yg(),i=n.flags,i&65536&&!(i&128)?(n.flags=i&-65537|128,n):null;case 5:return Xg(n),null;case 13:if(ni(fi),i=n.memoizedState,i!==null&&i.dehydrated!==null){if(n.alternate===null)throw Error(Fe(340));jl()}return i=n.flags,i&65536?(n.flags=i&-65537|128,n):null;case 19:return ni(fi),null;case 4:return Ul(),null;case 10:return Gg(n.type._context),null;case 22:case 23:return l0(),null;case 24:return null;default:return null}}var Sd=!1,vr=!1,Q3=typeof WeakSet=="function"?WeakSet:Set,it=null;function zl(i,n){var l=i.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(p){wi(i,n,p)}else l.current=null}function ng(i,n,l){try{l()}catch(p){wi(i,n,p)}}var $1=!1;function e4(i,n){if(Vm=Wd,i=yv(),jg(i)){if("selectionStart"in i)var l={start:i.selectionStart,end:i.selectionEnd};else e:{l=(l=i.ownerDocument)&&l.defaultView||window;var p=l.getSelection&&l.getSelection();if(p&&p.rangeCount!==0){l=p.anchorNode;var _=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{l.nodeType,b.nodeType}catch{l=null;break e}var x=0,d=-1,R=-1,W=0,re=0,K=i,U=null;t:for(;;){for(var Te;K!==l||_!==0&&K.nodeType!==3||(d=x+_),K!==b||p!==0&&K.nodeType!==3||(R=x+p),K.nodeType===3&&(x+=K.nodeValue.length),(Te=K.firstChild)!==null;)U=K,K=Te;for(;;){if(K===i)break t;if(U===l&&++W===_&&(d=x),U===b&&++re===p&&(R=x),(Te=K.nextSibling)!==null)break;K=U,U=K.parentNode}K=Te}l=d===-1||R===-1?null:{start:d,end:R}}else l=null}l=l||{start:0,end:0}}else l=null;for(Um={focusedElem:i,selectionRange:l},Wd=!1,it=n;it!==null;)if(n=it,i=n.child,(n.subtreeFlags&1028)!==0&&i!==null)i.return=n,it=i;else for(;it!==null;){n=it;try{var ke=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(ke!==null){var ze=ke.memoizedProps,$e=ke.memoizedState,oe=n.stateNode,Q=oe.getSnapshotBeforeUpdate(n.elementType===n.type?ze:On(n.type,ze),$e);oe.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var le=n.stateNode.containerInfo;le.nodeType===1?le.textContent="":le.nodeType===9&&le.documentElement&&le.removeChild(le.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(xe){wi(n,n.return,xe)}if(i=n.sibling,i!==null){i.return=n.return,it=i;break}it=n.return}return ke=$1,$1=!1,ke}function Tu(i,n,l){var p=n.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var _=p=p.next;do{if((_.tag&i)===i){var b=_.destroy;_.destroy=void 0,b!==void 0&&ng(n,l,b)}_=_.next}while(_!==p)}}function Pp(i,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&i)===i){var p=l.create;l.destroy=p()}l=l.next}while(l!==n)}}function sg(i){var n=i.ref;if(n!==null){var l=i.stateNode;switch(i.tag){case 5:i=l;break;default:i=l}typeof n=="function"?n(i):n.current=i}}function fx(i){var n=i.alternate;n!==null&&(i.alternate=null,fx(n)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(n=i.stateNode,n!==null&&(delete n[ns],delete n[Ou],delete n[Zm],delete n[F3],delete n[B3])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function mx(i){return i.tag===5||i.tag===3||i.tag===4}function q1(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||mx(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ag(i,n,l){var p=i.tag;if(p===5||p===6)i=i.stateNode,n?l.nodeType===8?l.parentNode.insertBefore(i,n):l.insertBefore(i,n):(l.nodeType===8?(n=l.parentNode,n.insertBefore(i,l)):(n=l,n.appendChild(i)),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=Yd));else if(p!==4&&(i=i.child,i!==null))for(ag(i,n,l),i=i.sibling;i!==null;)ag(i,n,l),i=i.sibling}function og(i,n,l){var p=i.tag;if(p===5||p===6)i=i.stateNode,n?l.insertBefore(i,n):l.appendChild(i);else if(p!==4&&(i=i.child,i!==null))for(og(i,n,l),i=i.sibling;i!==null;)og(i,n,l),i=i.sibling}var rr=null,Nn=!1;function xa(i,n,l){for(l=l.child;l!==null;)gx(i,n,l),l=l.sibling}function gx(i,n,l){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(wp,l)}catch{}switch(l.tag){case 5:vr||zl(l,n);case 6:var p=rr,_=Nn;rr=null,xa(i,n,l),rr=p,Nn=_,rr!==null&&(Nn?(i=rr,l=l.stateNode,i.nodeType===8?i.parentNode.removeChild(l):i.removeChild(l)):rr.removeChild(l.stateNode));break;case 18:rr!==null&&(Nn?(i=rr,l=l.stateNode,i.nodeType===8?om(i.parentNode,l):i.nodeType===1&&om(i,l),Du(i)):om(rr,l.stateNode));break;case 4:p=rr,_=Nn,rr=l.stateNode.containerInfo,Nn=!0,xa(i,n,l),rr=p,Nn=_;break;case 0:case 11:case 14:case 15:if(!vr&&(p=l.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){_=p=p.next;do{var b=_,x=b.destroy;b=b.tag,x!==void 0&&(b&2||b&4)&&ng(l,n,x),_=_.next}while(_!==p)}xa(i,n,l);break;case 1:if(!vr&&(zl(l,n),p=l.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=l.memoizedProps,p.state=l.memoizedState,p.componentWillUnmount()}catch(d){wi(l,n,d)}xa(i,n,l);break;case 21:xa(i,n,l);break;case 22:l.mode&1?(vr=(p=vr)||l.memoizedState!==null,xa(i,n,l),vr=p):xa(i,n,l);break;default:xa(i,n,l)}}function Z1(i){var n=i.updateQueue;if(n!==null){i.updateQueue=null;var l=i.stateNode;l===null&&(l=i.stateNode=new Q3),n.forEach(function(p){var _=c4.bind(null,i,p);l.has(p)||(l.add(p),p.then(_,_))})}}function Bn(i,n){var l=n.deletions;if(l!==null)for(var p=0;p<l.length;p++){var _=l[p];try{var b=i,x=n,d=x;e:for(;d!==null;){switch(d.tag){case 5:rr=d.stateNode,Nn=!1;break e;case 3:rr=d.stateNode.containerInfo,Nn=!0;break e;case 4:rr=d.stateNode.containerInfo,Nn=!0;break e}d=d.return}if(rr===null)throw Error(Fe(160));gx(b,x,_),rr=null,Nn=!1;var R=_.alternate;R!==null&&(R.return=null),_.return=null}catch(W){wi(_,n,W)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)yx(n,i),n=n.sibling}function yx(i,n){var l=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Bn(n,i),is(i),p&4){try{Tu(3,i,i.return),Pp(3,i)}catch(ze){wi(i,i.return,ze)}try{Tu(5,i,i.return)}catch(ze){wi(i,i.return,ze)}}break;case 1:Bn(n,i),is(i),p&512&&l!==null&&zl(l,l.return);break;case 5:if(Bn(n,i),is(i),p&512&&l!==null&&zl(l,l.return),i.flags&32){var _=i.stateNode;try{Pu(_,"")}catch(ze){wi(i,i.return,ze)}}if(p&4&&(_=i.stateNode,_!=null)){var b=i.memoizedProps,x=l!==null?l.memoizedProps:b,d=i.type,R=i.updateQueue;if(i.updateQueue=null,R!==null)try{d==="input"&&b.type==="radio"&&b.name!=null&&O_(_,b),Am(d,x);var W=Am(d,b);for(x=0;x<R.length;x+=2){var re=R[x],K=R[x+1];re==="style"?$_(_,K):re==="dangerouslySetInnerHTML"?V_(_,K):re==="children"?Pu(_,K):kg(_,re,K,W)}switch(d){case"input":Em(_,b);break;case"textarea":N_(_,b);break;case"select":var U=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!b.multiple;var Te=b.value;Te!=null?Ml(_,!!b.multiple,Te,!1):U!==!!b.multiple&&(b.defaultValue!=null?Ml(_,!!b.multiple,b.defaultValue,!0):Ml(_,!!b.multiple,b.multiple?[]:"",!1))}_[Ou]=b}catch(ze){wi(i,i.return,ze)}}break;case 6:if(Bn(n,i),is(i),p&4){if(i.stateNode===null)throw Error(Fe(162));_=i.stateNode,b=i.memoizedProps;try{_.nodeValue=b}catch(ze){wi(i,i.return,ze)}}break;case 3:if(Bn(n,i),is(i),p&4&&l!==null&&l.memoizedState.isDehydrated)try{Du(n.containerInfo)}catch(ze){wi(i,i.return,ze)}break;case 4:Bn(n,i),is(i);break;case 13:Bn(n,i),is(i),_=i.child,_.flags&8192&&(b=_.memoizedState!==null,_.stateNode.isHidden=b,!b||_.alternate!==null&&_.alternate.memoizedState!==null||(a0=zi())),p&4&&Z1(i);break;case 22:if(re=l!==null&&l.memoizedState!==null,i.mode&1?(vr=(W=vr)||re,Bn(n,i),vr=W):Bn(n,i),is(i),p&8192){if(W=i.memoizedState!==null,(i.stateNode.isHidden=W)&&!re&&i.mode&1)for(it=i,re=i.child;re!==null;){for(K=it=re;it!==null;){switch(U=it,Te=U.child,U.tag){case 0:case 11:case 14:case 15:Tu(4,U,U.return);break;case 1:zl(U,U.return);var ke=U.stateNode;if(typeof ke.componentWillUnmount=="function"){p=U,l=U.return;try{n=p,ke.props=n.memoizedProps,ke.state=n.memoizedState,ke.componentWillUnmount()}catch(ze){wi(p,l,ze)}}break;case 5:zl(U,U.return);break;case 22:if(U.memoizedState!==null){H1(K);continue}}Te!==null?(Te.return=U,it=Te):H1(K)}re=re.sibling}e:for(re=null,K=i;;){if(K.tag===5){if(re===null){re=K;try{_=K.stateNode,W?(b=_.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(d=K.stateNode,R=K.memoizedProps.style,x=R!=null&&R.hasOwnProperty("display")?R.display:null,d.style.display=U_("display",x))}catch(ze){wi(i,i.return,ze)}}}else if(K.tag===6){if(re===null)try{K.stateNode.nodeValue=W?"":K.memoizedProps}catch(ze){wi(i,i.return,ze)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===i)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===i)break e;for(;K.sibling===null;){if(K.return===null||K.return===i)break e;re===K&&(re=null),K=K.return}re===K&&(re=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:Bn(n,i),is(i),p&4&&Z1(i);break;case 21:break;default:Bn(n,i),is(i)}}function is(i){var n=i.flags;if(n&2){try{e:{for(var l=i.return;l!==null;){if(mx(l)){var p=l;break e}l=l.return}throw Error(Fe(160))}switch(p.tag){case 5:var _=p.stateNode;p.flags&32&&(Pu(_,""),p.flags&=-33);var b=q1(i);og(i,b,_);break;case 3:case 4:var x=p.stateNode.containerInfo,d=q1(i);ag(i,d,x);break;default:throw Error(Fe(161))}}catch(R){wi(i,i.return,R)}i.flags&=-3}n&4096&&(i.flags&=-4097)}function t4(i,n,l){it=i,_x(i)}function _x(i,n,l){for(var p=(i.mode&1)!==0;it!==null;){var _=it,b=_.child;if(_.tag===22&&p){var x=_.memoizedState!==null||Sd;if(!x){var d=_.alternate,R=d!==null&&d.memoizedState!==null||vr;d=Sd;var W=vr;if(Sd=x,(vr=R)&&!W)for(it=_;it!==null;)x=it,R=x.child,x.tag===22&&x.memoizedState!==null?W1(_):R!==null?(R.return=x,it=R):W1(_);for(;b!==null;)it=b,_x(b),b=b.sibling;it=_,Sd=d,vr=W}G1(i)}else _.subtreeFlags&8772&&b!==null?(b.return=_,it=b):G1(i)}}function G1(i){for(;it!==null;){var n=it;if(n.flags&8772){var l=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:vr||Pp(5,n);break;case 1:var p=n.stateNode;if(n.flags&4&&!vr)if(l===null)p.componentDidMount();else{var _=n.elementType===n.type?l.memoizedProps:On(n.type,l.memoizedProps);p.componentDidUpdate(_,l.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var b=n.updateQueue;b!==null&&P1(n,b,p);break;case 3:var x=n.updateQueue;if(x!==null){if(l=null,n.child!==null)switch(n.child.tag){case 5:l=n.child.stateNode;break;case 1:l=n.child.stateNode}P1(n,x,l)}break;case 5:var d=n.stateNode;if(l===null&&n.flags&4){l=d;var R=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&l.focus();break;case"img":R.src&&(l.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var W=n.alternate;if(W!==null){var re=W.memoizedState;if(re!==null){var K=re.dehydrated;K!==null&&Du(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}vr||n.flags&512&&sg(n)}catch(U){wi(n,n.return,U)}}if(n===i){it=null;break}if(l=n.sibling,l!==null){l.return=n.return,it=l;break}it=n.return}}function H1(i){for(;it!==null;){var n=it;if(n===i){it=null;break}var l=n.sibling;if(l!==null){l.return=n.return,it=l;break}it=n.return}}function W1(i){for(;it!==null;){var n=it;try{switch(n.tag){case 0:case 11:case 15:var l=n.return;try{Pp(4,n)}catch(R){wi(n,l,R)}break;case 1:var p=n.stateNode;if(typeof p.componentDidMount=="function"){var _=n.return;try{p.componentDidMount()}catch(R){wi(n,_,R)}}var b=n.return;try{sg(n)}catch(R){wi(n,b,R)}break;case 5:var x=n.return;try{sg(n)}catch(R){wi(n,x,R)}}}catch(R){wi(n,n.return,R)}if(n===i){it=null;break}var d=n.sibling;if(d!==null){d.return=n.return,it=d;break}it=n.return}}var i4=Math.ceil,lp=Us.ReactCurrentDispatcher,n0=Us.ReactCurrentOwner,En=Us.ReactCurrentBatchConfig,Rt=0,Xi=null,Ri=null,nr=0,on=0,Al=Va(0),Vi=0,qu=null,Io=0,zp=0,s0=0,Cu=null,qr=null,a0=0,ql=1/0,As=null,cp=!1,lg=null,La=null,Td=!1,ka=null,up=0,Eu=0,cg=null,Bd=-1,Od=0;function Rr(){return Rt&6?zi():Bd!==-1?Bd:Bd=zi()}function Ra(i){return i.mode&1?Rt&2&&nr!==0?nr&-nr:N3.transition!==null?(Od===0&&(Od=tv()),Od):(i=Zt,i!==0||(i=window.event,i=i===void 0?16:lv(i.type)),i):1}function Un(i,n,l,p){if(50<Eu)throw Eu=0,cg=null,Error(Fe(185));Wu(i,l,p),(!(Rt&2)||i!==Xi)&&(i===Xi&&(!(Rt&2)&&(zp|=l),Vi===4&&Ta(i,nr)),Wr(i,p),l===1&&Rt===0&&!(n.mode&1)&&(ql=zi()+500,Ep&&Ua()))}function Wr(i,n){var l=i.callbackNode;Nb(i,n);var p=Hd(i,i===Xi?nr:0);if(p===0)l!==null&&r1(l),i.callbackNode=null,i.callbackPriority=0;else if(n=p&-p,i.callbackPriority!==n){if(l!=null&&r1(l),n===1)i.tag===0?O3(K1.bind(null,i)):kv(K1.bind(null,i)),L3(function(){!(Rt&6)&&Ua()}),l=null;else{switch(iv(p)){case 1:l=Mg;break;case 4:l=Q_;break;case 16:l=Gd;break;case 536870912:l=ev;break;default:l=Gd}l=Ex(l,vx.bind(null,i))}i.callbackPriority=n,i.callbackNode=l}}function vx(i,n){if(Bd=-1,Od=0,Rt&6)throw Error(Fe(327));var l=i.callbackNode;if(Bl()&&i.callbackNode!==l)return null;var p=Hd(i,i===Xi?nr:0);if(p===0)return null;if(p&30||p&i.expiredLanes||n)n=hp(i,p);else{n=p;var _=Rt;Rt|=2;var b=wx();(Xi!==i||nr!==n)&&(As=null,ql=zi()+500,So(i,n));do try{s4();break}catch(d){xx(i,d)}while(!0);Zg(),lp.current=b,Rt=_,Ri!==null?n=0:(Xi=null,nr=0,n=Vi)}if(n!==0){if(n===2&&(_=Fm(i),_!==0&&(p=_,n=ug(i,_))),n===1)throw l=qu,So(i,0),Ta(i,p),Wr(i,zi()),l;if(n===6)Ta(i,p);else{if(_=i.current.alternate,!(p&30)&&!r4(_)&&(n=hp(i,p),n===2&&(b=Fm(i),b!==0&&(p=b,n=ug(i,b))),n===1))throw l=qu,So(i,0),Ta(i,p),Wr(i,zi()),l;switch(i.finishedWork=_,i.finishedLanes=p,n){case 0:case 1:throw Error(Fe(345));case 2:_o(i,qr,As);break;case 3:if(Ta(i,p),(p&130023424)===p&&(n=a0+500-zi(),10<n)){if(Hd(i,0)!==0)break;if(_=i.suspendedLanes,(_&p)!==p){Rr(),i.pingedLanes|=i.suspendedLanes&_;break}i.timeoutHandle=qm(_o.bind(null,i,qr,As),n);break}_o(i,qr,As);break;case 4:if(Ta(i,p),(p&4194240)===p)break;for(n=i.eventTimes,_=-1;0<p;){var x=31-Vn(p);b=1<<x,x=n[x],x>_&&(_=x),p&=~b}if(p=_,p=zi()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*i4(p/1960))-p,10<p){i.timeoutHandle=qm(_o.bind(null,i,qr,As),p);break}_o(i,qr,As);break;case 5:_o(i,qr,As);break;default:throw Error(Fe(329))}}}return Wr(i,zi()),i.callbackNode===l?vx.bind(null,i):null}function ug(i,n){var l=Cu;return i.current.memoizedState.isDehydrated&&(So(i,n).flags|=256),i=hp(i,n),i!==2&&(n=qr,qr=l,n!==null&&hg(n)),i}function hg(i){qr===null?qr=i:qr.push.apply(qr,i)}function r4(i){for(var n=i;;){if(n.flags&16384){var l=n.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var p=0;p<l.length;p++){var _=l[p],b=_.getSnapshot;_=_.value;try{if(!$n(b(),_))return!1}catch{return!1}}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===i)break;for(;n.sibling===null;){if(n.return===null||n.return===i)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ta(i,n){for(n&=~s0,n&=~zp,i.suspendedLanes|=n,i.pingedLanes&=~n,i=i.expirationTimes;0<n;){var l=31-Vn(n),p=1<<l;i[l]=-1,n&=~p}}function K1(i){if(Rt&6)throw Error(Fe(327));Bl();var n=Hd(i,0);if(!(n&1))return Wr(i,zi()),null;var l=hp(i,n);if(i.tag!==0&&l===2){var p=Fm(i);p!==0&&(n=p,l=ug(i,p))}if(l===1)throw l=qu,So(i,0),Ta(i,n),Wr(i,zi()),l;if(l===6)throw Error(Fe(345));return i.finishedWork=i.current.alternate,i.finishedLanes=n,_o(i,qr,As),Wr(i,zi()),null}function o0(i,n){var l=Rt;Rt|=1;try{return i(n)}finally{Rt=l,Rt===0&&(ql=zi()+500,Ep&&Ua())}}function Po(i){ka!==null&&ka.tag===0&&!(Rt&6)&&Bl();var n=Rt;Rt|=1;var l=En.transition,p=Zt;try{if(En.transition=null,Zt=1,i)return i()}finally{Zt=p,En.transition=l,Rt=n,!(Rt&6)&&Ua()}}function l0(){on=Al.current,ni(Al)}function So(i,n){i.finishedWork=null,i.finishedLanes=0;var l=i.timeoutHandle;if(l!==-1&&(i.timeoutHandle=-1,D3(l)),Ri!==null)for(l=Ri.return;l!==null;){var p=l;switch(Ug(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Jd();break;case 3:Ul(),ni(Gr),ni(wr),Yg();break;case 5:Xg(p);break;case 4:Ul();break;case 13:ni(fi);break;case 19:ni(fi);break;case 10:Gg(p.type._context);break;case 22:case 23:l0()}l=l.return}if(Xi=i,Ri=i=Fa(i.current,null),nr=on=n,Vi=0,qu=null,s0=zp=Io=0,qr=Cu=null,xo!==null){for(n=0;n<xo.length;n++)if(l=xo[n],p=l.interleaved,p!==null){l.interleaved=null;var _=p.next,b=l.pending;if(b!==null){var x=b.next;b.next=_,p.next=x}l.pending=p}xo=null}return i}function xx(i,n){do{var l=Ri;try{if(Zg(),Ld.current=op,ap){for(var p=mi.memoizedState;p!==null;){var _=p.queue;_!==null&&(_.pending=null),p=p.next}ap=!1}if(ko=0,Ki=ji=mi=null,Su=!1,Vu=0,n0.current=null,l===null||l.return===null){Vi=1,qu=n,Ri=null;break}e:{var b=i,x=l.return,d=l,R=n;if(n=nr,d.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var W=R,re=d,K=re.tag;if(!(re.mode&1)&&(K===0||K===11||K===15)){var U=re.alternate;U?(re.updateQueue=U.updateQueue,re.memoizedState=U.memoizedState,re.lanes=U.lanes):(re.updateQueue=null,re.memoizedState=null)}var Te=F1(x);if(Te!==null){Te.flags&=-257,B1(Te,x,d,b,n),Te.mode&1&&R1(b,W,n),n=Te,R=W;var ke=n.updateQueue;if(ke===null){var ze=new Set;ze.add(R),n.updateQueue=ze}else ke.add(R);break e}else{if(!(n&1)){R1(b,W,n),c0();break e}R=Error(Fe(426))}}else if(ci&&d.mode&1){var $e=F1(x);if($e!==null){!($e.flags&65536)&&($e.flags|=256),B1($e,x,d,b,n),$g($l(R,d));break e}}b=R=$l(R,d),Vi!==4&&(Vi=2),Cu===null?Cu=[b]:Cu.push(b),b=x;do{switch(b.tag){case 3:b.flags|=65536,n&=-n,b.lanes|=n;var oe=rx(b,R,n);I1(b,oe);break e;case 1:d=R;var Q=b.type,le=b.stateNode;if(!(b.flags&128)&&(typeof Q.getDerivedStateFromError=="function"||le!==null&&typeof le.componentDidCatch=="function"&&(La===null||!La.has(le)))){b.flags|=65536,n&=-n,b.lanes|=n;var xe=nx(b,d,n);I1(b,xe);break e}}b=b.return}while(b!==null)}Sx(l)}catch(je){n=je,Ri===l&&l!==null&&(Ri=l=l.return);continue}break}while(!0)}function wx(){var i=lp.current;return lp.current=op,i===null?op:i}function c0(){(Vi===0||Vi===3||Vi===2)&&(Vi=4),Xi===null||!(Io&268435455)&&!(zp&268435455)||Ta(Xi,nr)}function hp(i,n){var l=Rt;Rt|=2;var p=wx();(Xi!==i||nr!==n)&&(As=null,So(i,n));do try{n4();break}catch(_){xx(i,_)}while(!0);if(Zg(),Rt=l,lp.current=p,Ri!==null)throw Error(Fe(261));return Xi=null,nr=0,Vi}function n4(){for(;Ri!==null;)bx(Ri)}function s4(){for(;Ri!==null&&!zb();)bx(Ri)}function bx(i){var n=Cx(i.alternate,i,on);i.memoizedProps=i.pendingProps,n===null?Sx(i):Ri=n,n0.current=null}function Sx(i){var n=i;do{var l=n.alternate;if(i=n.return,n.flags&32768){if(l=J3(l,n),l!==null){l.flags&=32767,Ri=l;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{Vi=6,Ri=null;return}}else if(l=Y3(l,n,on),l!==null){Ri=l;return}if(n=n.sibling,n!==null){Ri=n;return}Ri=n=i}while(n!==null);Vi===0&&(Vi=5)}function _o(i,n,l){var p=Zt,_=En.transition;try{En.transition=null,Zt=1,a4(i,n,l,p)}finally{En.transition=_,Zt=p}return null}function a4(i,n,l,p){do Bl();while(ka!==null);if(Rt&6)throw Error(Fe(327));l=i.finishedWork;var _=i.finishedLanes;if(l===null)return null;if(i.finishedWork=null,i.finishedLanes=0,l===i.current)throw Error(Fe(177));i.callbackNode=null,i.callbackPriority=0;var b=l.lanes|l.childLanes;if(jb(i,b),i===Xi&&(Ri=Xi=null,nr=0),!(l.subtreeFlags&2064)&&!(l.flags&2064)||Td||(Td=!0,Ex(Gd,function(){return Bl(),null})),b=(l.flags&15990)!==0,l.subtreeFlags&15990||b){b=En.transition,En.transition=null;var x=Zt;Zt=1;var d=Rt;Rt|=4,n0.current=null,e4(i,l),yx(l,i),E3(Um),Wd=!!Vm,Um=Vm=null,i.current=l,t4(l),Ab(),Rt=d,Zt=x,En.transition=b}else i.current=l;if(Td&&(Td=!1,ka=i,up=_),b=i.pendingLanes,b===0&&(La=null),Lb(l.stateNode),Wr(i,zi()),n!==null)for(p=i.onRecoverableError,l=0;l<n.length;l++)_=n[l],p(_.value,{componentStack:_.stack,digest:_.digest});if(cp)throw cp=!1,i=lg,lg=null,i;return up&1&&i.tag!==0&&Bl(),b=i.pendingLanes,b&1?i===cg?Eu++:(Eu=0,cg=i):Eu=0,Ua(),null}function Bl(){if(ka!==null){var i=iv(up),n=En.transition,l=Zt;try{if(En.transition=null,Zt=16>i?16:i,ka===null)var p=!1;else{if(i=ka,ka=null,up=0,Rt&6)throw Error(Fe(331));var _=Rt;for(Rt|=4,it=i.current;it!==null;){var b=it,x=b.child;if(it.flags&16){var d=b.deletions;if(d!==null){for(var R=0;R<d.length;R++){var W=d[R];for(it=W;it!==null;){var re=it;switch(re.tag){case 0:case 11:case 15:Tu(8,re,b)}var K=re.child;if(K!==null)K.return=re,it=K;else for(;it!==null;){re=it;var U=re.sibling,Te=re.return;if(fx(re),re===W){it=null;break}if(U!==null){U.return=Te,it=U;break}it=Te}}}var ke=b.alternate;if(ke!==null){var ze=ke.child;if(ze!==null){ke.child=null;do{var $e=ze.sibling;ze.sibling=null,ze=$e}while(ze!==null)}}it=b}}if(b.subtreeFlags&2064&&x!==null)x.return=b,it=x;else e:for(;it!==null;){if(b=it,b.flags&2048)switch(b.tag){case 0:case 11:case 15:Tu(9,b,b.return)}var oe=b.sibling;if(oe!==null){oe.return=b.return,it=oe;break e}it=b.return}}var Q=i.current;for(it=Q;it!==null;){x=it;var le=x.child;if(x.subtreeFlags&2064&&le!==null)le.return=x,it=le;else e:for(x=Q;it!==null;){if(d=it,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Pp(9,d)}}catch(je){wi(d,d.return,je)}if(d===x){it=null;break e}var xe=d.sibling;if(xe!==null){xe.return=d.return,it=xe;break e}it=d.return}}if(Rt=_,Ua(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(wp,i)}catch{}p=!0}return p}finally{Zt=l,En.transition=n}}return!1}function X1(i,n,l){n=$l(l,n),n=rx(i,n,1),i=Da(i,n,1),n=Rr(),i!==null&&(Wu(i,1,n),Wr(i,n))}function wi(i,n,l){if(i.tag===3)X1(i,i,l);else for(;n!==null;){if(n.tag===3){X1(n,i,l);break}else if(n.tag===1){var p=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(La===null||!La.has(p))){i=$l(l,i),i=nx(n,i,1),n=Da(n,i,1),i=Rr(),n!==null&&(Wu(n,1,i),Wr(n,i));break}}n=n.return}}function o4(i,n,l){var p=i.pingCache;p!==null&&p.delete(n),n=Rr(),i.pingedLanes|=i.suspendedLanes&l,Xi===i&&(nr&l)===l&&(Vi===4||Vi===3&&(nr&130023424)===nr&&500>zi()-a0?So(i,0):s0|=l),Wr(i,n)}function Tx(i,n){n===0&&(i.mode&1?(n=fd,fd<<=1,!(fd&130023424)&&(fd=4194304)):n=1);var l=Rr();i=Ns(i,n),i!==null&&(Wu(i,n,l),Wr(i,l))}function l4(i){var n=i.memoizedState,l=0;n!==null&&(l=n.retryLane),Tx(i,l)}function c4(i,n){var l=0;switch(i.tag){case 13:var p=i.stateNode,_=i.memoizedState;_!==null&&(l=_.retryLane);break;case 19:p=i.stateNode;break;default:throw Error(Fe(314))}p!==null&&p.delete(n),Tx(i,l)}var Cx;Cx=function(i,n,l){if(i!==null)if(i.memoizedProps!==n.pendingProps||Gr.current)Zr=!0;else{if(!(i.lanes&l)&&!(n.flags&128))return Zr=!1,X3(i,n,l);Zr=!!(i.flags&131072)}else Zr=!1,ci&&n.flags&1048576&&Iv(n,tp,n.index);switch(n.lanes=0,n.tag){case 2:var p=n.type;Fd(i,n),i=n.pendingProps;var _=Nl(n,wr.current);Fl(n,l),_=Qg(null,n,p,i,_,l);var b=e0();return n.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Hr(p)?(b=!0,Qd(n)):b=!1,n.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,Wg(n),_.updater=kp,n.stateNode=_,_._reactInternals=n,Ym(n,p,i,l),n=eg(null,n,p,!0,b,l)):(n.tag=0,ci&&b&&Vg(n),Lr(null,n,_,l),n=n.child),n;case 16:p=n.elementType;e:{switch(Fd(i,n),i=n.pendingProps,_=p._init,p=_(p._payload),n.type=p,_=n.tag=h4(p),i=On(p,i),_){case 0:n=Qm(null,n,p,i,l);break e;case 1:n=j1(null,n,p,i,l);break e;case 11:n=O1(null,n,p,i,l);break e;case 14:n=N1(null,n,p,On(p.type,i),l);break e}throw Error(Fe(306,p,""))}return n;case 0:return p=n.type,_=n.pendingProps,_=n.elementType===p?_:On(p,_),Qm(i,n,p,_,l);case 1:return p=n.type,_=n.pendingProps,_=n.elementType===p?_:On(p,_),j1(i,n,p,_,l);case 3:e:{if(lx(n),i===null)throw Error(Fe(387));p=n.pendingProps,b=n.memoizedState,_=b.element,Mv(i,n),np(n,p,null,l);var x=n.memoizedState;if(p=x.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},n.updateQueue.baseState=b,n.memoizedState=b,n.flags&256){_=$l(Error(Fe(423)),n),n=V1(i,n,p,l,_);break e}else if(p!==_){_=$l(Error(Fe(424)),n),n=V1(i,n,p,l,_);break e}else for(ln=Ma(n.stateNode.containerInfo.firstChild),cn=n,ci=!0,jn=null,l=Fv(n,null,p,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(jl(),p===_){n=js(i,n,l);break e}Lr(i,n,p,l)}n=n.child}return n;case 5:return Bv(n),i===null&&Wm(n),p=n.type,_=n.pendingProps,b=i!==null?i.memoizedProps:null,x=_.children,$m(p,_)?x=null:b!==null&&$m(p,b)&&(n.flags|=32),ox(i,n),Lr(i,n,x,l),n.child;case 6:return i===null&&Wm(n),null;case 13:return cx(i,n,l);case 4:return Kg(n,n.stateNode.containerInfo),p=n.pendingProps,i===null?n.child=Vl(n,null,p,l):Lr(i,n,p,l),n.child;case 11:return p=n.type,_=n.pendingProps,_=n.elementType===p?_:On(p,_),O1(i,n,p,_,l);case 7:return Lr(i,n,n.pendingProps,l),n.child;case 8:return Lr(i,n,n.pendingProps.children,l),n.child;case 12:return Lr(i,n,n.pendingProps.children,l),n.child;case 10:e:{if(p=n.type._context,_=n.pendingProps,b=n.memoizedProps,x=_.value,Qt(ip,p._currentValue),p._currentValue=x,b!==null)if($n(b.value,x)){if(b.children===_.children&&!Gr.current){n=js(i,n,l);break e}}else for(b=n.child,b!==null&&(b.return=n);b!==null;){var d=b.dependencies;if(d!==null){x=b.child;for(var R=d.firstContext;R!==null;){if(R.context===p){if(b.tag===1){R=Fs(-1,l&-l),R.tag=2;var W=b.updateQueue;if(W!==null){W=W.shared;var re=W.pending;re===null?R.next=R:(R.next=re.next,re.next=R),W.pending=R}}b.lanes|=l,R=b.alternate,R!==null&&(R.lanes|=l),Km(b.return,l,n),d.lanes|=l;break}R=R.next}}else if(b.tag===10)x=b.type===n.type?null:b.child;else if(b.tag===18){if(x=b.return,x===null)throw Error(Fe(341));x.lanes|=l,d=x.alternate,d!==null&&(d.lanes|=l),Km(x,l,n),x=b.sibling}else x=b.child;if(x!==null)x.return=b;else for(x=b;x!==null;){if(x===n){x=null;break}if(b=x.sibling,b!==null){b.return=x.return,x=b;break}x=x.return}b=x}Lr(i,n,_.children,l),n=n.child}return n;case 9:return _=n.type,p=n.pendingProps.children,Fl(n,l),_=kn(_),p=p(_),n.flags|=1,Lr(i,n,p,l),n.child;case 14:return p=n.type,_=On(p,n.pendingProps),_=On(p.type,_),N1(i,n,p,_,l);case 15:return sx(i,n,n.type,n.pendingProps,l);case 17:return p=n.type,_=n.pendingProps,_=n.elementType===p?_:On(p,_),Fd(i,n),n.tag=1,Hr(p)?(i=!0,Qd(n)):i=!1,Fl(n,l),Lv(n,p,_),Ym(n,p,_,l),eg(null,n,p,!0,i,l);case 19:return ux(i,n,l);case 22:return ax(i,n,l)}throw Error(Fe(156,n.tag))};function Ex(i,n){return J_(i,n)}function u4(i,n,l,p){this.tag=i,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(i,n,l,p){return new u4(i,n,l,p)}function u0(i){return i=i.prototype,!(!i||!i.isReactComponent)}function h4(i){if(typeof i=="function")return u0(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Pg)return 11;if(i===zg)return 14}return 2}function Fa(i,n){var l=i.alternate;return l===null?(l=Cn(i.tag,n,i.key,i.mode),l.elementType=i.elementType,l.type=i.type,l.stateNode=i.stateNode,l.alternate=i,i.alternate=l):(l.pendingProps=n,l.type=i.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=i.flags&14680064,l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,n=i.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=i.sibling,l.index=i.index,l.ref=i.ref,l}function Nd(i,n,l,p,_,b){var x=2;if(p=i,typeof i=="function")u0(i)&&(x=1);else if(typeof i=="string")x=5;else e:switch(i){case wl:return To(l.children,_,b,n);case Ig:x=8,_|=8;break;case wm:return i=Cn(12,l,n,_|2),i.elementType=wm,i.lanes=b,i;case bm:return i=Cn(13,l,n,_),i.elementType=bm,i.lanes=b,i;case Sm:return i=Cn(19,l,n,_),i.elementType=Sm,i.lanes=b,i;case R_:return Ap(l,_,b,n);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case D_:x=10;break e;case L_:x=9;break e;case Pg:x=11;break e;case zg:x=14;break e;case wa:x=16,p=null;break e}throw Error(Fe(130,i==null?i:typeof i,""))}return n=Cn(x,l,n,_),n.elementType=i,n.type=p,n.lanes=b,n}function To(i,n,l,p){return i=Cn(7,i,p,n),i.lanes=l,i}function Ap(i,n,l,p){return i=Cn(22,i,p,n),i.elementType=R_,i.lanes=l,i.stateNode={isHidden:!1},i}function mm(i,n,l){return i=Cn(6,i,null,n),i.lanes=l,i}function gm(i,n,l){return n=Cn(4,i.children!==null?i.children:[],i.key,n),n.lanes=l,n.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},n}function d4(i,n,l,p,_){this.tag=n,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xf(0),this.expirationTimes=Xf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xf(0),this.identifierPrefix=p,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function h0(i,n,l,p,_,b,x,d,R){return i=new d4(i,n,l,d,R),n===1?(n=1,b===!0&&(n|=8)):n=0,b=Cn(3,null,null,n),i.current=b,b.stateNode=i,b.memoizedState={element:p,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wg(b),i}function p4(i,n,l){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xl,key:p==null?null:""+p,children:i,containerInfo:n,implementation:l}}function kx(i){if(!i)return Na;i=i._reactInternals;e:{if(Ao(i)!==i||i.tag!==1)throw Error(Fe(170));var n=i;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Hr(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(Fe(171))}if(i.tag===1){var l=i.type;if(Hr(l))return Ev(i,l,n)}return n}function Ix(i,n,l,p,_,b,x,d,R){return i=h0(l,p,!0,i,_,b,x,d,R),i.context=kx(null),l=i.current,p=Rr(),_=Ra(l),b=Fs(p,_),b.callback=n??null,Da(l,b,_),i.current.lanes=_,Wu(i,_,p),Wr(i,p),i}function Mp(i,n,l,p){var _=n.current,b=Rr(),x=Ra(_);return l=kx(l),n.context===null?n.context=l:n.pendingContext=l,n=Fs(b,x),n.payload={element:i},p=p===void 0?null:p,p!==null&&(n.callback=p),i=Da(_,n,x),i!==null&&(Un(i,_,x,b),Dd(i,_,x)),x}function dp(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Y1(i,n){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var l=i.retryLane;i.retryLane=l!==0&&l<n?l:n}}function d0(i,n){Y1(i,n),(i=i.alternate)&&Y1(i,n)}function f4(){return null}var Px=typeof reportError=="function"?reportError:function(i){console.error(i)};function p0(i){this._internalRoot=i}Dp.prototype.render=p0.prototype.render=function(i){var n=this._internalRoot;if(n===null)throw Error(Fe(409));Mp(i,n,null,null)};Dp.prototype.unmount=p0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var n=i.containerInfo;Po(function(){Mp(null,i,null,null)}),n[Os]=null}};function Dp(i){this._internalRoot=i}Dp.prototype.unstable_scheduleHydration=function(i){if(i){var n=sv();i={blockedOn:null,target:i,priority:n};for(var l=0;l<Sa.length&&n!==0&&n<Sa[l].priority;l++);Sa.splice(l,0,i),l===0&&ov(i)}};function f0(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function Lp(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function J1(){}function m4(i,n,l,p,_){if(_){if(typeof p=="function"){var b=p;p=function(){var W=dp(x);b.call(W)}}var x=Ix(n,p,i,0,null,!1,!1,"",J1);return i._reactRootContainer=x,i[Os]=x.current,Fu(i.nodeType===8?i.parentNode:i),Po(),x}for(;_=i.lastChild;)i.removeChild(_);if(typeof p=="function"){var d=p;p=function(){var W=dp(R);d.call(W)}}var R=h0(i,0,!1,null,null,!1,!1,"",J1);return i._reactRootContainer=R,i[Os]=R.current,Fu(i.nodeType===8?i.parentNode:i),Po(function(){Mp(n,R,l,p)}),R}function Rp(i,n,l,p,_){var b=l._reactRootContainer;if(b){var x=b;if(typeof _=="function"){var d=_;_=function(){var R=dp(x);d.call(R)}}Mp(n,x,i,_)}else x=m4(l,n,i,_,p);return dp(x)}rv=function(i){switch(i.tag){case 3:var n=i.stateNode;if(n.current.memoizedState.isDehydrated){var l=mu(n.pendingLanes);l!==0&&(Dg(n,l|1),Wr(n,zi()),!(Rt&6)&&(ql=zi()+500,Ua()))}break;case 13:Po(function(){var p=Ns(i,1);if(p!==null){var _=Rr();Un(p,i,1,_)}}),d0(i,1)}};Lg=function(i){if(i.tag===13){var n=Ns(i,134217728);if(n!==null){var l=Rr();Un(n,i,134217728,l)}d0(i,134217728)}};nv=function(i){if(i.tag===13){var n=Ra(i),l=Ns(i,n);if(l!==null){var p=Rr();Un(l,i,n,p)}d0(i,n)}};sv=function(){return Zt};av=function(i,n){var l=Zt;try{return Zt=i,n()}finally{Zt=l}};Dm=function(i,n,l){switch(n){case"input":if(Em(i,l),n=l.name,l.type==="radio"&&n!=null){for(l=i;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<l.length;n++){var p=l[n];if(p!==i&&p.form===i.form){var _=Cp(p);if(!_)throw Error(Fe(90));B_(p),Em(p,_)}}}break;case"textarea":N_(i,l);break;case"select":n=l.value,n!=null&&Ml(i,!!l.multiple,n,!1)}};G_=o0;H_=Po;var g4={usingClientEntryPoint:!1,Events:[Xu,Cl,Cp,q_,Z_,o0]},du={findFiberByHostInstance:vo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},y4={bundleType:du.bundleType,version:du.version,rendererPackageName:du.rendererPackageName,rendererConfig:du.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Us.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=X_(i),i===null?null:i.stateNode},findFiberByHostInstance:du.findFiberByHostInstance||f4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{wp=Cd.inject(y4),ss=Cd}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g4;hn.createPortal=function(i,n){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f0(n))throw Error(Fe(200));return p4(i,n,null,l)};hn.createRoot=function(i,n){if(!f0(i))throw Error(Fe(299));var l=!1,p="",_=Px;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(p=n.identifierPrefix),n.onRecoverableError!==void 0&&(_=n.onRecoverableError)),n=h0(i,1,!1,null,null,l,!1,p,_),i[Os]=n.current,Fu(i.nodeType===8?i.parentNode:i),new p0(n)};hn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var n=i._reactInternals;if(n===void 0)throw typeof i.render=="function"?Error(Fe(188)):(i=Object.keys(i).join(","),Error(Fe(268,i)));return i=X_(n),i=i===null?null:i.stateNode,i};hn.flushSync=function(i){return Po(i)};hn.hydrate=function(i,n,l){if(!Lp(n))throw Error(Fe(200));return Rp(null,i,n,!0,l)};hn.hydrateRoot=function(i,n,l){if(!f0(i))throw Error(Fe(405));var p=l!=null&&l.hydratedSources||null,_=!1,b="",x=Px;if(l!=null&&(l.unstable_strictMode===!0&&(_=!0),l.identifierPrefix!==void 0&&(b=l.identifierPrefix),l.onRecoverableError!==void 0&&(x=l.onRecoverableError)),n=Ix(n,null,i,1,l??null,_,!1,b,x),i[Os]=n.current,Fu(i),p)for(i=0;i<p.length;i++)l=p[i],_=l._getVersion,_=_(l._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[l,_]:n.mutableSourceEagerHydrationData.push(l,_);return new Dp(n)};hn.render=function(i,n,l){if(!Lp(n))throw Error(Fe(200));return Rp(null,i,n,!1,l)};hn.unmountComponentAtNode=function(i){if(!Lp(i))throw Error(Fe(40));return i._reactRootContainer?(Po(function(){Rp(null,null,i,!1,function(){i._reactRootContainer=null,i[Os]=null})}),!0):!1};hn.unstable_batchedUpdates=o0;hn.unstable_renderSubtreeIntoContainer=function(i,n,l,p){if(!Lp(l))throw Error(Fe(200));if(i==null||i._reactInternals===void 0)throw Error(Fe(38));return Rp(i,n,l,!1,p)};hn.version="18.2.0-next-9e3b772b8-20220608";function zx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zx)}catch(i){console.error(i)}}zx(),I_.exports=hn;var _4=I_.exports,Q1=_4;vm.createRoot=Q1.createRoot,vm.hydrateRoot=Q1.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zu(){return Zu=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(i[p]=l[p])}return i},Zu.apply(this,arguments)}var Ia;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Ia||(Ia={}));const e_="popstate";function v4(i){i===void 0&&(i={});function n(p,_){let{pathname:b,search:x,hash:d}=p.location;return dg("",{pathname:b,search:x,hash:d},_.state&&_.state.usr||null,_.state&&_.state.key||"default")}function l(p,_){return typeof _=="string"?_:pp(_)}return w4(n,l,null,i)}function bi(i,n){if(i===!1||i===null||typeof i>"u")throw new Error(n)}function Ax(i,n){if(!i){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function x4(){return Math.random().toString(36).substr(2,8)}function t_(i,n){return{usr:i.state,key:i.key,idx:n}}function dg(i,n,l,p){return l===void 0&&(l=null),Zu({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof n=="string"?Kl(n):n,{state:l,key:n&&n.key||p||x4()})}function pp(i){let{pathname:n="/",search:l="",hash:p=""}=i;return l&&l!=="?"&&(n+=l.charAt(0)==="?"?l:"?"+l),p&&p!=="#"&&(n+=p.charAt(0)==="#"?p:"#"+p),n}function Kl(i){let n={};if(i){let l=i.indexOf("#");l>=0&&(n.hash=i.substr(l),i=i.substr(0,l));let p=i.indexOf("?");p>=0&&(n.search=i.substr(p),i=i.substr(0,p)),i&&(n.pathname=i)}return n}function w4(i,n,l,p){p===void 0&&(p={});let{window:_=document.defaultView,v5Compat:b=!1}=p,x=_.history,d=Ia.Pop,R=null,W=re();W==null&&(W=0,x.replaceState(Zu({},x.state,{idx:W}),""));function re(){return(x.state||{idx:null}).idx}function K(){d=Ia.Pop;let $e=re(),oe=$e==null?null:$e-W;W=$e,R&&R({action:d,location:ze.location,delta:oe})}function U($e,oe){d=Ia.Push;let Q=dg(ze.location,$e,oe);l&&l(Q,$e),W=re()+1;let le=t_(Q,W),xe=ze.createHref(Q);try{x.pushState(le,"",xe)}catch(je){if(je instanceof DOMException&&je.name==="DataCloneError")throw je;_.location.assign(xe)}b&&R&&R({action:d,location:ze.location,delta:1})}function Te($e,oe){d=Ia.Replace;let Q=dg(ze.location,$e,oe);l&&l(Q,$e),W=re();let le=t_(Q,W),xe=ze.createHref(Q);x.replaceState(le,"",xe),b&&R&&R({action:d,location:ze.location,delta:0})}function ke($e){let oe=_.location.origin!=="null"?_.location.origin:_.location.href,Q=typeof $e=="string"?$e:pp($e);return Q=Q.replace(/ $/,"%20"),bi(oe,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,oe)}let ze={get action(){return d},get location(){return i(_,x)},listen($e){if(R)throw new Error("A history only accepts one active listener");return _.addEventListener(e_,K),R=$e,()=>{_.removeEventListener(e_,K),R=null}},createHref($e){return n(_,$e)},createURL:ke,encodeLocation($e){let oe=ke($e);return{pathname:oe.pathname,search:oe.search,hash:oe.hash}},push:U,replace:Te,go($e){return x.go($e)}};return ze}var i_;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(i_||(i_={}));function b4(i,n,l){l===void 0&&(l="/");let p=typeof n=="string"?Kl(n):n,_=Zl(p.pathname||"/",l);if(_==null)return null;let b=Mx(i);S4(b);let x=null;for(let d=0;x==null&&d<b.length;++d){let R=L4(_);x=M4(b[d],R)}return x}function Mx(i,n,l,p){n===void 0&&(n=[]),l===void 0&&(l=[]),p===void 0&&(p="");let _=(b,x,d)=>{let R={relativePath:d===void 0?b.path||"":d,caseSensitive:b.caseSensitive===!0,childrenIndex:x,route:b};R.relativePath.startsWith("/")&&(bi(R.relativePath.startsWith(p),'Absolute route path "'+R.relativePath+'" nested under path '+('"'+p+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),R.relativePath=R.relativePath.slice(p.length));let W=Ba([p,R.relativePath]),re=l.concat(R);b.children&&b.children.length>0&&(bi(b.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+W+'".')),Mx(b.children,n,re,W)),!(b.path==null&&!b.index)&&n.push({path:W,score:z4(W,b.index),routesMeta:re})};return i.forEach((b,x)=>{var d;if(b.path===""||!((d=b.path)!=null&&d.includes("?")))_(b,x);else for(let R of Dx(b.path))_(b,x,R)}),n}function Dx(i){let n=i.split("/");if(n.length===0)return[];let[l,...p]=n,_=l.endsWith("?"),b=l.replace(/\?$/,"");if(p.length===0)return _?[b,""]:[b];let x=Dx(p.join("/")),d=[];return d.push(...x.map(R=>R===""?b:[b,R].join("/"))),_&&d.push(...x),d.map(R=>i.startsWith("/")&&R===""?"/":R)}function S4(i){i.sort((n,l)=>n.score!==l.score?l.score-n.score:A4(n.routesMeta.map(p=>p.childrenIndex),l.routesMeta.map(p=>p.childrenIndex)))}const T4=/^:[\w-]+$/,C4=3,E4=2,k4=1,I4=10,P4=-2,r_=i=>i==="*";function z4(i,n){let l=i.split("/"),p=l.length;return l.some(r_)&&(p+=P4),n&&(p+=E4),l.filter(_=>!r_(_)).reduce((_,b)=>_+(T4.test(b)?C4:b===""?k4:I4),p)}function A4(i,n){return i.length===n.length&&i.slice(0,-1).every((p,_)=>p===n[_])?i[i.length-1]-n[n.length-1]:0}function M4(i,n){let{routesMeta:l}=i,p={},_="/",b=[];for(let x=0;x<l.length;++x){let d=l[x],R=x===l.length-1,W=_==="/"?n:n.slice(_.length)||"/",re=pg({path:d.relativePath,caseSensitive:d.caseSensitive,end:R},W);if(!re)return null;Object.assign(p,re.params);let K=d.route;b.push({params:p,pathname:Ba([_,re.pathname]),pathnameBase:O4(Ba([_,re.pathnameBase])),route:K}),re.pathnameBase!=="/"&&(_=Ba([_,re.pathnameBase]))}return b}function pg(i,n){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[l,p]=D4(i.path,i.caseSensitive,i.end),_=n.match(l);if(!_)return null;let b=_[0],x=b.replace(/(.)\/+$/,"$1"),d=_.slice(1);return{params:p.reduce((W,re,K)=>{let{paramName:U,isOptional:Te}=re;if(U==="*"){let ze=d[K]||"";x=b.slice(0,b.length-ze.length).replace(/(.)\/+$/,"$1")}const ke=d[K];return Te&&!ke?W[U]=void 0:W[U]=(ke||"").replace(/%2F/g,"/"),W},{}),pathname:b,pathnameBase:x,pattern:i}}function D4(i,n,l){n===void 0&&(n=!1),l===void 0&&(l=!0),Ax(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let p=[],_="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,d,R)=>(p.push({paramName:d,isOptional:R!=null}),R?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(p.push({paramName:"*"}),_+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?_+="\\/*$":i!==""&&i!=="/"&&(_+="(?:(?=\\/|$))"),[new RegExp(_,n?void 0:"i"),p]}function L4(i){try{return i.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Ax(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),i}}function Zl(i,n){if(n==="/")return i;if(!i.toLowerCase().startsWith(n.toLowerCase()))return null;let l=n.endsWith("/")?n.length-1:n.length,p=i.charAt(l);return p&&p!=="/"?null:i.slice(l)||"/"}function R4(i,n){n===void 0&&(n="/");let{pathname:l,search:p="",hash:_=""}=typeof i=="string"?Kl(i):i;return{pathname:l?l.startsWith("/")?l:F4(l,n):n,search:N4(p),hash:j4(_)}}function F4(i,n){let l=n.replace(/\/+$/,"").split("/");return i.split("/").forEach(_=>{_===".."?l.length>1&&l.pop():_!=="."&&l.push(_)}),l.length>1?l.join("/"):"/"}function ym(i,n,l,p){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(p)+"].  Please separate it out to the ")+("`to."+l+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function B4(i){return i.filter((n,l)=>l===0||n.route.path&&n.route.path.length>0)}function Lx(i,n){let l=B4(i);return n?l.map((p,_)=>_===i.length-1?p.pathname:p.pathnameBase):l.map(p=>p.pathnameBase)}function Rx(i,n,l,p){p===void 0&&(p=!1);let _;typeof i=="string"?_=Kl(i):(_=Zu({},i),bi(!_.pathname||!_.pathname.includes("?"),ym("?","pathname","search",_)),bi(!_.pathname||!_.pathname.includes("#"),ym("#","pathname","hash",_)),bi(!_.search||!_.search.includes("#"),ym("#","search","hash",_)));let b=i===""||_.pathname==="",x=b?"/":_.pathname,d;if(x==null)d=l;else{let K=n.length-1;if(!p&&x.startsWith("..")){let U=x.split("/");for(;U[0]==="..";)U.shift(),K-=1;_.pathname=U.join("/")}d=K>=0?n[K]:"/"}let R=R4(_,d),W=x&&x!=="/"&&x.endsWith("/"),re=(b||x===".")&&l.endsWith("/");return!R.pathname.endsWith("/")&&(W||re)&&(R.pathname+="/"),R}const Ba=i=>i.join("/").replace(/\/\/+/g,"/"),O4=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),N4=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,j4=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function V4(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const Fx=["post","put","patch","delete"];new Set(Fx);const U4=["get",...Fx];new Set(U4);/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gu(){return Gu=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(i[p]=l[p])}return i},Gu.apply(this,arguments)}const Fp=Ae.createContext(null),Bx=Ae.createContext(null),$a=Ae.createContext(null),Bp=Ae.createContext(null),Mo=Ae.createContext({outlet:null,matches:[],isDataRoute:!1}),Ox=Ae.createContext(null);function $4(i,n){let{relative:l}=n===void 0?{}:n;Ju()||bi(!1);let{basename:p,navigator:_}=Ae.useContext($a),{hash:b,pathname:x,search:d}=Op(i,{relative:l}),R=x;return p!=="/"&&(R=x==="/"?p:Ba([p,x])),_.createHref({pathname:R,search:d,hash:b})}function Ju(){return Ae.useContext(Bp)!=null}function Qu(){return Ju()||bi(!1),Ae.useContext(Bp).location}function Nx(i){Ae.useContext($a).static||Ae.useLayoutEffect(i)}function q4(){let{isDataRoute:i}=Ae.useContext(Mo);return i?r5():Z4()}function Z4(){Ju()||bi(!1);let i=Ae.useContext(Fp),{basename:n,future:l,navigator:p}=Ae.useContext($a),{matches:_}=Ae.useContext(Mo),{pathname:b}=Qu(),x=JSON.stringify(Lx(_,l.v7_relativeSplatPath)),d=Ae.useRef(!1);return Nx(()=>{d.current=!0}),Ae.useCallback(function(W,re){if(re===void 0&&(re={}),!d.current)return;if(typeof W=="number"){p.go(W);return}let K=Rx(W,JSON.parse(x),b,re.relative==="path");i==null&&n!=="/"&&(K.pathname=K.pathname==="/"?n:Ba([n,K.pathname])),(re.replace?p.replace:p.push)(K,re.state,re)},[n,p,x,b,i])}function Op(i,n){let{relative:l}=n===void 0?{}:n,{future:p}=Ae.useContext($a),{matches:_}=Ae.useContext(Mo),{pathname:b}=Qu(),x=JSON.stringify(Lx(_,p.v7_relativeSplatPath));return Ae.useMemo(()=>Rx(i,JSON.parse(x),b,l==="path"),[i,x,b,l])}function G4(i,n){return H4(i,n)}function H4(i,n,l,p){Ju()||bi(!1);let{navigator:_}=Ae.useContext($a),{matches:b}=Ae.useContext(Mo),x=b[b.length-1],d=x?x.params:{};x&&x.pathname;let R=x?x.pathnameBase:"/";x&&x.route;let W=Qu(),re;if(n){var K;let $e=typeof n=="string"?Kl(n):n;R==="/"||(K=$e.pathname)!=null&&K.startsWith(R)||bi(!1),re=$e}else re=W;let U=re.pathname||"/",Te=U;if(R!=="/"){let $e=R.replace(/^\//,"").split("/");Te="/"+U.replace(/^\//,"").split("/").slice($e.length).join("/")}let ke=b4(i,{pathname:Te}),ze=J4(ke&&ke.map($e=>Object.assign({},$e,{params:Object.assign({},d,$e.params),pathname:Ba([R,_.encodeLocation?_.encodeLocation($e.pathname).pathname:$e.pathname]),pathnameBase:$e.pathnameBase==="/"?R:Ba([R,_.encodeLocation?_.encodeLocation($e.pathnameBase).pathname:$e.pathnameBase])})),b,l,p);return n&&ze?Ae.createElement(Bp.Provider,{value:{location:Gu({pathname:"/",search:"",hash:"",state:null,key:"default"},re),navigationType:Ia.Pop}},ze):ze}function W4(){let i=i5(),n=V4(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),l=i instanceof Error?i.stack:null,_={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Ae.createElement(Ae.Fragment,null,Ae.createElement("h2",null,"Unexpected Application Error!"),Ae.createElement("h3",{style:{fontStyle:"italic"}},n),l?Ae.createElement("pre",{style:_},l):null,null)}const K4=Ae.createElement(W4,null);class X4 extends Ae.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,l){return l.location!==n.location||l.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:l.error,location:l.location,revalidation:n.revalidation||l.revalidation}}componentDidCatch(n,l){console.error("React Router caught the following error during render",n,l)}render(){return this.state.error!==void 0?Ae.createElement(Mo.Provider,{value:this.props.routeContext},Ae.createElement(Ox.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Y4(i){let{routeContext:n,match:l,children:p}=i,_=Ae.useContext(Fp);return _&&_.static&&_.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(_.staticContext._deepestRenderedBoundaryId=l.route.id),Ae.createElement(Mo.Provider,{value:n},p)}function J4(i,n,l,p){var _;if(n===void 0&&(n=[]),l===void 0&&(l=null),p===void 0&&(p=null),i==null){var b;if((b=l)!=null&&b.errors)i=l.matches;else return null}let x=i,d=(_=l)==null?void 0:_.errors;if(d!=null){let re=x.findIndex(K=>K.route.id&&(d==null?void 0:d[K.route.id]));re>=0||bi(!1),x=x.slice(0,Math.min(x.length,re+1))}let R=!1,W=-1;if(l&&p&&p.v7_partialHydration)for(let re=0;re<x.length;re++){let K=x[re];if((K.route.HydrateFallback||K.route.hydrateFallbackElement)&&(W=re),K.route.id){let{loaderData:U,errors:Te}=l,ke=K.route.loader&&U[K.route.id]===void 0&&(!Te||Te[K.route.id]===void 0);if(K.route.lazy||ke){R=!0,W>=0?x=x.slice(0,W+1):x=[x[0]];break}}}return x.reduceRight((re,K,U)=>{let Te,ke=!1,ze=null,$e=null;l&&(Te=d&&K.route.id?d[K.route.id]:void 0,ze=K.route.errorElement||K4,R&&(W<0&&U===0?(n5("route-fallback",!1),ke=!0,$e=null):W===U&&(ke=!0,$e=K.route.hydrateFallbackElement||null)));let oe=n.concat(x.slice(0,U+1)),Q=()=>{let le;return Te?le=ze:ke?le=$e:K.route.Component?le=Ae.createElement(K.route.Component,null):K.route.element?le=K.route.element:le=re,Ae.createElement(Y4,{match:K,routeContext:{outlet:re,matches:oe,isDataRoute:l!=null},children:le})};return l&&(K.route.ErrorBoundary||K.route.errorElement||U===0)?Ae.createElement(X4,{location:l.location,revalidation:l.revalidation,component:ze,error:Te,children:Q(),routeContext:{outlet:null,matches:oe,isDataRoute:!0}}):Q()},null)}var jx=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(jx||{}),fp=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(fp||{});function Q4(i){let n=Ae.useContext(Fp);return n||bi(!1),n}function e5(i){let n=Ae.useContext(Bx);return n||bi(!1),n}function t5(i){let n=Ae.useContext(Mo);return n||bi(!1),n}function Vx(i){let n=t5(),l=n.matches[n.matches.length-1];return l.route.id||bi(!1),l.route.id}function i5(){var i;let n=Ae.useContext(Ox),l=e5(fp.UseRouteError),p=Vx(fp.UseRouteError);return n!==void 0?n:(i=l.errors)==null?void 0:i[p]}function r5(){let{router:i}=Q4(jx.UseNavigateStable),n=Vx(fp.UseNavigateStable),l=Ae.useRef(!1);return Nx(()=>{l.current=!0}),Ae.useCallback(function(_,b){b===void 0&&(b={}),l.current&&(typeof _=="number"?i.navigate(_):i.navigate(_,Gu({fromRouteId:n},b)))},[i,n])}const n_={};function n5(i,n,l){!n&&!n_[i]&&(n_[i]=!0)}function yu(i){bi(!1)}function s5(i){let{basename:n="/",children:l=null,location:p,navigationType:_=Ia.Pop,navigator:b,static:x=!1,future:d}=i;Ju()&&bi(!1);let R=n.replace(/^\/*/,"/"),W=Ae.useMemo(()=>({basename:R,navigator:b,static:x,future:Gu({v7_relativeSplatPath:!1},d)}),[R,d,b,x]);typeof p=="string"&&(p=Kl(p));let{pathname:re="/",search:K="",hash:U="",state:Te=null,key:ke="default"}=p,ze=Ae.useMemo(()=>{let $e=Zl(re,R);return $e==null?null:{location:{pathname:$e,search:K,hash:U,state:Te,key:ke},navigationType:_}},[R,re,K,U,Te,ke,_]);return ze==null?null:Ae.createElement($a.Provider,{value:W},Ae.createElement(Bp.Provider,{children:l,value:ze}))}function a5(i){let{children:n,location:l}=i;return G4(fg(n),l)}new Promise(()=>{});function fg(i,n){n===void 0&&(n=[]);let l=[];return Ae.Children.forEach(i,(p,_)=>{if(!Ae.isValidElement(p))return;let b=[...n,_];if(p.type===Ae.Fragment){l.push.apply(l,fg(p.props.children,b));return}p.type!==yu&&bi(!1),!p.props.index||!p.props.children||bi(!1);let x={id:p.props.id||b.join("-"),caseSensitive:p.props.caseSensitive,element:p.props.element,Component:p.props.Component,index:p.props.index,path:p.props.path,loader:p.props.loader,action:p.props.action,errorElement:p.props.errorElement,ErrorBoundary:p.props.ErrorBoundary,hasErrorBoundary:p.props.ErrorBoundary!=null||p.props.errorElement!=null,shouldRevalidate:p.props.shouldRevalidate,handle:p.props.handle,lazy:p.props.lazy};p.props.children&&(x.children=fg(p.props.children,b)),l.push(x)}),l}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mp(){return mp=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(i[p]=l[p])}return i},mp.apply(this,arguments)}function Ux(i,n){if(i==null)return{};var l={},p=Object.keys(i),_,b;for(b=0;b<p.length;b++)_=p[b],!(n.indexOf(_)>=0)&&(l[_]=i[_]);return l}function o5(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function l5(i,n){return i.button===0&&(!n||n==="_self")&&!o5(i)}const c5=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],u5=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],h5="6";try{window.__reactRouterVersion=h5}catch{}const d5=Ae.createContext({isTransitioning:!1}),p5="startTransition",s_=lb[p5];function f5(i){let{basename:n,children:l,future:p,window:_}=i,b=Ae.useRef();b.current==null&&(b.current=v4({window:_,v5Compat:!0}));let x=b.current,[d,R]=Ae.useState({action:x.action,location:x.location}),{v7_startTransition:W}=p||{},re=Ae.useCallback(K=>{W&&s_?s_(()=>R(K)):R(K)},[R,W]);return Ae.useLayoutEffect(()=>x.listen(re),[x,re]),Ae.createElement(s5,{basename:n,children:l,location:d.location,navigationType:d.action,navigator:x,future:p})}const m5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",g5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jd=Ae.forwardRef(function(n,l){let{onClick:p,relative:_,reloadDocument:b,replace:x,state:d,target:R,to:W,preventScrollReset:re,unstable_viewTransition:K}=n,U=Ux(n,c5),{basename:Te}=Ae.useContext($a),ke,ze=!1;if(typeof W=="string"&&g5.test(W)&&(ke=W,m5))try{let le=new URL(window.location.href),xe=W.startsWith("//")?new URL(le.protocol+W):new URL(W),je=Zl(xe.pathname,Te);xe.origin===le.origin&&je!=null?W=je+xe.search+xe.hash:ze=!0}catch{}let $e=$4(W,{relative:_}),oe=_5(W,{replace:x,state:d,target:R,preventScrollReset:re,relative:_,unstable_viewTransition:K});function Q(le){p&&p(le),le.defaultPrevented||oe(le)}return Ae.createElement("a",mp({},U,{href:ke||$e,onClick:ze||b?p:Q,ref:l,target:R}))}),_m=Ae.forwardRef(function(n,l){let{"aria-current":p="page",caseSensitive:_=!1,className:b="",end:x=!1,style:d,to:R,unstable_viewTransition:W,children:re}=n,K=Ux(n,u5),U=Op(R,{relative:K.relative}),Te=Qu(),ke=Ae.useContext(Bx),{navigator:ze,basename:$e}=Ae.useContext($a),oe=ke!=null&&v5(U)&&W===!0,Q=ze.encodeLocation?ze.encodeLocation(U).pathname:U.pathname,le=Te.pathname,xe=ke&&ke.navigation&&ke.navigation.location?ke.navigation.location.pathname:null;_||(le=le.toLowerCase(),xe=xe?xe.toLowerCase():null,Q=Q.toLowerCase()),xe&&$e&&(xe=Zl(xe,$e)||xe);const je=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let Xe=le===Q||!x&&le.startsWith(Q)&&le.charAt(je)==="/",Ke=xe!=null&&(xe===Q||!x&&xe.startsWith(Q)&&xe.charAt(Q.length)==="/"),tt={isActive:Xe,isPending:Ke,isTransitioning:oe},Dt=Xe?p:void 0,xt;typeof b=="function"?xt=b(tt):xt=[b,Xe?"active":null,Ke?"pending":null,oe?"transitioning":null].filter(Boolean).join(" ");let Ot=typeof d=="function"?d(tt):d;return Ae.createElement(jd,mp({},K,{"aria-current":Dt,className:xt,ref:l,style:Ot,to:R,unstable_viewTransition:W}),typeof re=="function"?re(tt):re)});var mg;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(mg||(mg={}));var a_;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(a_||(a_={}));function y5(i){let n=Ae.useContext(Fp);return n||bi(!1),n}function _5(i,n){let{target:l,replace:p,state:_,preventScrollReset:b,relative:x,unstable_viewTransition:d}=n===void 0?{}:n,R=q4(),W=Qu(),re=Op(i,{relative:x});return Ae.useCallback(K=>{if(l5(K,l)){K.preventDefault();let U=p!==void 0?p:pp(W)===pp(re);R(i,{replace:U,state:_,preventScrollReset:b,relative:x,unstable_viewTransition:d})}},[W,R,re,p,_,l,i,b,x,d])}function v5(i,n){n===void 0&&(n={});let l=Ae.useContext(d5);l==null&&bi(!1);let{basename:p}=y5(mg.useViewTransitionState),_=Op(i,{relative:n.relative});if(!l.isTransitioning)return!1;let b=Zl(l.currentLocation.pathname,p)||l.currentLocation.pathname,x=Zl(l.nextLocation.pathname,p)||l.nextLocation.pathname;return pg(_.pathname,x)!=null||pg(_.pathname,b)!=null}var $x={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o_=Rs.createContext&&Rs.createContext($x),x5=["attr","size","title"];function w5(i,n){if(i==null)return{};var l=b5(i,n),p,_;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(i);for(_=0;_<b.length;_++)p=b[_],!(n.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(i,p)&&(l[p]=i[p])}return l}function b5(i,n){if(i==null)return{};var l={};for(var p in i)if(Object.prototype.hasOwnProperty.call(i,p)){if(n.indexOf(p)>=0)continue;l[p]=i[p]}return l}function gp(){return gp=Object.assign?Object.assign.bind():function(i){for(var n=1;n<arguments.length;n++){var l=arguments[n];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(i[p]=l[p])}return i},gp.apply(this,arguments)}function l_(i,n){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);n&&(p=p.filter(function(_){return Object.getOwnPropertyDescriptor(i,_).enumerable})),l.push.apply(l,p)}return l}function yp(i){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?arguments[n]:{};n%2?l_(Object(l),!0).forEach(function(p){S5(i,p,l[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):l_(Object(l)).forEach(function(p){Object.defineProperty(i,p,Object.getOwnPropertyDescriptor(l,p))})}return i}function S5(i,n,l){return n=T5(n),n in i?Object.defineProperty(i,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[n]=l,i}function T5(i){var n=C5(i,"string");return typeof n=="symbol"?n:n+""}function C5(i,n){if(typeof i!="object"||!i)return i;var l=i[Symbol.toPrimitive];if(l!==void 0){var p=l.call(i,n||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(i)}function qx(i){return i&&i.map((n,l)=>Rs.createElement(n.tag,yp({key:l},n.attr),qx(n.child)))}function yi(i){return n=>Rs.createElement(E5,gp({attr:yp({},i.attr)},n),qx(i.child))}function E5(i){var n=l=>{var{attr:p,size:_,title:b}=i,x=w5(i,x5),d=_||l.size||"1em",R;return l.className&&(R=l.className),i.className&&(R=(R?R+" ":"")+i.className),Rs.createElement("svg",gp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,p,x,{className:R,style:yp(yp({color:i.color||l.color},l.style),i.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),b&&Rs.createElement("title",null,b),i.children)};return o_!==void 0?Rs.createElement(o_.Consumer,null,l=>n(l)):n($x)}function bo(i){return yi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"},child:[]}]})(i)}function k5(){return ae.jsxs(ae.Fragment,{children:[ae.jsx("div",{className:"center",children:ae.jsx("h1",{children:"G | GEOMTICA"})}),ae.jsxs("div",{className:"grid",children:[ae.jsxs("a",{className:"card",children:[ae.jsxs("div",{className:"card_title",children:[ae.jsx("h2",{children:"SIG-BDE"}),ae.jsx("span",{children:ae.jsx(bo,{})})]}),ae.jsx("p",{children:"Sistemas de informacin Geogrfica y Base de Datos Espaciales"})]}),ae.jsxs("a",{className:"card",children:[ae.jsxs("div",{className:"card_title",children:[ae.jsx("h2",{children:"AED"}),ae.jsx("span",{children:ae.jsx(bo,{})})]}),ae.jsx("p",{children:"Anlisis Exploratorio de Datos para variables ambientales y antrpicas"})]}),ae.jsxs("a",{className:"card",children:[ae.jsxs("div",{className:"card_title",children:[ae.jsx("h2",{children:"MODELACIN"}),ae.jsx("span",{children:ae.jsx(bo,{})})]}),ae.jsx("p",{children:"Modelacin Espacial de eventos ambientales"})]}),ae.jsxs("a",{className:"card",children:[ae.jsxs("div",{className:"card_title",children:[ae.jsx("h2",{children:"GNSS "}),ae.jsx("span",{children:ae.jsx(bo,{})})]}),ae.jsx("p",{children:"Levantamiento de informacin por Sistema Satelital de Navegacin Global y topografa convencional"})]})]})]})}const I5="/perfil.jpeg";var Np={},P5=function(){var i=document.getSelection();if(!i.rangeCount)return function(){};for(var n=document.activeElement,l=[],p=0;p<i.rangeCount;p++)l.push(i.getRangeAt(p));switch(n.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":n.blur();break;default:n=null;break}return i.removeAllRanges(),function(){i.type==="Caret"&&i.removeAllRanges(),i.rangeCount||l.forEach(function(_){i.addRange(_)}),n&&n.focus()}},z5=P5,c_={"text/plain":"Text","text/html":"Url",default:"Text"},A5="Copy to clipboard: #{key}, Enter";function M5(i){var n=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return i.replace(/#{\s*key\s*}/g,n)}function D5(i,n){var l,p,_,b,x,d,R=!1;n||(n={}),l=n.debug||!1;try{_=z5(),b=document.createRange(),x=document.getSelection(),d=document.createElement("span"),d.textContent=i,d.ariaHidden="true",d.style.all="unset",d.style.position="fixed",d.style.top=0,d.style.clip="rect(0, 0, 0, 0)",d.style.whiteSpace="pre",d.style.webkitUserSelect="text",d.style.MozUserSelect="text",d.style.msUserSelect="text",d.style.userSelect="text",d.addEventListener("copy",function(re){if(re.stopPropagation(),n.format)if(re.preventDefault(),typeof re.clipboardData>"u"){l&&console.warn("unable to use e.clipboardData"),l&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var K=c_[n.format]||c_.default;window.clipboardData.setData(K,i)}else re.clipboardData.clearData(),re.clipboardData.setData(n.format,i);n.onCopy&&(re.preventDefault(),n.onCopy(re.clipboardData))}),document.body.appendChild(d),b.selectNodeContents(d),x.addRange(b);var W=document.execCommand("copy");if(!W)throw new Error("copy command was unsuccessful");R=!0}catch(re){l&&console.error("unable to copy using execCommand: ",re),l&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(n.format||"text",i),n.onCopy&&n.onCopy(window.clipboardData),R=!0}catch(K){l&&console.error("unable to copy using clipboardData: ",K),l&&console.error("falling back to prompt"),p=M5("message"in n?n.message:A5),window.prompt(p,i)}}finally{x&&(typeof x.removeRange=="function"?x.removeRange(b):x.removeAllRanges()),d&&document.body.removeChild(d),_()}return R}var L5=D5;function gg(i){"@babel/helpers - typeof";return gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},gg(i)}Object.defineProperty(Np,"__esModule",{value:!0});Np.CopyToClipboard=void 0;var Ed=Zx(Ae),R5=Zx(L5),F5=["text","onCopy","options","children"];function Zx(i){return i&&i.__esModule?i:{default:i}}function u_(i,n){var l=Object.keys(i);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(i);n&&(p=p.filter(function(_){return Object.getOwnPropertyDescriptor(i,_).enumerable})),l.push.apply(l,p)}return l}function h_(i){for(var n=1;n<arguments.length;n++){var l=arguments[n]!=null?arguments[n]:{};n%2?u_(Object(l),!0).forEach(function(p){m0(i,p,l[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(l)):u_(Object(l)).forEach(function(p){Object.defineProperty(i,p,Object.getOwnPropertyDescriptor(l,p))})}return i}function B5(i,n){if(i==null)return{};var l=O5(i,n),p,_;if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(i);for(_=0;_<b.length;_++)p=b[_],!(n.indexOf(p)>=0)&&Object.prototype.propertyIsEnumerable.call(i,p)&&(l[p]=i[p])}return l}function O5(i,n){if(i==null)return{};var l={},p=Object.keys(i),_,b;for(b=0;b<p.length;b++)_=p[b],!(n.indexOf(_)>=0)&&(l[_]=i[_]);return l}function N5(i,n){if(!(i instanceof n))throw new TypeError("Cannot call a class as a function")}function d_(i,n){for(var l=0;l<n.length;l++){var p=n[l];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(i,p.key,p)}}function j5(i,n,l){return n&&d_(i.prototype,n),l&&d_(i,l),Object.defineProperty(i,"prototype",{writable:!1}),i}function V5(i,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(n&&n.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),n&&yg(i,n)}function yg(i,n){return yg=Object.setPrototypeOf||function(p,_){return p.__proto__=_,p},yg(i,n)}function U5(i){var n=q5();return function(){var p=_p(i),_;if(n){var b=_p(this).constructor;_=Reflect.construct(p,arguments,b)}else _=p.apply(this,arguments);return $5(this,_)}}function $5(i,n){if(n&&(gg(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gx(i)}function Gx(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function q5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _p(i){return _p=Object.setPrototypeOf?Object.getPrototypeOf:function(l){return l.__proto__||Object.getPrototypeOf(l)},_p(i)}function m0(i,n,l){return n in i?Object.defineProperty(i,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[n]=l,i}var Hx=function(i){V5(l,i);var n=U5(l);function l(){var p;N5(this,l);for(var _=arguments.length,b=new Array(_),x=0;x<_;x++)b[x]=arguments[x];return p=n.call.apply(n,[this].concat(b)),m0(Gx(p),"onClick",function(d){var R=p.props,W=R.text,re=R.onCopy,K=R.children,U=R.options,Te=Ed.default.Children.only(K),ke=(0,R5.default)(W,U);re&&re(W,ke),Te&&Te.props&&typeof Te.props.onClick=="function"&&Te.props.onClick(d)}),p}return j5(l,[{key:"render",value:function(){var _=this.props;_.text,_.onCopy,_.options;var b=_.children,x=B5(_,F5),d=Ed.default.Children.only(b);return Ed.default.cloneElement(d,h_(h_({},x),{},{onClick:this.onClick}))}}]),l}(Ed.default.PureComponent);Np.CopyToClipboard=Hx;m0(Hx,"defaultProps",{onCopy:void 0,options:void 0});var Z5=Np,_g=Z5.CopyToClipboard;_g.CopyToClipboard=_g;var p_=_g;let G5={data:""},H5=i=>typeof window=="object"?((i?i.querySelector("#_goober"):window._goober)||Object.assign((i||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:i||G5,W5=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,K5=/\/\*[^]*?\*\/|  +/g,f_=/\n+/g,Ca=(i,n)=>{let l="",p="",_="";for(let b in i){let x=i[b];b[0]=="@"?b[1]=="i"?l=b+" "+x+";":p+=b[1]=="f"?Ca(x,b):b+"{"+Ca(x,b[1]=="k"?"":n)+"}":typeof x=="object"?p+=Ca(x,n?n.replace(/([^,])+/g,d=>b.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,R=>/&/.test(R)?R.replace(/&/g,d):d?d+" "+R:R)):b):x!=null&&(b=/^--/.test(b)?b:b.replace(/[A-Z]/g,"-$&").toLowerCase(),_+=Ca.p?Ca.p(b,x):b+":"+x+";")}return l+(n&&_?n+"{"+_+"}":_)+p},zs={},Wx=i=>{if(typeof i=="object"){let n="";for(let l in i)n+=l+Wx(i[l]);return n}return i},X5=(i,n,l,p,_)=>{let b=Wx(i),x=zs[b]||(zs[b]=(R=>{let W=0,re=11;for(;W<R.length;)re=101*re+R.charCodeAt(W++)>>>0;return"go"+re})(b));if(!zs[x]){let R=b!==i?i:(W=>{let re,K,U=[{}];for(;re=W5.exec(W.replace(K5,""));)re[4]?U.shift():re[3]?(K=re[3].replace(f_," ").trim(),U.unshift(U[0][K]=U[0][K]||{})):U[0][re[1]]=re[2].replace(f_," ").trim();return U[0]})(i);zs[x]=Ca(_?{["@keyframes "+x]:R}:R,l?"":"."+x)}let d=l&&zs.g?zs.g:null;return l&&(zs.g=zs[x]),((R,W,re,K)=>{K?W.data=W.data.replace(K,R):W.data.indexOf(R)===-1&&(W.data=re?R+W.data:W.data+R)})(zs[x],n,p,d),x},Y5=(i,n,l)=>i.reduce((p,_,b)=>{let x=n[b];if(x&&x.call){let d=x(l),R=d&&d.props&&d.props.className||/^go/.test(d)&&d;x=R?"."+R:d&&typeof d=="object"?d.props?"":Ca(d,""):d===!1?"":d}return p+_+(x??"")},"");function jp(i){let n=this||{},l=i.call?i(n.p):i;return X5(l.unshift?l.raw?Y5(l,[].slice.call(arguments,1),n.p):l.reduce((p,_)=>Object.assign(p,_&&_.call?_(n.p):_),{}):l,H5(n.target),n.g,n.o,n.k)}let Kx,vg,xg;jp.bind({g:1});let Vs=jp.bind({k:1});function J5(i,n,l,p){Ca.p=n,Kx=i,vg=l,xg=p}function qa(i,n){let l=this||{};return function(){let p=arguments;function _(b,x){let d=Object.assign({},b),R=d.className||_.className;l.p=Object.assign({theme:vg&&vg()},d),l.o=/ *go\d+/.test(R),d.className=jp.apply(l,p)+(R?" "+R:""),n&&(d.ref=x);let W=i;return i[0]&&(W=d.as||i,delete d.as),xg&&W[0]&&xg(d),Kx(W,d)}return n?n(_):_}}var Q5=i=>typeof i=="function",vp=(i,n)=>Q5(i)?i(n):i,eS=(()=>{let i=0;return()=>(++i).toString()})(),Xx=(()=>{let i;return()=>{if(i===void 0&&typeof window<"u"){let n=matchMedia("(prefers-reduced-motion: reduce)");i=!n||n.matches}return i}})(),tS=20,Yx=(i,n)=>{switch(n.type){case 0:return{...i,toasts:[n.toast,...i.toasts].slice(0,tS)};case 1:return{...i,toasts:i.toasts.map(b=>b.id===n.toast.id?{...b,...n.toast}:b)};case 2:let{toast:l}=n;return Yx(i,{type:i.toasts.find(b=>b.id===l.id)?1:0,toast:l});case 3:let{toastId:p}=n;return{...i,toasts:i.toasts.map(b=>b.id===p||p===void 0?{...b,dismissed:!0,visible:!1}:b)};case 4:return n.toastId===void 0?{...i,toasts:[]}:{...i,toasts:i.toasts.filter(b=>b.id!==n.toastId)};case 5:return{...i,pausedAt:n.time};case 6:let _=n.time-(i.pausedAt||0);return{...i,pausedAt:void 0,toasts:i.toasts.map(b=>({...b,pauseDuration:b.pauseDuration+_}))}}},Vd=[],Ud={toasts:[],pausedAt:void 0},Do=i=>{Ud=Yx(Ud,i),Vd.forEach(n=>{n(Ud)})},iS={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},rS=(i={})=>{let[n,l]=Ae.useState(Ud);Ae.useEffect(()=>(Vd.push(l),()=>{let _=Vd.indexOf(l);_>-1&&Vd.splice(_,1)}),[n]);let p=n.toasts.map(_=>{var b,x,d;return{...i,...i[_.type],..._,removeDelay:_.removeDelay||((b=i[_.type])==null?void 0:b.removeDelay)||(i==null?void 0:i.removeDelay),duration:_.duration||((x=i[_.type])==null?void 0:x.duration)||(i==null?void 0:i.duration)||iS[_.type],style:{...i.style,...(d=i[_.type])==null?void 0:d.style,..._.style}}});return{...n,toasts:p}},nS=(i,n="blank",l)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:n,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0,...l,id:(l==null?void 0:l.id)||eS()}),eh=i=>(n,l)=>{let p=nS(n,i,l);return Do({type:2,toast:p}),p.id},xr=(i,n)=>eh("blank")(i,n);xr.error=eh("error");xr.success=eh("success");xr.loading=eh("loading");xr.custom=eh("custom");xr.dismiss=i=>{Do({type:3,toastId:i})};xr.remove=i=>Do({type:4,toastId:i});xr.promise=(i,n,l)=>{let p=xr.loading(n.loading,{...l,...l==null?void 0:l.loading});return typeof i=="function"&&(i=i()),i.then(_=>{let b=n.success?vp(n.success,_):void 0;return b?xr.success(b,{id:p,...l,...l==null?void 0:l.success}):xr.dismiss(p),_}).catch(_=>{let b=n.error?vp(n.error,_):void 0;b?xr.error(b,{id:p,...l,...l==null?void 0:l.error}):xr.dismiss(p)}),i};var sS=(i,n)=>{Do({type:1,toast:{id:i,height:n}})},aS=()=>{Do({type:5,time:Date.now()})},ku=new Map,oS=1e3,lS=(i,n=oS)=>{if(ku.has(i))return;let l=setTimeout(()=>{ku.delete(i),Do({type:4,toastId:i})},n);ku.set(i,l)},cS=i=>{let{toasts:n,pausedAt:l}=rS(i);Ae.useEffect(()=>{if(l)return;let b=Date.now(),x=n.map(d=>{if(d.duration===1/0)return;let R=(d.duration||0)+d.pauseDuration-(b-d.createdAt);if(R<0){d.visible&&xr.dismiss(d.id);return}return setTimeout(()=>xr.dismiss(d.id),R)});return()=>{x.forEach(d=>d&&clearTimeout(d))}},[n,l]);let p=Ae.useCallback(()=>{l&&Do({type:6,time:Date.now()})},[l]),_=Ae.useCallback((b,x)=>{let{reverseOrder:d=!1,gutter:R=8,defaultPosition:W}=x||{},re=n.filter(Te=>(Te.position||W)===(b.position||W)&&Te.height),K=re.findIndex(Te=>Te.id===b.id),U=re.filter((Te,ke)=>ke<K&&Te.visible).length;return re.filter(Te=>Te.visible).slice(...d?[U+1]:[0,U]).reduce((Te,ke)=>Te+(ke.height||0)+R,0)},[n]);return Ae.useEffect(()=>{n.forEach(b=>{if(b.dismissed)lS(b.id,b.removeDelay);else{let x=ku.get(b.id);x&&(clearTimeout(x),ku.delete(b.id))}})},[n]),{toasts:n,handlers:{updateHeight:sS,startPause:aS,endPause:p,calculateOffset:_}}},uS=Vs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,hS=Vs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,dS=Vs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,pS=qa("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${hS} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${i=>i.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${dS} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,fS=Vs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,mS=qa("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${i=>i.secondary||"#e0e0e0"};
  border-right-color: ${i=>i.primary||"#616161"};
  animation: ${fS} 1s linear infinite;
`,gS=Vs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,yS=Vs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,_S=qa("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${i=>i.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${gS} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${yS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${i=>i.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,vS=qa("div")`
  position: absolute;
`,xS=qa("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,wS=Vs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,bS=qa("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${wS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,SS=({toast:i})=>{let{icon:n,type:l,iconTheme:p}=i;return n!==void 0?typeof n=="string"?Ae.createElement(bS,null,n):n:l==="blank"?null:Ae.createElement(xS,null,Ae.createElement(mS,{...p}),l!=="loading"&&Ae.createElement(vS,null,l==="error"?Ae.createElement(pS,{...p}):Ae.createElement(_S,{...p})))},TS=i=>`
0% {transform: translate3d(0,${i*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,CS=i=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${i*-150}%,-1px) scale(.6); opacity:0;}
`,ES="0%{opacity:0;} 100%{opacity:1;}",kS="0%{opacity:1;} 100%{opacity:0;}",IS=qa("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,PS=qa("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,zS=(i,n)=>{let l=i.includes("top")?1:-1,[p,_]=Xx()?[ES,kS]:[TS(l),CS(l)];return{animation:n?`${Vs(p)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Vs(_)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},AS=Ae.memo(({toast:i,position:n,style:l,children:p})=>{let _=i.height?zS(i.position||n||"top-center",i.visible):{opacity:0},b=Ae.createElement(SS,{toast:i}),x=Ae.createElement(PS,{...i.ariaProps},vp(i.message,i));return Ae.createElement(IS,{className:i.className,style:{..._,...l,...i.style}},typeof p=="function"?p({icon:b,message:x}):Ae.createElement(Ae.Fragment,null,b,x))});J5(Ae.createElement);var MS=({id:i,className:n,style:l,onHeightUpdate:p,children:_})=>{let b=Ae.useCallback(x=>{if(x){let d=()=>{let R=x.getBoundingClientRect().height;p(i,R)};d(),new MutationObserver(d).observe(x,{subtree:!0,childList:!0,characterData:!0})}},[i,p]);return Ae.createElement("div",{ref:b,className:n,style:l},_)},DS=(i,n)=>{let l=i.includes("top"),p=l?{top:0}:{bottom:0},_=i.includes("center")?{justifyContent:"center"}:i.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Xx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${n*(l?1:-1)}px)`,...p,..._}},LS=jp`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,kd=16,RS=({reverseOrder:i,position:n="top-center",toastOptions:l,gutter:p,children:_,containerStyle:b,containerClassName:x})=>{let{toasts:d,handlers:R}=cS(l);return Ae.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:kd,left:kd,right:kd,bottom:kd,pointerEvents:"none",...b},className:x,onMouseEnter:R.startPause,onMouseLeave:R.endPause},d.map(W=>{let re=W.position||n,K=R.calculateOffset(W,{reverseOrder:i,gutter:p,defaultPosition:n}),U=DS(re,K);return Ae.createElement(MS,{id:W.id,key:W.id,onHeightUpdate:R.updateHeight,className:W.visible?LS:"",style:U},W.type==="custom"?vp(W.message,W):_?_(W):Ae.createElement(AS,{toast:W,position:re}))}))};function FS(i){return yi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M220.8 123.3c1 .5 1.8 1.7 3 1.7 1.1 0 2.8-.4 2.9-1.5.2-1.4-1.9-2.3-3.2-2.9-1.7-.7-3.9-1-5.5-.1-.4.2-.8.7-.6 1.1.3 1.3 2.3 1.1 3.4 1.7zm-21.9 1.7c1.2 0 2-1.2 3-1.7 1.1-.6 3.1-.4 3.5-1.6.2-.4-.2-.9-.6-1.1-1.6-.9-3.8-.6-5.5.1-1.3.6-3.4 1.5-3.2 2.9.1 1 1.8 1.5 2.8 1.4zM420 403.8c-3.6-4-5.3-11.6-7.2-19.7-1.8-8.1-3.9-16.8-10.5-22.4-1.3-1.1-2.6-2.1-4-2.9-1.3-.8-2.7-1.5-4.1-2 9.2-27.3 5.6-54.5-3.7-79.1-11.4-30.1-31.3-56.4-46.5-74.4-17.1-21.5-33.7-41.9-33.4-72C311.1 85.4 315.7.1 234.8 0 132.4-.2 158 103.4 156.9 135.2c-1.7 23.4-6.4 41.8-22.5 64.7-18.9 22.5-45.5 58.8-58.1 96.7-6 17.9-8.8 36.1-6.2 53.3-6.5 5.8-11.4 14.7-16.6 20.2-4.2 4.3-10.3 5.9-17 8.3s-14 6-18.5 14.5c-2.1 3.9-2.8 8.1-2.8 12.4 0 3.9.6 7.9 1.2 11.8 1.2 8.1 2.5 15.7.8 20.8-5.2 14.4-5.9 24.4-2.2 31.7 3.8 7.3 11.4 10.5 20.1 12.3 17.3 3.6 40.8 2.7 59.3 12.5 19.8 10.4 39.9 14.1 55.9 10.4 11.6-2.6 21.1-9.6 25.9-20.2 12.5-.1 26.3-5.4 48.3-6.6 14.9-1.2 33.6 5.3 55.1 4.1.6 2.3 1.4 4.6 2.5 6.7v.1c8.3 16.7 23.8 24.3 40.3 23 16.6-1.3 34.1-11 48.3-27.9 13.6-16.4 36-23.2 50.9-32.2 7.4-4.5 13.4-10.1 13.9-18.3.4-8.2-4.4-17.3-15.5-29.7zM223.7 87.3c9.8-22.2 34.2-21.8 44-.4 6.5 14.2 3.6 30.9-4.3 40.4-1.6-.8-5.9-2.6-12.6-4.9 1.1-1.2 3.1-2.7 3.9-4.6 4.8-11.8-.2-27-9.1-27.3-7.3-.5-13.9 10.8-11.8 23-4.1-2-9.4-3.5-13-4.4-1-6.9-.3-14.6 2.9-21.8zM183 75.8c10.1 0 20.8 14.2 19.1 33.5-3.5 1-7.1 2.5-10.2 4.6 1.2-8.9-3.3-20.1-9.6-19.6-8.4.7-9.8 21.2-1.8 28.1 1 .8 1.9-.2-5.9 5.5-15.6-14.6-10.5-52.1 8.4-52.1zm-13.6 60.7c6.2-4.6 13.6-10 14.1-10.5 4.7-4.4 13.5-14.2 27.9-14.2 7.1 0 15.6 2.3 25.9 8.9 6.3 4.1 11.3 4.4 22.6 9.3 8.4 3.5 13.7 9.7 10.5 18.2-2.6 7.1-11 14.4-22.7 18.1-11.1 3.6-19.8 16-38.2 14.9-3.9-.2-7-1-9.6-2.1-8-3.5-12.2-10.4-20-15-8.6-4.8-13.2-10.4-14.7-15.3-1.4-4.9 0-9 4.2-12.3zm3.3 334c-2.7 35.1-43.9 34.4-75.3 18-29.9-15.8-68.6-6.5-76.5-21.9-2.4-4.7-2.4-12.7 2.6-26.4v-.2c2.4-7.6.6-16-.6-23.9-1.2-7.8-1.8-15 .9-20 3.5-6.7 8.5-9.1 14.8-11.3 10.3-3.7 11.8-3.4 19.6-9.9 5.5-5.7 9.5-12.9 14.3-18 5.1-5.5 10-8.1 17.7-6.9 8.1 1.2 15.1 6.8 21.9 16l19.6 35.6c9.5 19.9 43.1 48.4 41 68.9zm-1.4-25.9c-4.1-6.6-9.6-13.6-14.4-19.6 7.1 0 14.2-2.2 16.7-8.9 2.3-6.2 0-14.9-7.4-24.9-13.5-18.2-38.3-32.5-38.3-32.5-13.5-8.4-21.1-18.7-24.6-29.9s-3-23.3-.3-35.2c5.2-22.9 18.6-45.2 27.2-59.2 2.3-1.7.8 3.2-8.7 20.8-8.5 16.1-24.4 53.3-2.6 82.4.6-20.7 5.5-41.8 13.8-61.5 12-27.4 37.3-74.9 39.3-112.7 1.1.8 4.6 3.2 6.2 4.1 4.6 2.7 8.1 6.7 12.6 10.3 12.4 10 28.5 9.2 42.4 1.2 6.2-3.5 11.2-7.5 15.9-9 9.9-3.1 17.8-8.6 22.3-15 7.7 30.4 25.7 74.3 37.2 95.7 6.1 11.4 18.3 35.5 23.6 64.6 3.3-.1 7 .4 10.9 1.4 13.8-35.7-11.7-74.2-23.3-84.9-4.7-4.6-4.9-6.6-2.6-6.5 12.6 11.2 29.2 33.7 35.2 59 2.8 11.6 3.3 23.7.4 35.7 16.4 6.8 35.9 17.9 30.7 34.8-2.2-.1-3.2 0-4.2 0 3.2-10.1-3.9-17.6-22.8-26.1-19.6-8.6-36-8.6-38.3 12.5-12.1 4.2-18.3 14.7-21.4 27.3-2.8 11.2-3.6 24.7-4.4 39.9-.5 7.7-3.6 18-6.8 29-32.1 22.9-76.7 32.9-114.3 7.2zm257.4-11.5c-.9 16.8-41.2 19.9-63.2 46.5-13.2 15.7-29.4 24.4-43.6 25.5s-26.5-4.8-33.7-19.3c-4.7-11.1-2.4-23.1 1.1-36.3 3.7-14.2 9.2-28.8 9.9-40.6.8-15.2 1.7-28.5 4.2-38.7 2.6-10.3 6.6-17.2 13.7-21.1.3-.2.7-.3 1-.5.8 13.2 7.3 26.6 18.8 29.5 12.6 3.3 30.7-7.5 38.4-16.3 9-.3 15.7-.9 22.6 5.1 9.9 8.5 7.1 30.3 17.1 41.6 10.6 11.6 14 19.5 13.7 24.6zM173.3 148.7c2 1.9 4.7 4.5 8 7.1 6.6 5.2 15.8 10.6 27.3 10.6 11.6 0 22.5-5.9 31.8-10.8 4.9-2.6 10.9-7 14.8-10.4s5.9-6.3 3.1-6.6-2.6 2.6-6 5.1c-4.4 3.2-9.7 7.4-13.9 9.8-7.4 4.2-19.5 10.2-29.9 10.2s-18.7-4.8-24.9-9.7c-3.1-2.5-5.7-5-7.7-6.9-1.5-1.4-1.9-4.6-4.3-4.9-1.4-.1-1.8 3.7 1.7 6.5z"},child:[]}]})(i)}function BS(i){return yi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M316.3 452c-2.1 0-4.2-.6-6.1-1.6L291 439c-2.9-1.6-1.5-2.2-.5-2.5 3.8-1.3 4.6-1.6 8.7-4 .4-.2 1-.1 1.4.1l14.8 8.8c.5.3 1.3.3 1.8 0L375 408c.5-.3.9-.9.9-1.6v-66.7c0-.7-.3-1.3-.9-1.6l-57.8-33.3c-.5-.3-1.2-.3-1.8 0l-57.8 33.3c-.6.3-.9 1-.9 1.6v66.7c0 .6.4 1.2.9 1.5l15.8 9.1c8.6 4.3 13.9-.8 13.9-5.8v-65.9c0-.9.7-1.7 1.7-1.7h7.3c.9 0 1.7.7 1.7 1.7v65.9c0 11.5-6.2 18-17.1 18-3.3 0-6 0-13.3-3.6l-15.2-8.7c-3.7-2.2-6.1-6.2-6.1-10.5v-66.7c0-4.3 2.3-8.4 6.1-10.5l57.8-33.4c3.7-2.1 8.5-2.1 12.1 0l57.8 33.4c3.7 2.2 6.1 6.2 6.1 10.5v66.7c0 4.3-2.3 8.4-6.1 10.5l-57.8 33.4c-1.7 1.1-3.8 1.7-6 1.7zm46.7-65.8c0-12.5-8.4-15.8-26.2-18.2-18-2.4-19.8-3.6-19.8-7.8 0-3.5 1.5-8.1 14.8-8.1 11.9 0 16.3 2.6 18.1 10.6.2.8.8 1.3 1.6 1.3h7.5c.5 0 .9-.2 1.2-.5.3-.4.5-.8.4-1.3-1.2-13.8-10.3-20.2-28.8-20.2-16.5 0-26.3 7-26.3 18.6 0 12.7 9.8 16.1 25.6 17.7 18.9 1.9 20.4 4.6 20.4 8.3 0 6.5-5.2 9.2-17.4 9.2-15.3 0-18.7-3.8-19.8-11.4-.1-.8-.8-1.4-1.7-1.4h-7.5c-.9 0-1.7.7-1.7 1.7 0 9.7 5.3 21.3 30.6 21.3 18.5 0 29-7.2 29-19.8zm54.5-50.1c0 6.1-5 11.1-11.1 11.1s-11.1-5-11.1-11.1c0-6.3 5.2-11.1 11.1-11.1 6-.1 11.1 4.8 11.1 11.1zm-1.8 0c0-5.2-4.2-9.3-9.4-9.3-5.1 0-9.3 4.1-9.3 9.3 0 5.2 4.2 9.4 9.3 9.4 5.2-.1 9.4-4.3 9.4-9.4zm-4.5 6.2h-2.6c-.1-.6-.5-3.8-.5-3.9-.2-.7-.4-1.1-1.3-1.1h-2.2v5h-2.4v-12.5h4.3c1.5 0 4.4 0 4.4 3.3 0 2.3-1.5 2.8-2.4 3.1 1.7.1 1.8 1.2 2.1 2.8.1 1 .3 2.7.6 3.3zm-2.8-8.8c0-1.7-1.2-1.7-1.8-1.7h-2v3.5h1.9c1.6 0 1.9-1.1 1.9-1.8zM137.3 191c0-2.7-1.4-5.1-3.7-6.4l-61.3-35.3c-1-.6-2.2-.9-3.4-1h-.6c-1.2 0-2.3.4-3.4 1L3.7 184.6C1.4 185.9 0 188.4 0 191l.1 95c0 1.3.7 2.5 1.8 3.2 1.1.7 2.5.7 3.7 0L42 268.3c2.3-1.4 3.7-3.8 3.7-6.4v-44.4c0-2.6 1.4-5.1 3.7-6.4l15.5-8.9c1.2-.7 2.4-1 3.7-1 1.3 0 2.6.3 3.7 1l15.5 8.9c2.3 1.3 3.7 3.8 3.7 6.4v44.4c0 2.6 1.4 5.1 3.7 6.4l36.4 20.9c1.1.7 2.6.7 3.7 0 1.1-.6 1.8-1.9 1.8-3.2l.2-95zM472.5 87.3v176.4c0 2.6-1.4 5.1-3.7 6.4l-61.3 35.4c-2.3 1.3-5.1 1.3-7.4 0l-61.3-35.4c-2.3-1.3-3.7-3.8-3.7-6.4v-70.8c0-2.6 1.4-5.1 3.7-6.4l61.3-35.4c2.3-1.3 5.1-1.3 7.4 0l15.3 8.8c1.7 1 3.9-.3 3.9-2.2v-94c0-2.8 3-4.6 5.5-3.2l36.5 20.4c2.3 1.2 3.8 3.7 3.8 6.4zm-46 128.9c0-.7-.4-1.3-.9-1.6l-21-12.2c-.6-.3-1.3-.3-1.9 0l-21 12.2c-.6.3-.9.9-.9 1.6v24.3c0 .7.4 1.3.9 1.6l21 12.1c.6.3 1.3.3 1.8 0l21-12.1c.6-.3.9-.9.9-1.6v-24.3zm209.8-.7c2.3-1.3 3.7-3.8 3.7-6.4V192c0-2.6-1.4-5.1-3.7-6.4l-60.9-35.4c-2.3-1.3-5.1-1.3-7.4 0l-61.3 35.4c-2.3 1.3-3.7 3.8-3.7 6.4v70.8c0 2.7 1.4 5.1 3.7 6.4l60.9 34.7c2.2 1.3 5 1.3 7.3 0l36.8-20.5c2.5-1.4 2.5-5 0-6.4L550 241.6c-1.2-.7-1.9-1.9-1.9-3.2v-22.2c0-1.3.7-2.5 1.9-3.2l19.2-11.1c1.1-.7 2.6-.7 3.7 0l19.2 11.1c1.1.7 1.9 1.9 1.9 3.2v17.4c0 2.8 3.1 4.6 5.6 3.2l36.7-21.3zM559 219c-.4.3-.7.7-.7 1.2v13.6c0 .5.3 1 .7 1.2l11.8 6.8c.4.3 1 .3 1.4 0L584 235c.4-.3.7-.7.7-1.2v-13.6c0-.5-.3-1-.7-1.2l-11.8-6.8c-.4-.3-1-.3-1.4 0L559 219zm-254.2 43.5v-70.4c0-2.6-1.6-5.1-3.9-6.4l-61.1-35.2c-2.1-1.2-5-1.4-7.4 0l-61.1 35.2c-2.3 1.3-3.9 3.7-3.9 6.4v70.4c0 2.8 1.9 5.2 4 6.4l61.2 35.2c2.4 1.4 5.2 1.3 7.4 0l61-35.2c1.8-1 3.1-2.7 3.6-4.7.1-.5.2-1.1.2-1.7zm-74.3-124.9l-.8.5h1.1l-.3-.5zm76.2 130.2l-.4-.7v.9l.4-.2z"},child:[]}]})(i)}function OS(i){return yi({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6zM286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3zM167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4zm-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3z"},child:[]}]})(i)}function NS(i){return yi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M305.44954,462.59c7.39157,7.29792,6.18829,20.09661-3.00038,25.00356-77.713,41.80281-176.72559,29.9105-242.34331-35.7082C-5.49624,386.28227-17.404,287.362,24.41381,209.554c4.89125-9.095,17.68975-10.29834,25.00318-3.00043L166.22872,323.36708l27.39411-27.39452c-.68759-2.60974-1.594-5.00071-1.594-7.81361a32.00407,32.00407,0,1,1,32.00407,32.00455c-2.79723,0-5.20378-.89075-7.79786-1.594l-27.40974,27.41015ZM511.9758,303.06732a16.10336,16.10336,0,0,1-16.002,17.00242H463.86031a15.96956,15.96956,0,0,1-15.89265-15.00213C440.46671,175.5492,336.45348,70.53427,207.03078,63.53328a15.84486,15.84486,0,0,1-15.00191-15.90852V16.02652A16.09389,16.09389,0,0,1,209.031.02425C372.25491,8.61922,503.47472,139.841,511.9758,303.06732Zm-96.01221-.29692a16.21093,16.21093,0,0,1-16.11142,17.29934H367.645a16.06862,16.06862,0,0,1-15.89265-14.70522c-6.90712-77.01094-68.118-138.91037-144.92467-145.22376a15.94,15.94,0,0,1-14.79876-15.89289V112.13393a16.134,16.134,0,0,1,17.29908-16.096C319.45132,104.5391,407.55627,192.64538,415.96359,302.7704Z"},child:[]}]})(i)}function jS(i){return yi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M502.60969,310.04206l-96.70393,96.71625a31.88151,31.88151,0,0,1-45.00765,0L280.572,326.34115l-9.89231,9.90759a190.56343,190.56343,0,0,1-5.40716,168.52287c-4.50077,8.50115-16.39342,9.59505-23.20707,2.79725L134.54715,400.05428l-17.7999,17.79929c.70324,2.60972,1.60965,5.00067,1.60965,7.79793a32.00544,32.00544,0,1,1-32.00544-32.00434c2.79735,0,5.18838.90637,7.7982,1.60959l17.7999-17.79929L4.43129,269.94287c-6.798-6.81342-5.70409-18.6119,2.79735-23.20627a190.58161,190.58161,0,0,1,168.52864-5.407l9.79854-9.79821-80.31053-80.41716a32.002,32.002,0,0,1,0-45.09987L201.96474,9.29814A31.62639,31.62639,0,0,1,224.46868,0a31.99951,31.99951,0,0,1,22.59759,9.29814l80.32615,80.30777,47.805-47.89713a33.6075,33.6075,0,0,1,47.50808,0l47.50807,47.50645a33.63308,33.63308,0,0,1,0,47.50644l-47.805,47.89713L502.71908,265.036A31.78938,31.78938,0,0,1,502.60969,310.04206ZM219.56159,197.433l73.82505-73.82252-68.918-68.9-73.80942,73.80689Zm237.74352,90.106-68.90233-68.9156-73.825,73.82252,68.918,68.9Z"},child:[]}]})(i)}function VS(i){return yi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 128v16a8 8 0 0 1-8 8h-24v12c0 6.627-5.373 12-12 12H60c-6.627 0-12-5.373-12-12v-12H24a8 8 0 0 1-8-8v-16a8 8 0 0 1 4.941-7.392l232-88a7.996 7.996 0 0 1 6.118 0l232 88A8 8 0 0 1 496 128zm-24 304H40c-13.255 0-24 10.745-24 24v16a8 8 0 0 0 8 8h464a8 8 0 0 0 8-8v-16c0-13.255-10.745-24-24-24zM96 192v192H60c-6.627 0-12 5.373-12 12v20h416v-20c0-6.627-5.373-12-12-12h-36V192h-64v192h-64V192h-64v192h-64V192H96z"},child:[]}]})(i)}function US(i){return yi({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M622.3 271.1l-115.2-45c-4.1-1.6-12.6-3.7-22.2 0l-115.2 45c-10.7 4.2-17.7 14-17.7 24.9 0 111.6 68.7 188.8 132.9 213.9 9.6 3.7 18 1.6 22.2 0C558.4 489.9 640 420.5 640 296c0-10.9-7-20.7-17.7-24.9zM496 462.4V273.3l95.5 37.3c-5.6 87.1-60.9 135.4-95.5 151.8zM224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm96 40c0-2.5.8-4.8 1.1-7.2-2.5-.1-4.9-.8-7.5-.8h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c6.8 0 13.3-1.5 19.2-4-54-42.9-99.2-116.7-99.2-212z"},child:[]}]})(i)}function $S(i){return yi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 448c-110.532 0-200-89.451-200-200 0-110.531 89.451-200 200-200 110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200zm107.351-101.064c-9.614 9.712-45.53 41.396-104.065 41.396-82.43 0-140.484-61.425-140.484-141.567 0-79.152 60.275-139.401 139.762-139.401 55.531 0 88.738 26.62 97.593 34.779a11.965 11.965 0 0 1 1.936 15.322l-18.155 28.113c-3.841 5.95-11.966 7.282-17.499 2.921-8.595-6.776-31.814-22.538-61.708-22.538-48.303 0-77.916 35.33-77.916 80.082 0 41.589 26.888 83.692 78.277 83.692 32.657 0 56.843-19.039 65.726-27.225 5.27-4.857 13.596-4.039 17.82 1.738l19.865 27.17a11.947 11.947 0 0 1-1.152 15.518z"},child:[]}]})(i)}function qS(i){return yi({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M236,48V88a12,12,0,0,1-24,0V60H184a12,12,0,0,1,0-24h40A12,12,0,0,1,236,48ZM72,196H44V168a12,12,0,0,0-24,0v40a12,12,0,0,0,12,12H72a12,12,0,0,0,0-24Zm152-40a12,12,0,0,0-12,12v28H184a12,12,0,0,0,0,24h40a12,12,0,0,0,12-12V168A12,12,0,0,0,224,156ZM32,100A12,12,0,0,0,44,88V60H72a12,12,0,0,0,0-24H32A12,12,0,0,0,20,48V88A12,12,0,0,0,32,100Zm158,70.42-56,32a12,12,0,0,1-11.9,0l-56-32A12,12,0,0,1,60,160V96a12,12,0,0,1,6-10.42l56-32a12,12,0,0,1,11.9,0l56,32A12,12,0,0,1,196,96v64A12,12,0,0,1,190,170.42ZM96.19,96,128,114.18,159.81,96,128,77.82ZM84,153l32,18.28V135L84,116.68Zm88,0V116.68L140,135v36.36Z"},child:[]}]})(i)}function ZS(i){return yi({tag:"svg",attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216,104v8a56.06,56.06,0,0,1-48.44,55.47A39.8,39.8,0,0,1,176,192v40a8,8,0,0,1-8,8H104a8,8,0,0,1-8-8V216H72a40,40,0,0,1-40-40A24,24,0,0,0,8,152a8,8,0,0,1,0-16,40,40,0,0,1,40,40,24,24,0,0,0,24,24H96v-8a39.8,39.8,0,0,1,8.44-24.53A56.06,56.06,0,0,1,56,112v-8a58.14,58.14,0,0,1,7.69-28.32A59.78,59.78,0,0,1,69.07,28,8,8,0,0,1,76,24a59.75,59.75,0,0,1,48,24h24a59.75,59.75,0,0,1,48-24,8,8,0,0,1,6.93,4,59.74,59.74,0,0,1,5.37,47.68A58,58,0,0,1,216,104Z"},child:[]}]})(i)}function GS(i){return yi({tag:"svg",attr:{viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M 8.6425781 4 C 7.1835781 4 6 5.181625 6 6.640625 C 6 8.099625 7.182625 9.3085938 8.640625 9.3085938 C 10.098625 9.3085938 11.283203 8.099625 11.283203 6.640625 C 11.283203 5.182625 10.101578 4 8.6425781 4 z M 21.535156 11 C 19.316156 11 18.0465 12.160453 17.4375 13.314453 L 17.373047 13.314453 L 17.373047 11.310547 L 13 11.310547 L 13 26 L 17.556641 26 L 17.556641 18.728516 C 17.556641 16.812516 17.701266 14.960938 20.072266 14.960938 C 22.409266 14.960937 22.443359 17.145609 22.443359 18.849609 L 22.443359 26 L 26.994141 26 L 27 26 L 27 17.931641 C 27 13.983641 26.151156 11 21.535156 11 z M 6.3632812 11.310547 L 6.3632812 26 L 10.923828 26 L 10.923828 11.310547 L 6.3632812 11.310547 z"},child:[]}]})(i)}function HS(i){return yi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10.74 12.89v-.11c.06-.15.12-.29.19-.43a5.15 5.15 0 0 0 .26-3.74.86.86 0 0 0-.66-.74 3.12 3.12 0 0 0-2.08.61v.18a11.34 11.34 0 0 1-.06 2.41 2.37 2.37 0 0 0 .62 2 2 2 0 0 0 1.43.63 8.05 8.05 0 0 1 .3-.81zM10 8.58a.36.36 0 0 1-.09-.23.19.19 0 0 1 .09-.12.74.74 0 0 1 .48-.07c.25 0 .5.16.48.34a.51.51 0 0 1-.49.33h-.06a.63.63 0 0 1-.41-.25z"},child:[]},{tag:"path",attr:{d:"M7.88 11a12.58 12.58 0 0 0 .06-2.3v-.28a7 7 0 0 1 1.54-4.55c-1-.32-3.4-1-4.87.1-.9.64-1.32 1.84-1.23 3.55a24.85 24.85 0 0 0 1 4.4c.68 2.22 1.45 3.62 2.11 3.85.1 0 .41.13.86-.41.64-.76 1.23-1.41 1.5-1.7l-.19-.19A2.89 2.89 0 0 1 7.88 11zm3.5 3.4c-.16-.06-.24-.1-.42.11a2.52 2.52 0 0 0-.29.35c-.35.43-.5.58-1.51.79a2 2 0 0 0-.4.11 1 1 0 0 0 .37.16 2.21 2.21 0 0 0 2.5-.8.41.41 0 0 0 0-.35.59.59 0 0 0-.25-.37zm6.29-5.82a5.29 5.29 0 0 0 .08-.79c-.66-.08-1.42-.07-1.72.36-.58.83.56 2.88 1 3.75a4.34 4.34 0 0 1 .26.48 1.79 1.79 0 0 0 .15.31 3.72 3.72 0 0 0 .16-2.13 7.51 7.51 0 0 1-.07-1.05 6 6 0 0 1 .14-.93zm-.56-.16a.6.6 0 0 1-.32.17h-.06a.47.47 0 0 1-.44-.3c0-.14.2-.24.44-.28s.48 0 .5.15a.38.38 0 0 1-.12.26z"},child:[]},{tag:"path",attr:{d:"M17 4.88a6.06 6.06 0 0 1 1.37 2.57.71.71 0 0 1 0 .15 5.67 5.67 0 0 1-.09 1.06 7.11 7.11 0 0 0-.09.86 6.61 6.61 0 0 0 .07 1 4 4 0 0 1-.36 2.71l.07.08c2.22-3.49 3-7.54 2.29-8.43a4.77 4.77 0 0 0-3.81-1.8 7.34 7.34 0 0 0-1.63.16A6.17 6.17 0 0 1 17 4.88z"},child:[]},{tag:"path",attr:{d:"M21.65 14c-.07-.2-.37-.85-1.47-.62a6.28 6.28 0 0 1-1 .13 19.74 19.74 0 0 0 2.06-4.88c.37-1.45.66-3.39-.11-4.38A5.91 5.91 0 0 0 16.37 2a8.44 8.44 0 0 0-2.46.35 9.38 9.38 0 0 0-1.45-.14 4.8 4.8 0 0 0-2.46.62 12.22 12.22 0 0 0-1.77-.44A5.44 5.44 0 0 0 4 3.05c-1.24.87-1.81 2.39-1.71 4.52a26.28 26.28 0 0 0 1 4.67A15.76 15.76 0 0 0 4.4 15a3.39 3.39 0 0 0 1.75 1.83 1.71 1.71 0 0 0 1.69-.37 2 2 0 0 0 1 .59 3.65 3.65 0 0 0 2.35-.14v.81a8.46 8.46 0 0 0 .31 2.36 1 1 0 0 1 0 .13 3 3 0 0 0 .71 1.24 2.08 2.08 0 0 0 1.49.56 3 3 0 0 0 .7-.08 3.27 3.27 0 0 0 2.21-1.27 7.34 7.34 0 0 0 .91-4v-.26h.17a5.24 5.24 0 0 0 2.4-.4c.45-.23 1.91-1 1.56-2zm-1.81 1.47a4.7 4.7 0 0 1-1.8.34 2.62 2.62 0 0 1-.79-.1c-.1.94-.32 2.69-.45 3.42a2.47 2.47 0 0 1-2.25 2.3 3.23 3.23 0 0 1-.66.07A2 2 0 0 1 12 20a16.77 16.77 0 0 1-.28-4.06 2.56 2.56 0 0 1-1.78.66 3.94 3.94 0 0 1-.94-.13c-.09 0-.87-.23-.86-.73s.66-.59.9-.64c.86-.18.92-.25 1.19-.59a2.79 2.79 0 0 1 .19-.24 2.56 2.56 0 0 1-1.11-.3c-.23.25-.86.93-1.54 1.74a1.43 1.43 0 0 1-1.11.63 1.23 1.23 0 0 1-.35 0C5.43 16 4.6 14.55 3.84 12a25.21 25.21 0 0 1-1-4.53c-.1-1.92.4-3.28 1.47-4 1.92-1.36 5-.31 5.7-.06a4 4 0 0 1 2.41-.66 5.58 5.58 0 0 1 1.4.18 7.51 7.51 0 0 1 2.5-.4 5.35 5.35 0 0 1 4.32 2c.69.88.23 3 0 3.89a18.84 18.84 0 0 1-2.41 5.41c.16.11.65.31 2 0 .46-.1.73 0 .82.25.22.55-.7 1.13-1.21 1.37z"},child:[]},{tag:"path",attr:{d:"M17.43 13.59a4 4 0 0 1-.62-1c0-.07-.12-.24-.23-.43-.58-1-1.79-3.22-1-4.34a2.16 2.16 0 0 1 2.12-.61 6.28 6.28 0 0 0-1.13-1.94 5.41 5.41 0 0 0-4.13-2 3.34 3.34 0 0 0-2.55.95A5.82 5.82 0 0 0 8.51 7.8l.15-.08A3.7 3.7 0 0 1 10 7.3a1.45 1.45 0 0 1 1.76 1.19 5.73 5.73 0 0 1-.29 4.09 3.29 3.29 0 0 0-.17.39v.11c-.1.27-.19.52-.25.73a.94.94 0 0 1 .57.07 1.16 1.16 0 0 1 .62.74v.16a.28.28 0 0 1 0 .09 22.22 22.22 0 0 0 .22 4.9 1.5 1.5 0 0 0 2 1.09A1.92 1.92 0 0 0 16.25 19c.15-.88.45-3.35.49-3.88 0-1.06.52-1.27.84-1.36z"},child:[]},{tag:"path",attr:{d:"m18 14.33-.08-.06h-.12c-.26.07-.5.14-.47.8a1.9 1.9 0 0 0 .93.12 4.29 4.29 0 0 0 1.38-.29 3 3 0 0 0 .79-.52 3.47 3.47 0 0 1-2.43-.05z"},child:[]}]})(i)}function WS(i){return yi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M410.66 180.72q-7.67-2.62-15.45-4.88 1.29-5.25 2.38-10.56c11.7-56.9 4.05-102.74-22.06-117.83-25-14.48-66 .61-107.36 36.69q-6.1 5.34-11.95 11-3.9-3.76-8-7.36c-43.35-38.58-86.8-54.83-112.88-39.69-25 14.51-32.43 57.6-21.9 111.53q1.58 8 3.55 15.93a320.85 320.85 0 0 0-17.77 5.6C48.46 198.9 16 226.73 16 255.59c0 29.82 34.84 59.72 87.77 77.85q6.44 2.19 13 4.07-2.13 8.49-3.77 17.17c-10 53-2.2 95.07 22.75 109.49 25.77 14.89 69-.41 111.14-37.31q5-4.38 10-9.25 6.32 6.11 13 11.86c40.8 35.18 81.09 49.39 106 34.93 25.75-14.94 34.12-60.14 23.25-115.13q-1.25-6.3-2.88-12.86 4.56-1.35 8.93-2.79c55-18.27 90.83-47.81 90.83-78-.02-29-33.52-57.01-85.36-74.9zm-129-81.08c35.43-30.91 68.55-43.11 83.65-34.39 16.07 9.29 22.32 46.75 12.22 95.88q-1 4.8-2.16 9.57a487.83 487.83 0 0 0-64.18-10.16 481.27 481.27 0 0 0-40.57-50.75q5.38-5.22 11.02-10.15zM157.73 280.25q6.51 12.6 13.61 24.89 7.23 12.54 15.07 24.71a435.28 435.28 0 0 1-44.24-7.13c4.24-13.72 9.46-27.97 15.56-42.47zm0-48.33c-6-14.19-11.08-28.15-15.25-41.63 13.7-3.07 28.3-5.58 43.52-7.48q-7.65 11.94-14.72 24.23t-13.58 24.88zm10.9 24.17q9.48-19.77 20.42-38.78 10.93-19 23.27-37.13c14.28-1.08 28.92-1.65 43.71-1.65s29.52.57 43.79 1.66q12.21 18.09 23.13 37t20.69 38.6Q334 275.63 323 294.73q-10.91 19-23 37.24c-14.25 1-29 1.55-44 1.55s-29.47-.47-43.46-1.38q-12.43-18.19-23.46-37.29t-20.48-38.76zM340.75 305q7.25-12.58 13.92-25.49a440.41 440.41 0 0 1 16.12 42.32 434.44 434.44 0 0 1-44.79 7.65q7.62-12.09 14.75-24.48zm13.72-73.07q-6.64-12.65-13.81-25-7-12.18-14.59-24.06c15.31 1.94 30 4.52 43.77 7.67a439.89 439.89 0 0 1-15.37 41.39zm-98.24-107.45a439.75 439.75 0 0 1 28.25 34.18q-28.35-1.35-56.74 0c9.33-12.34 18.88-23.79 28.49-34.18zM145.66 65.86c16.06-9.32 51.57 4 89 37.27 2.39 2.13 4.8 4.36 7.2 6.67A491.37 491.37 0 0 0 201 160.51a499.12 499.12 0 0 0-64.06 10q-1.83-7.36-3.3-14.82c-9.05-46.23-3.06-81.08 12.02-89.83zm-23.41 251.85q-6-1.71-11.85-3.71c-23.4-8-42.73-18.44-56-29.81-11.88-10.19-17.9-20.36-17.9-28.6 0-17.51 26.06-39.85 69.52-55q8.19-2.85 16.52-5.21a493.54 493.54 0 0 0 23.4 60.75 502.46 502.46 0 0 0-23.69 61.58zm111.13 93.67c-18.63 16.32-37.29 27.89-53.74 33.72-14.78 5.23-26.55 5.38-33.66 1.27-15.14-8.75-21.44-42.54-12.85-87.86q1.53-8 3.5-16a480.85 480.85 0 0 0 64.69 9.39 501.2 501.2 0 0 0 41.2 51c-2.98 2.93-6.03 5.75-9.14 8.48zm23.42-23.22c-9.72-10.51-19.42-22.14-28.88-34.64q13.79.54 28.08.54c9.78 0 19.46-.21 29-.64a439.33 439.33 0 0 1-28.2 34.74zm124.52 28.59c-2.86 15.44-8.61 25.74-15.72 29.86-15.13 8.78-47.48-2.63-82.36-32.72-4-3.44-8-7.13-12.07-11a484.54 484.54 0 0 0 40.23-51.2 477.84 477.84 0 0 0 65-10.05q1.47 5.94 2.6 11.64c4.81 24.3 5.5 46.28 2.32 63.47zm17.4-102.64c-2.62.87-5.32 1.71-8.06 2.53a483.26 483.26 0 0 0-24.31-60.94 481.52 481.52 0 0 0 23.36-60.06c4.91 1.43 9.68 2.93 14.27 4.52 44.42 15.32 71.52 38 71.52 55.43 0 18.6-29.27 42.74-76.78 58.52z"},child:[]},{tag:"path",attr:{d:"M256 298.55a43 43 0 1 0-42.86-43 42.91 42.91 0 0 0 42.86 43z"},child:[]}]})(i)}function KS(i){return yi({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm0 3.19c2.937 0 5.371 2.265 5.371 5.035 0 4.111-4.364 7.635-5.035 8.138-.084 0-.084.084-.084.084-.084.084-.168.084-.168.084s-.168 0-.168-.084l-.084-.084c-.84-.503-5.203-3.943-5.203-8.138 0-2.77 2.434-5.036 5.371-5.036zm0 2.601c-1.427 0-2.602 1.173-2.602 2.684 0 1.51 1.175 2.685 2.602 2.685 1.427 0 2.602-1.175 2.602-2.685S13.427 5.79 12 5.79zM8.979 17.287h6.042a.66.66 0 0 1 .67.672v2.014a.66.66 0 0 1-.67.67H8.98a.66.66 0 0 1-.67-.67v-2.014a.66.66 0 0 1 .67-.672zm.755 1.258v.924h4.448v-.924H9.734z"},child:[]}]})(i)}function XS(i){return yi({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10.315 4.876L6.3048 2.8517l-4.401 2.1965 4.1186 2.0683zm1.8381.9277l4.2045 2.1223-4.3622 2.1906-4.125-2.0718zm5.6153-2.9213l4.3193 2.1658-3.863 1.9402-4.2131-2.1252zm-1.859-.9329L12.021 0 8.1742 1.9193l4.0068 2.0208zm-3.0401 16.7443V24l4.7107-2.3507-.0053-5.3085zm4.7037-4.2057l-.0052-5.2528-4.6985 2.3356v5.2546zm5.6553-.9845v5.327l-4.0178 2.0052-.0029-5.3028zm0-1.8626V6.4214l-4.0253 2.001.0034 5.2633zM11.2062 11.571L8.0333 9.9756v6.895s-3.8804-8.2564-4.2399-8.998c-.0463-.0957-.2371-.2007-.2858-.2262C2.8118 7.2812.773 6.2485.773 6.2485V18.43l2.8204 1.5076v-6.3674s3.8392 7.3775 3.878 7.458c.0389.0807.4245.8582.8362 1.1314.5485.363 2.8992 1.7766 2.8992 1.7766z"},child:[]}]})(i)}function YS(i){return yi({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M16.922 0h2.623v18.104h-2.623zm-4.126 12.94h2.623v2.57h-2.623zm0-7.037h2.623v5.446h-2.623zm0 11.197h2.623v5.446h-2.623zM4.456 5.896h2.622V24H4.455zm4.213 2.559h2.623v2.57H8.67zm0 4.151h2.623v5.447H8.67zm0-11.187h2.623v5.446H8.67Z"},child:[]}]})(i)}function JS(i){return yi({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M15.601 5.53c-1.91.035-3.981.91-5.63 2.56-2.93 2.93-2.083 8.53-1.088 9.525.805.804 6.595 1.843 9.526-1.088a9.74 9.74 0 0 0 .584-.643c.043-.292.205-.66.489-1.106a1.848 1.848 0 0 1-.537.176c-.144.265-.37.55-.676.855-.354.335-.607.554-.76.656a.795.795 0 0 1-.437.152c-.35 0-.514-.308-.494-.924-.22.316-.425.549-.612.7a.914.914 0 0 1-.578.224c-.194 0-.36-.09-.496-.273a1.03 1.03 0 0 1-.193-.507 4.016 4.016 0 0 1-.726.583c-.224.132-.47.197-.74.197-.3 0-.543-.096-.727-.288a.978.978 0 0 1-.257-.524v.004c-.3.276-.564.48-.79.611a1.295 1.295 0 0 1-.649.197.693.693 0 0 1-.571-.275c-.145-.183-.218-.43-.218-.739 0-.464.101-1.02.302-1.67.201-.65.445-1.25.733-1.797l.842-.312a.21.21 0 0 1 .06-.013c.063 0 .116.047.157.14.04.095.061.221.061.38 0 .451-.104.888-.312 1.31-.207.422-.532.873-.974 1.352-.018.23-.027.388-.027.474 0 .193.036.345.106.458.071.113.165.169.282.169a.71.71 0 0 0 .382-.13c.132-.084.333-.26.602-.523.028-.418.187-.798.482-1.142.324-.38.685-.569 1.08-.569.206 0 .37.054.494.16a.524.524 0 0 1 .186.417c0 .458-.486.829-1.459 1.114.088.43.32.646.693.646a.807.807 0 0 0 .417-.117c.129-.076.321-.243.575-.497.032-.252.118-.495.259-.728.182-.3.416-.544.701-.73.285-.185.537-.278.756-.278.276 0 .47.127.58.381l.677-.374h.186l-.292.971c-.15.488-.226.823-.226 1.004 0 .19.067.285.202.285.086 0 .181-.045.285-.137.104-.092.25-.232.437-.42v.001c.143-.155.274-.32.392-.494-.19-.084-.285-.21-.285-.375 0-.17.058-.352.174-.545.116-.194.275-.29.479-.29.172 0 .258.088.258.265 0 .139-.05.338-.149.596.367-.04.687-.32.961-.842l.228-.01c1.059-2.438.828-5.075-.83-6.732-1.019-1.02-2.408-1.5-3.895-1.471zm4.725 8.203a8.938 8.938 0 0 1-1.333 2.151 1.09 1.09 0 0 0-.012.147c0 .168.047.309.14.423.092.113.206.17.34.17.296 0 .714-.264 1.254-.787-.001.04-.003.08-.003.121 0 .146.012.368.036.666l.733-.172c0-.2.003-.357.01-.474.01-.157.033-.33.066-.517.02-.11.07-.216.152-.315l.186-.216a5.276 5.276 0 0 1 .378-.397c.062-.055.116-.099.162-.13a.26.26 0 0 1 .123-.046c.055 0 .083.035.083.106 0 .07-.052.236-.156.497-.194.486-.292.848-.292 1.084 0 .175.046.314.136.418a.45.45 0 0 0 .358.155c.365 0 .803-.269 1.313-.808v-.381c-.361.426-.623.64-.784.64-.109 0-.163-.067-.163-.2 0-.1.065-.316.195-.65.19-.486.285-.836.285-1.048a.464.464 0 0 0-.112-.319.36.36 0 0 0-.282-.127c-.165 0-.354.077-.567.233-.213.156-.5.436-.863.84.053-.262.165-.622.335-1.08l-.809.156a6.54 6.54 0 0 0-.399 1.074c-.04.156-.07.316-.092.48a7.447 7.447 0 0 1-.49.45.38.38 0 0 1-.229.08.208.208 0 0 1-.174-.082.352.352 0 0 1-.064-.222c0-.1.019-.214.056-.343.038-.13.12-.373.249-.731l.308-.849zm-17.21-2.927c-.863-.016-1.67.263-2.261.854-1.352 1.352-1.07 3.827.631 5.527 1.7 1.701 4.95 1.21 5.527.632.467-.466 1.07-3.827-.631-5.527-.957-.957-2.158-1.465-3.267-1.486zm12.285.358h.166v.21H15.4zm.427 0h.166v.865l.46-.455h.195l-.364.362.428.684h-.198l-.357-.575-.164.166v.41h-.166zm1.016 0h.166v.21h-.166zm.481.122h.166v.288h.172v.135h-.172v.717c0 .037.006.062.02.075.012.013.037.02.074.02a.23.23 0 0 0 .078-.01v.141a.802.802 0 0 1-.136.014.23.23 0 0 1-.15-.043.15.15 0 0 1-.052-.123v-.79h-.141v-.136h.141zm-3.562.258c.081 0 .15.012.207.038.057.024.1.061.13.11s.045.106.045.173h-.176c-.006-.111-.075-.167-.208-.167a.285.285 0 0 0-.164.041.134.134 0 0 0-.06.117c0 .035.015.065.045.088.03.024.08.044.15.06l.16.039a.47.47 0 0 1 .224.105c.047.046.07.108.07.186a.3.3 0 0 1-.052.175.327.327 0 0 1-.152.116.585.585 0 0 1-.226.041c-.136 0-.24-.03-.309-.088-.069-.059-.105-.149-.109-.269h.176c.004.037.01.065.017.084a.166.166 0 0 0 .034.054c.044.043.112.065.204.065a.31.31 0 0 0 .177-.045.139.139 0 0 0 .067-.119.116.116 0 0 0-.038-.09.287.287 0 0 0-.124-.055l-.156-.038a1.248 1.248 0 0 1-.159-.05.359.359 0 0 1-.098-.061.22.22 0 0 1-.058-.083.32.32 0 0 1-.016-.108c0-.096.036-.174.109-.232a.45.45 0 0 1 .29-.087zm1.035 0a.46.46 0 0 1 .202.043.351.351 0 0 1 .187.212.577.577 0 0 1 .023.126h-.168a.256.256 0 0 0-.078-.168.242.242 0 0 0-.17-.06.248.248 0 0 0-.155.05.306.306 0 0 0-.1.144.662.662 0 0 0-.034.224.58.58 0 0 0 .035.214.299.299 0 0 0 .101.135.261.261 0 0 0 .157.048c.142 0 .227-.084.256-.252h.167a.519.519 0 0 1-.065.22.35.35 0 0 1-.146.138.464.464 0 0 1-.216.048.448.448 0 0 1-.246-.066.441.441 0 0 1-.161-.192.703.703 0 0 1-.057-.293c0-.085.01-.163.032-.233a.522.522 0 0 1 .095-.182.403.403 0 0 1 .15-.117.453.453 0 0 1 .191-.04zm.603.03h.166v1.046H15.4zm1.443 0h.166v1.046h-.166zm-5.05.618c-.08 0-.2.204-.356.611-.155.407-.308.977-.459 1.71.281-.312.509-.662.683-1.05.175-.387.262-.72.262-.999a.455.455 0 0 0-.036-.197c-.025-.05-.056-.075-.093-.075zm4.662 1.797c-.221 0-.431.188-.629.563-.197.376-.296.722-.296 1.038 0 .12.029.216.088.29a.273.273 0 0 0 .223.111c.221 0 .43-.188.625-.565.196-.377.294-.725.294-1.043a.457.457 0 0 0-.083-.29.269.269 0 0 0-.222-.104zm-2.848.007c-.146 0-.285.11-.417.333-.133.222-.2.51-.2.866.566-.159.849-.452.849-.881 0-.212-.077-.318-.232-.318Z"},child:[]}]})(i)}function QS(i){return yi({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.292 5.856L11.54 0v24l-4.095-2.378V7.603l-6.168 3.564.015-5.31zm21.43 5.311l-.014-5.31L12.46 0v24l4.095-2.378V14.87l3.092 1.788-.018-4.618-3.074-1.756V7.603l6.168 3.564z"},child:[]}]})(i)}function e6(i){return yi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M12 14V22H4C4 17.5817 7.58172 14 12 14ZM12 13C8.685 13 6 10.315 6 7C6 3.685 8.685 1 12 1C15.315 1 18 3.685 18 7C18 10.315 15.315 13 12 13ZM20.8284 20.8284L18 23.6569L15.1716 20.8284C13.6095 19.2663 13.6095 16.7337 15.1716 15.1716C16.7337 13.6095 19.2663 13.6095 20.8284 15.1716C22.3905 16.7337 22.3905 19.2663 20.8284 20.8284ZM18 17C17.4477 17 17 17.4477 17 18C17 18.5523 17.4477 19 18 19C18.5523 19 19 18.5523 19 18C19 17.4477 18.5523 17 18 17Z"},child:[]}]})(i)}/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=i=>i.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Jx=(...i)=>i.filter((n,l,p)=>!!n&&n.trim()!==""&&p.indexOf(n)===l).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var i6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=Ae.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:p,className:_="",children:b,iconNode:x,...d},R)=>Ae.createElement("svg",{ref:R,...i6,width:n,height:n,stroke:i,strokeWidth:p?Number(l)*24/Number(n):l,className:Jx("lucide",_),...d},[...x.map(([W,re])=>Ae.createElement(W,re)),...Array.isArray(b)?b:[b]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=(i,n)=>{const l=Ae.forwardRef(({className:p,..._},b)=>Ae.createElement(r6,{ref:b,iconNode:n,className:Jx(`lucide-${t6(i)}`,p),..._}));return l.displayName=`${i}`,l};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s6=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],m_=n6("Copy",s6),a6=()=>ae.jsxs(ae.Fragment,{children:[ae.jsxs("div",{className:"about_perfil",children:[ae.jsx("div",{className:"portada",children:ae.jsx("img",{src:I5,className:"perfil",alt:"A. Granada"})}),ae.jsx("div",{className:"contenedor",children:ae.jsxs("ul",{className:"redes",children:[ae.jsx("li",{children:ae.jsxs(jd,{to:"https://scienti.minciencias.gov.co/cvlac/EnRecursoHumano/query.do",target:"_blank",children:[ae.jsx(VS,{})," CvLAC"]})}),ae.jsx("li",{children:ae.jsxs(jd,{to:"https://github.com/alexigranada",target:"_blank",children:[ae.jsx(ZS,{})," GitHub"]})}),ae.jsx("li",{children:ae.jsxs(jd,{to:"https://www.linkedin.com/in/alexigranada/",target:"_blank",children:[ae.jsx(GS,{})," LinkedIn "]})})]})})]}),ae.jsx("div",{children:ae.jsxs("ul",{className:"contacto",children:[ae.jsxs("li",{className:"card",children:[ae.jsx("p",{children:"CORREO ELECTRNICO:"}),ae.jsxs("div",{className:"copy_card",children:[ae.jsx("h4",{className:"icon_email",children:" arturo.granada@correounivalle.edu.co"}),ae.jsx(p_.CopyToClipboard,{text:"arturo.granada@correounivalle.edu.co",children:ae.jsx(m_,{onClick:()=>xr.success("Correo copiado",{position:"top-center"}),className:"copy_icon"})})]})]})," ",ae.jsxs("li",{className:"card",children:[ae.jsx("p",{children:"MOVIL - WAPP:"}),ae.jsxs("div",{className:"copy_card",children:[ae.jsx("h4",{className:"icon_email",children:" +57 304 3339781"}),ae.jsx(p_.CopyToClipboard,{text:"+57304339781",children:ae.jsx(m_,{onClick:()=>xr.success("Movil copiado",{position:"top-center"}),className:"copy_icon"})})]})]})]})}),ae.jsx(RS,{})]}),o6=()=>ae.jsxs("div",{className:"about_habilidades",children:[ae.jsxs("div",{className:"card",children:[ae.jsx("div",{children:"Desarrollo web full stack"}),ae.jsxs("div",{className:"icono_habilidades",children:[ae.jsx("a",{children:ae.jsx(FS,{})}),ae.jsx("a",{children:ae.jsx(HS,{})}),ae.jsx("a",{children:ae.jsx(BS,{})}),ae.jsx("a",{children:ae.jsx(OS,{})}),ae.jsx("a",{children:ae.jsx(WS,{})}),ae.jsx("a",{children:ae.jsx(KS,{})})]})]}),ae.jsxs("div",{className:"card",children:[ae.jsx("div",{children:"Anlisis y modelacin espacial"}),ae.jsxs("div",{className:"icono_habilidades",children:[ae.jsx(QS,{}),ae.jsx(JS,{}),ae.jsx(YS,{}),ae.jsx(XS,{})]})]}),ae.jsxs("div",{className:"card",children:[ae.jsx("div",{children:"Tecnologa GNSS y topografa convencional"}),ae.jsxs("div",{className:"icono_habilidades",children:[ae.jsx(NS,{}),ae.jsx(jS,{}),ae.jsx(e6,{})]})]})]}),l6=()=>ae.jsxs("div",{className:"about_proyectos",children:[ae.jsx("div",{className:"card",children:ae.jsxs("div",{children:[ae.jsx("h4",{children:"Aplicacin web prototipo para el manejo de compuertas automticas en el cultivo de arroz inundado"}),ae.jsx("p",{children:"El sistema prototipo integra tecnologas de la informacin (TIC) con acceso remoto va web, mecatrnica, geomtica y robtica para una operacin remota de compuertas reguladoras del paso del caudal del agua."})]})}),ae.jsx("div",{className:"card",children:ae.jsxs("div",{children:[ae.jsx("h4",{children:"Geoportal Farallones"}),ae.jsx("p",{children:"El desarrollo de esta aplicacin web tiene como objetivo principal optimizar la gestin de los predios en zonas de conservacin del PNN Farallones mediante una plataforma interactiva que permite la visualizacin detallada de cada predio y especie registrada con sus atributos correspondientes."})]})}),ae.jsx("div",{className:"card",children:ae.jsxs("div",{children:[ae.jsx("h4",{children:"Proyecciones climaticas de datos de temperatura y precipitacin"}),ae.jsx("p",{children:"El enfoque general del TG busca mejorar la comprensin del sistema hidroclimtico de las cuencas del Pacfico colombiano a travs de la representacin de los datos de temperatura y precipitacin proyectados hasta el ao 2035."})]})})]}),c6=()=>ae.jsxs("div",{className:"about_investigacion",children:[ae.jsxs("div",{className:"card",children:[ae.jsx("h4",{children:"Prototipo web para el manejo de compuertas automticas en el cultivo de arroz inundado"}),ae.jsx("p",{children:"El sistema ofrece el control del nivel del agua dentro de la zona inundada de la parcela, ajustndose automticamente a un nivel programado segn el desarrollo fenolgico del cultivo, el control de malezas y el abastecimiento del recurso hdrico segn la demanda de la planta. Este busca ahorrar eficientemente el recurso hdrico dispuesto para el sistema productivo de arroz inundado, brindar informacin permanente de las condiciones ambientales, de operacin del sistema y de manejo del nivel de la lmina de agua."})]}),ae.jsxs("div",{className:"card",children:[ae.jsx("h4",{children:"Downscaling estadstico a datos de temperatura y precipitacin con el uso de modelos de redes neuronales artificiales"}),ae.jsx("p",{children:" El proyecto genera informacin para estas dos variables a partir de la integracin de los datos de Modelos de Circulacin Global (del ingls GCM) y estimaciones climticas con reanlisis ERA5-Land, donde los resultados son validados con datos de las observaciones medidas por las estaciones climatolgicas de las instituciones ambientales nacionales y regionales."})]})]}),u6=()=>ae.jsxs("div",{className:"about_referencias",children:[ae.jsxs("div",{className:"card",children:["Laboratorio GISMODEL",ae.jsx("p",{children:"JEFE INMEDIATO: Mauricio E. Rincon R."})]}),ae.jsxs("div",{className:"card",children:["Fundacin Farallones",ae.jsx("p",{children:"JEFE INMEDIATO: Fernando Mejia"})]}),ae.jsxs("div",{className:"card",children:["Prctica profesional CCM EMCALI",ae.jsx("p",{children:"JEFE INMEDIATO: Jose Luis Lugo"})]})]});function h6(i){return yi({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M9 3h-4a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2z"},child:[]},{tag:"path",attr:{d:"M9 13h-4a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2z"},child:[]},{tag:"path",attr:{d:"M19 13h-4a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2z"},child:[]},{tag:"path",attr:{d:"M17 3a1 1 0 0 1 .993 .883l.007 .117v2h2a1 1 0 0 1 .117 1.993l-.117 .007h-2v2a1 1 0 0 1 -1.993 .117l-.007 -.117v-2h-2a1 1 0 0 1 -.117 -1.993l.117 -.007h2v-2a1 1 0 0 1 1 -1z"},child:[]}]})(i)}function d6(i){return yi({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"},child:[]}]})(i)}function p6(i){return yi({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M132.813 27.625l29.593 134.125c4.547 3.588 9.68 4.188 18.063 1.97l5.186-1.376 3.813 3.812 84.218 84.188 3.78 3.78-1.343 5.19c-2.42 9.36-1.483 15.047 3.375 19.905l13.53 13.53 97.533-97.563-13.532-13.53c-3.538-3.54-9.39-4.415-19.655-1.438l-5.313 1.53-3.906-3.906-86.187-86.188-1.626-3.28-1.094-3.314V64.376c-.013-.02-.018-.044-.03-.063L132.81 27.626zM310.592 85.5l-14.156 14.188 43.782 43.78 14.186-14.155L310.594 85.5zm120.25 95.844l-159.968 159.97 37.063 37.123 160-160-37.094-37.093zM196.5 199.594l-175 175v87.594l218.813-218.782-43.813-43.812z"},child:[]}]})(i)}function f6(){const[i,n]=Ae.useState("perfil"),l=()=>{n("perfil")},p=()=>{n("habilidades")},_=()=>{n("proyectos")},b=()=>{n("investigacion")},x=()=>{n("referencias")};return ae.jsxs(ae.Fragment,{children:[ae.jsx("div",{className:"about",children:ae.jsxs("div",{children:[ae.jsx("h1",{children:"Bienvenido a mi sitio web "}),ae.jsx("p",{children:"Mi nombre es Alexis Granada y soy ingeniero topogrfico de la Universidad del Valle. Trabajo con la gestin de datos geoespaciales: captura, almacenamiento, anlisis y modelamiento de variables ambientales y antrpicas. Me apasiona el mundo de la programacin y el desarrollo web, que en conjunto con el uso de tcnicas y metodologas Geomticas permiten la visualizacin y presentacin de informacin y modelos geoespaciales. "})]})}),ae.jsxs("div",{className:"about_grid",children:[ae.jsx("div",{className:"about_menu",children:ae.jsxs("ul",{children:[ae.jsxs("li",{className:`boton ${i==="perfil"?"active":""}`,onClick:l,children:[ae.jsxs("a",{children:[ae.jsx(US,{})," "]}),ae.jsx("p",{className:"text",children:"Perfil"})]}),ae.jsxs("li",{className:`boton ${i==="habilidades"?"active":""}`,onClick:p,children:[ae.jsxs("a",{children:[ae.jsx(p6,{})," "]}),ae.jsx("p",{className:"text",children:"Habilidades"})," "]}),ae.jsxs("li",{className:`boton ${i==="proyectos"?"active":""}`,onClick:_,children:[ae.jsxs("a",{children:[" ",ae.jsx(h6,{})," "]}),ae.jsx("p",{className:"text",children:"Mis Proyectos"})]}),ae.jsxs("li",{className:`boton ${i==="investigacion"?"active":""}`,onClick:b,children:[ae.jsxs("a",{children:[" ",ae.jsx(qS,{})," "]}),ae.jsx("p",{className:"text",children:"Investigacin "})]}),ae.jsxs("li",{className:`boton ${i==="referencias"?"active":""}`,onClick:x,children:[ae.jsxs("a",{children:[" ",ae.jsx(d6,{})," "]}),ae.jsx("p",{className:"text",children:"Referencias "})]})]})}),ae.jsxs("div",{className:"about_pages",children:[i==="perfil"&&ae.jsx(a6,{}),i==="habilidades"&&ae.jsx(o6,{}),i==="proyectos"&&ae.jsx(l6,{}),i==="investigacion"&&ae.jsx(c6,{}),i==="referencias"&&ae.jsx(u6,{})]})]})]})}function m6(){return ae.jsxs(ae.Fragment,{children:[ae.jsx("div",{className:"center",children:ae.jsx("h1",{children:"SERVICIOS"})}),ae.jsxs("div",{className:"service_grid",children:[ae.jsxs("a",{className:"card",children:[ae.jsxs("div",{className:"card_title",children:[ae.jsx("h2",{children:"Desarrollo web"}),ae.jsx("span",{children:ae.jsx(bo,{})})]}),ae.jsx("p",{children:"Creacin de sistemas de informacin Geogrfica y diseo de pginas web"})]}),ae.jsxs("a",{className:"card",children:[ae.jsxs("div",{className:"card_title",children:[ae.jsx("h2",{children:"Modelacin y anlisis espacial"}),ae.jsx("span",{children:ae.jsx(bo,{})})]}),ae.jsx("p",{children:"Anlisis exploratorio de datos y modelacin espacial variables ambientales y antrpicas"})]}),ae.jsxs("a",{className:"card",children:[ae.jsxs("div",{className:"card_title",children:[ae.jsx("h2",{children:"Topografa convencional y GNSS"}),ae.jsx("span",{children:ae.jsx(bo,{})})]}),ae.jsx("p",{children:"Posicionamiento de puntos GNSS, levantamientos topogrficos, nivelacin, avaluos "})]})]})]})}function g6(){}function y6(){return ae.jsxs("div",{className:"description",children:[ae.jsxs("p",{children:[ae.jsx(_m,{to:"/",className:({isActive:i})=>i?"active":"",children:"G | Geomtica"}),ae.jsx(_m,{to:"about",children:"about"}),ae.jsx(_m,{to:"servicios",children:"servicios"})]}),ae.jsxs("div",{children:[" ",ae.jsx("a",{children:"A. Granada | rea de Geomtica "}),ae.jsxs("a",{children:["2025 ",ae.jsx($S,{})]})]})]})}var Qx={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.1.2/LICENSE.txt
 */(function(i,n){(function(l,p){i.exports=p()})(Gw,function(){var l={},p={};function _(x,d,R){if(p[x]=R,x==="index"){var W="var sharedModule = {}; ("+p.shared+")(sharedModule); ("+p.worker+")(sharedModule);",re={};return p.shared(re),p.index(l,re),typeof window<"u"&&l.setWorkerUrl(window.URL.createObjectURL(new Blob([W],{type:"text/javascript"}))),l}}_("shared",["exports"],function(x){function d(r,e,s,o){return new(s||(s=Promise))(function(h,g){function y(E){try{T(o.next(E))}catch(I){g(I)}}function v(E){try{T(o.throw(E))}catch(I){g(I)}}function T(E){var I;E.done?h(E.value):(I=E.value,I instanceof s?I:new s(function(P){P(I)})).then(y,v)}T((o=o.apply(r,e||[])).next())})}function R(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}typeof SuppressedError=="function"&&SuppressedError;var W=re;function re(r,e){this.x=r,this.y=e}re.prototype={clone:function(){return new re(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,e){return this.clone()._rotateAround(r,e)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var e=r.x-this.x,s=r.y-this.y;return e*e+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,e){return Math.atan2(this.x*e-this.y*r,this.x*r+this.y*e)},_matMult:function(r){var e=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=e,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var e=Math.cos(r),s=Math.sin(r),o=s*this.x+e*this.y;return this.x=e*this.x-s*this.y,this.y=o,this},_rotateAround:function(r,e){var s=Math.cos(r),o=Math.sin(r),h=e.y+o*(this.x-e.x)+s*(this.y-e.y);return this.x=e.x+s*(this.x-e.x)-o*(this.y-e.y),this.y=h,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},re.convert=function(r){return r instanceof re?r:Array.isArray(r)?new re(r[0],r[1]):r};var K=R(W),U=Te;function Te(r,e,s,o){this.cx=3*r,this.bx=3*(s-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(o-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=e,this.p2x=s,this.p2y=o}Te.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,e){if(e===void 0&&(e=1e-6),r<0)return 0;if(r>1)return 1;for(var s=r,o=0;o<8;o++){var h=this.sampleCurveX(s)-r;if(Math.abs(h)<e)return s;var g=this.sampleCurveDerivativeX(s);if(Math.abs(g)<1e-6)break;s-=h/g}var y=0,v=1;for(s=r,o=0;o<20&&(h=this.sampleCurveX(s),!(Math.abs(h-r)<e));o++)r>h?y=s:v=s,s=.5*(v-y)+y;return s},solve:function(r,e){return this.sampleCurveY(this.solveCurveX(r,e))}};var ke=R(U);let ze,$e;function oe(){return ze==null&&(ze=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ze}function Q(){if($e==null&&($e=!1,oe())){const e=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(e){for(let o=0;o<5*5;o++){const h=4*o;e.fillStyle=`rgb(${h},${h+1},${h+2})`,e.fillRect(o%5,Math.floor(o/5),1,1)}const s=e.getImageData(0,0,5,5).data;for(let o=0;o<5*5*4;o++)if(o%4!=3&&s[o]!==o){$e=!0;break}}}return $e||!1}function le(r,e,s,o){const h=new ke(r,e,s,o);return function(g){return h.solve(g)}}const xe=le(.25,.1,.25,1);function je(r,e,s){return Math.min(s,Math.max(e,r))}function Xe(r,e,s){const o=s-e,h=((r-e)%o+o)%o+e;return h===e?s:h}function Ke(r,...e){for(const s of e)for(const o in s)r[o]=s[o];return r}let tt=1;function Dt(r,e,s){const o={};for(const h in r)o[h]=e.call(s||this,r[h],h,r);return o}function xt(r,e,s){const o={};for(const h in r)e.call(s||this,r[h],h,r)&&(o[h]=r[h]);return o}function Ot(r){return Array.isArray(r)?r.map(Ot):typeof r=="object"&&r?Dt(r,Ot):r}const Nt={};function si(r){Nt[r]||(typeof console<"u"&&console.warn(r),Nt[r]=!0)}function ar(r,e,s){return(s.y-r.y)*(e.x-r.x)>(e.y-r.y)*(s.x-r.x)}function Pn(r){let e=0;for(let s,o,h=0,g=r.length,y=g-1;h<g;y=h++)s=r[h],o=r[y],e+=(o.x-s.x)*(s.y+o.y);return e}function br(r){return typeof WorkerGlobalScope<"u"&&r!==void 0&&r instanceof WorkerGlobalScope}let pn=null;function He(r){return typeof ImageBitmap<"u"&&r instanceof ImageBitmap}const ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function dt(r,e,s,o,h){return d(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const g=new VideoFrame(r,{timestamp:0});try{const y=g==null?void 0:g.format;if(!y||!y.startsWith("BGR")&&!y.startsWith("RGB"))throw new Error(`Unrecognized format ${y}`);const v=y.startsWith("BGR"),T=new Uint8ClampedArray(o*h*4);if(yield g.copyTo(T,function(E,I,P,D,F){const O=4*Math.max(-I,0),V=(Math.max(0,P)-P)*D*4+O,H=4*D,J=Math.max(0,I),de=Math.max(0,P);return{rect:{x:J,y:de,width:Math.min(E.width,I+D)-J,height:Math.min(E.height,P+F)-de},layout:[{offset:V,stride:H}]}}(r,e,s,o,h)),v)for(let E=0;E<T.length;E+=4){const I=T[E];T[E]=T[E+2],T[E+2]=I}return T}finally{g.close()}})}let It,Mt;const Or="AbortError";function Ai(){return new Error(Or)}const Kr={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Fi(r){return Kr.REGISTERED_PROTOCOLS[r.substring(0,r.indexOf("://"))]}const Ui="global-dispatcher";class Xr extends Error{constructor(e,s,o,h){super(`AJAXError: ${s} (${e}): ${o}`),this.status=e,this.statusText=s,this.url=o,this.body=h}}const $s=()=>br(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,qn=function(r,e){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){const o=Fi(r.url);if(o)return o(r,e);if(br(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:r,targetMapId:Ui},e)}if(!(/^file:/.test(s=r.url)||/^file:/.test($s())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(o,h){return d(this,void 0,void 0,function*(){const g=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,cache:o.cache,referrer:$s(),signal:h.signal});o.type==="json"&&g.headers.set("Accept","application/json");const y=yield fetch(g);if(!y.ok){const E=yield y.blob();throw new Xr(y.status,y.statusText,o.url,E)}let v;v=o.type==="arrayBuffer"||o.type==="image"?y.arrayBuffer():o.type==="json"?y.json():y.text();const T=yield v;if(h.signal.aborted)throw Ai();return{data:T,cacheControl:y.headers.get("Cache-Control"),expires:y.headers.get("Expires")}})}(r,e);if(br(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"getResource",data:r,mustQueue:!0,targetMapId:Ui},e)}var s;return function(o,h){return new Promise((g,y)=>{const v=new XMLHttpRequest;v.open(o.method||"GET",o.url,!0),o.type!=="arrayBuffer"&&o.type!=="image"||(v.responseType="arraybuffer");for(const T in o.headers)v.setRequestHeader(T,o.headers[T]);o.type==="json"&&(v.responseType="text",v.setRequestHeader("Accept","application/json")),v.withCredentials=o.credentials==="include",v.onerror=()=>{y(new Error(v.statusText))},v.onload=()=>{if(!h.signal.aborted)if((v.status>=200&&v.status<300||v.status===0)&&v.response!==null){let T=v.response;if(o.type==="json")try{T=JSON.parse(v.response)}catch(E){return void y(E)}g({data:T,cacheControl:v.getResponseHeader("Cache-Control"),expires:v.getResponseHeader("Expires")})}else{const T=new Blob([v.response],{type:v.getResponseHeader("Content-Type")});y(new Xr(v.status,v.statusText,o.url,T))}},h.signal.addEventListener("abort",()=>{v.abort(),y(Ai())}),v.send(o.body)})}(r,e)};function Lo(r){if(!r||r.indexOf("://")<=0||r.indexOf("data:image/")===0||r.indexOf("blob:")===0)return!0;const e=new URL(r),s=window.location;return e.protocol===s.protocol&&e.host===s.host}function Zn(r,e,s){s[r]&&s[r].indexOf(e)!==-1||(s[r]=s[r]||[],s[r].push(e))}function Gn(r,e,s){if(s&&s[r]){const o=s[r].indexOf(e);o!==-1&&s[r].splice(o,1)}}class Hn{constructor(e,s={}){Ke(this,s),this.type=e}}class Si extends Hn{constructor(e,s={}){super("error",Ke({error:e},s))}}class os{on(e,s){return this._listeners=this._listeners||{},Zn(e,s,this._listeners),this}off(e,s){return Gn(e,s,this._listeners),Gn(e,s,this._oneTimeListeners),this}once(e,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Zn(e,s,this._oneTimeListeners),this):new Promise(o=>this.once(e,o))}fire(e,s){typeof e=="string"&&(e=new Hn(e,s||{}));const o=e.type;if(this.listens(o)){e.target=this;const h=this._listeners&&this._listeners[o]?this._listeners[o].slice():[];for(const v of h)v.call(this,e);const g=this._oneTimeListeners&&this._oneTimeListeners[o]?this._oneTimeListeners[o].slice():[];for(const v of g)Gn(o,v,this._oneTimeListeners),v.call(this,e);const y=this._eventedParent;y&&(Ke(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(e))}else e instanceof Si&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,s){return this._eventedParent=e,this._eventedParentData=s,this}}var _e={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ls=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Za(r,e){const s={};for(const o in r)o!=="ref"&&(s[o]=r[o]);return ls.forEach(o=>{o in e&&(s[o]=e[o])}),s}function Ct(r,e){if(Array.isArray(r)){if(!Array.isArray(e)||r.length!==e.length)return!1;for(let s=0;s<r.length;s++)if(!Ct(r[s],e[s]))return!1;return!0}if(typeof r=="object"&&r!==null&&e!==null){if(typeof e!="object"||Object.keys(r).length!==Object.keys(e).length)return!1;for(const s in r)if(!Ct(r[s],e[s]))return!1;return!0}return r===e}function Bi(r,e){r.push(e)}function fn(r,e,s){Bi(s,{command:"addSource",args:[r,e[r]]})}function qs(r,e,s){Bi(e,{command:"removeSource",args:[r]}),s[r]=!0}function Zs(r,e,s,o){qs(r,s,o),fn(r,e,s)}function Gs(r,e,s){let o;for(o in r[s])if(Object.prototype.hasOwnProperty.call(r[s],o)&&o!=="data"&&!Ct(r[s][o],e[s][o]))return!1;for(o in e[s])if(Object.prototype.hasOwnProperty.call(e[s],o)&&o!=="data"&&!Ct(r[s][o],e[s][o]))return!1;return!0}function cs(r,e,s,o,h,g){r=r||{},e=e||{};for(const y in r)Object.prototype.hasOwnProperty.call(r,y)&&(Ct(r[y],e[y])||s.push({command:g,args:[o,y,e[y],h]}));for(const y in e)Object.prototype.hasOwnProperty.call(e,y)&&!Object.prototype.hasOwnProperty.call(r,y)&&(Ct(r[y],e[y])||s.push({command:g,args:[o,y,e[y],h]}))}function Hs(r){return r.id}function Ga(r,e){return r[e.id]=e,r}class Re{constructor(e,s,o,h){this.message=(e?`${e}: `:"")+o,h&&(this.identifier=h),s!=null&&s.__line__&&(this.line=s.__line__)}}function Sr(r,...e){for(const s of e)for(const o in s)r[o]=s[o];return r}class or extends Error{constructor(e,s){super(s),this.message=s,this.key=e}}class Ha{constructor(e,s=[]){this.parent=e,this.bindings={};for(const[o,h]of s)this.bindings[o]=h}concat(e){return new Ha(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const us={kind:"null"},De={kind:"number"},yt={kind:"string"},pt={kind:"boolean"},Oi={kind:"color"},Nr={kind:"object"},ft={kind:"value"},Wn={kind:"collator"},zn={kind:"formatted"},Z={kind:"padding"},M={kind:"resolvedImage"},L={kind:"variableAnchorOffsetCollection"};function N(r,e){return{kind:"array",itemType:r,N:e}}function $(r){if(r.kind==="array"){const e=$(r.itemType);return typeof r.N=="number"?`array<${e}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${e}>`}return r.kind}const ne=[us,De,yt,pt,Oi,zn,Nr,N(ft),Z,M,L];function se(r,e){if(e.kind==="error")return null;if(r.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!se(r.itemType,e.itemType))&&(typeof r.N!="number"||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if(r.kind==="value"){for(const s of ne)if(!se(s,e))return null}}return`Expected ${$(r)} but found ${$(e)} instead.`}function he(r,e){return e.some(s=>s.kind===r.kind)}function te(r,e){return e.some(s=>s==="null"?r===null:s==="array"?Array.isArray(r):s==="object"?r&&!Array.isArray(r)&&typeof r=="object":s===typeof r)}function pe(r,e){return r.kind==="array"&&e.kind==="array"?r.itemType.kind===e.itemType.kind&&typeof r.N=="number":r.kind===e.kind}const Ee=.96422,ve=.82521,be=4/29,Je=6/29,ot=3*Je*Je,st=Je*Je*Je,Et=Math.PI/180,ct=180/Math.PI;function Gt(r){return(r%=360)<0&&(r+=360),r}function jt([r,e,s,o]){let h,g;const y=mt((.2225045*(r=ui(r))+.7168786*(e=ui(e))+.0606169*(s=ui(s)))/1);r===e&&e===s?h=g=y:(h=mt((.4360747*r+.3850649*e+.1430804*s)/Ee),g=mt((.0139322*r+.0971045*e+.7141733*s)/ve));const v=116*y-16;return[v<0?0:v,500*(h-y),200*(y-g),o]}function ui(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function mt(r){return r>st?Math.pow(r,1/3):r/ot+be}function ei([r,e,s,o]){let h=(r+16)/116,g=isNaN(e)?h:h+e/500,y=isNaN(s)?h:h-s/200;return h=1*lr(h),g=Ee*lr(g),y=ve*lr(y),[Mi(3.1338561*g-1.6168667*h-.4906146*y),Mi(-.9787684*g+1.9161415*h+.033454*y),Mi(.0719453*g-.2289914*h+1.4052427*y),o]}function Mi(r){return(r=r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055)<0?0:r>1?1:r}function lr(r){return r>Je?r*r*r:ot*(r-be)}function $i(r){return parseInt(r.padEnd(2,r),16)/255}function Yi(r,e){return Tr(e?r/100:r,0,1)}function Tr(r,e,s){return Math.min(Math.max(e,r),s)}function th(r){return!r.some(Number.isNaN)}const Vp={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Ft{constructor(e,s,o,h=1,g=!0){this.r=e,this.g=s,this.b=o,this.a=h,g||(this.r*=h,this.g*=h,this.b*=h,h||this.overwriteGetter("rgb",[e,s,o,h]))}static parse(e){if(e instanceof Ft)return e;if(typeof e!="string")return;const s=function(o){if((o=o.toLowerCase().trim())==="transparent")return[0,0,0,0];const h=Vp[o];if(h){const[y,v,T]=h;return[y/255,v/255,T/255,1]}if(o.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(o)){const y=o.length<6?1:2;let v=1;return[$i(o.slice(v,v+=y)),$i(o.slice(v,v+=y)),$i(o.slice(v,v+=y)),$i(o.slice(v,v+y)||"ff")]}if(o.startsWith("rgb")){const y=o.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[v,T,E,I,P,D,F,O,V,H,J,de]=y,ee=[I||" ",F||" ",H].join("");if(ee==="  "||ee==="  /"||ee===",,"||ee===",,,"){const ce=[E,D,V].join(""),we=ce==="%%%"?100:ce===""?255:0;if(we){const Se=[Tr(+T/we,0,1),Tr(+P/we,0,1),Tr(+O/we,0,1),J?Yi(+J,de):1];if(th(Se))return Se}}return}}const g=o.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(g){const[y,v,T,E,I,P,D,F,O]=g,V=[T||" ",I||" ",D].join("");if(V==="  "||V==="  /"||V===",,"||V===",,,"){const H=[+v,Tr(+E,0,100),Tr(+P,0,100),F?Yi(+F,O):1];if(th(H))return function([J,de,ee,ce]){function we(Se){const Ue=(Se+J/30)%12,Ye=de*Math.min(ee,1-ee);return ee-Ye*Math.max(-1,Math.min(Ue-3,9-Ue,1))}return J=Gt(J),de/=100,ee/=100,[we(0),we(8),we(4),ce]}(H)}}}(e);return s?new Ft(...s,!1):void 0}get rgb(){const{r:e,g:s,b:o,a:h}=this,g=h||1/0;return this.overwriteGetter("rgb",[e/g,s/g,o/g,h])}get hcl(){return this.overwriteGetter("hcl",function(e){const[s,o,h,g]=jt(e),y=Math.sqrt(o*o+h*h);return[Math.round(1e4*y)?Gt(Math.atan2(h,o)*ct):NaN,y,s,g]}(this.rgb))}get lab(){return this.overwriteGetter("lab",jt(this.rgb))}overwriteGetter(e,s){return Object.defineProperty(this,e,{value:s}),s}toString(){const[e,s,o,h]=this.rgb;return`rgba(${[e,s,o].map(g=>Math.round(255*g)).join(",")},${h})`}}Ft.black=new Ft(0,0,0,1),Ft.white=new Ft(1,1,1,1),Ft.transparent=new Ft(0,0,0,0),Ft.red=new Ft(1,0,0,1);class Xl{constructor(e,s,o){this.sensitivity=e?s?"variant":"case":s?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,s){return this.collator.compare(e,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Yl{constructor(e,s,o,h,g){this.text=e,this.image=s,this.scale=o,this.fontStack=h,this.textColor=g}}class Cr{constructor(e){this.sections=e}static fromString(e){return new Cr([new Yl(e,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Cr?e:Cr.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Er{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Er)return e;if(typeof e=="number")return new Er([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const s of e)if(typeof s!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]]}return new Er(e)}}toString(){return JSON.stringify(this.values)}}const ih=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class qi{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof qi)return e;if(Array.isArray(e)&&!(e.length<1)&&e.length%2==0){for(let s=0;s<e.length;s+=2){const o=e[s],h=e[s+1];if(typeof o!="string"||!ih.has(o)||!Array.isArray(h)||h.length!==2||typeof h[0]!="number"||typeof h[1]!="number")return}return new qi(e)}}toString(){return JSON.stringify(this.values)}}class jr{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new jr({name:e,available:!1}):null}}function rh(r,e,s,o){return typeof r=="number"&&r>=0&&r<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof s=="number"&&s>=0&&s<=255?o===void 0||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[r,e,s,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[r,e,s,o]:[r,e,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Kn(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof Ft||r instanceof Xl||r instanceof Cr||r instanceof Er||r instanceof qi||r instanceof jr)return!0;if(Array.isArray(r)){for(const e of r)if(!Kn(e))return!1;return!0}if(typeof r=="object"){for(const e in r)if(!Kn(r[e]))return!1;return!0}return!1}function _i(r){if(r===null)return us;if(typeof r=="string")return yt;if(typeof r=="boolean")return pt;if(typeof r=="number")return De;if(r instanceof Ft)return Oi;if(r instanceof Xl)return Wn;if(r instanceof Cr)return zn;if(r instanceof Er)return Z;if(r instanceof qi)return L;if(r instanceof jr)return M;if(Array.isArray(r)){const e=r.length;let s;for(const o of r){const h=_i(o);if(s){if(s===h)continue;s=ft;break}s=h}return N(s||ft,e)}return Nr}function Wa(r){const e=typeof r;return r===null?"":e==="string"||e==="number"||e==="boolean"?String(r):r instanceof Ft||r instanceof Cr||r instanceof Er||r instanceof qi||r instanceof jr?r.toString():JSON.stringify(r)}class hs{constructor(e,s){this.type=e,this.value=s}static parse(e,s){if(e.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Kn(e[1]))return s.error("invalid value");const o=e[1];let h=_i(o);const g=s.expectedType;return h.kind!=="array"||h.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(h=g),new hs(h,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class ai{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const ds={string:yt,number:De,boolean:pt,object:Nr};class Yr{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");let o,h=1;const g=e[0];if(g==="array"){let v,T;if(e.length>2){const E=e[1];if(typeof E!="string"||!(E in ds)||E==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);v=ds[E],h++}else v=ft;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return s.error('The length argument to "array" must be a positive integer literal',2);T=e[2],h++}o=N(v,T)}else{if(!ds[g])throw new Error(`Types doesn't contain name = ${g}`);o=ds[g]}const y=[];for(;h<e.length;h++){const v=s.parse(e[h],h,ft);if(!v)return null;y.push(v)}return new Yr(o,y)}evaluate(e){for(let s=0;s<this.args.length;s++){const o=this.args[s].evaluate(e);if(!se(this.type,_i(o)))return o;if(s===this.args.length-1)throw new ai(`Expected value to be of type ${$(this.type)}, but found ${$(_i(o))} instead.`)}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Ro={"to-boolean":pt,"to-color":Oi,"to-number":De,"to-string":yt};class mn{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");const o=e[0];if(!Ro[o])throw new Error(`Can't parse ${o} as it is not part of the known types`);if((o==="to-boolean"||o==="to-string")&&e.length!==2)return s.error("Expected one argument.");const h=Ro[o],g=[];for(let y=1;y<e.length;y++){const v=s.parse(e[y],y,ft);if(!v)return null;g.push(v)}return new mn(h,g)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let s,o;for(const h of this.args){if(s=h.evaluate(e),o=null,s instanceof Ft)return s;if(typeof s=="string"){const g=e.parseColor(s);if(g)return g}else if(Array.isArray(s)&&(o=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:rh(s[0],s[1],s[2],s[3]),!o))return new Ft(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ai(o||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const o of this.args){s=o.evaluate(e);const h=Er.parse(s);if(h)return h}throw new ai(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const o of this.args){s=o.evaluate(e);const h=qi.parse(s);if(h)return h}throw new ai(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const o of this.args){if(s=o.evaluate(e),s===null)return 0;const h=Number(s);if(!isNaN(h))return h}throw new ai(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return Cr.fromString(Wa(this.args[0].evaluate(e)));case"resolvedImage":return jr.fromString(Wa(this.args[0].evaluate(e)));default:return Wa(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const Jl=["Unknown","Point","LineString","Polygon"];class Ws{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Jl[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let s=this._parseColorCache[e];return s||(s=this._parseColorCache[e]=Ft.parse(e)),s}}class Lt{constructor(e,s,o=[],h,g=new Ha,y=[]){this.registry=e,this.path=o,this.key=o.map(v=>`[${v}]`).join(""),this.scope=g,this.errors=y,this.expectedType=h,this._isConstant=s}parse(e,s,o,h,g={}){return s?this.concat(s,o,h)._parse(e,g):this._parse(e,g)}_parse(e,s){function o(h,g,y){return y==="assert"?new Yr(g,[h]):y==="coerce"?new mn(g,[h]):h}if(e!==null&&typeof e!="string"&&typeof e!="boolean"&&typeof e!="number"||(e=["literal",e]),Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const h=e[0];if(typeof h!="string")return this.error(`Expression name must be a string, but found ${typeof h} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[h];if(g){let y=g.parse(e,this);if(!y)return null;if(this.expectedType){const v=this.expectedType,T=y.type;if(v.kind!=="string"&&v.kind!=="number"&&v.kind!=="boolean"&&v.kind!=="object"&&v.kind!=="array"||T.kind!=="value")if(v.kind!=="color"&&v.kind!=="formatted"&&v.kind!=="resolvedImage"||T.kind!=="value"&&T.kind!=="string")if(v.kind!=="padding"||T.kind!=="value"&&T.kind!=="number"&&T.kind!=="array")if(v.kind!=="variableAnchorOffsetCollection"||T.kind!=="value"&&T.kind!=="array"){if(this.checkSubtype(v,T))return null}else y=o(y,v,s.typeAnnotation||"coerce");else y=o(y,v,s.typeAnnotation||"coerce");else y=o(y,v,s.typeAnnotation||"coerce");else y=o(y,v,s.typeAnnotation||"assert")}if(!(y instanceof hs)&&y.type.kind!=="resolvedImage"&&this._isConstant(y)){const v=new Ws;try{y=new hs(y.type,y.evaluate(v))}catch(T){return this.error(T.message),null}}return y}return this.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(e===void 0?"'undefined' value invalid. Use null instead.":typeof e=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,s,o){const h=typeof e=="number"?this.path.concat(e):this.path,g=o?this.scope.concat(o):this.scope;return new Lt(this.registry,this._isConstant,h,s||null,g,this.errors)}error(e,...s){const o=`${this.key}${s.map(h=>`[${h}]`).join("")}`;this.errors.push(new or(o,e))}checkSubtype(e,s){const o=se(e,s);return o&&this.error(o),o}}class Fo{constructor(e,s,o){this.type=Wn,this.locale=o,this.caseSensitive=e,this.diacriticSensitive=s}static parse(e,s){if(e.length!==2)return s.error("Expected one argument.");const o=e[1];if(typeof o!="object"||Array.isArray(o))return s.error("Collator options argument must be an object.");const h=s.parse(o["case-sensitive"]!==void 0&&o["case-sensitive"],1,pt);if(!h)return null;const g=s.parse(o["diacritic-sensitive"]!==void 0&&o["diacritic-sensitive"],1,pt);if(!g)return null;let y=null;return o.locale&&(y=s.parse(o.locale,1,yt),!y)?null:new Fo(h,g,y)}evaluate(e){return new Xl(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}const gn=8192;function Ql(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function Ka(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function nh(r,e){const s=(180+r[0])/360,o=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,h=Math.pow(2,e.z);return[Math.round(s*h*gn),Math.round(o*h*gn)]}function Up(r,e,s){const o=r[0]-e[0],h=r[1]-e[1],g=r[0]-s[0],y=r[1]-s[1];return o*y-g*h==0&&o*g<=0&&h*y<=0}function Bo(r,e){let s=!1;for(let y=0,v=e.length;y<v;y++){const T=e[y];for(let E=0,I=T.length;E<I-1;E++){if(Up(r,T[E],T[E+1]))return!1;(h=T[E])[1]>(o=r)[1]!=(g=T[E+1])[1]>o[1]&&o[0]<(g[0]-h[0])*(o[1]-h[1])/(g[1]-h[1])+h[0]&&(s=!s)}}var o,h,g;return s}function sh(r,e){for(let s=0;s<e.length;s++)if(Bo(r,e[s]))return!0;return!1}function ah(r,e,s,o){const h=o[0]-s[0],g=o[1]-s[1],y=(r[0]-s[0])*g-h*(r[1]-s[1]),v=(e[0]-s[0])*g-h*(e[1]-s[1]);return y>0&&v<0||y<0&&v>0}function $p(r,e,s){for(const E of s)for(let I=0;I<E.length-1;++I)if((v=[(y=E[I+1])[0]-(g=E[I])[0],y[1]-g[1]])[0]*(T=[(h=e)[0]-(o=r)[0],h[1]-o[1]])[1]-v[1]*T[0]!=0&&ah(o,h,g,y)&&ah(g,y,o,h))return!0;var o,h,g,y,v,T;return!1}function oh(r,e){for(let s=0;s<r.length;++s)if(!Bo(r[s],e))return!1;for(let s=0;s<r.length-1;++s)if($p(r[s],r[s+1],e))return!1;return!0}function qp(r,e){for(let s=0;s<e.length;s++)if(oh(r,e[s]))return!0;return!1}function Oo(r,e,s){const o=[];for(let h=0;h<r.length;h++){const g=[];for(let y=0;y<r[h].length;y++){const v=nh(r[h][y],s);Ql(e,v),g.push(v)}o.push(g)}return o}function ec(r,e,s){const o=[];for(let h=0;h<r.length;h++){const g=Oo(r[h],e,s);o.push(g)}return o}function lh(r,e,s,o){if(r[0]<s[0]||r[0]>s[2]){const h=.5*o;let g=r[0]-s[0]>h?-o:s[0]-r[0]>h?o:0;g===0&&(g=r[0]-s[2]>h?-o:s[2]-r[0]>h?o:0),r[0]+=g}Ql(e,r)}function ch(r,e,s,o){const h=Math.pow(2,o.z)*gn,g=[o.x*gn,o.y*gn],y=[];for(const v of r)for(const T of v){const E=[T.x+g[0],T.y+g[1]];lh(E,e,s,h),y.push(E)}return y}function No(r,e,s,o){const h=Math.pow(2,o.z)*gn,g=[o.x*gn,o.y*gn],y=[];for(const T of r){const E=[];for(const I of T){const P=[I.x+g[0],I.y+g[1]];Ql(e,P),E.push(P)}y.push(E)}if(e[2]-e[0]<=h/2){(v=e)[0]=v[1]=1/0,v[2]=v[3]=-1/0;for(const T of y)for(const E of T)lh(E,e,s,h)}var v;return y}class ps{constructor(e,s){this.type=pt,this.geojson=e,this.geometries=s}static parse(e,s){if(e.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Kn(e[1])){const o=e[1];if(o.type==="FeatureCollection"){const h=[];for(const g of o.features){const{type:y,coordinates:v}=g.geometry;y==="Polygon"&&h.push(v),y==="MultiPolygon"&&h.push(...v)}if(h.length)return new ps(o,{type:"MultiPolygon",coordinates:h})}else if(o.type==="Feature"){const h=o.geometry.type;if(h==="Polygon"||h==="MultiPolygon")return new ps(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new ps(o,o)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return function(s,o){const h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=s.canonicalID();if(o.type==="Polygon"){const v=Oo(o.coordinates,g,y),T=ch(s.geometry(),h,g,y);if(!Ka(h,g))return!1;for(const E of T)if(!Bo(E,v))return!1}if(o.type==="MultiPolygon"){const v=ec(o.coordinates,g,y),T=ch(s.geometry(),h,g,y);if(!Ka(h,g))return!1;for(const E of T)if(!sh(E,v))return!1}return!0}(e,this.geometries);if(e.geometryType()==="LineString")return function(s,o){const h=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=s.canonicalID();if(o.type==="Polygon"){const v=Oo(o.coordinates,g,y),T=No(s.geometry(),h,g,y);if(!Ka(h,g))return!1;for(const E of T)if(!oh(E,v))return!1}if(o.type==="MultiPolygon"){const v=ec(o.coordinates,g,y),T=No(s.geometry(),h,g,y);if(!Ka(h,g))return!1;for(const E of T)if(!qp(E,v))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class jo{constructor(e,s){this.type=s.type,this.name=e,this.boundExpression=s}static parse(e,s){if(e.length!==2||typeof e[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const o=e[1];return s.scope.has(o)?new jo(o,s.scope.get(o)):s.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}class Vr{constructor(e,s,o,h){this.name=e,this.type=s,this._evaluate=o,this.args=h}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,s){const o=e[0],h=Vr.definitions[o];if(!h)return s.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(h)?h[0]:h.type,y=Array.isArray(h)?[[h[1],h[2]]]:h.overloads,v=y.filter(([E])=>!Array.isArray(E)||E.length===e.length-1);let T=null;for(const[E,I]of v){T=new Lt(s.registry,Xa,s.path,null,s.scope);const P=[];let D=!1;for(let F=1;F<e.length;F++){const O=e[F],V=Array.isArray(E)?E[F-1]:E.type,H=T.parse(O,1+P.length,V);if(!H){D=!0;break}P.push(H)}if(!D)if(Array.isArray(E)&&E.length!==P.length)T.error(`Expected ${E.length} arguments, but found ${P.length} instead.`);else{for(let F=0;F<P.length;F++){const O=Array.isArray(E)?E[F]:E.type,V=P[F];T.concat(F+1).checkSubtype(O,V.type)}if(T.errors.length===0)return new Vr(o,g,I,P)}}if(v.length===1)s.errors.push(...T.errors);else{const E=(v.length?v:y).map(([P])=>{return D=P,Array.isArray(D)?`(${D.map($).join(", ")})`:`(${$(D.type)}...)`;var D}).join(" | "),I=[];for(let P=1;P<e.length;P++){const D=s.parse(e[P],1+I.length);if(!D)return null;I.push($(D.type))}s.error(`Expected arguments of type ${E}, but found (${I.join(", ")}) instead.`)}return null}static register(e,s){Vr.definitions=s;for(const o in s)e[o]=Vr}}function Xa(r){if(r instanceof jo)return Xa(r.boundExpression);if(r instanceof Vr&&r.name==="error"||r instanceof Fo||r instanceof ps)return!1;const e=r instanceof mn||r instanceof Yr;let s=!0;return r.eachChild(o=>{s=e?s&&Xa(o):s&&o instanceof hs}),!!s&&Ya(r)&&Vo(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ya(r){if(r instanceof Vr&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof ps)return!1;let e=!0;return r.eachChild(s=>{e&&!Ya(s)&&(e=!1)}),e}function Ja(r){if(r instanceof Vr&&r.name==="feature-state")return!1;let e=!0;return r.eachChild(s=>{e&&!Ja(s)&&(e=!1)}),e}function Vo(r,e){if(r instanceof Vr&&e.indexOf(r.name)>=0)return!1;let s=!0;return r.eachChild(o=>{s&&!Vo(o,e)&&(s=!1)}),s}function Qa(r,e){const s=r.length-1;let o,h,g=0,y=s,v=0;for(;g<=y;)if(v=Math.floor((g+y)/2),o=r[v],h=r[v+1],o<=e){if(v===s||e<h)return v;g=v+1}else{if(!(o>e))throw new ai("Input is not a number.");y=v-1}return 0}class Ks{constructor(e,s,o){this.type=e,this.input=s,this.labels=[],this.outputs=[];for(const[h,g]of o)this.labels.push(h),this.outputs.push(g)}static parse(e,s){if(e.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return s.error("Expected an even number of arguments.");const o=s.parse(e[1],1,De);if(!o)return null;const h=[];let g=null;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);for(let y=1;y<e.length;y+=2){const v=y===1?-1/0:e[y],T=e[y+1],E=y,I=y+1;if(typeof v!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',E);if(h.length&&h[h.length-1][0]>=v)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',E);const P=s.parse(T,I,g);if(!P)return null;g=g||P.type,h.push([v,P])}return new Ks(g,o,h)}evaluate(e){const s=this.labels,o=this.outputs;if(s.length===1)return o[0].evaluate(e);const h=this.input.evaluate(e);if(h<=s[0])return o[0].evaluate(e);const g=s.length;return h>=s[g-1]?o[g-1].evaluate(e):o[Qa(s,h)].evaluate(e)}eachChild(e){e(this.input);for(const s of this.outputs)e(s)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Zp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Gp=uh;function uh(r,e,s,o){this.cx=3*r,this.bx=3*(s-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(o-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=e,this.p2x=s,this.p2y=o}uh.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,e){if(e===void 0&&(e=1e-6),r<0)return 0;if(r>1)return 1;for(var s=r,o=0;o<8;o++){var h=this.sampleCurveX(s)-r;if(Math.abs(h)<e)return s;var g=this.sampleCurveDerivativeX(s);if(Math.abs(g)<1e-6)break;s-=h/g}var y=0,v=1;for(s=r,o=0;o<20&&(h=this.sampleCurveX(s),!(Math.abs(h-r)<e));o++)r>h?y=s:v=s,s=.5*(v-y)+y;return s},solve:function(r,e){return this.sampleCurveY(this.solveCurveX(r,e))}};var Hp=Zp(Gp);function fs(r,e,s){return r+s*(e-r)}function Uo(r,e,s){return r.map((o,h)=>fs(o,e[h],s))}const kr={number:fs,color:function(r,e,s,o="rgb"){switch(o){case"rgb":{const[h,g,y,v]=Uo(r.rgb,e.rgb,s);return new Ft(h,g,y,v,!1)}case"hcl":{const[h,g,y,v]=r.hcl,[T,E,I,P]=e.hcl;let D,F;if(isNaN(h)||isNaN(T))isNaN(h)?isNaN(T)?D=NaN:(D=T,y!==1&&y!==0||(F=E)):(D=h,I!==1&&I!==0||(F=g));else{let de=T-h;T>h&&de>180?de-=360:T<h&&h-T>180&&(de+=360),D=h+s*de}const[O,V,H,J]=function([de,ee,ce,we]){return de=isNaN(de)?0:de*Et,ei([ce,Math.cos(de)*ee,Math.sin(de)*ee,we])}([D,F??fs(g,E,s),fs(y,I,s),fs(v,P,s)]);return new Ft(O,V,H,J,!1)}case"lab":{const[h,g,y,v]=ei(Uo(r.lab,e.lab,s));return new Ft(h,g,y,v,!1)}}},array:Uo,padding:function(r,e,s){return new Er(Uo(r.values,e.values,s))},variableAnchorOffsetCollection:function(r,e,s){const o=r.values,h=e.values;if(o.length!==h.length)throw new ai(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${e.toString()}`);const g=[];for(let y=0;y<o.length;y+=2){if(o[y]!==h[y])throw new ai(`Cannot interpolate values containing mismatched anchors. from[${y}]: ${o[y]}, to[${y}]: ${h[y]}`);g.push(o[y]);const[v,T]=o[y+1],[E,I]=h[y+1];g.push([fs(v,E,s),fs(T,I,s)])}return new qi(g)}};class Ji{constructor(e,s,o,h,g){this.type=e,this.operator=s,this.interpolation=o,this.input=h,this.labels=[],this.outputs=[];for(const[y,v]of g)this.labels.push(y),this.outputs.push(v)}static interpolationFactor(e,s,o,h){let g=0;if(e.name==="exponential")g=Xs(s,e.base,o,h);else if(e.name==="linear")g=Xs(s,1,o,h);else if(e.name==="cubic-bezier"){const y=e.controlPoints;g=new Hp(y[0],y[1],y[2],y[3]).solve(Xs(s,1,o,h))}return g}static parse(e,s){let[o,h,g,...y]=e;if(!Array.isArray(h)||h.length===0)return s.error("Expected an interpolation type expression.",1);if(h[0]==="linear")h={name:"linear"};else if(h[0]==="exponential"){const E=h[1];if(typeof E!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);h={name:"exponential",base:E}}else{if(h[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(h[0])}`,1,0);{const E=h.slice(1);if(E.length!==4||E.some(I=>typeof I!="number"||I<0||I>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);h={name:"cubic-bezier",controlPoints:E}}}if(e.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(g=s.parse(g,2,De),!g)return null;const v=[];let T=null;o==="interpolate-hcl"||o==="interpolate-lab"?T=Oi:s.expectedType&&s.expectedType.kind!=="value"&&(T=s.expectedType);for(let E=0;E<y.length;E+=2){const I=y[E],P=y[E+1],D=E+3,F=E+4;if(typeof I!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(v.length&&v[v.length-1][0]>=I)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',D);const O=s.parse(P,F,T);if(!O)return null;T=T||O.type,v.push([I,O])}return pe(T,De)||pe(T,Oi)||pe(T,Z)||pe(T,L)||pe(T,N(De))?new Ji(T,o,h,g,v):s.error(`Type ${$(T)} is not interpolatable.`)}evaluate(e){const s=this.labels,o=this.outputs;if(s.length===1)return o[0].evaluate(e);const h=this.input.evaluate(e);if(h<=s[0])return o[0].evaluate(e);const g=s.length;if(h>=s[g-1])return o[g-1].evaluate(e);const y=Qa(s,h),v=Ji.interpolationFactor(this.interpolation,h,s[y],s[y+1]),T=o[y].evaluate(e),E=o[y+1].evaluate(e);switch(this.operator){case"interpolate":return kr[this.type.kind](T,E,v);case"interpolate-hcl":return kr.color(T,E,v,"hcl");case"interpolate-lab":return kr.color(T,E,v,"lab")}}eachChild(e){e(this.input);for(const s of this.outputs)e(s)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function Xs(r,e,s,o){const h=o-s,g=r-s;return h===0?0:e===1?g/h:(Math.pow(e,g)-1)/(Math.pow(e,h)-1)}class Pt{constructor(e,s){this.type=e,this.args=s}static parse(e,s){if(e.length<2)return s.error("Expectected at least one argument.");let o=null;const h=s.expectedType;h&&h.kind!=="value"&&(o=h);const g=[];for(const v of e.slice(1)){const T=s.parse(v,1+g.length,o,void 0,{typeAnnotation:"omit"});if(!T)return null;o=o||T.type,g.push(T)}if(!o)throw new Error("No output type");const y=h&&g.some(v=>se(h,v.type));return new Pt(y?ft:o,g)}evaluate(e){let s,o=null,h=0;for(const g of this.args)if(h++,o=g.evaluate(e),o&&o instanceof jr&&!o.available&&(s||(s=o.name),o=null,h===this.args.length&&(o=s)),o!==null)break;return o}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}class $o{constructor(e,s){this.type=s.type,this.bindings=[].concat(e),this.result=s}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const s of this.bindings)e(s[1]);e(this.result)}static parse(e,s){if(e.length<4)return s.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const o=[];for(let g=1;g<e.length-1;g+=2){const y=e[g];if(typeof y!="string")return s.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return s.error("Variable names must contain only alphanumeric characters or '_'.",g);const v=s.parse(e[g+1],g+1);if(!v)return null;o.push([y,v])}const h=s.parse(e[e.length-1],e.length-1,s.expectedType,o);return h?new $o(o,h):null}outputDefined(){return this.result.outputDefined()}}class tc{constructor(e,s,o){this.type=e,this.index=s,this.input=o}static parse(e,s){if(e.length!==3)return s.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=s.parse(e[1],1,De),h=s.parse(e[2],2,N(s.expectedType||ft));return o&&h?new tc(h.type.itemType,o,h):null}evaluate(e){const s=this.index.evaluate(e),o=this.input.evaluate(e);if(s<0)throw new ai(`Array index out of bounds: ${s} < 0.`);if(s>=o.length)throw new ai(`Array index out of bounds: ${s} > ${o.length-1}.`);if(s!==Math.floor(s))throw new ai(`Array index must be an integer, but found ${s} instead.`);return o[s]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}}class ic{constructor(e,s){this.type=pt,this.needle=e,this.haystack=s}static parse(e,s){if(e.length!==3)return s.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const o=s.parse(e[1],1,ft),h=s.parse(e[2],2,ft);return o&&h?he(o.type,[pt,yt,De,us,ft])?new ic(o,h):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${$(o.type)} instead`):null}evaluate(e){const s=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!o)return!1;if(!te(s,["boolean","string","number","null"]))throw new ai(`Expected first argument to be of type boolean, string, number or null, but found ${$(_i(s))} instead.`);if(!te(o,["string","array"]))throw new ai(`Expected second argument to be of type array or string, but found ${$(_i(o))} instead.`);return o.indexOf(s)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class qo{constructor(e,s,o){this.type=De,this.needle=e,this.haystack=s,this.fromIndex=o}static parse(e,s){if(e.length<=2||e.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=s.parse(e[1],1,ft),h=s.parse(e[2],2,ft);if(!o||!h)return null;if(!he(o.type,[pt,yt,De,us,ft]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${$(o.type)} instead`);if(e.length===4){const g=s.parse(e[3],3,De);return g?new qo(o,h,g):null}return new qo(o,h)}evaluate(e){const s=this.needle.evaluate(e),o=this.haystack.evaluate(e);if(!te(s,["boolean","string","number","null"]))throw new ai(`Expected first argument to be of type boolean, string, number or null, but found ${$(_i(s))} instead.`);if(!te(o,["string","array"]))throw new ai(`Expected second argument to be of type array or string, but found ${$(_i(o))} instead.`);if(this.fromIndex){const h=this.fromIndex.evaluate(e);return o.indexOf(s,h)}return o.indexOf(s)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class rc{constructor(e,s,o,h,g,y){this.inputType=e,this.type=s,this.input=o,this.cases=h,this.outputs=g,this.otherwise=y}static parse(e,s){if(e.length<5)return s.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return s.error("Expected an even number of arguments.");let o,h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const g={},y=[];for(let E=2;E<e.length-1;E+=2){let I=e[E];const P=e[E+1];Array.isArray(I)||(I=[I]);const D=s.concat(E);if(I.length===0)return D.error("Expected at least one branch label.");for(const O of I){if(typeof O!="number"&&typeof O!="string")return D.error("Branch labels must be numbers or strings.");if(typeof O=="number"&&Math.abs(O)>Number.MAX_SAFE_INTEGER)return D.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof O=="number"&&Math.floor(O)!==O)return D.error("Numeric branch labels must be integer values.");if(o){if(D.checkSubtype(o,_i(O)))return null}else o=_i(O);if(g[String(O)]!==void 0)return D.error("Branch labels must be unique.");g[String(O)]=y.length}const F=s.parse(P,E,h);if(!F)return null;h=h||F.type,y.push(F)}const v=s.parse(e[1],1,ft);if(!v)return null;const T=s.parse(e[e.length-1],e.length-1,h);return T?v.type.kind!=="value"&&s.concat(1).checkSubtype(o,v.type)?null:new rc(o,h,v,g,y,T):null}evaluate(e){const s=this.input.evaluate(e);return(_i(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class nc{constructor(e,s,o){this.type=e,this.branches=s,this.otherwise=o}static parse(e,s){if(e.length<4)return s.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return s.error("Expected an odd number of arguments.");let o;s.expectedType&&s.expectedType.kind!=="value"&&(o=s.expectedType);const h=[];for(let y=1;y<e.length-1;y+=2){const v=s.parse(e[y],y,pt);if(!v)return null;const T=s.parse(e[y+1],y+1,o);if(!T)return null;h.push([v,T]),o=o||T.type}const g=s.parse(e[e.length-1],e.length-1,o);if(!g)return null;if(!o)throw new Error("Can't infer output type");return new nc(o,h,g)}evaluate(e){for(const[s,o]of this.branches)if(s.evaluate(e))return o.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[s,o]of this.branches)e(s),e(o);e(this.otherwise)}outputDefined(){return this.branches.every(([e,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class Zo{constructor(e,s,o,h){this.type=e,this.input=s,this.beginIndex=o,this.endIndex=h}static parse(e,s){if(e.length<=2||e.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const o=s.parse(e[1],1,ft),h=s.parse(e[2],2,De);if(!o||!h)return null;if(!he(o.type,[N(ft),yt,ft]))return s.error(`Expected first argument to be of type array or string, but found ${$(o.type)} instead`);if(e.length===4){const g=s.parse(e[3],3,De);return g?new Zo(o.type,o,h,g):null}return new Zo(o.type,o,h)}evaluate(e){const s=this.input.evaluate(e),o=this.beginIndex.evaluate(e);if(!te(s,["string","array"]))throw new ai(`Expected first argument to be of type array or string, but found ${$(_i(s))} instead.`);if(this.endIndex){const h=this.endIndex.evaluate(e);return s.slice(o,h)}return s.slice(o)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function hh(r,e){return r==="=="||r==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function dh(r,e,s,o){return o.compare(e,s)===0}function Ys(r,e,s){const o=r!=="=="&&r!=="!=";return class e2{constructor(g,y,v){this.type=pt,this.lhs=g,this.rhs=y,this.collator=v,this.hasUntypedArgument=g.type.kind==="value"||y.type.kind==="value"}static parse(g,y){if(g.length!==3&&g.length!==4)return y.error("Expected two or three arguments.");const v=g[0];let T=y.parse(g[1],1,ft);if(!T)return null;if(!hh(v,T.type))return y.concat(1).error(`"${v}" comparisons are not supported for type '${$(T.type)}'.`);let E=y.parse(g[2],2,ft);if(!E)return null;if(!hh(v,E.type))return y.concat(2).error(`"${v}" comparisons are not supported for type '${$(E.type)}'.`);if(T.type.kind!==E.type.kind&&T.type.kind!=="value"&&E.type.kind!=="value")return y.error(`Cannot compare types '${$(T.type)}' and '${$(E.type)}'.`);o&&(T.type.kind==="value"&&E.type.kind!=="value"?T=new Yr(E.type,[T]):T.type.kind!=="value"&&E.type.kind==="value"&&(E=new Yr(T.type,[E])));let I=null;if(g.length===4){if(T.type.kind!=="string"&&E.type.kind!=="string"&&T.type.kind!=="value"&&E.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(I=y.parse(g[3],3,Wn),!I)return null}return new e2(T,E,I)}evaluate(g){const y=this.lhs.evaluate(g),v=this.rhs.evaluate(g);if(o&&this.hasUntypedArgument){const T=_i(y),E=_i(v);if(T.kind!==E.kind||T.kind!=="string"&&T.kind!=="number")throw new ai(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${T.kind}, ${E.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const T=_i(y),E=_i(v);if(T.kind!=="string"||E.kind!=="string")return e(g,y,v)}return this.collator?s(g,y,v,this.collator.evaluate(g)):e(g,y,v)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}}}const Wp=Ys("==",function(r,e,s){return e===s},dh),Kp=Ys("!=",function(r,e,s){return e!==s},function(r,e,s,o){return!dh(0,e,s,o)}),Xp=Ys("<",function(r,e,s){return e<s},function(r,e,s,o){return o.compare(e,s)<0}),Yp=Ys(">",function(r,e,s){return e>s},function(r,e,s,o){return o.compare(e,s)>0}),Jp=Ys("<=",function(r,e,s){return e<=s},function(r,e,s,o){return o.compare(e,s)<=0}),Qp=Ys(">=",function(r,e,s){return e>=s},function(r,e,s,o){return o.compare(e,s)>=0});class sc{constructor(e,s,o,h,g){this.type=yt,this.number=e,this.locale=s,this.currency=o,this.minFractionDigits=h,this.maxFractionDigits=g}static parse(e,s){if(e.length!==3)return s.error("Expected two arguments.");const o=s.parse(e[1],1,De);if(!o)return null;const h=e[2];if(typeof h!="object"||Array.isArray(h))return s.error("NumberFormat options argument must be an object.");let g=null;if(h.locale&&(g=s.parse(h.locale,1,yt),!g))return null;let y=null;if(h.currency&&(y=s.parse(h.currency,1,yt),!y))return null;let v=null;if(h["min-fraction-digits"]&&(v=s.parse(h["min-fraction-digits"],1,De),!v))return null;let T=null;return h["max-fraction-digits"]&&(T=s.parse(h["max-fraction-digits"],1,De),!T)?null:new sc(o,g,y,v,T)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class Go{constructor(e){this.type=zn,this.sections=e}static parse(e,s){if(e.length<2)return s.error("Expected at least one argument.");const o=e[1];if(!Array.isArray(o)&&typeof o=="object")return s.error("First argument must be an image or text section.");const h=[];let g=!1;for(let y=1;y<=e.length-1;++y){const v=e[y];if(g&&typeof v=="object"&&!Array.isArray(v)){g=!1;let T=null;if(v["font-scale"]&&(T=s.parse(v["font-scale"],1,De),!T))return null;let E=null;if(v["text-font"]&&(E=s.parse(v["text-font"],1,N(yt)),!E))return null;let I=null;if(v["text-color"]&&(I=s.parse(v["text-color"],1,Oi),!I))return null;const P=h[h.length-1];P.scale=T,P.font=E,P.textColor=I}else{const T=s.parse(e[y],1,ft);if(!T)return null;const E=T.type.kind;if(E!=="string"&&E!=="value"&&E!=="null"&&E!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,h.push({content:T,scale:null,font:null,textColor:null})}}return new Go(h)}evaluate(e){return new Cr(this.sections.map(s=>{const o=s.content.evaluate(e);return _i(o)===M?new Yl("",o,null,null,null):new Yl(Wa(o),null,s.scale?s.scale.evaluate(e):null,s.font?s.font.evaluate(e).join(","):null,s.textColor?s.textColor.evaluate(e):null)}))}eachChild(e){for(const s of this.sections)e(s.content),s.scale&&e(s.scale),s.font&&e(s.font),s.textColor&&e(s.textColor)}outputDefined(){return!1}}class ac{constructor(e){this.type=M,this.input=e}static parse(e,s){if(e.length!==2)return s.error("Expected two arguments.");const o=s.parse(e[1],1,yt);return o?new ac(o):s.error("No image name provided.")}evaluate(e){const s=this.input.evaluate(e),o=jr.fromString(s);return o&&e.availableImages&&(o.available=e.availableImages.indexOf(s)>-1),o}eachChild(e){e(this.input)}outputDefined(){return!1}}class oc{constructor(e){this.type=De,this.input=e}static parse(e,s){if(e.length!==2)return s.error(`Expected 1 argument, but found ${e.length-1} instead.`);const o=s.parse(e[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${$(o.type)} instead.`):new oc(o):null}evaluate(e){const s=this.input.evaluate(e);if(typeof s=="string"||Array.isArray(s))return s.length;throw new ai(`Expected value to be of type string or array, but found ${$(_i(s))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const Js={"==":Wp,"!=":Kp,">":Yp,"<":Xp,">=":Qp,"<=":Jp,array:Yr,at:tc,boolean:Yr,case:nc,coalesce:Pt,collator:Fo,format:Go,image:ac,in:ic,"index-of":qo,interpolate:Ji,"interpolate-hcl":Ji,"interpolate-lab":Ji,length:oc,let:$o,literal:hs,match:rc,number:Yr,"number-format":sc,object:Yr,slice:Zo,step:Ks,string:Yr,"to-boolean":mn,"to-color":mn,"to-number":mn,"to-string":mn,var:jo,within:ps};function ph(r,[e,s,o,h]){e=e.evaluate(r),s=s.evaluate(r),o=o.evaluate(r);const g=h?h.evaluate(r):1,y=rh(e,s,o,g);if(y)throw new ai(y);return new Ft(e/255,s/255,o/255,g,!1)}function fh(r,e){return r in e}function lc(r,e){const s=e[r];return s===void 0?null:s}function ms(r){return{type:r}}function mh(r){return{result:"success",value:r}}function Qs(r){return{result:"error",value:r}}function ea(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function gh(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function cc(r){return!!r.expression&&r.expression.interpolated}function zt(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function ta(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function ef(r){return r}function yh(r,e){const s=e.type==="color",o=r.stops&&typeof r.stops[0][0]=="object",h=o||!(o||r.property!==void 0),g=r.type||(cc(e)?"exponential":"interval");if(s||e.type==="padding"){const I=s?Ft.parse:Er.parse;(r=Sr({},r)).stops&&(r.stops=r.stops.map(P=>[P[0],I(P[1])])),r.default=I(r.default?r.default:e.default)}if(r.colorSpace&&(y=r.colorSpace)!=="rgb"&&y!=="hcl"&&y!=="lab")throw new Error(`Unknown color space: "${r.colorSpace}"`);var y;let v,T,E;if(g==="exponential")v=_h;else if(g==="interval")v=hi;else if(g==="categorical"){v=tf,T=Object.create(null);for(const I of r.stops)T[I[0]]=I[1];E=typeof r.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);v=kt}if(o){const I={},P=[];for(let O=0;O<r.stops.length;O++){const V=r.stops[O],H=V[0].zoom;I[H]===void 0&&(I[H]={zoom:H,type:r.type,property:r.property,default:r.default,stops:[]},P.push(H)),I[H].stops.push([V[0].value,V[1]])}const D=[];for(const O of P)D.push([I[O].zoom,yh(I[O],e)]);const F={name:"linear"};return{kind:"composite",interpolationType:F,interpolationFactor:Ji.interpolationFactor.bind(void 0,F),zoomStops:D.map(O=>O[0]),evaluate:({zoom:O},V)=>_h({stops:D,base:r.base},e,O).evaluate(O,V)}}if(h){const I=g==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:I,interpolationFactor:Ji.interpolationFactor.bind(void 0,I),zoomStops:r.stops.map(P=>P[0]),evaluate:({zoom:P})=>v(r,e,P,T,E)}}return{kind:"source",evaluate(I,P){const D=P&&P.properties?P.properties[r.property]:void 0;return D===void 0?eo(r.default,e.default):v(r,e,D,T,E)}}}function eo(r,e,s){return r!==void 0?r:e!==void 0?e:s!==void 0?s:void 0}function tf(r,e,s,o,h){return eo(typeof s===h?o[s]:void 0,r.default,e.default)}function hi(r,e,s){if(zt(s)!=="number")return eo(r.default,e.default);const o=r.stops.length;if(o===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[o-1][0])return r.stops[o-1][1];const h=Qa(r.stops.map(g=>g[0]),s);return r.stops[h][1]}function _h(r,e,s){const o=r.base!==void 0?r.base:1;if(zt(s)!=="number")return eo(r.default,e.default);const h=r.stops.length;if(h===1||s<=r.stops[0][0])return r.stops[0][1];if(s>=r.stops[h-1][0])return r.stops[h-1][1];const g=Qa(r.stops.map(I=>I[0]),s),y=function(I,P,D,F){const O=F-D,V=I-D;return O===0?0:P===1?V/O:(Math.pow(P,V)-1)/(Math.pow(P,O)-1)}(s,o,r.stops[g][0],r.stops[g+1][0]),v=r.stops[g][1],T=r.stops[g+1][1],E=kr[e.type]||ef;return typeof v.evaluate=="function"?{evaluate(...I){const P=v.evaluate.apply(void 0,I),D=T.evaluate.apply(void 0,I);if(P!==void 0&&D!==void 0)return E(P,D,y,r.colorSpace)}}:E(v,T,y,r.colorSpace)}function kt(r,e,s){switch(e.type){case"color":s=Ft.parse(s);break;case"formatted":s=Cr.fromString(s.toString());break;case"resolvedImage":s=jr.fromString(s.toString());break;case"padding":s=Er.parse(s);break;default:zt(s)===e.type||e.type==="enum"&&e.values[s]||(s=void 0)}return eo(s,r.default,e.default)}Vr.register(Js,{error:[{kind:"error"},[yt],(r,[e])=>{throw new ai(e.evaluate(r))}],typeof:[yt,[ft],(r,[e])=>$(_i(e.evaluate(r)))],"to-rgba":[N(De,4),[Oi],(r,[e])=>{const[s,o,h,g]=e.evaluate(r).rgb;return[255*s,255*o,255*h,g]}],rgb:[Oi,[De,De,De],ph],rgba:[Oi,[De,De,De,De],ph],has:{type:pt,overloads:[[[yt],(r,[e])=>fh(e.evaluate(r),r.properties())],[[yt,Nr],(r,[e,s])=>fh(e.evaluate(r),s.evaluate(r))]]},get:{type:ft,overloads:[[[yt],(r,[e])=>lc(e.evaluate(r),r.properties())],[[yt,Nr],(r,[e,s])=>lc(e.evaluate(r),s.evaluate(r))]]},"feature-state":[ft,[yt],(r,[e])=>lc(e.evaluate(r),r.featureState||{})],properties:[Nr,[],r=>r.properties()],"geometry-type":[yt,[],r=>r.geometryType()],id:[ft,[],r=>r.id()],zoom:[De,[],r=>r.globals.zoom],"heatmap-density":[De,[],r=>r.globals.heatmapDensity||0],"line-progress":[De,[],r=>r.globals.lineProgress||0],accumulated:[ft,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[De,ms(De),(r,e)=>{let s=0;for(const o of e)s+=o.evaluate(r);return s}],"*":[De,ms(De),(r,e)=>{let s=1;for(const o of e)s*=o.evaluate(r);return s}],"-":{type:De,overloads:[[[De,De],(r,[e,s])=>e.evaluate(r)-s.evaluate(r)],[[De],(r,[e])=>-e.evaluate(r)]]},"/":[De,[De,De],(r,[e,s])=>e.evaluate(r)/s.evaluate(r)],"%":[De,[De,De],(r,[e,s])=>e.evaluate(r)%s.evaluate(r)],ln2:[De,[],()=>Math.LN2],pi:[De,[],()=>Math.PI],e:[De,[],()=>Math.E],"^":[De,[De,De],(r,[e,s])=>Math.pow(e.evaluate(r),s.evaluate(r))],sqrt:[De,[De],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[De,[De],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[De,[De],(r,[e])=>Math.log(e.evaluate(r))],log2:[De,[De],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[De,[De],(r,[e])=>Math.sin(e.evaluate(r))],cos:[De,[De],(r,[e])=>Math.cos(e.evaluate(r))],tan:[De,[De],(r,[e])=>Math.tan(e.evaluate(r))],asin:[De,[De],(r,[e])=>Math.asin(e.evaluate(r))],acos:[De,[De],(r,[e])=>Math.acos(e.evaluate(r))],atan:[De,[De],(r,[e])=>Math.atan(e.evaluate(r))],min:[De,ms(De),(r,e)=>Math.min(...e.map(s=>s.evaluate(r)))],max:[De,ms(De),(r,e)=>Math.max(...e.map(s=>s.evaluate(r)))],abs:[De,[De],(r,[e])=>Math.abs(e.evaluate(r))],round:[De,[De],(r,[e])=>{const s=e.evaluate(r);return s<0?-Math.round(-s):Math.round(s)}],floor:[De,[De],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[De,[De],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[pt,[yt,ft],(r,[e,s])=>r.properties()[e.value]===s.value],"filter-id-==":[pt,[ft],(r,[e])=>r.id()===e.value],"filter-type-==":[pt,[yt],(r,[e])=>r.geometryType()===e.value],"filter-<":[pt,[yt,ft],(r,[e,s])=>{const o=r.properties()[e.value],h=s.value;return typeof o==typeof h&&o<h}],"filter-id-<":[pt,[ft],(r,[e])=>{const s=r.id(),o=e.value;return typeof s==typeof o&&s<o}],"filter->":[pt,[yt,ft],(r,[e,s])=>{const o=r.properties()[e.value],h=s.value;return typeof o==typeof h&&o>h}],"filter-id->":[pt,[ft],(r,[e])=>{const s=r.id(),o=e.value;return typeof s==typeof o&&s>o}],"filter-<=":[pt,[yt,ft],(r,[e,s])=>{const o=r.properties()[e.value],h=s.value;return typeof o==typeof h&&o<=h}],"filter-id-<=":[pt,[ft],(r,[e])=>{const s=r.id(),o=e.value;return typeof s==typeof o&&s<=o}],"filter->=":[pt,[yt,ft],(r,[e,s])=>{const o=r.properties()[e.value],h=s.value;return typeof o==typeof h&&o>=h}],"filter-id->=":[pt,[ft],(r,[e])=>{const s=r.id(),o=e.value;return typeof s==typeof o&&s>=o}],"filter-has":[pt,[ft],(r,[e])=>e.value in r.properties()],"filter-has-id":[pt,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[pt,[N(yt)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[pt,[N(ft)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[pt,[yt,N(ft)],(r,[e,s])=>s.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[pt,[yt,N(ft)],(r,[e,s])=>function(o,h,g,y){for(;g<=y;){const v=g+y>>1;if(h[v]===o)return!0;h[v]>o?y=v-1:g=v+1}return!1}(r.properties()[e.value],s.value,0,s.value.length-1)],all:{type:pt,overloads:[[[pt,pt],(r,[e,s])=>e.evaluate(r)&&s.evaluate(r)],[ms(pt),(r,e)=>{for(const s of e)if(!s.evaluate(r))return!1;return!0}]]},any:{type:pt,overloads:[[[pt,pt],(r,[e,s])=>e.evaluate(r)||s.evaluate(r)],[ms(pt),(r,e)=>{for(const s of e)if(s.evaluate(r))return!0;return!1}]]},"!":[pt,[pt],(r,[e])=>!e.evaluate(r)],"is-supported-script":[pt,[yt],(r,[e])=>{const s=r.globals&&r.globals.isSupportedScript;return!s||s(e.evaluate(r))}],upcase:[yt,[yt],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[yt,[yt],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[yt,ms(ft),(r,e)=>e.map(s=>Wa(s.evaluate(r))).join("")],"resolved-locale":[yt,[Wn],(r,[e])=>e.evaluate(r).resolvedLocale()]});class to{constructor(e,s){var o;this.expression=e,this._warningHistory={},this._evaluator=new Ws,this._defaultValue=s?(o=s).type==="color"&&ta(o.default)?new Ft(0,0,0,0):o.type==="color"?Ft.parse(o.default)||null:o.type==="padding"?Er.parse(o.default)||null:o.type==="variableAnchorOffsetCollection"?qi.parse(o.default)||null:o.default===void 0?null:o.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(e,s,o,h,g,y){return this._evaluator.globals=e,this._evaluator.feature=s,this._evaluator.featureState=o,this._evaluator.canonical=h,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(e,s,o,h,g,y){this._evaluator.globals=e,this._evaluator.feature=s||null,this._evaluator.featureState=o||null,this._evaluator.canonical=h,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null;try{const v=this.expression.evaluate(this._evaluator);if(v==null||typeof v=="number"&&v!=v)return this._defaultValue;if(this._enumValues&&!(v in this._enumValues))throw new ai(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(v)} instead.`);return v}catch(v){return this._warningHistory[v.message]||(this._warningHistory[v.message]=!0,typeof console<"u"&&console.warn(v.message)),this._defaultValue}}}function $t(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Js}function Vt(r,e){const s=new Lt(Js,Xa,[],e?function(h){const g={color:Oi,string:yt,number:De,enum:yt,boolean:pt,formatted:zn,padding:Z,resolvedImage:M,variableAnchorOffsetCollection:L};return h.type==="array"?N(g[h.value]||ft,h.length):g[h.type]}(e):void 0),o=s.parse(r,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return o?mh(new to(o,e)):Qs(s.errors)}class ia{constructor(e,s){this.kind=e,this._styleExpression=s,this.isStateDependent=e!=="constant"&&!Ja(s.expression)}evaluateWithoutErrorHandling(e,s,o,h,g,y){return this._styleExpression.evaluateWithoutErrorHandling(e,s,o,h,g,y)}evaluate(e,s,o,h,g,y){return this._styleExpression.evaluate(e,s,o,h,g,y)}}class Ho{constructor(e,s,o,h){this.kind=e,this.zoomStops=o,this._styleExpression=s,this.isStateDependent=e!=="camera"&&!Ja(s.expression),this.interpolationType=h}evaluateWithoutErrorHandling(e,s,o,h,g,y){return this._styleExpression.evaluateWithoutErrorHandling(e,s,o,h,g,y)}evaluate(e,s,o,h,g,y){return this._styleExpression.evaluate(e,s,o,h,g,y)}interpolationFactor(e,s,o){return this.interpolationType?Ji.interpolationFactor(this.interpolationType,e,s,o):0}}function vh(r,e){const s=Vt(r,e);if(s.result==="error")return s;const o=s.value.expression,h=Ya(o);if(!h&&!ea(e))return Qs([new or("","data expressions not supported")]);const g=Vo(o,["zoom"]);if(!g&&!gh(e))return Qs([new or("","zoom expressions not supported")]);const y=Ko(o);return y||g?y instanceof or?Qs([y]):y instanceof Ji&&!cc(e)?Qs([new or("",'"interpolate" expressions cannot be used with this property')]):mh(y?new Ho(h?"camera":"composite",s.value,y.labels,y instanceof Ji?y.interpolation:void 0):new ia(h?"constant":"source",s.value)):Qs([new or("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Wo{constructor(e,s){this._parameters=e,this._specification=s,Sr(this,yh(this._parameters,this._specification))}static deserialize(e){return new Wo(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Ko(r){let e=null;if(r instanceof $o)e=Ko(r.result);else if(r instanceof Pt){for(const s of r.args)if(e=Ko(s),e)break}else(r instanceof Ks||r instanceof Ji)&&r.input instanceof Vr&&r.input.name==="zoom"&&(e=r);return e instanceof or||r.eachChild(s=>{const o=Ko(s);o instanceof or?e=o:!e&&o?e=new or("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&o&&e!==o&&(e=new or("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function uc(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const e of r.slice(1))if(!uc(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const xh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Xo(r){if(r==null)return{filter:()=>!0,needGeometry:!1};uc(r)||(r=ra(r));const e=Vt(r,xh);if(e.result==="error")throw new Error(e.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,o,h)=>e.value.evaluate(s,o,{},h),needGeometry:hc(r)}}function wh(r,e){return r<e?-1:r>e?1:0}function hc(r){if(!Array.isArray(r))return!1;if(r[0]==="within")return!0;for(let e=1;e<r.length;e++)if(hc(r[e]))return!0;return!1}function ra(r){if(!r)return!0;const e=r[0];return r.length<=1?e!=="any":e==="=="?dc(r[1],r[2],"=="):e==="!="?Yo(dc(r[1],r[2],"==")):e==="<"||e===">"||e==="<="||e===">="?dc(r[1],r[2],e):e==="any"?(s=r.slice(1),["any"].concat(s.map(ra))):e==="all"?["all"].concat(r.slice(1).map(ra)):e==="none"?["all"].concat(r.slice(1).map(ra).map(Yo)):e==="in"?bh(r[1],r.slice(2)):e==="!in"?Yo(bh(r[1],r.slice(2))):e==="has"?Sh(r[1]):e==="!has"?Yo(Sh(r[1])):e!=="within"||r;var s}function dc(r,e,s){switch(r){case"$type":return[`filter-type-${s}`,e];case"$id":return[`filter-id-${s}`,e];default:return[`filter-${s}`,r,e]}}function bh(r,e){if(e.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(s=>typeof s!=typeof e[0])?["filter-in-large",r,["literal",e.sort(wh)]]:["filter-in-small",r,["literal",e]]}}function Sh(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Yo(r){return["!",r]}function pc(r){const e=typeof r;if(e==="number"||e==="boolean"||e==="string"||r==null)return JSON.stringify(r);if(Array.isArray(r)){let h="[";for(const g of r)h+=`${pc(g)},`;return`${h}]`}const s=Object.keys(r).sort();let o="{";for(let h=0;h<s.length;h++)o+=`${JSON.stringify(s[h])}:${pc(r[s[h]])},`;return`${o}}`}function rf(r){let e="";for(const s of ls)e+=`/${pc(r[s])}`;return e}function Th(r){const e=r.value;return e?[new Re(r.key,e,"constants have been deprecated as of v8")]:[]}function oi(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function Xn(r){if(Array.isArray(r))return r.map(Xn);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const e={};for(const s in r)e[s]=Xn(r[s]);return e}return oi(r)}function Ir(r){const e=r.key,s=r.value,o=r.valueSpec||{},h=r.objectElementValidators||{},g=r.style,y=r.styleSpec,v=r.validateSpec;let T=[];const E=zt(s);if(E!=="object")return[new Re(e,s,`object expected, ${E} found`)];for(const I in s){const P=I.split(".")[0],D=o[P]||o["*"];let F;if(h[P])F=h[P];else if(o[P])F=v;else if(h["*"])F=h["*"];else{if(!o["*"]){T.push(new Re(e,s[I],`unknown property "${I}"`));continue}F=v}T=T.concat(F({key:(e&&`${e}.`)+I,value:s[I],valueSpec:D,style:g,styleSpec:y,object:s,objectKey:I,validateSpec:v},s))}for(const I in o)h[I]||o[I].required&&o[I].default===void 0&&s[I]===void 0&&T.push(new Re(e,s,`missing required property "${I}"`));return T}function na(r){const e=r.value,s=r.valueSpec,o=r.style,h=r.styleSpec,g=r.key,y=r.arrayElementValidator||r.validateSpec;if(zt(e)!=="array")return[new Re(g,e,`array expected, ${zt(e)} found`)];if(s.length&&e.length!==s.length)return[new Re(g,e,`array length ${s.length} expected, length ${e.length} found`)];if(s["min-length"]&&e.length<s["min-length"])return[new Re(g,e,`array length at least ${s["min-length"]} expected, length ${e.length} found`)];let v={type:s.value,values:s.values};h.$version<7&&(v.function=s.function),zt(s.value)==="object"&&(v=s.value);let T=[];for(let E=0;E<e.length;E++)T=T.concat(y({array:e,arrayIndex:E,value:e[E],valueSpec:v,validateSpec:r.validateSpec,style:o,styleSpec:h,key:`${g}[${E}]`}));return T}function fc(r){const e=r.key,s=r.value,o=r.valueSpec;let h=zt(s);return h==="number"&&s!=s&&(h="NaN"),h!=="number"?[new Re(e,s,`number expected, ${h} found`)]:"minimum"in o&&s<o.minimum?[new Re(e,s,`${s} is less than the minimum value ${o.minimum}`)]:"maximum"in o&&s>o.maximum?[new Re(e,s,`${s} is greater than the maximum value ${o.maximum}`)]:[]}function mc(r){const e=r.valueSpec,s=oi(r.value.type);let o,h,g,y={};const v=s!=="categorical"&&r.value.property===void 0,T=!v,E=zt(r.value.stops)==="array"&&zt(r.value.stops[0])==="array"&&zt(r.value.stops[0][0])==="object",I=Ir({key:r.key,value:r.value,valueSpec:r.styleSpec.function,validateSpec:r.validateSpec,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(F){if(s==="identity")return[new Re(F.key,F.value,'identity function may not have a "stops" property')];let O=[];const V=F.value;return O=O.concat(na({key:F.key,value:V,valueSpec:F.valueSpec,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,arrayElementValidator:P})),zt(V)==="array"&&V.length===0&&O.push(new Re(F.key,V,"array must have at least one stop")),O},default:function(F){return F.validateSpec({key:F.key,value:F.value,valueSpec:e,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec})}}});return s==="identity"&&v&&I.push(new Re(r.key,r.value,'missing required property "property"')),s==="identity"||r.value.stops||I.push(new Re(r.key,r.value,'missing required property "stops"')),s==="exponential"&&r.valueSpec.expression&&!cc(r.valueSpec)&&I.push(new Re(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(T&&!ea(r.valueSpec)?I.push(new Re(r.key,r.value,"property functions not supported")):v&&!gh(r.valueSpec)&&I.push(new Re(r.key,r.value,"zoom functions not supported"))),s!=="categorical"&&!E||r.value.property!==void 0||I.push(new Re(r.key,r.value,'"property" property is required')),I;function P(F){let O=[];const V=F.value,H=F.key;if(zt(V)!=="array")return[new Re(H,V,`array expected, ${zt(V)} found`)];if(V.length!==2)return[new Re(H,V,`array length 2 expected, length ${V.length} found`)];if(E){if(zt(V[0])!=="object")return[new Re(H,V,`object expected, ${zt(V[0])} found`)];if(V[0].zoom===void 0)return[new Re(H,V,"object stop key must have zoom")];if(V[0].value===void 0)return[new Re(H,V,"object stop key must have value")];if(g&&g>oi(V[0].zoom))return[new Re(H,V[0].zoom,"stop zoom values must appear in ascending order")];oi(V[0].zoom)!==g&&(g=oi(V[0].zoom),h=void 0,y={}),O=O.concat(Ir({key:`${H}[0]`,value:V[0],valueSpec:{zoom:{}},validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec,objectElementValidators:{zoom:fc,value:D}}))}else O=O.concat(D({key:`${H}[0]`,value:V[0],valueSpec:{},validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec},V));return $t(Xn(V[1]))?O.concat([new Re(`${H}[1]`,V[1],"expressions are not allowed in function stops.")]):O.concat(F.validateSpec({key:`${H}[1]`,value:V[1],valueSpec:e,validateSpec:F.validateSpec,style:F.style,styleSpec:F.styleSpec}))}function D(F,O){const V=zt(F.value),H=oi(F.value),J=F.value!==null?F.value:O;if(o){if(V!==o)return[new Re(F.key,J,`${V} stop domain type must match previous stop domain type ${o}`)]}else o=V;if(V!=="number"&&V!=="string"&&V!=="boolean")return[new Re(F.key,J,"stop domain value must be a number, string, or boolean")];if(V!=="number"&&s!=="categorical"){let de=`number expected, ${V} found`;return ea(e)&&s===void 0&&(de+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Re(F.key,J,de)]}return s!=="categorical"||V!=="number"||isFinite(H)&&Math.floor(H)===H?s!=="categorical"&&V==="number"&&h!==void 0&&H<h?[new Re(F.key,J,"stop domain values must appear in ascending order")]:(h=H,s==="categorical"&&H in y?[new Re(F.key,J,"stop domain values must be unique")]:(y[H]=!0,[])):[new Re(F.key,J,`integer expected, found ${H}`)]}}function sa(r){const e=(r.expressionContext==="property"?vh:Vt)(Xn(r.value),r.valueSpec);if(e.result==="error")return e.value.map(o=>new Re(`${r.key}${o.key}`,r.value,o.message));const s=e.value.expression||e.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!s.outputDefined())return[new Re(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!Ja(s))return[new Re(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!Ja(s))return[new Re(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!Vo(s,["zoom","feature-state"]))return[new Re(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!Ya(s))return[new Re(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function gs(r){const e=r.key,s=r.value,o=r.valueSpec,h=[];return Array.isArray(o.values)?o.values.indexOf(oi(s))===-1&&h.push(new Re(e,s,`expected one of [${o.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(o.values).indexOf(oi(s))===-1&&h.push(new Re(e,s,`expected one of [${Object.keys(o.values).join(", ")}], ${JSON.stringify(s)} found`)),h}function aa(r){return uc(Xn(r.value))?sa(Sr({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):io(r)}function io(r){const e=r.value,s=r.key;if(zt(e)!=="array")return[new Re(s,e,`array expected, ${zt(e)} found`)];const o=r.styleSpec;let h,g=[];if(e.length<1)return[new Re(s,e,"filter array must have at least 1 element")];switch(g=g.concat(gs({key:`${s}[0]`,value:e[0],valueSpec:o.filter_operator,style:r.style,styleSpec:r.styleSpec})),oi(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&oi(e[1])==="$type"&&g.push(new Re(s,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":e.length!==3&&g.push(new Re(s,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(h=zt(e[1]),h!=="string"&&g.push(new Re(`${s}[1]`,e[1],`string expected, ${h} found`)));for(let y=2;y<e.length;y++)h=zt(e[y]),oi(e[1])==="$type"?g=g.concat(gs({key:`${s}[${y}]`,value:e[y],valueSpec:o.geometry_type,style:r.style,styleSpec:r.styleSpec})):h!=="string"&&h!=="number"&&h!=="boolean"&&g.push(new Re(`${s}[${y}]`,e[y],`string, number, or boolean expected, ${h} found`));break;case"any":case"all":case"none":for(let y=1;y<e.length;y++)g=g.concat(io({key:`${s}[${y}]`,value:e[y],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":h=zt(e[1]),e.length!==2?g.push(new Re(s,e,`filter array for "${e[0]}" operator must have 2 elements`)):h!=="string"&&g.push(new Re(`${s}[1]`,e[1],`string expected, ${h} found`));break;case"within":h=zt(e[1]),e.length!==2?g.push(new Re(s,e,`filter array for "${e[0]}" operator must have 2 elements`)):h!=="object"&&g.push(new Re(`${s}[1]`,e[1],`object expected, ${h} found`))}return g}function gc(r,e){const s=r.key,o=r.validateSpec,h=r.style,g=r.styleSpec,y=r.value,v=r.objectKey,T=g[`${e}_${r.layerType}`];if(!T)return[];const E=v.match(/^(.*)-transition$/);if(e==="paint"&&E&&T[E[1]]&&T[E[1]].transition)return o({key:s,value:y,valueSpec:g.transition,style:h,styleSpec:g});const I=r.valueSpec||T[v];if(!I)return[new Re(s,y,`unknown property "${v}"`)];let P;if(zt(y)==="string"&&ea(I)&&!I.tokens&&(P=/^{([^}]+)}$/.exec(y)))return[new Re(s,y,`"${v}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(P[1])} }\`.`)];const D=[];return r.layerType==="symbol"&&(v==="text-field"&&h&&!h.glyphs&&D.push(new Re(s,y,'use of "text-field" requires a style "glyphs" property')),v==="text-font"&&ta(Xn(y))&&oi(y.type)==="identity"&&D.push(new Re(s,y,'"text-font" does not support identity functions'))),D.concat(o({key:r.key,value:y,valueSpec:I,style:h,styleSpec:g,expressionContext:"property",propertyType:e,propertyKey:v}))}function Jo(r){return gc(r,"paint")}function yc(r){return gc(r,"layout")}function _c(r){let e=[];const s=r.value,o=r.key,h=r.style,g=r.styleSpec;s.type||s.ref||e.push(new Re(o,s,'either "type" or "ref" is required'));let y=oi(s.type);const v=oi(s.ref);if(s.id){const T=oi(s.id);for(let E=0;E<r.arrayIndex;E++){const I=h.layers[E];oi(I.id)===T&&e.push(new Re(o,s.id,`duplicate layer id "${s.id}", previously used at line ${I.id.__line__}`))}}if("ref"in s){let T;["type","source","source-layer","filter","layout"].forEach(E=>{E in s&&e.push(new Re(o,s[E],`"${E}" is prohibited for ref layers`))}),h.layers.forEach(E=>{oi(E.id)===v&&(T=E)}),T?T.ref?e.push(new Re(o,s.ref,"ref cannot reference another ref layer")):y=oi(T.type):e.push(new Re(o,s.ref,`ref layer "${v}" not found`))}else if(y!=="background")if(s.source){const T=h.sources&&h.sources[s.source],E=T&&oi(T.type);T?E==="vector"&&y==="raster"?e.push(new Re(o,s.source,`layer "${s.id}" requires a raster source`)):E!=="raster-dem"&&y==="hillshade"?e.push(new Re(o,s.source,`layer "${s.id}" requires a raster-dem source`)):E==="raster"&&y!=="raster"?e.push(new Re(o,s.source,`layer "${s.id}" requires a vector source`)):E!=="vector"||s["source-layer"]?E==="raster-dem"&&y!=="hillshade"?e.push(new Re(o,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!s.paint||!s.paint["line-gradient"]||E==="geojson"&&T.lineMetrics||e.push(new Re(o,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new Re(o,s,`layer "${s.id}" must specify a "source-layer"`)):e.push(new Re(o,s.source,`source "${s.source}" not found`))}else e.push(new Re(o,s,'missing required property "source"'));return e=e.concat(Ir({key:o,value:s,valueSpec:g.layer,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,objectElementValidators:{"*":()=>[],type:()=>r.validateSpec({key:`${o}.type`,value:s.type,valueSpec:g.layer.type,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,object:s,objectKey:"type"}),filter:aa,layout:T=>Ir({layer:s,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":E=>yc(Sr({layerType:y},E))}}),paint:T=>Ir({layer:s,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":E=>Jo(Sr({layerType:y},E))}})}})),e}function yn(r){const e=r.value,s=r.key,o=zt(e);return o!=="string"?[new Re(s,e,`string expected, ${o} found`)]:[]}const Ch={promoteId:function({key:r,value:e}){if(zt(e)==="string")return yn({key:r,value:e});{const s=[];for(const o in e)s.push(...yn({key:`${r}.${o}`,value:e[o]}));return s}}};function Eh(r){const e=r.value,s=r.key,o=r.styleSpec,h=r.style,g=r.validateSpec;if(!e.type)return[new Re(s,e,'"type" is required')];const y=oi(e.type);let v;switch(y){case"vector":case"raster":return v=Ir({key:s,value:e,valueSpec:o[`source_${y.replace("-","_")}`],style:r.style,styleSpec:o,objectElementValidators:Ch,validateSpec:g}),v;case"raster-dem":return v=function(T){var E;const I=(E=T.sourceName)!==null&&E!==void 0?E:"",P=T.value,D=T.styleSpec,F=D.source_raster_dem,O=T.style;let V=[];const H=zt(P);if(P===void 0)return V;if(H!=="object")return V.push(new Re("source_raster_dem",P,`object expected, ${H} found`)),V;const J=oi(P.encoding)==="custom",de=["redFactor","greenFactor","blueFactor","baseShift"],ee=T.value.encoding?`"${T.value.encoding}"`:"Default";for(const ce in P)!J&&de.includes(ce)?V.push(new Re(ce,P[ce],`In "${I}": "${ce}" is only valid when "encoding" is set to "custom". ${ee} encoding found`)):F[ce]?V=V.concat(T.validateSpec({key:ce,value:P[ce],valueSpec:F[ce],validateSpec:T.validateSpec,style:O,styleSpec:D})):V.push(new Re(ce,P[ce],`unknown property "${ce}"`));return V}({sourceName:s,value:e,style:r.style,styleSpec:o,validateSpec:g}),v;case"geojson":if(v=Ir({key:s,value:e,valueSpec:o.source_geojson,style:h,styleSpec:o,validateSpec:g,objectElementValidators:Ch}),e.cluster)for(const T in e.clusterProperties){const[E,I]=e.clusterProperties[T],P=typeof E=="string"?[E,["accumulated"],["get",T]]:E;v.push(...sa({key:`${s}.${T}.map`,value:I,validateSpec:g,expressionContext:"cluster-map"})),v.push(...sa({key:`${s}.${T}.reduce`,value:P,validateSpec:g,expressionContext:"cluster-reduce"}))}return v;case"video":return Ir({key:s,value:e,valueSpec:o.source_video,style:h,validateSpec:g,styleSpec:o});case"image":return Ir({key:s,value:e,valueSpec:o.source_image,style:h,validateSpec:g,styleSpec:o});case"canvas":return[new Re(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return gs({key:`${s}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:h,validateSpec:g,styleSpec:o})}}function kh(r){const e=r.value,s=r.styleSpec,o=s.light,h=r.style;let g=[];const y=zt(e);if(e===void 0)return g;if(y!=="object")return g=g.concat([new Re("light",e,`object expected, ${y} found`)]),g;for(const v in e){const T=v.match(/^(.*)-transition$/);g=g.concat(T&&o[T[1]]&&o[T[1]].transition?r.validateSpec({key:v,value:e[v],valueSpec:s.transition,validateSpec:r.validateSpec,style:h,styleSpec:s}):o[v]?r.validateSpec({key:v,value:e[v],valueSpec:o[v],validateSpec:r.validateSpec,style:h,styleSpec:s}):[new Re(v,e[v],`unknown property "${v}"`)])}return g}function Ih(r){const e=r.value,s=r.styleSpec,o=s.sky,h=r.style,g=zt(e);if(e===void 0)return[];if(g!=="object")return[new Re("sky",e,`object expected, ${g} found`)];let y=[];for(const v in e)y=y.concat(o[v]?Di({key:v,value:e[v],valueSpec:o[v],style:h,styleSpec:s}):[new Re(v,e[v],`unknown property "${v}"`)]);return y}function Ph(r){const e=r.value,s=r.styleSpec,o=s.terrain,h=r.style;let g=[];const y=zt(e);if(e===void 0)return g;if(y!=="object")return g=g.concat([new Re("terrain",e,`object expected, ${y} found`)]),g;for(const v in e)g=g.concat(o[v]?r.validateSpec({key:v,value:e[v],valueSpec:o[v],validateSpec:r.validateSpec,style:h,styleSpec:s}):[new Re(v,e[v],`unknown property "${v}"`)]);return g}function ro(r){let e=[];const s=r.value,o=r.key;if(Array.isArray(s)){const h=[],g=[];for(const y in s)s[y].id&&h.includes(s[y].id)&&e.push(new Re(o,s,`all the sprites' ids must be unique, but ${s[y].id} is duplicated`)),h.push(s[y].id),s[y].url&&g.includes(s[y].url)&&e.push(new Re(o,s,`all the sprites' URLs must be unique, but ${s[y].url} is duplicated`)),g.push(s[y].url),e=e.concat(Ir({key:`${o}[${y}]`,value:s[y],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:r.validateSpec}));return e}return yn({key:o,value:s})}const no={"*":()=>[],array:na,boolean:function(r){const e=r.value,s=r.key,o=zt(e);return o!=="boolean"?[new Re(s,e,`boolean expected, ${o} found`)]:[]},number:fc,color:function(r){const e=r.key,s=r.value,o=zt(s);return o!=="string"?[new Re(e,s,`color expected, ${o} found`)]:Ft.parse(String(s))?[]:[new Re(e,s,`color expected, "${s}" found`)]},constants:Th,enum:gs,filter:aa,function:mc,layer:_c,object:Ir,source:Eh,light:kh,sky:Ih,terrain:Ph,string:yn,formatted:function(r){return yn(r).length===0?[]:sa(r)},resolvedImage:function(r){return yn(r).length===0?[]:sa(r)},padding:function(r){const e=r.key,s=r.value;if(zt(s)==="array"){if(s.length<1||s.length>4)return[new Re(e,s,`padding requires 1 to 4 values; ${s.length} values found`)];const o={type:"number"};let h=[];for(let g=0;g<s.length;g++)h=h.concat(r.validateSpec({key:`${e}[${g}]`,value:s[g],validateSpec:r.validateSpec,valueSpec:o}));return h}return fc({key:e,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(r){const e=r.key,s=r.value,o=zt(s),h=r.styleSpec;if(o!=="array"||s.length<1||s.length%2!=0)return[new Re(e,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let g=[];for(let y=0;y<s.length;y+=2)g=g.concat(gs({key:`${e}[${y}]`,value:s[y],valueSpec:h.layout_symbol["text-anchor"]})),g=g.concat(na({key:`${e}[${y+1}]`,value:s[y+1],valueSpec:{length:2,value:"number"},validateSpec:r.validateSpec,style:r.style,styleSpec:h}));return g},sprite:ro};function Di(r){const e=r.value,s=r.valueSpec,o=r.styleSpec;return r.validateSpec=Di,s.expression&&ta(oi(e))?mc(r):s.expression&&$t(Xn(e))?sa(r):s.type&&no[s.type]?no[s.type](r):Ir(Sr({},r,{valueSpec:s.type?o[s.type]:s}))}function oa(r){const e=r.value,s=r.key,o=yn(r);return o.length||(e.indexOf("{fontstack}")===-1&&o.push(new Re(s,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&o.push(new Re(s,e,'"glyphs" url must include a "{range}" token'))),o}function Ur(r,e=_e){let s=[];return s=s.concat(Di({key:"",value:r,valueSpec:e.$root,styleSpec:e,style:r,validateSpec:Di,objectElementValidators:{glyphs:oa,"*":()=>[]}})),r.constants&&(s=s.concat(Th({key:"constants",value:r.constants,style:r,styleSpec:e,validateSpec:Di}))),zh(s)}function _n(r){return function(e){return r({...e,validateSpec:Di})}}function zh(r){return[].concat(r).sort((e,s)=>e.line-s.line)}function cr(r){return function(...e){return zh(r.apply(this,e))}}Ur.source=cr(_n(Eh)),Ur.sprite=cr(_n(ro)),Ur.glyphs=cr(_n(oa)),Ur.light=cr(_n(kh)),Ur.sky=cr(_n(Ih)),Ur.terrain=cr(_n(Ph)),Ur.layer=cr(_n(_c)),Ur.filter=cr(_n(aa)),Ur.paintProperty=cr(_n(Jo)),Ur.layoutProperty=cr(_n(yc));const la=Ur,vc=la.light,nf=la.paintProperty,xc=la.layoutProperty;function Ah(r,e){let s=!1;if(e&&e.length)for(const o of e)r.fire(new Si(new Error(o.message))),s=!0;return s}class An{constructor(e,s,o){const h=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;const y=new Int32Array(this.arrayBuffer);e=y[0],this.d=(s=y[1])+2*(o=y[2]);for(let T=0;T<this.d*this.d;T++){const E=y[3+T],I=y[3+T+1];h.push(E===I?null:y.subarray(E,I))}const v=y[3+h.length+1];this.keys=y.subarray(y[3+h.length],v),this.bboxes=y.subarray(v),this.insert=this._insertReadonly}else{this.d=s+2*o;for(let y=0;y<this.d*this.d;y++)h.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=e,this.padding=o,this.scale=s/e,this.uid=0;const g=o/s*e;this.min=-g,this.max=e+g}insert(e,s,o,h,g){this._forEachCell(s,o,h,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(e),this.bboxes.push(s),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(e,s,o,h,g,y){this.cells[g].push(y)}query(e,s,o,h,g){const y=this.min,v=this.max;if(e<=y&&s<=y&&v<=o&&v<=h&&!g)return Array.prototype.slice.call(this.keys);{const T=[];return this._forEachCell(e,s,o,h,this._queryCell,T,{},g),T}}_queryCell(e,s,o,h,g,y,v,T){const E=this.cells[g];if(E!==null){const I=this.keys,P=this.bboxes;for(let D=0;D<E.length;D++){const F=E[D];if(v[F]===void 0){const O=4*F;(T?T(P[O+0],P[O+1],P[O+2],P[O+3]):e<=P[O+2]&&s<=P[O+3]&&o>=P[O+0]&&h>=P[O+1])?(v[F]=!0,y.push(I[F])):v[F]=!1}}}}_forEachCell(e,s,o,h,g,y,v,T){const E=this._convertToCellCoord(e),I=this._convertToCellCoord(s),P=this._convertToCellCoord(o),D=this._convertToCellCoord(h);for(let F=E;F<=P;F++)for(let O=I;O<=D;O++){const V=this.d*O+F;if((!T||T(this._convertFromCellCoord(F),this._convertFromCellCoord(O),this._convertFromCellCoord(F+1),this._convertFromCellCoord(O+1)))&&g.call(this,e,s,o,h,V,y,v,T))return}}_convertFromCellCoord(e){return(e-this.padding)/this.scale}_convertToCellCoord(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const e=this.cells,s=3+this.cells.length+1+1;let o=0;for(let y=0;y<this.cells.length;y++)o+=this.cells[y].length;const h=new Int32Array(s+o+this.keys.length+this.bboxes.length);h[0]=this.extent,h[1]=this.n,h[2]=this.padding;let g=s;for(let y=0;y<e.length;y++){const v=e[y];h[3+y]=g,h.set(v,g),g+=v.length}return h[3+e.length]=g,h.set(this.keys,g),g+=this.keys.length,h[3+e.length+1]=g,h.set(this.bboxes,g),g+=this.bboxes.length,h.buffer}static serialize(e,s){const o=e.toArrayBuffer();return s&&s.push(o),{buffer:o}}static deserialize(e){return new An(e.buffer)}}const Yn={};function Ge(r,e,s={}){if(Yn[r])throw new Error(`${r} is already registered.`);Object.defineProperty(e,"_classRegistryKey",{value:r,writeable:!1}),Yn[r]={klass:e,omit:s.omit||[],shallow:s.shallow||[]}}Ge("Object",Object),Ge("TransferableGridIndex",An),Ge("Color",Ft),Ge("Error",Error),Ge("AJAXError",Xr),Ge("ResolvedImage",jr),Ge("StylePropertyFunction",Wo),Ge("StyleExpression",to,{omit:["_evaluator"]}),Ge("ZoomDependentExpression",Ho),Ge("ZoomConstantExpression",ia),Ge("CompoundExpression",Vr,{omit:["_evaluate"]});for(const r in Js)Js[r]._classRegistryKey||Ge(`Expression_${r}`,Js[r]);function wc(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function ys(r,e){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||r instanceof Error)return r;if(wc(r)||He(r))return e&&e.push(r),r;if(ArrayBuffer.isView(r)){const s=r;return e&&e.push(s.buffer),s}if(r instanceof ImageData)return e&&e.push(r.data.buffer),r;if(Array.isArray(r)){const s=[];for(const o of r)s.push(ys(o,e));return s}if(typeof r=="object"){const s=r.constructor,o=s._classRegistryKey;if(!o)throw new Error(`can't serialize object of unregistered class ${s.name}`);if(!Yn[o])throw new Error(`${o} is not registered.`);const h=s.serialize?s.serialize(r,e):{};if(s.serialize){if(e&&h===e[e.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const g in r){if(!r.hasOwnProperty(g)||Yn[o].omit.indexOf(g)>=0)continue;const y=r[g];h[g]=Yn[o].shallow.indexOf(g)>=0?y:ys(y,e)}r instanceof Error&&(h.message=r.message)}if(h.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(h.$name=o),h}throw new Error("can't serialize object of type "+typeof r)}function ca(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||r instanceof Error||wc(r)||He(r)||ArrayBuffer.isView(r)||r instanceof ImageData)return r;if(Array.isArray(r))return r.map(ca);if(typeof r=="object"){const e=r.$name||"Object";if(!Yn[e])throw new Error(`can't deserialize unregistered class ${e}`);const{klass:s}=Yn[e];if(!s)throw new Error(`can't deserialize unregistered class ${e}`);if(s.deserialize)return s.deserialize(r);const o=Object.create(s.prototype);for(const h of Object.keys(r)){if(h==="$name")continue;const g=r[h];o[h]=Yn[e].shallow.indexOf(h)>=0?g:ca(g)}return o}throw new Error("can't deserialize object of type "+typeof r)}class bc{constructor(){this.first=!0}update(e,s){const o=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=o,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=o,!0):(this.lastFloorZoom>o?(this.lastIntegerZoom=o+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<o&&(this.lastIntegerZoom=o,this.lastIntegerZoomTime=s),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=o,!0))}}const qe={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function so(r){for(const e of r)if(el(e.charCodeAt(0)))return!0;return!1}function Qo(r){for(const e of r)if(!Mh(e.charCodeAt(0)))return!1;return!0}function Mh(r){return!(qe.Arabic(r)||qe["Arabic Supplement"](r)||qe["Arabic Extended-A"](r)||qe["Arabic Presentation Forms-A"](r)||qe["Arabic Presentation Forms-B"](r))}function el(r){return!(r!==746&&r!==747&&(r<4352||!(qe["Bopomofo Extended"](r)||qe.Bopomofo(r)||qe["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||qe["CJK Compatibility Ideographs"](r)||qe["CJK Compatibility"](r)||qe["CJK Radicals Supplement"](r)||qe["CJK Strokes"](r)||!(!qe["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||qe["CJK Unified Ideographs Extension A"](r)||qe["CJK Unified Ideographs"](r)||qe["Enclosed CJK Letters and Months"](r)||qe["Hangul Compatibility Jamo"](r)||qe["Hangul Jamo Extended-A"](r)||qe["Hangul Jamo Extended-B"](r)||qe["Hangul Jamo"](r)||qe["Hangul Syllables"](r)||qe.Hiragana(r)||qe["Ideographic Description Characters"](r)||qe.Kanbun(r)||qe["Kangxi Radicals"](r)||qe["Katakana Phonetic Extensions"](r)||qe.Katakana(r)&&r!==12540||!(!qe["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!qe["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||qe["Unified Canadian Aboriginal Syllabics"](r)||qe["Unified Canadian Aboriginal Syllabics Extended"](r)||qe["Vertical Forms"](r)||qe["Yijing Hexagram Symbols"](r)||qe["Yi Syllables"](r)||qe["Yi Radicals"](r))))}function Sc(r){return!(el(r)||function(e){return!!(qe["Latin-1 Supplement"](e)&&(e===167||e===169||e===174||e===177||e===188||e===189||e===190||e===215||e===247)||qe["General Punctuation"](e)&&(e===8214||e===8224||e===8225||e===8240||e===8241||e===8251||e===8252||e===8258||e===8263||e===8264||e===8265||e===8273)||qe["Letterlike Symbols"](e)||qe["Number Forms"](e)||qe["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||e===9003||e>=9085&&e<=9114||e>=9150&&e<=9165||e===9167||e>=9169&&e<=9179||e>=9186&&e<=9215)||qe["Control Pictures"](e)&&e!==9251||qe["Optical Character Recognition"](e)||qe["Enclosed Alphanumerics"](e)||qe["Geometric Shapes"](e)||qe["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||qe["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||qe["CJK Symbols and Punctuation"](e)||qe.Katakana(e)||qe["Private Use Area"](e)||qe["CJK Compatibility Forms"](e)||qe["Small Form Variants"](e)||qe["Halfwidth and Fullwidth Forms"](e)||e===8734||e===8756||e===8757||e>=9984&&e<=10087||e>=10102&&e<=10131||e===65532||e===65533)}(r))}function Tc(r){return r>=1424&&r<=2303||qe["Arabic Presentation Forms-A"](r)||qe["Arabic Presentation Forms-B"](r)}function Cc(r,e){return!(!e&&Tc(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||qe.Khmer(r))}function Dh(r){for(const e of r)if(Tc(e.charCodeAt(0)))return!0;return!1}const _s=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(r){this.pluginStatus=r.pluginStatus,this.pluginURL=r.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(r){this.applyArabicShaping=r.applyArabicShaping,this.processBidirectionalText=r.processBidirectionalText,this.processStyledBidirectionalText=r.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Ht{constructor(e,s){this.zoom=e,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new bc,this.transition={})}isSupportedScript(e){return function(s,o){for(const h of s)if(!Cc(h.charCodeAt(0),o))return!1;return!0}(e,_s.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,s=e-Math.floor(e),o=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*o}:{fromScale:.5,toScale:1,t:1-(1-o)*s}}}class tl{constructor(e,s){this.property=e,this.value=s,this.expression=function(o,h){if(ta(o))return new Wo(o,h);if($t(o)){const g=vh(o,h);if(g.result==="error")throw new Error(g.value.map(y=>`${y.key}: ${y.message}`).join(", "));return g.value}{let g=o;return h.type==="color"&&typeof o=="string"?g=Ft.parse(o):h.type!=="padding"||typeof o!="number"&&!Array.isArray(o)?h.type==="variableAnchorOffsetCollection"&&Array.isArray(o)&&(g=qi.parse(o)):g=Er.parse(o),{kind:"constant",evaluate:()=>g}}}(s===void 0?e.specification.default:s,e.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(e,s,o){return this.property.possiblyEvaluate(this,e,s,o)}}class il{constructor(e){this.property=e,this.value=new tl(e,void 0)}transitioned(e,s){return new kc(this.property,this.value,s,Ke({},e.transition,this.transition),e.now)}untransitioned(){return new kc(this.property,this.value,null,{},0)}}class Ec{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return Ot(this._values[e].value.value)}setValue(e,s){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new il(this._values[e].property)),this._values[e].value=new tl(this._values[e].property,s===null?void 0:Ot(s))}getTransition(e){return Ot(this._values[e].transition)}setTransition(e,s){Object.prototype.hasOwnProperty.call(this._values,e)||(this._values[e]=new il(this._values[e].property)),this._values[e].transition=Ot(s)||void 0}serialize(){const e={};for(const s of Object.keys(this._values)){const o=this.getValue(s);o!==void 0&&(e[s]=o);const h=this.getTransition(s);h!==void 0&&(e[`${s}-transition`]=h)}return e}transitioned(e,s){const o=new Lh(this._properties);for(const h of Object.keys(this._values))o._values[h]=this._values[h].transitioned(e,s._values[h]);return o}untransitioned(){const e=new Lh(this._properties);for(const s of Object.keys(this._values))e._values[s]=this._values[s].untransitioned();return e}}class kc{constructor(e,s,o,h,g){this.property=e,this.value=s,this.begin=g+h.delay||0,this.end=this.begin+h.duration||0,e.specification.transition&&(h.delay||h.duration)&&(this.prior=o)}possiblyEvaluate(e,s,o){const h=e.now||0,g=this.value.possiblyEvaluate(e,s,o),y=this.prior;if(y){if(h>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(h<this.begin)return y.possiblyEvaluate(e,s,o);{const v=(h-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(e,s,o),g,function(T){if(T<=0)return 0;if(T>=1)return 1;const E=T*T,I=E*T;return 4*(T<.5?I:3*(T-E)+I-.75)}(v))}}return g}}class Lh{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,s,o){const h=new ao(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(e,s,o);return h}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class sf{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}hasValue(e){return this._values[e].value!==void 0}getValue(e){return Ot(this._values[e].value)}setValue(e,s){this._values[e]=new tl(this._values[e].property,s===null?void 0:Ot(s))}serialize(){const e={};for(const s of Object.keys(this._values)){const o=this.getValue(s);o!==void 0&&(e[s]=o)}return e}possiblyEvaluate(e,s,o){const h=new ao(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].possiblyEvaluate(e,s,o);return h}}class Jr{constructor(e,s,o){this.property=e,this.value=s,this.parameters=o}isConstant(){return this.value.kind==="constant"}constantOr(e){return this.value.kind==="constant"?this.value.value:e}evaluate(e,s,o,h){return this.property.evaluate(this.value,this.parameters,e,s,o,h)}}class ao{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class et{constructor(e){this.specification=e}possiblyEvaluate(e,s){if(e.isDataDriven())throw new Error("Value should not be data driven");return e.expression.evaluate(s)}interpolate(e,s,o){const h=kr[this.specification.type];return h?h(e,s,o):e}}class nt{constructor(e,s){this.specification=e,this.overrides=s}possiblyEvaluate(e,s,o,h){return new Jr(this,e.expression.kind==="constant"||e.expression.kind==="camera"?{kind:"constant",value:e.expression.evaluate(s,null,{},o,h)}:e.expression,s)}interpolate(e,s,o){if(e.value.kind!=="constant"||s.value.kind!=="constant")return e;if(e.value.value===void 0||s.value.value===void 0)return new Jr(this,{kind:"constant",value:void 0},e.parameters);const h=kr[this.specification.type];if(h){const g=h(e.value.value,s.value.value,o);return new Jr(this,{kind:"constant",value:g},e.parameters)}return e}evaluate(e,s,o,h,g,y){return e.kind==="constant"?e.value:e.evaluate(s,o,h,g,y)}}class vs extends nt{possiblyEvaluate(e,s,o,h){if(e.value===void 0)return new Jr(this,{kind:"constant",value:void 0},s);if(e.expression.kind==="constant"){const g=e.expression.evaluate(s,null,{},o,h),y=e.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,v=this._calculate(y,y,y,s);return new Jr(this,{kind:"constant",value:v},s)}if(e.expression.kind==="camera"){const g=this._calculate(e.expression.evaluate({zoom:s.zoom-1}),e.expression.evaluate({zoom:s.zoom}),e.expression.evaluate({zoom:s.zoom+1}),s);return new Jr(this,{kind:"constant",value:g},s)}return new Jr(this,e.expression,s)}evaluate(e,s,o,h,g,y){if(e.kind==="source"){const v=e.evaluate(s,o,h,g,y);return this._calculate(v,v,v,s)}return e.kind==="composite"?this._calculate(e.evaluate({zoom:Math.floor(s.zoom)-1},o,h),e.evaluate({zoom:Math.floor(s.zoom)},o,h),e.evaluate({zoom:Math.floor(s.zoom)+1},o,h),s):e.value}_calculate(e,s,o,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:e,to:s}:{from:o,to:s}}interpolate(e){return e}}class Ic{constructor(e){this.specification=e}possiblyEvaluate(e,s,o,h){if(e.value!==void 0){if(e.expression.kind==="constant"){const g=e.expression.evaluate(s,null,{},o,h);return this._calculate(g,g,g,s)}return this._calculate(e.expression.evaluate(new Ht(Math.floor(s.zoom-1),s)),e.expression.evaluate(new Ht(Math.floor(s.zoom),s)),e.expression.evaluate(new Ht(Math.floor(s.zoom+1),s)),s)}}_calculate(e,s,o,h){return h.zoom>h.zoomHistory.lastIntegerZoom?{from:e,to:s}:{from:o,to:s}}interpolate(e){return e}}class oo{constructor(e){this.specification=e}possiblyEvaluate(e,s,o,h){return!!e.expression.evaluate(s,null,{},o,h)}interpolate(){return!1}}class ur{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in e){const o=e[s];o.specification.overridable&&this.overridableProperties.push(s);const h=this.defaultPropertyValues[s]=new tl(o,void 0),g=this.defaultTransitionablePropertyValues[s]=new il(o);this.defaultTransitioningPropertyValues[s]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=h.possiblyEvaluate({})}}}Ge("DataDrivenProperty",nt),Ge("DataConstantProperty",et),Ge("CrossFadedDataDrivenProperty",vs),Ge("CrossFadedProperty",Ic),Ge("ColorRampProperty",oo);const Rh="-transition";class Qr extends os{constructor(e,s){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},e.type!=="custom"&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type!=="background"&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),s.layout&&(this._unevaluatedLayout=new sf(s.layout)),s.paint)){this._transitionablePaint=new Ec(s.paint);for(const o in e.paint)this.setPaintProperty(o,e.paint[o],{validate:!1});for(const o in e.layout)this.setLayoutProperty(o,e.layout[o],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ao(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return e==="visibility"?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,s,o={}){s!=null&&this._validate(xc,`layers.${this.id}.layout.${e}`,e,s,o)||(e!=="visibility"?this._unevaluatedLayout.setValue(e,s):this.visibility=s)}getPaintProperty(e){return e.endsWith(Rh)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,s,o={}){if(s!=null&&this._validate(nf,`layers.${this.id}.paint.${e}`,e,s,o))return!1;if(e.endsWith(Rh))return this._transitionablePaint.setTransition(e.slice(0,-11),s||void 0),!1;{const h=this._transitionablePaint._values[e],g=h.property.specification["property-type"]==="cross-faded-data-driven",y=h.value.isDataDriven(),v=h.value;this._transitionablePaint.setValue(e,s),this._handleSpecialPaintPropertyUpdate(e);const T=this._transitionablePaint._values[e].value;return T.isDataDriven()||y||g||this._handleOverridablePaintPropertyUpdate(e,v,T)}}_handleSpecialPaintPropertyUpdate(e){}_handleOverridablePaintPropertyUpdate(e,s,o){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||this.visibility==="none"}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,s){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,s)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),xt(e,(s,o)=>!(s===void 0||o==="layout"&&!Object.keys(s).length||o==="paint"&&!Object.keys(s).length))}_validate(e,s,o,h,g={}){return(!g||g.validate!==!1)&&Ah(this,e.call(la,{key:s,layerType:this.type,objectKey:o,value:h,styleSpec:_e,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const s=this.paint.get(e);if(s instanceof Jr&&ea(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const Fh={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ua{constructor(e,s){this._structArray=e,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ti{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,s){return e._trim(),s&&(e.isTransferred=!0,s.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const s=Object.create(this.prototype);return s.arrayBuffer=e.arrayBuffer,s.length=e.length,s.capacity=e.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function di(r,e=1){let s=0,o=0;return{members:r.map(h=>{const g=Fh[h.type].BYTES_PER_ELEMENT,y=s=Bh(s,Math.max(e,g)),v=h.components||1;return o=Math.max(o,g),s+=g*v,{name:h.name,type:h.type,components:v,offset:y}}),size:Bh(s,Math.max(o,e)),alignment:e}}function Bh(r,e){return Math.ceil(r/e)*e}class lo extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s){const o=this.length;return this.resize(o+1),this.emplace(o,e,s)}emplace(e,s,o){const h=2*e;return this.int16[h+0]=s,this.int16[h+1]=o,e}}lo.prototype.bytesPerElement=4,Ge("StructArrayLayout2i4",lo);class rl extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,o){const h=this.length;return this.resize(h+1),this.emplace(h,e,s,o)}emplace(e,s,o,h){const g=3*e;return this.int16[g+0]=s,this.int16[g+1]=o,this.int16[g+2]=h,e}}rl.prototype.bytesPerElement=6,Ge("StructArrayLayout3i6",rl);class Jn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,o,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,s,o,h)}emplace(e,s,o,h,g){const y=4*e;return this.int16[y+0]=s,this.int16[y+1]=o,this.int16[y+2]=h,this.int16[y+3]=g,e}}Jn.prototype.bytesPerElement=8,Ge("StructArrayLayout4i8",Jn);class Pc extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,o,h,g,y){const v=this.length;return this.resize(v+1),this.emplace(v,e,s,o,h,g,y)}emplace(e,s,o,h,g,y,v){const T=6*e;return this.int16[T+0]=s,this.int16[T+1]=o,this.int16[T+2]=h,this.int16[T+3]=g,this.int16[T+4]=y,this.int16[T+5]=v,e}}Pc.prototype.bytesPerElement=12,Ge("StructArrayLayout2i4i12",Pc);class zc extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,o,h,g,y){const v=this.length;return this.resize(v+1),this.emplace(v,e,s,o,h,g,y)}emplace(e,s,o,h,g,y,v){const T=4*e,E=8*e;return this.int16[T+0]=s,this.int16[T+1]=o,this.uint8[E+4]=h,this.uint8[E+5]=g,this.uint8[E+6]=y,this.uint8[E+7]=v,e}}zc.prototype.bytesPerElement=8,Ge("StructArrayLayout2i4ub8",zc);class co extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s){const o=this.length;return this.resize(o+1),this.emplace(o,e,s)}emplace(e,s,o){const h=2*e;return this.float32[h+0]=s,this.float32[h+1]=o,e}}co.prototype.bytesPerElement=8,Ge("StructArrayLayout2f8",co);class Ac extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,o,h,g,y,v,T,E,I){const P=this.length;return this.resize(P+1),this.emplace(P,e,s,o,h,g,y,v,T,E,I)}emplace(e,s,o,h,g,y,v,T,E,I,P){const D=10*e;return this.uint16[D+0]=s,this.uint16[D+1]=o,this.uint16[D+2]=h,this.uint16[D+3]=g,this.uint16[D+4]=y,this.uint16[D+5]=v,this.uint16[D+6]=T,this.uint16[D+7]=E,this.uint16[D+8]=I,this.uint16[D+9]=P,e}}Ac.prototype.bytesPerElement=20,Ge("StructArrayLayout10ui20",Ac);class nl extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,o,h,g,y,v,T,E,I,P,D){const F=this.length;return this.resize(F+1),this.emplace(F,e,s,o,h,g,y,v,T,E,I,P,D)}emplace(e,s,o,h,g,y,v,T,E,I,P,D,F){const O=12*e;return this.int16[O+0]=s,this.int16[O+1]=o,this.int16[O+2]=h,this.int16[O+3]=g,this.uint16[O+4]=y,this.uint16[O+5]=v,this.uint16[O+6]=T,this.uint16[O+7]=E,this.int16[O+8]=I,this.int16[O+9]=P,this.int16[O+10]=D,this.int16[O+11]=F,e}}nl.prototype.bytesPerElement=24,Ge("StructArrayLayout4i4ui4i24",nl);class Mc extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,o){const h=this.length;return this.resize(h+1),this.emplace(h,e,s,o)}emplace(e,s,o,h){const g=3*e;return this.float32[g+0]=s,this.float32[g+1]=o,this.float32[g+2]=h,e}}Mc.prototype.bytesPerElement=12,Ge("StructArrayLayout3f12",Mc);class Dc extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const s=this.length;return this.resize(s+1),this.emplace(s,e)}emplace(e,s){return this.uint32[1*e+0]=s,e}}Dc.prototype.bytesPerElement=4,Ge("StructArrayLayout1ul4",Dc);class Mn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,o,h,g,y,v,T,E){const I=this.length;return this.resize(I+1),this.emplace(I,e,s,o,h,g,y,v,T,E)}emplace(e,s,o,h,g,y,v,T,E,I){const P=10*e,D=5*e;return this.int16[P+0]=s,this.int16[P+1]=o,this.int16[P+2]=h,this.int16[P+3]=g,this.int16[P+4]=y,this.int16[P+5]=v,this.uint32[D+3]=T,this.uint16[P+8]=E,this.uint16[P+9]=I,e}}Mn.prototype.bytesPerElement=20,Ge("StructArrayLayout6i1ul2ui20",Mn);class sl extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,o,h,g,y){const v=this.length;return this.resize(v+1),this.emplace(v,e,s,o,h,g,y)}emplace(e,s,o,h,g,y,v){const T=6*e;return this.int16[T+0]=s,this.int16[T+1]=o,this.int16[T+2]=h,this.int16[T+3]=g,this.int16[T+4]=y,this.int16[T+5]=v,e}}sl.prototype.bytesPerElement=12,Ge("StructArrayLayout2i2i2i12",sl);class uo extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,s,o,h,g){const y=this.length;return this.resize(y+1),this.emplace(y,e,s,o,h,g)}emplace(e,s,o,h,g,y){const v=4*e,T=8*e;return this.float32[v+0]=s,this.float32[v+1]=o,this.float32[v+2]=h,this.int16[T+6]=g,this.int16[T+7]=y,e}}uo.prototype.bytesPerElement=16,Ge("StructArrayLayout2f1f2i16",uo);class al extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,o,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,s,o,h)}emplace(e,s,o,h,g){const y=12*e,v=3*e;return this.uint8[y+0]=s,this.uint8[y+1]=o,this.float32[v+1]=h,this.float32[v+2]=g,e}}al.prototype.bytesPerElement=12,Ge("StructArrayLayout2ub2f12",al);class ha extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,o){const h=this.length;return this.resize(h+1),this.emplace(h,e,s,o)}emplace(e,s,o,h){const g=3*e;return this.uint16[g+0]=s,this.uint16[g+1]=o,this.uint16[g+2]=h,e}}ha.prototype.bytesPerElement=6,Ge("StructArrayLayout3ui6",ha);class Lc extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,o,h,g,y,v,T,E,I,P,D,F,O,V,H,J){const de=this.length;return this.resize(de+1),this.emplace(de,e,s,o,h,g,y,v,T,E,I,P,D,F,O,V,H,J)}emplace(e,s,o,h,g,y,v,T,E,I,P,D,F,O,V,H,J,de){const ee=24*e,ce=12*e,we=48*e;return this.int16[ee+0]=s,this.int16[ee+1]=o,this.uint16[ee+2]=h,this.uint16[ee+3]=g,this.uint32[ce+2]=y,this.uint32[ce+3]=v,this.uint32[ce+4]=T,this.uint16[ee+10]=E,this.uint16[ee+11]=I,this.uint16[ee+12]=P,this.float32[ce+7]=D,this.float32[ce+8]=F,this.uint8[we+36]=O,this.uint8[we+37]=V,this.uint8[we+38]=H,this.uint32[ce+10]=J,this.int16[ee+22]=de,e}}Lc.prototype.bytesPerElement=48,Ge("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Lc);class da extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,o,h,g,y,v,T,E,I,P,D,F,O,V,H,J,de,ee,ce,we,Se,Ue,Ye,Ve,Ne,Le,We){const Oe=this.length;return this.resize(Oe+1),this.emplace(Oe,e,s,o,h,g,y,v,T,E,I,P,D,F,O,V,H,J,de,ee,ce,we,Se,Ue,Ye,Ve,Ne,Le,We)}emplace(e,s,o,h,g,y,v,T,E,I,P,D,F,O,V,H,J,de,ee,ce,we,Se,Ue,Ye,Ve,Ne,Le,We,Oe){const Me=32*e,rt=16*e;return this.int16[Me+0]=s,this.int16[Me+1]=o,this.int16[Me+2]=h,this.int16[Me+3]=g,this.int16[Me+4]=y,this.int16[Me+5]=v,this.int16[Me+6]=T,this.int16[Me+7]=E,this.uint16[Me+8]=I,this.uint16[Me+9]=P,this.uint16[Me+10]=D,this.uint16[Me+11]=F,this.uint16[Me+12]=O,this.uint16[Me+13]=V,this.uint16[Me+14]=H,this.uint16[Me+15]=J,this.uint16[Me+16]=de,this.uint16[Me+17]=ee,this.uint16[Me+18]=ce,this.uint16[Me+19]=we,this.uint16[Me+20]=Se,this.uint16[Me+21]=Ue,this.uint16[Me+22]=Ye,this.uint32[rt+12]=Ve,this.float32[rt+13]=Ne,this.float32[rt+14]=Le,this.uint16[Me+30]=We,this.uint16[Me+31]=Oe,e}}da.prototype.bytesPerElement=64,Ge("StructArrayLayout8i15ui1ul2f2ui64",da);class Qn extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const s=this.length;return this.resize(s+1),this.emplace(s,e)}emplace(e,s){return this.float32[1*e+0]=s,e}}Qn.prototype.bytesPerElement=4,Ge("StructArrayLayout1f4",Qn);class Rc extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,o){const h=this.length;return this.resize(h+1),this.emplace(h,e,s,o)}emplace(e,s,o,h){const g=3*e;return this.uint16[6*e+0]=s,this.float32[g+1]=o,this.float32[g+2]=h,e}}Rc.prototype.bytesPerElement=12,Ge("StructArrayLayout1ui2f12",Rc);class ol extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s,o){const h=this.length;return this.resize(h+1),this.emplace(h,e,s,o)}emplace(e,s,o,h){const g=4*e;return this.uint32[2*e+0]=s,this.uint16[g+2]=o,this.uint16[g+3]=h,e}}ol.prototype.bytesPerElement=8,Ge("StructArrayLayout1ul2ui8",ol);class xs extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,s){const o=this.length;return this.resize(o+1),this.emplace(o,e,s)}emplace(e,s,o){const h=2*e;return this.uint16[h+0]=s,this.uint16[h+1]=o,e}}xs.prototype.bytesPerElement=4,Ge("StructArrayLayout2ui4",xs);class Fc extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const s=this.length;return this.resize(s+1),this.emplace(s,e)}emplace(e,s){return this.uint16[1*e+0]=s,e}}Fc.prototype.bytesPerElement=2,Ge("StructArrayLayout1ui2",Fc);class Bc extends ti{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,s,o,h){const g=this.length;return this.resize(g+1),this.emplace(g,e,s,o,h)}emplace(e,s,o,h,g){const y=4*e;return this.float32[y+0]=s,this.float32[y+1]=o,this.float32[y+2]=h,this.float32[y+3]=g,e}}Bc.prototype.bytesPerElement=16,Ge("StructArrayLayout4f16",Bc);class Oc extends ua{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new K(this.anchorPointX,this.anchorPointY)}}Oc.prototype.size=20;class Oh extends Mn{get(e){return new Oc(this,e)}}Ge("CollisionBoxArray",Oh);class f extends ua{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}f.prototype.size=48;class t extends Lc{get(e){return new f(this,e)}}Ge("PlacedSymbolArray",t);class a extends ua{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}a.prototype.size=64;class c extends da{get(e){return new a(this,e)}}Ge("SymbolInstanceArray",c);class u extends Qn{getoffsetX(e){return this.float32[1*e+0]}}Ge("GlyphOffsetArray",u);class m extends rl{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Ge("SymbolLineVertexArray",m);class w extends ua{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}w.prototype.size=12;class S extends Rc{get(e){return new w(this,e)}}Ge("TextAnchorOffsetArray",S);class C extends ua{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}C.prototype.size=8;class k extends ol{get(e){return new C(this,e)}}Ge("FeatureIndexArray",k);class z extends lo{}class A extends lo{}class B extends lo{}class G extends Pc{}class q extends zc{}class X extends co{}class j extends Ac{}class ie extends nl{}class fe extends Mc{}class Y extends Dc{}class ue extends sl{}class me extends al{}class ge extends ha{}class ye extends xs{}const Pe=di([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ce}=Pe;class Ie{constructor(e=[]){this.segments=e}prepareSegment(e,s,o,h){let g=this.segments[this.segments.length-1];return e>Ie.MAX_VERTEX_ARRAY_LENGTH&&si(`Max vertices per segment is ${Ie.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!g||g.vertexLength+e>Ie.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==h)&&(g={vertexOffset:s.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0},h!==void 0&&(g.sortKey=h),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const e of this.segments)for(const s in e.vaos)e.vaos[s].destroy()}static simpleSegment(e,s,o,h){return new Ie([{vertexOffset:e,primitiveOffset:s,vertexLength:o,primitiveLength:h,vaos:{},sortKey:0}])}}function Ze(r,e){return 256*(r=je(Math.floor(r),0,255))+je(Math.floor(e),0,255)}Ie.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ge("SegmentVector",Ie);const ut=di([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Be={exports:{}},at={exports:{}};at.exports=function(r,e){var s,o,h,g,y,v,T,E;for(o=r.length-(s=3&r.length),h=e,y=3432918353,v=461845907,E=0;E<o;)T=255&r.charCodeAt(E)|(255&r.charCodeAt(++E))<<8|(255&r.charCodeAt(++E))<<16|(255&r.charCodeAt(++E))<<24,++E,h=27492+(65535&(g=5*(65535&(h=(h^=T=(65535&(T=(T=(65535&T)*y+(((T>>>16)*y&65535)<<16)&4294967295)<<15|T>>>17))*v+(((T>>>16)*v&65535)<<16)&4294967295)<<13|h>>>19))+((5*(h>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(T=0,s){case 3:T^=(255&r.charCodeAt(E+2))<<16;case 2:T^=(255&r.charCodeAt(E+1))<<8;case 1:h^=T=(65535&(T=(T=(65535&(T^=255&r.charCodeAt(E)))*y+(((T>>>16)*y&65535)<<16)&4294967295)<<15|T>>>17))*v+(((T>>>16)*v&65535)<<16)&4294967295}return h^=r.length,h=2246822507*(65535&(h^=h>>>16))+((2246822507*(h>>>16)&65535)<<16)&4294967295,h=3266489909*(65535&(h^=h>>>13))+((3266489909*(h>>>16)&65535)<<16)&4294967295,(h^=h>>>16)>>>0};var gt=at.exports,St={exports:{}};St.exports=function(r,e){for(var s,o=r.length,h=e^o,g=0;o>=4;)s=1540483477*(65535&(s=255&r.charCodeAt(g)|(255&r.charCodeAt(++g))<<8|(255&r.charCodeAt(++g))<<16|(255&r.charCodeAt(++g))<<24))+((1540483477*(s>>>16)&65535)<<16),h=1540483477*(65535&h)+((1540483477*(h>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),o-=4,++g;switch(o){case 3:h^=(255&r.charCodeAt(g+2))<<16;case 2:h^=(255&r.charCodeAt(g+1))<<8;case 1:h=1540483477*(65535&(h^=255&r.charCodeAt(g)))+((1540483477*(h>>>16)&65535)<<16)}return h=1540483477*(65535&(h^=h>>>13))+((1540483477*(h>>>16)&65535)<<16),(h^=h>>>15)>>>0};var lt=gt,_t=St.exports;Be.exports=lt,Be.exports.murmur3=lt,Be.exports.murmur2=_t;var vt=R(Be.exports);class Jt{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,s,o,h){this.ids.push(Ut(e)),this.positions.push(s,o,h)}getPositions(e){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Ut(e);let o=0,h=this.ids.length-1;for(;o<h;){const y=o+h>>1;this.ids[y]>=s?h=y:o=y+1}const g=[];for(;this.ids[o]===s;)g.push({index:this.positions[3*o],start:this.positions[3*o+1],end:this.positions[3*o+2]}),o++;return g}static serialize(e,s){const o=new Float64Array(e.ids),h=new Uint32Array(e.positions);return hr(o,h,0,o.length-1),s&&s.push(o.buffer,h.buffer),{ids:o,positions:h}}static deserialize(e){const s=new Jt;return s.ids=e.ids,s.positions=e.positions,s.indexed=!0,s}}function Ut(r){const e=+r;return!isNaN(e)&&e<=Number.MAX_SAFE_INTEGER?e:vt(String(r))}function hr(r,e,s,o){for(;s<o;){const h=r[s+o>>1];let g=s-1,y=o+1;for(;;){do g++;while(r[g]<h);do y--;while(r[y]>h);if(g>=y)break;vi(r,g,y),vi(e,3*g,3*y),vi(e,3*g+1,3*y+1),vi(e,3*g+2,3*y+2)}y-s<o-y?(hr(r,e,s,y),s=y+1):(hr(r,e,y+1,o),o=y)}}function vi(r,e,s){const o=r[e];r[e]=r[s],r[s]=o}Ge("FeaturePositionMap",Jt);class qt{constructor(e,s){this.gl=e.gl,this.location=s}}class Zi extends qt{constructor(e,s){super(e,s),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class en extends qt{constructor(e,s){super(e,s),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class vn extends qt{constructor(e,s){super(e,s),this.current=Ft.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const ws=new Float32Array(16);function bs(r){return[Ze(255*r.r,255*r.g),Ze(255*r.b,255*r.a)]}class xn{constructor(e,s,o){this.value=e,this.uniformNames=s.map(h=>`u_${h}`),this.type=o}setUniform(e,s,o){e.set(o.constantOr(this.value))}getBinding(e,s,o){return this.type==="color"?new vn(e,s):new Zi(e,s)}}class tn{constructor(e,s){this.uniformNames=s.map(o=>`u_${o}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=e.tlbr}setUniform(e,s,o,h){const g=h==="u_pattern_to"?this.patternTo:h==="u_pattern_from"?this.patternFrom:h==="u_pixel_ratio_to"?this.pixelRatioTo:h==="u_pixel_ratio_from"?this.pixelRatioFrom:null;g&&e.set(g)}getBinding(e,s,o){return o.substr(0,9)==="u_pattern"?new en(e,s):new Zi(e,s)}}class ii{constructor(e,s,o,h){this.expression=e,this.type=o,this.maxValue=0,this.paintVertexAttributes=s.map(g=>({name:`a_${g}`,type:"Float32",components:o==="color"?2:1,offset:0})),this.paintVertexArray=new h}populatePaintArray(e,s,o,h,g){const y=this.paintVertexArray.length,v=this.expression.evaluate(new Ht(0),s,{},h,[],g);this.paintVertexArray.resize(e),this._setPaintValue(y,e,v)}updatePaintArray(e,s,o,h){const g=this.expression.evaluate({zoom:0},o,h);this._setPaintValue(e,s,g)}_setPaintValue(e,s,o){if(this.type==="color"){const h=bs(o);for(let g=e;g<s;g++)this.paintVertexArray.emplace(g,h[0],h[1])}else{for(let h=e;h<s;h++)this.paintVertexArray.emplace(h,o);this.maxValue=Math.max(this.maxValue,Math.abs(o))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Wt{constructor(e,s,o,h,g,y){this.expression=e,this.uniformNames=s.map(v=>`u_${v}_t`),this.type=o,this.useIntegerZoom=h,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=s.map(v=>({name:`a_${v}`,type:"Float32",components:o==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(e,s,o,h,g){const y=this.expression.evaluate(new Ht(this.zoom),s,{},h,[],g),v=this.expression.evaluate(new Ht(this.zoom+1),s,{},h,[],g),T=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(T,e,y,v)}updatePaintArray(e,s,o,h){const g=this.expression.evaluate({zoom:this.zoom},o,h),y=this.expression.evaluate({zoom:this.zoom+1},o,h);this._setPaintValue(e,s,g,y)}_setPaintValue(e,s,o,h){if(this.type==="color"){const g=bs(o),y=bs(h);for(let v=e;v<s;v++)this.paintVertexArray.emplace(v,g[0],g[1],y[0],y[1])}else{for(let g=e;g<s;g++)this.paintVertexArray.emplace(g,o,h);this.maxValue=Math.max(this.maxValue,Math.abs(o),Math.abs(h))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,s){const o=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,h=je(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);e.set(h)}getBinding(e,s,o){return new Zi(e,s)}}class li{constructor(e,s,o,h,g,y){this.expression=e,this.type=s,this.useIntegerZoom=o,this.zoom=h,this.layerId=y,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(e,s,o){const h=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(h,e,s.patterns&&s.patterns[this.layerId],o)}updatePaintArray(e,s,o,h,g){this._setPaintValues(e,s,o.patterns&&o.patterns[this.layerId],g)}_setPaintValues(e,s,o,h){if(!h||!o)return;const{min:g,mid:y,max:v}=o,T=h[g],E=h[y],I=h[v];if(T&&E&&I)for(let P=e;P<s;P++)this.zoomInPaintVertexArray.emplace(P,E.tl[0],E.tl[1],E.br[0],E.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],E.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(P,E.tl[0],E.tl[1],E.br[0],E.br[1],I.tl[0],I.tl[1],I.br[0],I.br[1],E.pixelRatio,I.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,ut.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,ut.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class pa{constructor(e,s,o){this.binders={},this._buffers=[];const h=[];for(const g in e.paint._values){if(!o(g))continue;const y=e.paint.get(g);if(!(y instanceof Jr&&ea(y.property.specification)))continue;const v=Li(g,e.type),T=y.value,E=y.property.specification.type,I=y.property.useIntegerZoom,P=y.property.specification["property-type"],D=P==="cross-faded"||P==="cross-faded-data-driven";if(T.kind==="constant")this.binders[g]=D?new tn(T.value,v):new xn(T.value,v,E),h.push(`/u_${g}`);else if(T.kind==="source"||D){const F=Pr(g,E,"source");this.binders[g]=D?new li(T,E,I,s,F,e.id):new ii(T,v,E,F),h.push(`/a_${g}`)}else{const F=Pr(g,E,"composite");this.binders[g]=new Wt(T,v,E,I,s,F),h.push(`/z_${g}`)}}this.cacheKey=h.sort().join("")}getMaxValue(e){const s=this.binders[e];return s instanceof ii||s instanceof Wt?s.maxValue:0}populatePaintArrays(e,s,o,h,g){for(const y in this.binders){const v=this.binders[y];(v instanceof ii||v instanceof Wt||v instanceof li)&&v.populatePaintArray(e,s,o,h,g)}}setConstantPatternPositions(e,s){for(const o in this.binders){const h=this.binders[o];h instanceof tn&&h.setConstantPatternPositions(e,s)}}updatePaintArrays(e,s,o,h,g){let y=!1;for(const v in e){const T=s.getPositions(v);for(const E of T){const I=o.feature(E.index);for(const P in this.binders){const D=this.binders[P];if((D instanceof ii||D instanceof Wt||D instanceof li)&&D.expression.isStateDependent===!0){const F=h.paint.get(P);D.expression=F.value,D.updatePaintArray(E.start,E.end,I,e[v],g),y=!0}}}}return y}defines(){const e=[];for(const s in this.binders){const o=this.binders[s];(o instanceof xn||o instanceof tn)&&e.push(...o.uniformNames.map(h=>`#define HAS_UNIFORM_${h}`))}return e}getBinderAttributes(){const e=[];for(const s in this.binders){const o=this.binders[s];if(o instanceof ii||o instanceof Wt)for(let h=0;h<o.paintVertexAttributes.length;h++)e.push(o.paintVertexAttributes[h].name);else if(o instanceof li)for(let h=0;h<ut.members.length;h++)e.push(ut.members[h].name)}return e}getBinderUniforms(){const e=[];for(const s in this.binders){const o=this.binders[s];if(o instanceof xn||o instanceof tn||o instanceof Wt)for(const h of o.uniformNames)e.push(h)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,s){const o=[];for(const h in this.binders){const g=this.binders[h];if(g instanceof xn||g instanceof tn||g instanceof Wt){for(const y of g.uniformNames)if(s[y]){const v=g.getBinding(e,s[y],y);o.push({name:y,property:h,binding:v})}}}return o}setUniforms(e,s,o,h){for(const{name:g,property:y,binding:v}of s)this.binders[y].setUniform(v,h,o.get(y),g)}updatePaintBuffers(e){this._buffers=[];for(const s in this.binders){const o=this.binders[s];if(e&&o instanceof li){const h=e.fromScale===2?o.zoomInPaintVertexBuffer:o.zoomOutPaintVertexBuffer;h&&this._buffers.push(h)}else(o instanceof ii||o instanceof Wt)&&o.paintVertexBuffer&&this._buffers.push(o.paintVertexBuffer)}}upload(e){for(const s in this.binders){const o=this.binders[s];(o instanceof ii||o instanceof Wt||o instanceof li)&&o.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const s=this.binders[e];(s instanceof ii||s instanceof Wt||s instanceof li)&&s.destroy()}}}class Xt{constructor(e,s,o=()=>!0){this.programConfigurations={};for(const h of e)this.programConfigurations[h.id]=new pa(h,s,o);this.needsUpload=!1,this._featureMap=new Jt,this._bufferOffset=0}populatePaintArrays(e,s,o,h,g,y){for(const v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(e,s,h,g,y);s.id!==void 0&&this._featureMap.add(s.id,o,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,s,o,h){for(const g of o)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(e,this._featureMap,s,g,h)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Li(r,e){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${e}-`,"").replace(/-/g,"_")]}function Pr(r,e,s){const o={color:{source:co,composite:Bc},number:{source:Qn,composite:co}},h=function(g){return{"line-pattern":{source:j,composite:j},"fill-pattern":{source:j,composite:j},"fill-extrusion-pattern":{source:j,composite:j}}[g]}(r);return h&&h[s]||o[e][s]}Ge("ConstantBinder",xn),Ge("CrossFadedConstantBinder",tn),Ge("SourceExpressionBinder",ii),Ge("CrossFadedCompositeBinder",li),Ge("CompositeExpressionBinder",Wt),Ge("ProgramConfiguration",pa,{omit:["_buffers"]}),Ge("ProgramConfigurationSet",Xt);const bt=8192,Nc=Math.pow(2,14)-1,Nh=-Nc-1;function Ss(r){const e=bt/r.extent,s=r.loadGeometry();for(let o=0;o<s.length;o++){const h=s[o];for(let g=0;g<h.length;g++){const y=h[g],v=Math.round(y.x*e),T=Math.round(y.y*e);y.x=je(v,Nh,Nc),y.y=je(T,Nh,Nc),(v<y.x||v>y.x+1||T<y.y||T>y.y+1)&&si("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function Ts(r,e){return{type:r.type,id:r.id,properties:r.properties,geometry:e?Ss(r):[]}}function ll(r,e,s,o,h){r.emplaceBack(2*e+(o+1)/2,2*s+(h+1)/2)}class jc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new A,this.indexArray=new ge,this.segments=new Ie,this.programConfigurations=new Xt(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,o){const h=this.layers[0],g=[];let y=null,v=!1;h.type==="circle"&&(y=h.layout.get("circle-sort-key"),v=!y.isConstant());for(const{feature:T,id:E,index:I,sourceLayerIndex:P}of e){const D=this.layers[0]._featureFilter.needGeometry,F=Ts(T,D);if(!this.layers[0]._featureFilter.filter(new Ht(this.zoom),F,o))continue;const O=v?y.evaluate(F,{},o):void 0,V={id:E,properties:T.properties,type:T.type,sourceLayerIndex:P,index:I,geometry:D?F.geometry:Ss(T),patterns:{},sortKey:O};g.push(V)}v&&g.sort((T,E)=>T.sortKey-E.sortKey);for(const T of g){const{geometry:E,index:I,sourceLayerIndex:P}=T,D=e[I].feature;this.addFeature(T,E,I,o),s.featureIndex.insert(D,E,I,P,this.index)}}update(e,s,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Ce),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,s,o,h){for(const g of s)for(const y of g){const v=y.x,T=y.y;if(v<0||v>=bt||T<0||T>=bt)continue;const E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),I=E.vertexLength;ll(this.layoutVertexArray,v,T,-1,-1),ll(this.layoutVertexArray,v,T,1,-1),ll(this.layoutVertexArray,v,T,1,1),ll(this.layoutVertexArray,v,T,-1,1),this.indexArray.emplaceBack(I,I+1,I+2),this.indexArray.emplaceBack(I,I+3,I+2),E.vertexLength+=4,E.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,{},h)}}function Cs(r,e){for(let s=0;s<r.length;s++)if(cl(e,r[s]))return!0;for(let s=0;s<e.length;s++)if(cl(r,e[s]))return!0;return!!ho(r,e)}function jh(r,e,s){return!!cl(r,e)||!!po(e,r,s)}function Vc(r,e){if(r.length===1)return y0(e,r[0]);for(let s=0;s<e.length;s++){const o=e[s];for(let h=0;h<o.length;h++)if(cl(r,o[h]))return!0}for(let s=0;s<r.length;s++)if(y0(e,r[s]))return!0;for(let s=0;s<e.length;s++)if(ho(r,e[s]))return!0;return!1}function Vh(r,e,s){if(r.length>1){if(ho(r,e))return!0;for(let o=0;o<e.length;o++)if(po(e[o],r,s))return!0}for(let o=0;o<r.length;o++)if(po(r[o],e,s))return!0;return!1}function ho(r,e){if(r.length===0||e.length===0)return!1;for(let s=0;s<r.length-1;s++){const o=r[s],h=r[s+1];for(let g=0;g<e.length-1;g++)if(Uh(o,h,e[g],e[g+1]))return!0}return!1}function Uh(r,e,s,o){return ar(r,s,o)!==ar(e,s,o)&&ar(r,e,s)!==ar(r,e,o)}function po(r,e,s){const o=s*s;if(e.length===1)return r.distSqr(e[0])<o;for(let h=1;h<e.length;h++)if(g0(r,e[h-1],e[h])<o)return!0;return!1}function g0(r,e,s){const o=e.distSqr(s);if(o===0)return r.distSqr(e);const h=((r.x-e.x)*(s.x-e.x)+(r.y-e.y)*(s.y-e.y))/o;return r.distSqr(h<0?e:h>1?s:s.sub(e)._mult(h)._add(e))}function y0(r,e){let s,o,h,g=!1;for(let y=0;y<r.length;y++){s=r[y];for(let v=0,T=s.length-1;v<s.length;T=v++)o=s[v],h=s[T],o.y>e.y!=h.y>e.y&&e.x<(h.x-o.x)*(e.y-o.y)/(h.y-o.y)+o.x&&(g=!g)}return g}function cl(r,e){let s=!1;for(let o=0,h=r.length-1;o<r.length;h=o++){const g=r[o],y=r[h];g.y>e.y!=y.y>e.y&&e.x<(y.x-g.x)*(e.y-g.y)/(y.y-g.y)+g.x&&(s=!s)}return s}function t2(r,e,s){const o=s[0],h=s[2];if(r.x<o.x&&e.x<o.x||r.x>h.x&&e.x>h.x||r.y<o.y&&e.y<o.y||r.y>h.y&&e.y>h.y)return!1;const g=ar(r,e,s[0]);return g!==ar(r,e,s[1])||g!==ar(r,e,s[2])||g!==ar(r,e,s[3])}function Uc(r,e,s){const o=e.paint.get(r).value;return o.kind==="constant"?o.value:s.programConfigurations.get(e.id).getMaxValue(r)}function $h(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function qh(r,e,s,o,h){if(!e[0]&&!e[1])return r;const g=K.convert(e)._mult(h);s==="viewport"&&g._rotate(-o);const y=[];for(let v=0;v<r.length;v++)y.push(r[v].sub(g));return y}let _0,v0;Ge("CircleBucket",jc,{omit:["layers"]});var i2={get paint(){return v0=v0||new ur({"circle-radius":new nt(_e.paint_circle["circle-radius"]),"circle-color":new nt(_e.paint_circle["circle-color"]),"circle-blur":new nt(_e.paint_circle["circle-blur"]),"circle-opacity":new nt(_e.paint_circle["circle-opacity"]),"circle-translate":new et(_e.paint_circle["circle-translate"]),"circle-translate-anchor":new et(_e.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new et(_e.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new et(_e.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new nt(_e.paint_circle["circle-stroke-width"]),"circle-stroke-color":new nt(_e.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new nt(_e.paint_circle["circle-stroke-opacity"])})},get layout(){return _0=_0||new ur({"circle-sort-key":new nt(_e.layout_circle["circle-sort-key"])})}},dr=1e-6,ul=typeof Float32Array<"u"?Float32Array:Array;function af(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function x0(r,e,s){var o=e[0],h=e[1],g=e[2],y=e[3],v=e[4],T=e[5],E=e[6],I=e[7],P=e[8],D=e[9],F=e[10],O=e[11],V=e[12],H=e[13],J=e[14],de=e[15],ee=s[0],ce=s[1],we=s[2],Se=s[3];return r[0]=ee*o+ce*v+we*P+Se*V,r[1]=ee*h+ce*T+we*D+Se*H,r[2]=ee*g+ce*E+we*F+Se*J,r[3]=ee*y+ce*I+we*O+Se*de,r[4]=(ee=s[4])*o+(ce=s[5])*v+(we=s[6])*P+(Se=s[7])*V,r[5]=ee*h+ce*T+we*D+Se*H,r[6]=ee*g+ce*E+we*F+Se*J,r[7]=ee*y+ce*I+we*O+Se*de,r[8]=(ee=s[8])*o+(ce=s[9])*v+(we=s[10])*P+(Se=s[11])*V,r[9]=ee*h+ce*T+we*D+Se*H,r[10]=ee*g+ce*E+we*F+Se*J,r[11]=ee*y+ce*I+we*O+Se*de,r[12]=(ee=s[12])*o+(ce=s[13])*v+(we=s[14])*P+(Se=s[15])*V,r[13]=ee*h+ce*T+we*D+Se*H,r[14]=ee*g+ce*E+we*F+Se*J,r[15]=ee*y+ce*I+we*O+Se*de,r}Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var $c,r2=x0;function Zh(r,e,s){var o=e[0],h=e[1],g=e[2],y=e[3];return r[0]=s[0]*o+s[4]*h+s[8]*g+s[12]*y,r[1]=s[1]*o+s[5]*h+s[9]*g+s[13]*y,r[2]=s[2]*o+s[6]*h+s[10]*g+s[14]*y,r[3]=s[3]*o+s[7]*h+s[11]*g+s[15]*y,r}$c=new ul(4),ul!=Float32Array&&($c[0]=0,$c[1]=0,$c[2]=0,$c[3]=0);class n2 extends Qr{constructor(e){super(e,i2)}createBucket(e){return new jc(e)}queryRadius(e){const s=e;return Uc("circle-radius",this,s)+Uc("circle-stroke-width",this,s)+$h(this.paint.get("circle-translate"))}queryIntersectsFeature(e,s,o,h,g,y,v,T){const E=qh(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,v),I=this.paint.get("circle-radius").evaluate(s,o)+this.paint.get("circle-stroke-width").evaluate(s,o),P=this.paint.get("circle-pitch-alignment")==="map",D=P?E:function(O,V){return O.map(H=>w0(H,V))}(E,T),F=P?I*v:I;for(const O of h)for(const V of O){const H=P?V:w0(V,T);let J=F;const de=Zh([],[V.x,V.y,0,1],T);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?J*=de[3]/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(J*=y.cameraToCenterDistance/de[3]),jh(D,H,J))return!0}return!1}}function w0(r,e){const s=Zh([],[r.x,r.y,0,1],e);return new K(s[0]/s[3],s[1]/s[3])}class b0 extends jc{}let S0;Ge("HeatmapBucket",b0,{omit:["layers"]});var s2={get paint(){return S0=S0||new ur({"heatmap-radius":new nt(_e.paint_heatmap["heatmap-radius"]),"heatmap-weight":new nt(_e.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new et(_e.paint_heatmap["heatmap-intensity"]),"heatmap-color":new oo(_e.paint_heatmap["heatmap-color"]),"heatmap-opacity":new et(_e.paint_heatmap["heatmap-opacity"])})}};function of(r,{width:e,height:s},o,h){if(h){if(h instanceof Uint8ClampedArray)h=new Uint8Array(h.buffer);else if(h.length!==e*s*o)throw new RangeError(`mismatched image size. expected: ${h.length} but got: ${e*s*o}`)}else h=new Uint8Array(e*s*o);return r.width=e,r.height=s,r.data=h,r}function T0(r,{width:e,height:s},o){if(e===r.width&&s===r.height)return;const h=of({},{width:e,height:s},o);lf(r,h,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,e),height:Math.min(r.height,s)},o),r.width=e,r.height=s,r.data=h.data}function lf(r,e,s,o,h,g){if(h.width===0||h.height===0)return e;if(h.width>r.width||h.height>r.height||s.x>r.width-h.width||s.y>r.height-h.height)throw new RangeError("out of range source coordinates for image copy");if(h.width>e.width||h.height>e.height||o.x>e.width-h.width||o.y>e.height-h.height)throw new RangeError("out of range destination coordinates for image copy");const y=r.data,v=e.data;if(y===v)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<h.height;T++){const E=((s.y+T)*r.width+s.x)*g,I=((o.y+T)*e.width+o.x)*g;for(let P=0;P<h.width*g;P++)v[I+P]=y[E+P]}return e}class qc{constructor(e,s){of(this,e,1,s)}resize(e){T0(this,e,1)}clone(){return new qc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,s,o,h,g){lf(e,s,o,h,g,1)}}class rn{constructor(e,s){of(this,e,4,s)}resize(e){T0(this,e,4)}replace(e,s){s?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new rn({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,s,o,h,g){lf(e,s,o,h,g,4)}}function C0(r){const e={},s=r.resolution||256,o=r.clips?r.clips.length:1,h=r.image||new rn({width:s,height:o});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const g=(y,v,T)=>{e[r.evaluationKey]=T;const E=r.expression.evaluate(e);h.data[y+v+0]=Math.floor(255*E.r/E.a),h.data[y+v+1]=Math.floor(255*E.g/E.a),h.data[y+v+2]=Math.floor(255*E.b/E.a),h.data[y+v+3]=Math.floor(255*E.a)};if(r.clips)for(let y=0,v=0;y<o;++y,v+=4*s)for(let T=0,E=0;T<s;T++,E+=4){const I=T/(s-1),{start:P,end:D}=r.clips[y];g(v,E,P*(1-I)+D*I)}else for(let y=0,v=0;y<s;y++,v+=4)g(0,v,y/(s-1));return h}Ge("AlphaImage",qc),Ge("RGBAImage",rn);class a2 extends Qr{createBucket(e){return new b0(e)}constructor(e){super(e,s2),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){e==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=C0({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let E0;var o2={get paint(){return E0=E0||new ur({"hillshade-illumination-direction":new et(_e.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new et(_e.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new et(_e.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new et(_e.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new et(_e.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new et(_e.paint_hillshade["hillshade-accent-color"])})}};class l2 extends Qr{constructor(e){super(e,o2)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const c2=di([{name:"a_pos",components:2,type:"Int16"}],4),{members:u2}=c2;var cf={exports:{}};function Gh(r,e,s){s=s||2;var o,h,g,y,v,T,E,I=e&&e.length,P=I?e[0]*s:r.length,D=k0(r,0,P,s,!0),F=[];if(!D||D.next===D.prev)return F;if(I&&(D=function(V,H,J,de){var ee,ce,we,Se=[];for(ee=0,ce=H.length;ee<ce;ee++)(we=k0(V,H[ee]*de,ee<ce-1?H[ee+1]*de:V.length,de,!1))===we.next&&(we.steiner=!0),Se.push(_2(we));for(Se.sort(m2),ee=0;ee<Se.length;ee++)J=g2(Se[ee],J);return J}(r,e,D,s)),r.length>80*s){o=g=r[0],h=y=r[1];for(var O=s;O<P;O+=s)(v=r[O])<o&&(o=v),(T=r[O+1])<h&&(h=T),v>g&&(g=v),T>y&&(y=T);E=(E=Math.max(g-o,y-h))!==0?32767/E:0}return Zc(D,F,s,o,h,E,0),F}function k0(r,e,s,o,h){var g,y;if(h===df(r,e,s,o)>0)for(g=e;g<s;g+=o)y=z0(g,r[g],r[g+1],y);else for(g=s-o;g>=e;g-=o)y=z0(g,r[g],r[g+1],y);return y&&Hh(y,y.next)&&(Hc(y),y=y.next),y}function fo(r,e){if(!r)return r;e||(e=r);var s,o=r;do if(s=!1,o.steiner||!Hh(o,o.next)&&pi(o.prev,o,o.next)!==0)o=o.next;else{if(Hc(o),(o=e=o.prev)===o.next)break;s=!0}while(s||o!==e);return e}function Zc(r,e,s,o,h,g,y){if(r){!y&&g&&function(I,P,D,F){var O=I;do O.z===0&&(O.z=uf(O.x,O.y,P,D,F)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==I);O.prevZ.nextZ=null,O.prevZ=null,function(V){var H,J,de,ee,ce,we,Se,Ue,Ye=1;do{for(J=V,V=null,ce=null,we=0;J;){for(we++,de=J,Se=0,H=0;H<Ye&&(Se++,de=de.nextZ);H++);for(Ue=Ye;Se>0||Ue>0&&de;)Se!==0&&(Ue===0||!de||J.z<=de.z)?(ee=J,J=J.nextZ,Se--):(ee=de,de=de.nextZ,Ue--),ce?ce.nextZ=ee:V=ee,ee.prevZ=ce,ce=ee;J=de}ce.nextZ=null,Ye*=2}while(we>1)}(O)}(r,o,h,g);for(var v,T,E=r;r.prev!==r.next;)if(v=r.prev,T=r.next,g?d2(r,o,h,g):h2(r))e.push(v.i/s|0),e.push(r.i/s|0),e.push(T.i/s|0),Hc(r),r=T.next,E=T.next;else if((r=T)===E){y?y===1?Zc(r=p2(fo(r),e,s),e,s,o,h,g,2):y===2&&f2(r,e,s,o,h,g):Zc(fo(r),e,s,o,h,g,1);break}}}function h2(r){var e=r.prev,s=r,o=r.next;if(pi(e,s,o)>=0)return!1;for(var h=e.x,g=s.x,y=o.x,v=e.y,T=s.y,E=o.y,I=h<g?h<y?h:y:g<y?g:y,P=v<T?v<E?v:E:T<E?T:E,D=h>g?h>y?h:y:g>y?g:y,F=v>T?v>E?v:E:T>E?T:E,O=o.next;O!==e;){if(O.x>=I&&O.x<=D&&O.y>=P&&O.y<=F&&hl(h,v,g,T,y,E,O.x,O.y)&&pi(O.prev,O,O.next)>=0)return!1;O=O.next}return!0}function d2(r,e,s,o){var h=r.prev,g=r,y=r.next;if(pi(h,g,y)>=0)return!1;for(var v=h.x,T=g.x,E=y.x,I=h.y,P=g.y,D=y.y,F=v<T?v<E?v:E:T<E?T:E,O=I<P?I<D?I:D:P<D?P:D,V=v>T?v>E?v:E:T>E?T:E,H=I>P?I>D?I:D:P>D?P:D,J=uf(F,O,e,s,o),de=uf(V,H,e,s,o),ee=r.prevZ,ce=r.nextZ;ee&&ee.z>=J&&ce&&ce.z<=de;){if(ee.x>=F&&ee.x<=V&&ee.y>=O&&ee.y<=H&&ee!==h&&ee!==y&&hl(v,I,T,P,E,D,ee.x,ee.y)&&pi(ee.prev,ee,ee.next)>=0||(ee=ee.prevZ,ce.x>=F&&ce.x<=V&&ce.y>=O&&ce.y<=H&&ce!==h&&ce!==y&&hl(v,I,T,P,E,D,ce.x,ce.y)&&pi(ce.prev,ce,ce.next)>=0))return!1;ce=ce.nextZ}for(;ee&&ee.z>=J;){if(ee.x>=F&&ee.x<=V&&ee.y>=O&&ee.y<=H&&ee!==h&&ee!==y&&hl(v,I,T,P,E,D,ee.x,ee.y)&&pi(ee.prev,ee,ee.next)>=0)return!1;ee=ee.prevZ}for(;ce&&ce.z<=de;){if(ce.x>=F&&ce.x<=V&&ce.y>=O&&ce.y<=H&&ce!==h&&ce!==y&&hl(v,I,T,P,E,D,ce.x,ce.y)&&pi(ce.prev,ce,ce.next)>=0)return!1;ce=ce.nextZ}return!0}function p2(r,e,s){var o=r;do{var h=o.prev,g=o.next.next;!Hh(h,g)&&I0(h,o,o.next,g)&&Gc(h,g)&&Gc(g,h)&&(e.push(h.i/s|0),e.push(o.i/s|0),e.push(g.i/s|0),Hc(o),Hc(o.next),o=r=g),o=o.next}while(o!==r);return fo(o)}function f2(r,e,s,o,h,g){var y=r;do{for(var v=y.next.next;v!==y.prev;){if(y.i!==v.i&&v2(y,v)){var T=P0(y,v);return y=fo(y,y.next),T=fo(T,T.next),Zc(y,e,s,o,h,g,0),void Zc(T,e,s,o,h,g,0)}v=v.next}y=y.next}while(y!==r)}function m2(r,e){return r.x-e.x}function g2(r,e){var s=function(h,g){var y,v=g,T=h.x,E=h.y,I=-1/0;do{if(E<=v.y&&E>=v.next.y&&v.next.y!==v.y){var P=v.x+(E-v.y)*(v.next.x-v.x)/(v.next.y-v.y);if(P<=T&&P>I&&(I=P,y=v.x<v.next.x?v:v.next,P===T))return y}v=v.next}while(v!==g);if(!y)return null;var D,F=y,O=y.x,V=y.y,H=1/0;v=y;do T>=v.x&&v.x>=O&&T!==v.x&&hl(E<V?T:I,E,O,V,E<V?I:T,E,v.x,v.y)&&(D=Math.abs(E-v.y)/(T-v.x),Gc(v,h)&&(D<H||D===H&&(v.x>y.x||v.x===y.x&&y2(y,v)))&&(y=v,H=D)),v=v.next;while(v!==F);return y}(r,e);if(!s)return e;var o=P0(s,r);return fo(o,o.next),fo(s,s.next)}function y2(r,e){return pi(r.prev,r,e.prev)<0&&pi(e.next,r,r.next)<0}function uf(r,e,s,o,h){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-s)*h|0)|r<<8))|r<<4))|r<<2))|r<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-o)*h|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function _2(r){var e=r,s=r;do(e.x<s.x||e.x===s.x&&e.y<s.y)&&(s=e),e=e.next;while(e!==r);return s}function hl(r,e,s,o,h,g,y,v){return(h-y)*(e-v)>=(r-y)*(g-v)&&(r-y)*(o-v)>=(s-y)*(e-v)&&(s-y)*(g-v)>=(h-y)*(o-v)}function v2(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!function(s,o){var h=s;do{if(h.i!==s.i&&h.next.i!==s.i&&h.i!==o.i&&h.next.i!==o.i&&I0(h,h.next,s,o))return!0;h=h.next}while(h!==s);return!1}(r,e)&&(Gc(r,e)&&Gc(e,r)&&function(s,o){var h=s,g=!1,y=(s.x+o.x)/2,v=(s.y+o.y)/2;do h.y>v!=h.next.y>v&&h.next.y!==h.y&&y<(h.next.x-h.x)*(v-h.y)/(h.next.y-h.y)+h.x&&(g=!g),h=h.next;while(h!==s);return g}(r,e)&&(pi(r.prev,r,e.prev)||pi(r,e.prev,e))||Hh(r,e)&&pi(r.prev,r,r.next)>0&&pi(e.prev,e,e.next)>0)}function pi(r,e,s){return(e.y-r.y)*(s.x-e.x)-(e.x-r.x)*(s.y-e.y)}function Hh(r,e){return r.x===e.x&&r.y===e.y}function I0(r,e,s,o){var h=Kh(pi(r,e,s)),g=Kh(pi(r,e,o)),y=Kh(pi(s,o,r)),v=Kh(pi(s,o,e));return h!==g&&y!==v||!(h!==0||!Wh(r,s,e))||!(g!==0||!Wh(r,o,e))||!(y!==0||!Wh(s,r,o))||!(v!==0||!Wh(s,e,o))}function Wh(r,e,s){return e.x<=Math.max(r.x,s.x)&&e.x>=Math.min(r.x,s.x)&&e.y<=Math.max(r.y,s.y)&&e.y>=Math.min(r.y,s.y)}function Kh(r){return r>0?1:r<0?-1:0}function Gc(r,e){return pi(r.prev,r,r.next)<0?pi(r,e,r.next)>=0&&pi(r,r.prev,e)>=0:pi(r,e,r.prev)<0||pi(r,r.next,e)<0}function P0(r,e){var s=new hf(r.i,r.x,r.y),o=new hf(e.i,e.x,e.y),h=r.next,g=e.prev;return r.next=e,e.prev=r,s.next=h,h.prev=s,o.next=s,s.prev=o,g.next=o,o.prev=g,o}function z0(r,e,s,o){var h=new hf(r,e,s);return o?(h.next=o.next,h.prev=o,o.next.prev=h,o.next=h):(h.prev=h,h.next=h),h}function Hc(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function hf(r,e,s){this.i=r,this.x=e,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function df(r,e,s,o){for(var h=0,g=e,y=s-o;g<s;g+=o)h+=(r[y]-r[g])*(r[g+1]+r[y+1]),y=g;return h}cf.exports=Gh,cf.exports.default=Gh,Gh.deviation=function(r,e,s,o){var h=e&&e.length,g=Math.abs(df(r,0,h?e[0]*s:r.length,s));if(h)for(var y=0,v=e.length;y<v;y++)g-=Math.abs(df(r,e[y]*s,y<v-1?e[y+1]*s:r.length,s));var T=0;for(y=0;y<o.length;y+=3){var E=o[y]*s,I=o[y+1]*s,P=o[y+2]*s;T+=Math.abs((r[E]-r[P])*(r[I+1]-r[E+1])-(r[E]-r[I])*(r[P+1]-r[E+1]))}return g===0&&T===0?0:Math.abs((T-g)/g)},Gh.flatten=function(r){for(var e=r[0][0].length,s={vertices:[],holes:[],dimensions:e},o=0,h=0;h<r.length;h++){for(var g=0;g<r[h].length;g++)for(var y=0;y<e;y++)s.vertices.push(r[h][g][y]);h>0&&s.holes.push(o+=r[h-1].length)}return s};var A0=R(cf.exports);function x2(r,e,s,o,h){M0(r,e,s||0,o||r.length-1,h||w2)}function M0(r,e,s,o,h){for(;o>s;){if(o-s>600){var g=o-s+1,y=e-s+1,v=Math.log(g),T=.5*Math.exp(2*v/3),E=.5*Math.sqrt(v*T*(g-T)/g)*(y-g/2<0?-1:1);M0(r,e,Math.max(s,Math.floor(e-y*T/g+E)),Math.min(o,Math.floor(e+(g-y)*T/g+E)),h)}var I=r[e],P=s,D=o;for(Wc(r,s,e),h(r[o],I)>0&&Wc(r,s,o);P<D;){for(Wc(r,P,D),P++,D--;h(r[P],I)<0;)P++;for(;h(r[D],I)>0;)D--}h(r[s],I)===0?Wc(r,s,D):Wc(r,++D,o),D<=e&&(s=D+1),e<=D&&(o=D-1)}}function Wc(r,e,s){var o=r[e];r[e]=r[s],r[s]=o}function w2(r,e){return r<e?-1:r>e?1:0}function pf(r,e){const s=r.length;if(s<=1)return[r];const o=[];let h,g;for(let y=0;y<s;y++){const v=Pn(r[y]);v!==0&&(r[y].area=Math.abs(v),g===void 0&&(g=v<0),g===v<0?(h&&o.push(h),h=[r[y]]):h.push(r[y]))}if(h&&o.push(h),e>1)for(let y=0;y<o.length;y++)o[y].length<=e||(x2(o[y],e,1,o[y].length-1,b2),o[y]=o[y].slice(0,e));return o}function b2(r,e){return e.area-r.area}function ff(r,e,s){const o=s.patternDependencies;let h=!1;for(const g of e){const y=g.paint.get(`${r}-pattern`);y.isConstant()||(h=!0);const v=y.constantOr(null);v&&(h=!0,o[v.to]=!0,o[v.from]=!0)}return h}function mf(r,e,s,o,h){const g=h.patternDependencies;for(const y of e){const v=y.paint.get(`${r}-pattern`).value;if(v.kind!=="constant"){let T=v.evaluate({zoom:o-1},s,{},h.availableImages),E=v.evaluate({zoom:o},s,{},h.availableImages),I=v.evaluate({zoom:o+1},s,{},h.availableImages);T=T&&T.name?T.name:T,E=E&&E.name?E.name:E,I=I&&I.name?I.name:I,g[T]=!0,g[E]=!0,g[I]=!0,s.patterns[y.id]={min:T,mid:E,max:I}}}return s}class gf{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new B,this.indexArray=new ge,this.indexArray2=new ye,this.programConfigurations=new Xt(e.layers,e.zoom),this.segments=new Ie,this.segments2=new Ie,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,o){this.hasPattern=ff("fill",this.layers,s);const h=this.layers[0].layout.get("fill-sort-key"),g=!h.isConstant(),y=[];for(const{feature:v,id:T,index:E,sourceLayerIndex:I}of e){const P=this.layers[0]._featureFilter.needGeometry,D=Ts(v,P);if(!this.layers[0]._featureFilter.filter(new Ht(this.zoom),D,o))continue;const F=g?h.evaluate(D,{},o,s.availableImages):void 0,O={id:T,properties:v.properties,type:v.type,sourceLayerIndex:I,index:E,geometry:P?D.geometry:Ss(v),patterns:{},sortKey:F};y.push(O)}g&&y.sort((v,T)=>v.sortKey-T.sortKey);for(const v of y){const{geometry:T,index:E,sourceLayerIndex:I}=v;if(this.hasPattern){const P=mf("fill",this.layers,v,this.zoom,s);this.patternFeatures.push(P)}else this.addFeature(v,T,E,o,{});s.featureIndex.insert(e[E].feature,T,E,I,this.index)}}update(e,s,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,o)}addFeatures(e,s,o){for(const h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,s,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,u2),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,s,o,h,g){for(const y of pf(s,500)){let v=0;for(const F of y)v+=F.length;const T=this.segments.prepareSegment(v,this.layoutVertexArray,this.indexArray),E=T.vertexLength,I=[],P=[];for(const F of y){if(F.length===0)continue;F!==y[0]&&P.push(I.length/2);const O=this.segments2.prepareSegment(F.length,this.layoutVertexArray,this.indexArray2),V=O.vertexLength;this.layoutVertexArray.emplaceBack(F[0].x,F[0].y),this.indexArray2.emplaceBack(V+F.length-1,V),I.push(F[0].x),I.push(F[0].y);for(let H=1;H<F.length;H++)this.layoutVertexArray.emplaceBack(F[H].x,F[H].y),this.indexArray2.emplaceBack(V+H-1,V+H),I.push(F[H].x),I.push(F[H].y);O.vertexLength+=F.length,O.primitiveLength+=F.length}const D=A0(I,P);for(let F=0;F<D.length;F+=3)this.indexArray.emplaceBack(E+D[F],E+D[F+1],E+D[F+2]);T.vertexLength+=v,T.primitiveLength+=D.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,g,h)}}let D0,L0;Ge("FillBucket",gf,{omit:["layers","patternFeatures"]});var S2={get paint(){return L0=L0||new ur({"fill-antialias":new et(_e.paint_fill["fill-antialias"]),"fill-opacity":new nt(_e.paint_fill["fill-opacity"]),"fill-color":new nt(_e.paint_fill["fill-color"]),"fill-outline-color":new nt(_e.paint_fill["fill-outline-color"]),"fill-translate":new et(_e.paint_fill["fill-translate"]),"fill-translate-anchor":new et(_e.paint_fill["fill-translate-anchor"]),"fill-pattern":new vs(_e.paint_fill["fill-pattern"])})},get layout(){return D0=D0||new ur({"fill-sort-key":new nt(_e.layout_fill["fill-sort-key"])})}};class T2 extends Qr{constructor(e){super(e,S2)}recalculate(e,s){super.recalculate(e,s);const o=this.paint._values["fill-outline-color"];o.value.kind==="constant"&&o.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new gf(e)}queryRadius(){return $h(this.paint.get("fill-translate"))}queryIntersectsFeature(e,s,o,h,g,y,v){return Vc(qh(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,v),h)}isTileClipped(){return!0}}const C2=di([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),E2=di([{name:"a_centroid",components:2,type:"Int16"}],4),{members:k2}=C2;var fa={},I2=W,R0=dl;function dl(r,e,s,o,h){this.properties={},this.extent=s,this.type=0,this._pbf=r,this._geometry=-1,this._keys=o,this._values=h,r.readFields(P2,this,e)}function P2(r,e,s){r==1?e.id=s.readVarint():r==2?function(o,h){for(var g=o.readVarint()+o.pos;o.pos<g;){var y=h._keys[o.readVarint()],v=h._values[o.readVarint()];h.properties[y]=v}}(s,e):r==3?e.type=s.readVarint():r==4&&(e._geometry=s.pos)}function z2(r){for(var e,s,o=0,h=0,g=r.length,y=g-1;h<g;y=h++)o+=((s=r[y]).x-(e=r[h]).x)*(e.y+s.y);return o}dl.types=["Unknown","Point","LineString","Polygon"],dl.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var e,s=r.readVarint()+r.pos,o=1,h=0,g=0,y=0,v=[];r.pos<s;){if(h<=0){var T=r.readVarint();o=7&T,h=T>>3}if(h--,o===1||o===2)g+=r.readSVarint(),y+=r.readSVarint(),o===1&&(e&&v.push(e),e=[]),e.push(new I2(g,y));else{if(o!==7)throw new Error("unknown command "+o);e&&e.push(e[0].clone())}}return e&&v.push(e),v},dl.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var e=r.readVarint()+r.pos,s=1,o=0,h=0,g=0,y=1/0,v=-1/0,T=1/0,E=-1/0;r.pos<e;){if(o<=0){var I=r.readVarint();s=7&I,o=I>>3}if(o--,s===1||s===2)(h+=r.readSVarint())<y&&(y=h),h>v&&(v=h),(g+=r.readSVarint())<T&&(T=g),g>E&&(E=g);else if(s!==7)throw new Error("unknown command "+s)}return[y,T,v,E]},dl.prototype.toGeoJSON=function(r,e,s){var o,h,g=this.extent*Math.pow(2,s),y=this.extent*r,v=this.extent*e,T=this.loadGeometry(),E=dl.types[this.type];function I(F){for(var O=0;O<F.length;O++){var V=F[O];F[O]=[360*(V.x+y)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(V.y+v)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var P=[];for(o=0;o<T.length;o++)P[o]=T[o][0];I(T=P);break;case 2:for(o=0;o<T.length;o++)I(T[o]);break;case 3:for(T=function(F){var O=F.length;if(O<=1)return[F];for(var V,H,J=[],de=0;de<O;de++){var ee=z2(F[de]);ee!==0&&(H===void 0&&(H=ee<0),H===ee<0?(V&&J.push(V),V=[F[de]]):V.push(F[de]))}return V&&J.push(V),J}(T),o=0;o<T.length;o++)for(h=0;h<T[o].length;h++)I(T[o][h])}T.length===1?T=T[0]:E="Multi"+E;var D={type:"Feature",geometry:{type:E,coordinates:T},properties:this.properties};return"id"in this&&(D.id=this.id),D};var A2=R0,F0=B0;function B0(r,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(M2,this,e),this.length=this._features.length}function M2(r,e,s){r===15?e.version=s.readVarint():r===1?e.name=s.readString():r===5?e.extent=s.readVarint():r===2?e._features.push(s.pos):r===3?e._keys.push(s.readString()):r===4&&e._values.push(function(o){for(var h=null,g=o.readVarint()+o.pos;o.pos<g;){var y=o.readVarint()>>3;h=y===1?o.readString():y===2?o.readFloat():y===3?o.readDouble():y===4?o.readVarint64():y===5?o.readVarint():y===6?o.readSVarint():y===7?o.readBoolean():null}return h}(s))}B0.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var e=this._pbf.readVarint()+this._pbf.pos;return new A2(this._pbf,e,this.extent,this._keys,this._values)};var D2=F0;function L2(r,e,s){if(r===3){var o=new D2(s,s.readVarint()+s.pos);o.length&&(e[o.name]=o)}}fa.VectorTile=function(r,e){this.layers=r.readFields(L2,{},e)},fa.VectorTileFeature=R0,fa.VectorTileLayer=F0;const R2=fa.VectorTileFeature.types,yf=Math.pow(2,13);function Kc(r,e,s,o,h,g,y,v){r.emplaceBack(e,s,2*Math.floor(o*yf)+y,h*yf*2,g*yf*2,Math.round(v))}class _f{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new G,this.centroidVertexArray=new z,this.indexArray=new ge,this.programConfigurations=new Xt(e.layers,e.zoom),this.segments=new Ie,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,o){this.features=[],this.hasPattern=ff("fill-extrusion",this.layers,s);for(const{feature:h,id:g,index:y,sourceLayerIndex:v}of e){const T=this.layers[0]._featureFilter.needGeometry,E=Ts(h,T);if(!this.layers[0]._featureFilter.filter(new Ht(this.zoom),E,o))continue;const I={id:g,sourceLayerIndex:v,index:y,geometry:T?E.geometry:Ss(h),properties:h.properties,type:h.type,patterns:{}};this.hasPattern?this.features.push(mf("fill-extrusion",this.layers,I,this.zoom,s)):this.addFeature(I,I.geometry,y,o,{}),s.featureIndex.insert(h,I.geometry,y,v,this.index,!0)}}addFeatures(e,s,o){for(const h of this.features){const{geometry:g}=h;this.addFeature(h,g,h.index,s,o)}}update(e,s,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,o)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,k2),this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,E2.members,!0),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(e,s,o,h,g){const y={x:0,y:0,vertexCount:0};for(const v of pf(s,500)){let T=0;for(const O of v)T+=O.length;let E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const O of v){if(O.length===0||B2(O))continue;let V=0;for(let H=0;H<O.length;H++){const J=O[H];if(H>=1){const de=O[H-1];if(!F2(J,de)){E.vertexLength+4>Ie.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const ee=J.sub(de)._perp()._unit(),ce=de.dist(J);V+ce>32768&&(V=0),Kc(this.layoutVertexArray,J.x,J.y,ee.x,ee.y,0,0,V),Kc(this.layoutVertexArray,J.x,J.y,ee.x,ee.y,0,1,V),y.x+=2*J.x,y.y+=2*J.y,y.vertexCount+=2,V+=ce,Kc(this.layoutVertexArray,de.x,de.y,ee.x,ee.y,0,0,V),Kc(this.layoutVertexArray,de.x,de.y,ee.x,ee.y,0,1,V),y.x+=2*de.x,y.y+=2*de.y,y.vertexCount+=2;const we=E.vertexLength;this.indexArray.emplaceBack(we,we+2,we+1),this.indexArray.emplaceBack(we+1,we+2,we+3),E.vertexLength+=4,E.primitiveLength+=2}}}}if(E.vertexLength+T>Ie.MAX_VERTEX_ARRAY_LENGTH&&(E=this.segments.prepareSegment(T,this.layoutVertexArray,this.indexArray)),R2[e.type]!=="Polygon")continue;const I=[],P=[],D=E.vertexLength;for(const O of v)if(O.length!==0){O!==v[0]&&P.push(I.length/2);for(let V=0;V<O.length;V++){const H=O[V];Kc(this.layoutVertexArray,H.x,H.y,0,0,1,1,0),y.x+=H.x,y.y+=H.y,y.vertexCount+=1,I.push(H.x),I.push(H.y)}}const F=A0(I,P);for(let O=0;O<F.length;O+=3)this.indexArray.emplaceBack(D+F[O],D+F[O+2],D+F[O+1]);E.primitiveLength+=F.length/3,E.vertexLength+=T}for(let v=0;v<y.vertexCount;v++)this.centroidVertexArray.emplaceBack(Math.floor(y.x/y.vertexCount),Math.floor(y.y/y.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,g,h)}}function F2(r,e){return r.x===e.x&&(r.x<0||r.x>bt)||r.y===e.y&&(r.y<0||r.y>bt)}function B2(r){return r.every(e=>e.x<0)||r.every(e=>e.x>bt)||r.every(e=>e.y<0)||r.every(e=>e.y>bt)}let O0;Ge("FillExtrusionBucket",_f,{omit:["layers","features"]});var O2={get paint(){return O0=O0||new ur({"fill-extrusion-opacity":new et(_e["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new nt(_e["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new et(_e["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new et(_e["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new vs(_e["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new nt(_e["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new nt(_e["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new et(_e["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class N2 extends Qr{constructor(e){super(e,O2)}createBucket(e){return new _f(e)}queryRadius(){return $h(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(e,s,o,h,g,y,v,T){const E=qh(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,v),I=this.paint.get("fill-extrusion-height").evaluate(s,o),P=this.paint.get("fill-extrusion-base").evaluate(s,o),D=function(O,V,H,J){const de=[];for(const ee of O){const ce=[ee.x,ee.y,0,1];Zh(ce,ce,V),de.push(new K(ce[0]/ce[3],ce[1]/ce[3]))}return de}(E,T),F=function(O,V,H,J){const de=[],ee=[],ce=J[8]*V,we=J[9]*V,Se=J[10]*V,Ue=J[11]*V,Ye=J[8]*H,Ve=J[9]*H,Ne=J[10]*H,Le=J[11]*H;for(const We of O){const Oe=[],Me=[];for(const rt of We){const Qe=rt.x,wt=rt.y,Kt=J[0]*Qe+J[4]*wt+J[12],Yt=J[1]*Qe+J[5]*wt+J[13],Ci=J[2]*Qe+J[6]*wt+J[14],$r=J[3]*Qe+J[7]*wt+J[15],pr=Ci+Se,xi=$r+Ue,Ni=Kt+Ye,Hi=Yt+Ve,fr=Ci+Ne,mr=$r+Le,Ei=new K((Kt+ce)/xi,(Yt+we)/xi);Ei.z=pr/xi,Oe.push(Ei);const ki=new K(Ni/mr,Hi/mr);ki.z=fr/mr,Me.push(ki)}de.push(Oe),ee.push(Me)}return[de,ee]}(h,P,I,T);return function(O,V,H){let J=1/0;Vc(H,V)&&(J=N0(H,V[0]));for(let de=0;de<V.length;de++){const ee=V[de],ce=O[de];for(let we=0;we<ee.length-1;we++){const Se=ee[we],Ue=[Se,ee[we+1],ce[we+1],ce[we],Se];Cs(H,Ue)&&(J=Math.min(J,N0(H,Ue)))}}return J!==1/0&&J}(F[0],F[1],D)}}function Xc(r,e){return r.x*e.x+r.y*e.y}function N0(r,e){if(r.length===1){let s=0;const o=e[s++];let h;for(;!h||o.equals(h);)if(h=e[s++],!h)return 1/0;for(;s<e.length;s++){const g=e[s],y=r[0],v=h.sub(o),T=g.sub(o),E=y.sub(o),I=Xc(v,v),P=Xc(v,T),D=Xc(T,T),F=Xc(E,v),O=Xc(E,T),V=I*D-P*P,H=(D*F-P*O)/V,J=(I*O-P*F)/V,de=o.z*(1-H-J)+h.z*H+g.z*J;if(isFinite(de))return de}return 1/0}{let s=1/0;for(const o of e)s=Math.min(s,o.z);return s}}const j2=di([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:V2}=j2,U2=di([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:$2}=U2,q2=fa.VectorTileFeature.types,Z2=Math.cos(Math.PI/180*37.5),j0=Math.pow(2,14)/.5;class vf{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(s=>s.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new q,this.layoutVertexArray2=new X,this.indexArray=new ge,this.programConfigurations=new Xt(e.layers,e.zoom),this.segments=new Ie,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(e,s,o){this.hasPattern=ff("line",this.layers,s);const h=this.layers[0].layout.get("line-sort-key"),g=!h.isConstant(),y=[];for(const{feature:v,id:T,index:E,sourceLayerIndex:I}of e){const P=this.layers[0]._featureFilter.needGeometry,D=Ts(v,P);if(!this.layers[0]._featureFilter.filter(new Ht(this.zoom),D,o))continue;const F=g?h.evaluate(D,{},o):void 0,O={id:T,properties:v.properties,type:v.type,sourceLayerIndex:I,index:E,geometry:P?D.geometry:Ss(v),patterns:{},sortKey:F};y.push(O)}g&&y.sort((v,T)=>v.sortKey-T.sortKey);for(const v of y){const{geometry:T,index:E,sourceLayerIndex:I}=v;if(this.hasPattern){const P=mf("line",this.layers,v,this.zoom,s);this.patternFeatures.push(P)}else this.addFeature(v,T,E,o,{});s.featureIndex.insert(e[E].feature,T,E,I,this.index)}}update(e,s,o){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,s,this.stateDependentLayers,o)}addFeatures(e,s,o){for(const h of this.patternFeatures)this.addFeature(h,h.geometry,h.index,s,o)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,$2)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,V2),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(e.properties,"mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,s,o,h,g){const y=this.layers[0].layout,v=y.get("line-join").evaluate(e,{}),T=y.get("line-cap"),E=y.get("line-miter-limit"),I=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const P of s)this.addLine(P,e,v,T,E,I);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,o,g,h)}addLine(e,s,o,h,g,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let J=0;J<e.length-1;J++)this.totalDistance+=e[J].dist(e[J+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const v=q2[s.type]==="Polygon";let T=e.length;for(;T>=2&&e[T-1].equals(e[T-2]);)T--;let E=0;for(;E<T-1&&e[E].equals(e[E+1]);)E++;if(T<(v?3:2))return;o==="bevel"&&(g=1.05);const I=this.overscaling<=16?15*bt/(512*this.overscaling):0,P=this.segments.prepareSegment(10*T,this.layoutVertexArray,this.indexArray);let D,F,O,V,H;this.e1=this.e2=-1,v&&(D=e[T-2],H=e[E].sub(D)._unit()._perp());for(let J=E;J<T;J++){if(O=J===T-1?v?e[E+1]:void 0:e[J+1],O&&e[J].equals(O))continue;H&&(V=H),D&&(F=D),D=e[J],H=O?O.sub(D)._unit()._perp():V,V=V||H;let de=V.add(H);de.x===0&&de.y===0||de._unit();const ee=V.x*H.x+V.y*H.y,ce=de.x*H.x+de.y*H.y,we=ce!==0?1/ce:1/0,Se=2*Math.sqrt(2-2*ce),Ue=ce<Z2&&F&&O,Ye=V.x*H.y-V.y*H.x>0;if(Ue&&J>E){const Le=D.dist(F);if(Le>2*I){const We=D.sub(D.sub(F)._mult(I/Le)._round());this.updateDistance(F,We),this.addCurrentVertex(We,V,0,0,P),F=We}}const Ve=F&&O;let Ne=Ve?o:v?"butt":h;if(Ve&&Ne==="round"&&(we<y?Ne="miter":we<=2&&(Ne="fakeround")),Ne==="miter"&&we>g&&(Ne="bevel"),Ne==="bevel"&&(we>2&&(Ne="flipbevel"),we<g&&(Ne="miter")),F&&this.updateDistance(F,D),Ne==="miter")de._mult(we),this.addCurrentVertex(D,de,0,0,P);else if(Ne==="flipbevel"){if(we>100)de=H.mult(-1);else{const Le=we*V.add(H).mag()/V.sub(H).mag();de._perp()._mult(Le*(Ye?-1:1))}this.addCurrentVertex(D,de,0,0,P),this.addCurrentVertex(D,de.mult(-1),0,0,P)}else if(Ne==="bevel"||Ne==="fakeround"){const Le=-Math.sqrt(we*we-1),We=Ye?Le:0,Oe=Ye?0:Le;if(F&&this.addCurrentVertex(D,V,We,Oe,P),Ne==="fakeround"){const Me=Math.round(180*Se/Math.PI/20);for(let rt=1;rt<Me;rt++){let Qe=rt/Me;if(Qe!==.5){const Kt=Qe-.5;Qe+=Qe*Kt*(Qe-1)*((1.0904+ee*(ee*(3.55645-1.43519*ee)-3.2452))*Kt*Kt+(.848013+ee*(.215638*ee-1.06021)))}const wt=H.sub(V)._mult(Qe)._add(V)._unit()._mult(Ye?-1:1);this.addHalfVertex(D,wt.x,wt.y,!1,Ye,0,P)}}O&&this.addCurrentVertex(D,H,-We,-Oe,P)}else if(Ne==="butt")this.addCurrentVertex(D,de,0,0,P);else if(Ne==="square"){const Le=F?1:-1;this.addCurrentVertex(D,de,Le,Le,P)}else Ne==="round"&&(F&&(this.addCurrentVertex(D,V,0,0,P),this.addCurrentVertex(D,V,1,1,P,!0)),O&&(this.addCurrentVertex(D,H,-1,-1,P,!0),this.addCurrentVertex(D,H,0,0,P)));if(Ue&&J<T-1){const Le=D.dist(O);if(Le>2*I){const We=D.add(O.sub(D)._mult(I/Le)._round());this.updateDistance(D,We),this.addCurrentVertex(We,H,0,0,P),D=We}}}}addCurrentVertex(e,s,o,h,g,y=!1){const v=s.y*h-s.x,T=-s.y-s.x*h;this.addHalfVertex(e,s.x+s.y*o,s.y-s.x*o,y,!1,o,g),this.addHalfVertex(e,v,T,y,!0,-h,g),this.distance>j0/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(e,s,o,h,g,y))}addHalfVertex({x:e,y:s},o,h,g,y,v,T){const E=.5*(this.lineClips?this.scaledDistance*(j0-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((e<<1)+(g?1:0),(s<<1)+(y?1:0),Math.round(63*o)+128,Math.round(63*h)+128,1+(v===0?0:v<0?-1:1)|(63&E)<<2,E>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const I=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,I),T.primitiveLength++),y?this.e2=I:this.e1=I}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(e,s){this.distance+=e.dist(s),this.updateScaledDistance()}}let V0,U0;Ge("LineBucket",vf,{omit:["layers","patternFeatures"]});var $0={get paint(){return U0=U0||new ur({"line-opacity":new nt(_e.paint_line["line-opacity"]),"line-color":new nt(_e.paint_line["line-color"]),"line-translate":new et(_e.paint_line["line-translate"]),"line-translate-anchor":new et(_e.paint_line["line-translate-anchor"]),"line-width":new nt(_e.paint_line["line-width"]),"line-gap-width":new nt(_e.paint_line["line-gap-width"]),"line-offset":new nt(_e.paint_line["line-offset"]),"line-blur":new nt(_e.paint_line["line-blur"]),"line-dasharray":new Ic(_e.paint_line["line-dasharray"]),"line-pattern":new vs(_e.paint_line["line-pattern"]),"line-gradient":new oo(_e.paint_line["line-gradient"])})},get layout(){return V0=V0||new ur({"line-cap":new et(_e.layout_line["line-cap"]),"line-join":new nt(_e.layout_line["line-join"]),"line-miter-limit":new et(_e.layout_line["line-miter-limit"]),"line-round-limit":new et(_e.layout_line["line-round-limit"]),"line-sort-key":new nt(_e.layout_line["line-sort-key"])})}};class G2 extends nt{possiblyEvaluate(e,s){return s=new Ht(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(e,s)}evaluate(e,s,o,h){return s=Ke({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(e,s,o,h)}}let Xh;class H2 extends Qr{constructor(e){super(e,$0),this.gradientVersion=0,Xh||(Xh=new G2($0.paint.properties["line-width"].specification),Xh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(e){if(e==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!function(o){return o._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Ks,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,s){super.recalculate(e,s),this.paint._values["line-floorwidth"]=Xh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new vf(e)}queryRadius(e){const s=e,o=q0(Uc("line-width",this,s),Uc("line-gap-width",this,s)),h=Uc("line-offset",this,s);return o/2+Math.abs(h)+$h(this.paint.get("line-translate"))}queryIntersectsFeature(e,s,o,h,g,y,v){const T=qh(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,v),E=v/2*q0(this.paint.get("line-width").evaluate(s,o),this.paint.get("line-gap-width").evaluate(s,o)),I=this.paint.get("line-offset").evaluate(s,o);return I&&(h=function(P,D){const F=[];for(let O=0;O<P.length;O++){const V=P[O],H=[];for(let J=0;J<V.length;J++){const de=V[J-1],ee=V[J],ce=V[J+1],we=J===0?new K(0,0):ee.sub(de)._unit()._perp(),Se=J===V.length-1?new K(0,0):ce.sub(ee)._unit()._perp(),Ue=we._add(Se)._unit(),Ye=Ue.x*Se.x+Ue.y*Se.y;Ye!==0&&Ue._mult(1/Ye),H.push(Ue._mult(D)._add(ee))}F.push(H)}return F}(h,I*v)),function(P,D,F){for(let O=0;O<D.length;O++){const V=D[O];if(P.length>=3){for(let H=0;H<V.length;H++)if(cl(P,V[H]))return!0}if(Vh(P,V,F))return!0}return!1}(T,h,E)}isTileClipped(){return!0}}function q0(r,e){return e>0?e+2*r:r}const W2=di([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),K2=di([{name:"a_projected_pos",components:3,type:"Float32"}],4);di([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const X2=di([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);di([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Z0=di([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Y2=di([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function J2(r,e,s){return r.sections.forEach(o=>{o.text=function(h,g,y){const v=g.layout.get("text-transform").evaluate(y,{});return v==="uppercase"?h=h.toLocaleUpperCase():v==="lowercase"&&(h=h.toLocaleLowerCase()),_s.applyArabicShaping&&(h=_s.applyArabicShaping(h)),h}(o.text,e,s)}),r}di([{name:"triangle",components:3,type:"Uint16"}]),di([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),di([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),di([{type:"Float32",name:"offsetX"}]),di([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),di([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Yc={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Ti=24,G0=Bt,H0=function(r,e,s,o,h){var g,y,v=8*h-o-1,T=(1<<v)-1,E=T>>1,I=-7,P=s?h-1:0,D=s?-1:1,F=r[e+P];for(P+=D,g=F&(1<<-I)-1,F>>=-I,I+=v;I>0;g=256*g+r[e+P],P+=D,I-=8);for(y=g&(1<<-I)-1,g>>=-I,I+=o;I>0;y=256*y+r[e+P],P+=D,I-=8);if(g===0)g=1-E;else{if(g===T)return y?NaN:1/0*(F?-1:1);y+=Math.pow(2,o),g-=E}return(F?-1:1)*y*Math.pow(2,g-o)},W0=function(r,e,s,o,h,g){var y,v,T,E=8*g-h-1,I=(1<<E)-1,P=I>>1,D=h===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=o?0:g-1,O=o?1:-1,V=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(v=isNaN(e)?1:0,y=I):(y=Math.floor(Math.log(e)/Math.LN2),e*(T=Math.pow(2,-y))<1&&(y--,T*=2),(e+=y+P>=1?D/T:D*Math.pow(2,1-P))*T>=2&&(y++,T/=2),y+P>=I?(v=0,y=I):y+P>=1?(v=(e*T-1)*Math.pow(2,h),y+=P):(v=e*Math.pow(2,P-1)*Math.pow(2,h),y=0));h>=8;r[s+F]=255&v,F+=O,v/=256,h-=8);for(y=y<<h|v,E+=h;E>0;r[s+F]=255&y,F+=O,y/=256,E-=8);r[s+F-O]|=128*V};function Bt(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Bt.Varint=0,Bt.Fixed64=1,Bt.Bytes=2,Bt.Fixed32=5;var xf=4294967296,K0=1/xf,X0=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Es(r){return r.type===Bt.Bytes?r.readVarint()+r.pos:r.pos+1}function pl(r,e,s){return s?4294967296*e+(r>>>0):4294967296*(e>>>0)+(r>>>0)}function Y0(r,e,s){var o=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));s.realloc(o);for(var h=s.pos-1;h>=r;h--)s.buf[h+o]=s.buf[h]}function Q2(r,e){for(var s=0;s<r.length;s++)e.writeVarint(r[s])}function ew(r,e){for(var s=0;s<r.length;s++)e.writeSVarint(r[s])}function tw(r,e){for(var s=0;s<r.length;s++)e.writeFloat(r[s])}function iw(r,e){for(var s=0;s<r.length;s++)e.writeDouble(r[s])}function rw(r,e){for(var s=0;s<r.length;s++)e.writeBoolean(r[s])}function nw(r,e){for(var s=0;s<r.length;s++)e.writeFixed32(r[s])}function sw(r,e){for(var s=0;s<r.length;s++)e.writeSFixed32(r[s])}function aw(r,e){for(var s=0;s<r.length;s++)e.writeFixed64(r[s])}function ow(r,e){for(var s=0;s<r.length;s++)e.writeSFixed64(r[s])}function Yh(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+16777216*r[e+3]}function fl(r,e,s){r[s]=e,r[s+1]=e>>>8,r[s+2]=e>>>16,r[s+3]=e>>>24}function J0(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+(r[e+3]<<24)}Bt.prototype={destroy:function(){this.buf=null},readFields:function(r,e,s){for(s=s||this.length;this.pos<s;){var o=this.readVarint(),h=o>>3,g=this.pos;this.type=7&o,r(h,e,this),this.pos===g&&this.skip(o)}return e},readMessage:function(r,e){return this.readFields(r,e,this.readVarint()+this.pos)},readFixed32:function(){var r=Yh(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=J0(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=Yh(this.buf,this.pos)+Yh(this.buf,this.pos+4)*xf;return this.pos+=8,r},readSFixed64:function(){var r=Yh(this.buf,this.pos)+J0(this.buf,this.pos+4)*xf;return this.pos+=8,r},readFloat:function(){var r=H0(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=H0(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var e,s,o=this.buf;return e=127&(s=o[this.pos++]),s<128?e:(e|=(127&(s=o[this.pos++]))<<7,s<128?e:(e|=(127&(s=o[this.pos++]))<<14,s<128?e:(e|=(127&(s=o[this.pos++]))<<21,s<128?e:function(h,g,y){var v,T,E=y.buf;if(v=(112&(T=E[y.pos++]))>>4,T<128||(v|=(127&(T=E[y.pos++]))<<3,T<128)||(v|=(127&(T=E[y.pos++]))<<10,T<128)||(v|=(127&(T=E[y.pos++]))<<17,T<128)||(v|=(127&(T=E[y.pos++]))<<24,T<128)||(v|=(1&(T=E[y.pos++]))<<31,T<128))return pl(h,v,g);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(s=o[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,e=this.pos;return this.pos=r,r-e>=12&&X0?function(s,o,h){return X0.decode(s.subarray(o,h))}(this.buf,e,r):function(s,o,h){for(var g="",y=o;y<h;){var v,T,E,I=s[y],P=null,D=I>239?4:I>223?3:I>191?2:1;if(y+D>h)break;D===1?I<128&&(P=I):D===2?(192&(v=s[y+1]))==128&&(P=(31&I)<<6|63&v)<=127&&(P=null):D===3?(T=s[y+2],(192&(v=s[y+1]))==128&&(192&T)==128&&((P=(15&I)<<12|(63&v)<<6|63&T)<=2047||P>=55296&&P<=57343)&&(P=null)):D===4&&(T=s[y+2],E=s[y+3],(192&(v=s[y+1]))==128&&(192&T)==128&&(192&E)==128&&((P=(15&I)<<18|(63&v)<<12|(63&T)<<6|63&E)<=65535||P>=1114112)&&(P=null)),P===null?(P=65533,D=1):P>65535&&(P-=65536,g+=String.fromCharCode(P>>>10&1023|55296),P=56320|1023&P),g+=String.fromCharCode(P),y+=D}return g}(this.buf,e,r)},readBytes:function(){var r=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,r);return this.pos=r,e},readPackedVarint:function(r,e){if(this.type!==Bt.Bytes)return r.push(this.readVarint(e));var s=Es(this);for(r=r||[];this.pos<s;)r.push(this.readVarint(e));return r},readPackedSVarint:function(r){if(this.type!==Bt.Bytes)return r.push(this.readSVarint());var e=Es(this);for(r=r||[];this.pos<e;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Bt.Bytes)return r.push(this.readBoolean());var e=Es(this);for(r=r||[];this.pos<e;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Bt.Bytes)return r.push(this.readFloat());var e=Es(this);for(r=r||[];this.pos<e;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Bt.Bytes)return r.push(this.readDouble());var e=Es(this);for(r=r||[];this.pos<e;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Bt.Bytes)return r.push(this.readFixed32());var e=Es(this);for(r=r||[];this.pos<e;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Bt.Bytes)return r.push(this.readSFixed32());var e=Es(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Bt.Bytes)return r.push(this.readFixed64());var e=Es(this);for(r=r||[];this.pos<e;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Bt.Bytes)return r.push(this.readSFixed64());var e=Es(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed64());return r},skip:function(r){var e=7&r;if(e===Bt.Varint)for(;this.buf[this.pos++]>127;);else if(e===Bt.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Bt.Fixed32)this.pos+=4;else{if(e!==Bt.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(r,e){this.writeVarint(r<<3|e)},realloc:function(r){for(var e=this.length||16;e<this.pos+r;)e*=2;if(e!==this.length){var s=new Uint8Array(e);s.set(this.buf),this.buf=s,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),fl(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),fl(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),fl(this.buf,-1&r,this.pos),fl(this.buf,Math.floor(r*K0),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),fl(this.buf,-1&r,this.pos),fl(this.buf,Math.floor(r*K0),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(e,s){var o,h;if(e>=0?(o=e%4294967296|0,h=e/4294967296|0):(h=~(-e/4294967296),4294967295^(o=~(-e%4294967296))?o=o+1|0:(o=0,h=h+1|0)),e>=18446744073709552e3||e<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(g,y,v){v.buf[v.pos++]=127&g|128,g>>>=7,v.buf[v.pos++]=127&g|128,g>>>=7,v.buf[v.pos++]=127&g|128,g>>>=7,v.buf[v.pos++]=127&g|128,v.buf[v.pos]=127&(g>>>=7)}(o,0,s),function(g,y){var v=(7&g)<<4;y.buf[y.pos++]|=v|((g>>>=3)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g)))))}(h,s)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var e=this.pos;this.pos=function(o,h,g){for(var y,v,T=0;T<h.length;T++){if((y=h.charCodeAt(T))>55295&&y<57344){if(!v){y>56319||T+1===h.length?(o[g++]=239,o[g++]=191,o[g++]=189):v=y;continue}if(y<56320){o[g++]=239,o[g++]=191,o[g++]=189,v=y;continue}y=v-55296<<10|y-56320|65536,v=null}else v&&(o[g++]=239,o[g++]=191,o[g++]=189,v=null);y<128?o[g++]=y:(y<2048?o[g++]=y>>6|192:(y<65536?o[g++]=y>>12|224:(o[g++]=y>>18|240,o[g++]=y>>12&63|128),o[g++]=y>>6&63|128),o[g++]=63&y|128)}return g}(this.buf,r,this.pos);var s=this.pos-e;s>=128&&Y0(e,s,this),this.pos=e-1,this.writeVarint(s),this.pos+=s},writeFloat:function(r){this.realloc(4),W0(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),W0(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var e=r.length;this.writeVarint(e),this.realloc(e);for(var s=0;s<e;s++)this.buf[this.pos++]=r[s]},writeRawMessage:function(r,e){this.pos++;var s=this.pos;r(e,this);var o=this.pos-s;o>=128&&Y0(s,o,this),this.pos=s-1,this.writeVarint(o),this.pos+=o},writeMessage:function(r,e,s){this.writeTag(r,Bt.Bytes),this.writeRawMessage(e,s)},writePackedVarint:function(r,e){e.length&&this.writeMessage(r,Q2,e)},writePackedSVarint:function(r,e){e.length&&this.writeMessage(r,ew,e)},writePackedBoolean:function(r,e){e.length&&this.writeMessage(r,rw,e)},writePackedFloat:function(r,e){e.length&&this.writeMessage(r,tw,e)},writePackedDouble:function(r,e){e.length&&this.writeMessage(r,iw,e)},writePackedFixed32:function(r,e){e.length&&this.writeMessage(r,nw,e)},writePackedSFixed32:function(r,e){e.length&&this.writeMessage(r,sw,e)},writePackedFixed64:function(r,e){e.length&&this.writeMessage(r,aw,e)},writePackedSFixed64:function(r,e){e.length&&this.writeMessage(r,ow,e)},writeBytesField:function(r,e){this.writeTag(r,Bt.Bytes),this.writeBytes(e)},writeFixed32Field:function(r,e){this.writeTag(r,Bt.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(r,e){this.writeTag(r,Bt.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(r,e){this.writeTag(r,Bt.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(r,e){this.writeTag(r,Bt.Fixed64),this.writeSFixed64(e)},writeVarintField:function(r,e){this.writeTag(r,Bt.Varint),this.writeVarint(e)},writeSVarintField:function(r,e){this.writeTag(r,Bt.Varint),this.writeSVarint(e)},writeStringField:function(r,e){this.writeTag(r,Bt.Bytes),this.writeString(e)},writeFloatField:function(r,e){this.writeTag(r,Bt.Fixed32),this.writeFloat(e)},writeDoubleField:function(r,e){this.writeTag(r,Bt.Fixed64),this.writeDouble(e)},writeBooleanField:function(r,e){this.writeVarintField(r,!!e)}};var wf=R(G0);const bf=3;function lw(r,e,s){r===1&&s.readMessage(cw,e)}function cw(r,e,s){if(r===3){const{id:o,bitmap:h,width:g,height:y,left:v,top:T,advance:E}=s.readMessage(uw,{});e.push({id:o,bitmap:new qc({width:g+2*bf,height:y+2*bf},h),metrics:{width:g,height:y,left:v,top:T,advance:E}})}}function uw(r,e,s){r===1?e.id=s.readVarint():r===2?e.bitmap=s.readBytes():r===3?e.width=s.readVarint():r===4?e.height=s.readVarint():r===5?e.left=s.readSVarint():r===6?e.top=s.readSVarint():r===7&&(e.advance=s.readVarint())}const Q0=bf;function ey(r){let e=0,s=0;for(const y of r)e+=y.w*y.h,s=Math.max(s,y.w);r.sort((y,v)=>v.h-y.h);const o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(e/.95)),s),h:1/0}];let h=0,g=0;for(const y of r)for(let v=o.length-1;v>=0;v--){const T=o[v];if(!(y.w>T.w||y.h>T.h)){if(y.x=T.x,y.y=T.y,g=Math.max(g,y.y+y.h),h=Math.max(h,y.x+y.w),y.w===T.w&&y.h===T.h){const E=o.pop();v<o.length&&(o[v]=E)}else y.h===T.h?(T.x+=y.w,T.w-=y.w):y.w===T.w?(T.y+=y.h,T.h-=y.h):(o.push({x:T.x+y.w,y:T.y,w:T.w-y.w,h:y.h}),T.y+=y.h,T.h-=y.h);break}}return{w:h,h:g,fill:e/(h*g)||0}}const zr=1;class Sf{constructor(e,{pixelRatio:s,version:o,stretchX:h,stretchY:g,content:y}){this.paddedRect=e,this.pixelRatio=s,this.stretchX=h,this.stretchY=g,this.content=y,this.version=o}get tl(){return[this.paddedRect.x+zr,this.paddedRect.y+zr]}get br(){return[this.paddedRect.x+this.paddedRect.w-zr,this.paddedRect.y+this.paddedRect.h-zr]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*zr)/this.pixelRatio,(this.paddedRect.h-2*zr)/this.pixelRatio]}}class ty{constructor(e,s){const o={},h={};this.haveRenderCallbacks=[];const g=[];this.addImages(e,o,g),this.addImages(s,h,g);const{w:y,h:v}=ey(g),T=new rn({width:y||1,height:v||1});for(const E in e){const I=e[E],P=o[E].paddedRect;rn.copy(I.data,T,{x:0,y:0},{x:P.x+zr,y:P.y+zr},I.data)}for(const E in s){const I=s[E],P=h[E].paddedRect,D=P.x+zr,F=P.y+zr,O=I.data.width,V=I.data.height;rn.copy(I.data,T,{x:0,y:0},{x:D,y:F},I.data),rn.copy(I.data,T,{x:0,y:V-1},{x:D,y:F-1},{width:O,height:1}),rn.copy(I.data,T,{x:0,y:0},{x:D,y:F+V},{width:O,height:1}),rn.copy(I.data,T,{x:O-1,y:0},{x:D-1,y:F},{width:1,height:V}),rn.copy(I.data,T,{x:0,y:0},{x:D+O,y:F},{width:1,height:V})}this.image=T,this.iconPositions=o,this.patternPositions=h}addImages(e,s,o){for(const h in e){const g=e[h],y={x:0,y:0,w:g.data.width+2*zr,h:g.data.height+2*zr};o.push(y),s[h]=new Sf(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(h)}}patchUpdatedImages(e,s){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const o in e.updatedImages)this.patchUpdatedImage(this.iconPositions[o],e.getImage(o),s),this.patchUpdatedImage(this.patternPositions[o],e.getImage(o),s)}patchUpdatedImage(e,s,o){if(!e||!s||e.version===s.version)return;e.version=s.version;const[h,g]=e.tl;o.update(s.data,void 0,{x:h,y:g})}}var ma;Ge("ImagePosition",Sf),Ge("ImageAtlas",ty),x.ah=void 0,(ma=x.ah||(x.ah={}))[ma.none=0]="none",ma[ma.horizontal=1]="horizontal",ma[ma.vertical=2]="vertical",ma[ma.horizontalOnly=3]="horizontalOnly";const Jc=-17;class Qc{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,s){const o=new Qc;return o.scale=e||1,o.fontStack=s,o}static forImage(e){const s=new Qc;return s.imageName=e,s}}class ml{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,s){const o=new ml;for(let h=0;h<e.sections.length;h++){const g=e.sections[h];g.image?o.addImageSection(g):o.addTextSection(g,s)}return o}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let s="";for(let o=0;o<e.length;o++){const h=e.charCodeAt(o+1)||null,g=e.charCodeAt(o-1)||null;s+=h&&Sc(h)&&!Yc[e[o+1]]||g&&Sc(g)&&!Yc[e[o-1]]||!Yc[e[o]]?e[o]:Yc[e[o]]}return s}(this.text)}trim(){let e=0;for(let o=0;o<this.text.length&&Qh[this.text.charCodeAt(o)];o++)e++;let s=this.text.length;for(let o=this.text.length-1;o>=0&&o>=e&&Qh[this.text.charCodeAt(o)];o--)s--;this.text=this.text.substring(e,s),this.sectionIndex=this.sectionIndex.slice(e,s)}substring(e,s){const o=new ml;return o.text=this.text.substring(e,s),o.sectionIndex=this.sectionIndex.slice(e,s),o.sections=this.sections,o}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,s)=>Math.max(e,this.sections[s].scale),0)}addTextSection(e,s){this.text+=e.text,this.sections.push(Qc.forText(e.scale,e.fontStack||s));const o=this.sections.length-1;for(let h=0;h<e.text.length;++h)this.sectionIndex.push(o)}addImageSection(e){const s=e.image?e.image.name:"";if(s.length===0)return void si("Can't add FormattedSection with an empty image.");const o=this.getNextImageSectionCharCode();o?(this.text+=String.fromCharCode(o),this.sections.push(Qc.forImage(s)),this.sectionIndex.push(this.sections.length-1)):si("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Jh(r,e,s,o,h,g,y,v,T,E,I,P,D,F,O,V){const H=ml.fromFeature(r,h);let J;P===x.ah.vertical&&H.verticalizePunctuation();const{processBidirectionalText:de,processStyledBidirectionalText:ee}=_s;if(de&&H.sections.length===1){J=[];const Se=de(H.toString(),Tf(H,E,g,e,o,F,O));for(const Ue of Se){const Ye=new ml;Ye.text=Ue,Ye.sections=H.sections;for(let Ve=0;Ve<Ue.length;Ve++)Ye.sectionIndex.push(0);J.push(Ye)}}else if(ee){J=[];const Se=ee(H.text,H.sectionIndex,Tf(H,E,g,e,o,F,O));for(const Ue of Se){const Ye=new ml;Ye.text=Ue[0],Ye.sectionIndex=Ue[1],Ye.sections=H.sections,J.push(Ye)}}else J=function(Se,Ue){const Ye=[],Ve=Se.text;let Ne=0;for(const Le of Ue)Ye.push(Se.substring(Ne,Le)),Ne=Le;return Ne<Ve.length&&Ye.push(Se.substring(Ne,Ve.length)),Ye}(H,Tf(H,E,g,e,o,F,O));const ce=[],we={positionedLines:ce,text:H.toString(),top:I[1],bottom:I[1],left:I[0],right:I[0],writingMode:P,iconsInText:!1,verticalizable:!1};return function(Se,Ue,Ye,Ve,Ne,Le,We,Oe,Me,rt,Qe,wt){let Kt=0,Yt=Jc,Ci=0,$r=0;const pr=Oe==="right"?1:Oe==="left"?0:.5;let xi=0;for(const Ei of Ne){Ei.trim();const ki=Ei.getMaxScale(),Qi=(ki-1)*Ti,gr={positionedGlyphs:[],lineOffset:0};Se.positionedLines[xi]=gr;const er=gr.positionedGlyphs;let Ar=0;if(!Ei.length()){Yt+=Le,++xi;continue}for(let Ii=0;Ii<Ei.length();Ii++){const Tt=Ei.getSection(Ii),tr=Ei.getSectionIndex(Ii),Wi=Ei.getCharCode(Ii);let Pi=0,wn=null,Dn=null,Ln=null,ks=Ti;const bn=!(Me===x.ah.horizontal||!Qe&&!el(Wi)||Qe&&(Qh[Wi]||(Ni=Wi,qe.Arabic(Ni)||qe["Arabic Supplement"](Ni)||qe["Arabic Extended-A"](Ni)||qe["Arabic Presentation Forms-A"](Ni)||qe["Arabic Presentation Forms-B"](Ni))));if(Tt.imageName){const sn=Ve[Tt.imageName];if(!sn)continue;Ln=Tt.imageName,Se.iconsInText=Se.iconsInText||!0,Dn=sn.paddedRect;const Dr=sn.displaySize;Tt.scale=Tt.scale*Ti/wt,wn={width:Dr[0],height:Dr[1],left:zr,top:-Q0,advance:bn?Dr[1]:Dr[0]},Pi=Qi+(Ti-Dr[1]*Tt.scale),ks=wn.advance;const Is=bn?Dr[0]*Tt.scale-Ti*ki:Dr[1]*Tt.scale-Ti*ki;Is>0&&Is>Ar&&(Ar=Is)}else{const sn=Ye[Tt.fontStack],Dr=sn&&sn[Wi];if(Dr&&Dr.rect)Dn=Dr.rect,wn=Dr.metrics;else{const Is=Ue[Tt.fontStack],nu=Is&&Is[Wi];if(!nu)continue;wn=nu.metrics}Pi=(ki-Tt.scale)*Ti}bn?(Se.verticalizable=!0,er.push({glyph:Wi,imageName:Ln,x:Kt,y:Yt+Pi,vertical:bn,scale:Tt.scale,fontStack:Tt.fontStack,sectionIndex:tr,metrics:wn,rect:Dn}),Kt+=ks*Tt.scale+rt):(er.push({glyph:Wi,imageName:Ln,x:Kt,y:Yt+Pi,vertical:bn,scale:Tt.scale,fontStack:Tt.fontStack,sectionIndex:tr,metrics:wn,rect:Dn}),Kt+=wn.advance*Tt.scale+rt)}er.length!==0&&(Ci=Math.max(Kt-rt,Ci),pw(er,0,er.length-1,pr,Ar)),Kt=0;const Mr=Le*ki+Ar;gr.lineOffset=Math.max(Ar,Qi),Yt+=Mr,$r=Math.max(Mr,$r),++xi}var Ni;const Hi=Yt-Jc,{horizontalAlign:fr,verticalAlign:mr}=Cf(We);(function(Ei,ki,Qi,gr,er,Ar,Mr,Ii,Tt){const tr=(ki-Qi)*er;let Wi=0;Wi=Ar!==Mr?-Ii*gr-Jc:(-gr*Tt+.5)*Mr;for(const Pi of Ei)for(const wn of Pi.positionedGlyphs)wn.x+=tr,wn.y+=Wi})(Se.positionedLines,pr,fr,mr,Ci,$r,Le,Hi,Ne.length),Se.top+=-mr*Hi,Se.bottom=Se.top+Hi,Se.left+=-fr*Ci,Se.right=Se.left+Ci}(we,e,s,o,J,y,v,T,P,E,D,V),!function(Se){for(const Ue of Se)if(Ue.positionedGlyphs.length!==0)return!1;return!0}(ce)&&we}const Qh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},hw={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function iy(r,e,s,o,h,g){if(e.imageName){const y=o[e.imageName];return y?y.displaySize[0]*e.scale*Ti/g+h:0}{const y=s[e.fontStack],v=y&&y[r];return v?v.metrics.advance*e.scale+h:0}}function ry(r,e,s,o){const h=Math.pow(r-e,2);return o?r<e?h/2:2*h:h+Math.abs(s)*s}function dw(r,e,s){let o=0;return r===10&&(o-=1e4),s&&(o+=150),r!==40&&r!==65288||(o+=50),e!==41&&e!==65289||(o+=50),o}function ny(r,e,s,o,h,g){let y=null,v=ry(e,s,h,g);for(const T of o){const E=ry(e-T.x,s,h,g)+T.badness;E<=v&&(y=T,v=E)}return{index:r,x:e,priorBreak:y,badness:v}}function sy(r){return r?sy(r.priorBreak).concat(r.index):[]}function Tf(r,e,s,o,h,g,y){if(g!=="point")return[];if(!r)return[];const v=[],T=function(D,F,O,V,H,J){let de=0;for(let ee=0;ee<D.length();ee++){const ce=D.getSection(ee);de+=iy(D.getCharCode(ee),ce,V,H,F,J)}return de/Math.max(1,Math.ceil(de/O))}(r,e,s,o,h,y),E=r.text.indexOf("")>=0;let I=0;for(let D=0;D<r.length();D++){const F=r.getSection(D),O=r.getCharCode(D);if(Qh[O]||(I+=iy(O,F,o,h,e,y)),D<r.length()-1){const V=!((P=O)<11904||!(qe["Bopomofo Extended"](P)||qe.Bopomofo(P)||qe["CJK Compatibility Forms"](P)||qe["CJK Compatibility Ideographs"](P)||qe["CJK Compatibility"](P)||qe["CJK Radicals Supplement"](P)||qe["CJK Strokes"](P)||qe["CJK Symbols and Punctuation"](P)||qe["CJK Unified Ideographs Extension A"](P)||qe["CJK Unified Ideographs"](P)||qe["Enclosed CJK Letters and Months"](P)||qe["Halfwidth and Fullwidth Forms"](P)||qe.Hiragana(P)||qe["Ideographic Description Characters"](P)||qe["Kangxi Radicals"](P)||qe["Katakana Phonetic Extensions"](P)||qe.Katakana(P)||qe["Vertical Forms"](P)||qe["Yi Radicals"](P)||qe["Yi Syllables"](P)));(hw[O]||V||F.imageName)&&v.push(ny(D+1,I,T,v,dw(O,r.getCharCode(D+1),V&&E),!1))}}var P;return sy(ny(r.length(),I,T,v,0,!0))}function Cf(r){let e=.5,s=.5;switch(r){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:e,verticalAlign:s}}function pw(r,e,s,o,h){if(!o&&!h)return;const g=r[s],y=(r[s].x+g.metrics.advance*g.scale)*o;for(let v=e;v<=s;v++)r[v].x-=y,r[v].y+=h}function fw(r,e,s){const{horizontalAlign:o,verticalAlign:h}=Cf(s),g=e[0]-r.displaySize[0]*o,y=e[1]-r.displaySize[1]*h;return{image:r,top:y,bottom:y+r.displaySize[1],left:g,right:g+r.displaySize[0]}}function ay(r,e,s,o,h,g){const y=r.image;let v;if(y.content){const H=y.content,J=y.pixelRatio||1;v=[H[0]/J,H[1]/J,y.displaySize[0]-H[2]/J,y.displaySize[1]-H[3]/J]}const T=e.left*g,E=e.right*g;let I,P,D,F;s==="width"||s==="both"?(F=h[0]+T-o[3],P=h[0]+E+o[1]):(F=h[0]+(T+E-y.displaySize[0])/2,P=F+y.displaySize[0]);const O=e.top*g,V=e.bottom*g;return s==="height"||s==="both"?(I=h[1]+O-o[0],D=h[1]+V+o[2]):(I=h[1]+(O+V-y.displaySize[1])/2,D=I+y.displaySize[1]),{image:y,top:I,right:P,bottom:D,left:F,collisionPadding:v}}const eu=255,es=128,ga=eu*es;function oy(r,e){const{expression:s}=e;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Ht(r+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:o,interpolationType:h}=s;let g=0;for(;g<o.length&&o[g]<=r;)g++;g=Math.max(0,g-1);let y=g;for(;y<o.length&&o[y]<r+1;)y++;y=Math.min(o.length-1,y);const v=o[g],T=o[y];return s.kind==="composite"?{kind:"composite",minZoom:v,maxZoom:T,interpolationType:h}:{kind:"camera",minZoom:v,maxZoom:T,minSize:s.evaluate(new Ht(v)),maxSize:s.evaluate(new Ht(T)),interpolationType:h}}}function Ef(r,e,s){let o="never";const h=r.get(e);return h?o=h:r.get(s)&&(o="always"),o}const mw=fa.VectorTileFeature.types,gw=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ed(r,e,s,o,h,g,y,v,T,E,I,P,D){const F=v?Math.min(ga,Math.round(v[0])):0,O=v?Math.min(ga,Math.round(v[1])):0;r.emplaceBack(e,s,Math.round(32*o),Math.round(32*h),g,y,(F<<1)+(T?1:0),O,16*E,16*I,256*P,256*D)}function kf(r,e,s){r.emplaceBack(e.x,e.y,s),r.emplaceBack(e.x,e.y,s),r.emplaceBack(e.x,e.y,s),r.emplaceBack(e.x,e.y,s)}function yw(r){for(const e of r.sections)if(Dh(e.text))return!0;return!1}class If{constructor(e){this.layoutVertexArray=new ie,this.indexArray=new ge,this.programConfigurations=e,this.segments=new Ie,this.dynamicLayoutVertexArray=new fe,this.opacityVertexArray=new Y,this.hasVisibleVertices=!1,this.placedSymbolArray=new t}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(e,s,o,h){this.isEmpty()||(o&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,W2.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,K2.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,gw,!0),this.opacityVertexBuffer.itemSize=1),(o||h)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ge("SymbolBuffers",If);class Pf{constructor(e,s,o){this.layoutVertexArray=new e,this.layoutAttributes=s,this.indexArray=new o,this.segments=new Ie,this.collisionVertexArray=new me}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,X2.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ge("CollisionBuffers",Pf);class gl{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(y=>y.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=af([]),this.placementViewportMatrix=af([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=oy(this.zoom,s["text-size"]),this.iconSizeData=oy(this.zoom,s["icon-size"]);const o=this.layers[0].layout,h=o.get("symbol-sort-key"),g=o.get("symbol-z-order");this.canOverlap=Ef(o,"text-overlap","text-allow-overlap")!=="never"||Ef(o,"icon-overlap","icon-allow-overlap")!=="never"||o.get("text-ignore-placement")||o.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!h.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,o.get("symbol-placement")==="point"&&(this.writingModes=o.get("text-writing-mode").map(y=>x.ah[y])),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=e.sourceID}createArrays(){this.text=new If(new Xt(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new If(new Xt(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new u,this.lineVertexArray=new m,this.symbolInstances=new c,this.textAnchorOffsets=new S}calculateGlyphDependencies(e,s,o,h,g){for(let y=0;y<e.length;y++)if(s[e.charCodeAt(y)]=!0,(o||h)&&g){const v=Yc[e.charAt(y)];v&&(s[v.charCodeAt(0)]=!0)}}populate(e,s,o){const h=this.layers[0],g=h.layout,y=g.get("text-font"),v=g.get("text-field"),T=g.get("icon-image"),E=(v.value.kind!=="constant"||v.value.value instanceof Cr&&!v.value.value.isEmpty()||v.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),I=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,P=g.get("symbol-sort-key");if(this.features=[],!E&&!I)return;const D=s.iconDependencies,F=s.glyphDependencies,O=s.availableImages,V=new Ht(this.zoom);for(const{feature:H,id:J,index:de,sourceLayerIndex:ee}of e){const ce=h._featureFilter.needGeometry,we=Ts(H,ce);if(!h._featureFilter.filter(V,we,o))continue;let Se,Ue;if(ce||(we.geometry=Ss(H)),E){const Ve=h.getValueAndResolveTokens("text-field",we,o,O),Ne=Cr.factory(Ve),Le=this.hasRTLText=this.hasRTLText||yw(Ne);(!Le||_s.getRTLTextPluginStatus()==="unavailable"||Le&&_s.isParsed())&&(Se=J2(Ne,h,we))}if(I){const Ve=h.getValueAndResolveTokens("icon-image",we,o,O);Ue=Ve instanceof jr?Ve:jr.fromString(Ve)}if(!Se&&!Ue)continue;const Ye=this.sortFeaturesByKey?P.evaluate(we,{},o):void 0;if(this.features.push({id:J,text:Se,icon:Ue,index:de,sourceLayerIndex:ee,geometry:we.geometry,properties:H.properties,type:mw[H.type],sortKey:Ye}),Ue&&(D[Ue.name]=!0),Se){const Ve=y.evaluate(we,{},o).join(","),Ne=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(x.ah.vertical)>=0;for(const Le of Se.sections)if(Le.image)D[Le.image.name]=!0;else{const We=so(Se.toString()),Oe=Le.fontStack||Ve,Me=F[Oe]=F[Oe]||{};this.calculateGlyphDependencies(Le.text,Me,Ne,this.allowVerticalPlacement,We)}}}g.get("symbol-placement")==="line"&&(this.features=function(H){const J={},de={},ee=[];let ce=0;function we(Ve){ee.push(H[Ve]),ce++}function Se(Ve,Ne,Le){const We=de[Ve];return delete de[Ve],de[Ne]=We,ee[We].geometry[0].pop(),ee[We].geometry[0]=ee[We].geometry[0].concat(Le[0]),We}function Ue(Ve,Ne,Le){const We=J[Ne];return delete J[Ne],J[Ve]=We,ee[We].geometry[0].shift(),ee[We].geometry[0]=Le[0].concat(ee[We].geometry[0]),We}function Ye(Ve,Ne,Le){const We=Le?Ne[0][Ne[0].length-1]:Ne[0][0];return`${Ve}:${We.x}:${We.y}`}for(let Ve=0;Ve<H.length;Ve++){const Ne=H[Ve],Le=Ne.geometry,We=Ne.text?Ne.text.toString():null;if(!We){we(Ve);continue}const Oe=Ye(We,Le),Me=Ye(We,Le,!0);if(Oe in de&&Me in J&&de[Oe]!==J[Me]){const rt=Ue(Oe,Me,Le),Qe=Se(Oe,Me,ee[rt].geometry);delete J[Oe],delete de[Me],de[Ye(We,ee[Qe].geometry,!0)]=Qe,ee[rt].geometry=null}else Oe in de?Se(Oe,Me,Le):Me in J?Ue(Oe,Me,Le):(we(Ve),J[Oe]=ce-1,de[Me]=ce-1)}return ee.filter(Ve=>Ve.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((H,J)=>H.sortKey-J.sortKey)}update(e,s,o){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,s,this.layers,o),this.icon.programConfigurations.updatePaintArrays(e,s,this.layers,o))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,s){const o=this.lineVertexArray.length;if(e.segment!==void 0){let h=e.dist(s[e.segment+1]),g=e.dist(s[e.segment]);const y={};for(let v=e.segment+1;v<s.length;v++)y[v]={x:s[v].x,y:s[v].y,tileUnitDistanceFromAnchor:h},v<s.length-1&&(h+=s[v+1].dist(s[v]));for(let v=e.segment||0;v>=0;v--)y[v]={x:s[v].x,y:s[v].y,tileUnitDistanceFromAnchor:g},v>0&&(g+=s[v-1].dist(s[v]));for(let v=0;v<s.length;v++){const T=y[v];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:o,lineLength:this.lineVertexArray.length-o}}addSymbols(e,s,o,h,g,y,v,T,E,I,P,D){const F=e.indexArray,O=e.layoutVertexArray,V=e.segments.prepareSegment(4*s.length,O,F,this.canOverlap?y.sortKey:void 0),H=this.glyphOffsetArray.length,J=V.vertexLength,de=this.allowVerticalPlacement&&v===x.ah.vertical?Math.PI/2:0,ee=y.text&&y.text.sections;for(let ce=0;ce<s.length;ce++){const{tl:we,tr:Se,bl:Ue,br:Ye,tex:Ve,pixelOffsetTL:Ne,pixelOffsetBR:Le,minFontScaleX:We,minFontScaleY:Oe,glyphOffset:Me,isSDF:rt,sectionIndex:Qe}=s[ce],wt=V.vertexLength,Kt=Me[1];ed(O,T.x,T.y,we.x,Kt+we.y,Ve.x,Ve.y,o,rt,Ne.x,Ne.y,We,Oe),ed(O,T.x,T.y,Se.x,Kt+Se.y,Ve.x+Ve.w,Ve.y,o,rt,Le.x,Ne.y,We,Oe),ed(O,T.x,T.y,Ue.x,Kt+Ue.y,Ve.x,Ve.y+Ve.h,o,rt,Ne.x,Le.y,We,Oe),ed(O,T.x,T.y,Ye.x,Kt+Ye.y,Ve.x+Ve.w,Ve.y+Ve.h,o,rt,Le.x,Le.y,We,Oe),kf(e.dynamicLayoutVertexArray,T,de),F.emplaceBack(wt,wt+1,wt+2),F.emplaceBack(wt+1,wt+2,wt+3),V.vertexLength+=4,V.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Me[0]),ce!==s.length-1&&Qe===s[ce+1].sectionIndex||e.programConfigurations.populatePaintArrays(O.length,y,y.index,{},D,ee&&ee[Qe])}e.placedSymbolArray.emplaceBack(T.x,T.y,H,this.glyphOffsetArray.length-H,J,E,I,T.segment,o?o[0]:0,o?o[1]:0,h[0],h[1],v,0,!1,0,P)}_addCollisionDebugVertex(e,s,o,h,g,y){return s.emplaceBack(0,0),e.emplaceBack(o.x,o.y,h,g,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(e,s,o,h,g,y,v){const T=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),E=T.vertexLength,I=g.layoutVertexArray,P=g.collisionVertexArray,D=v.anchorX,F=v.anchorY;this._addCollisionDebugVertex(I,P,y,D,F,new K(e,s)),this._addCollisionDebugVertex(I,P,y,D,F,new K(o,s)),this._addCollisionDebugVertex(I,P,y,D,F,new K(o,h)),this._addCollisionDebugVertex(I,P,y,D,F,new K(e,h)),T.vertexLength+=4;const O=g.indexArray;O.emplaceBack(E,E+1),O.emplaceBack(E+1,E+2),O.emplaceBack(E+2,E+3),O.emplaceBack(E+3,E),T.primitiveLength+=4}addDebugCollisionBoxes(e,s,o,h){for(let g=e;g<s;g++){const y=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,h?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,o)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Pf(ue,Z0.members,ye),this.iconCollisionBox=new Pf(ue,Z0.members,ye);for(let e=0;e<this.symbolInstances.length;e++){const s=this.symbolInstances.get(e);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(e,s,o,h,g,y,v,T,E){const I={};for(let P=s;P<o;P++){const D=e.get(P);I.textBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,anchorPointX:D.anchorPointX,anchorPointY:D.anchorPointY},I.textFeatureIndex=D.featureIndex;break}for(let P=h;P<g;P++){const D=e.get(P);I.verticalTextBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,anchorPointX:D.anchorPointX,anchorPointY:D.anchorPointY},I.verticalTextFeatureIndex=D.featureIndex;break}for(let P=y;P<v;P++){const D=e.get(P);I.iconBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,anchorPointX:D.anchorPointX,anchorPointY:D.anchorPointY},I.iconFeatureIndex=D.featureIndex;break}for(let P=T;P<E;P++){const D=e.get(P);I.verticalIconBox={x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2,anchorPointX:D.anchorPointX,anchorPointY:D.anchorPointY},I.verticalIconFeatureIndex=D.featureIndex;break}return I}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const o=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,o.textBoxStartIndex,o.textBoxEndIndex,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o.iconBoxStartIndex,o.iconBoxEndIndex,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,s){const o=e.placedSymbolArray.get(s),h=o.vertexStartIndex+4*o.numGlyphs;for(let g=o.vertexStartIndex;g<h;g+=4)e.indexArray.emplaceBack(g,g+1,g+2),e.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(e),o=Math.cos(e),h=[],g=[],y=[];for(let v=0;v<this.symbolInstances.length;++v){y.push(v);const T=this.symbolInstances.get(v);h.push(0|Math.round(s*T.anchorX+o*T.anchorY)),g.push(T.featureIndex)}return y.sort((v,T)=>h[v]-h[T]||g[T]-g[v]),y}addToSortKeyRanges(e,s){const o=this.sortKeyRanges[this.sortKeyRanges.length-1];o&&o.sortKey===s?o.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const o=this.symbolInstances.get(s);this.featureSortOrder.push(o.featureIndex),[o.rightJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.leftJustifiedTextSymbolIndex].forEach((h,g,y)=>{h>=0&&y.indexOf(h)===g&&this.addIndicesForPlacedSymbol(this.text,h)}),o.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,o.verticalPlacedTextSymbolIndex),o.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.placedIconSymbolIndex),o.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,o.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let ly,cy;Ge("SymbolBucket",gl,{omit:["layers","collisionBoxArray","features","compareText"]}),gl.MAX_GLYPHS=65535,gl.addDynamicAttributes=kf;var zf={get paint(){return cy=cy||new ur({"icon-opacity":new nt(_e.paint_symbol["icon-opacity"]),"icon-color":new nt(_e.paint_symbol["icon-color"]),"icon-halo-color":new nt(_e.paint_symbol["icon-halo-color"]),"icon-halo-width":new nt(_e.paint_symbol["icon-halo-width"]),"icon-halo-blur":new nt(_e.paint_symbol["icon-halo-blur"]),"icon-translate":new et(_e.paint_symbol["icon-translate"]),"icon-translate-anchor":new et(_e.paint_symbol["icon-translate-anchor"]),"text-opacity":new nt(_e.paint_symbol["text-opacity"]),"text-color":new nt(_e.paint_symbol["text-color"],{runtimeType:Oi,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new nt(_e.paint_symbol["text-halo-color"]),"text-halo-width":new nt(_e.paint_symbol["text-halo-width"]),"text-halo-blur":new nt(_e.paint_symbol["text-halo-blur"]),"text-translate":new et(_e.paint_symbol["text-translate"]),"text-translate-anchor":new et(_e.paint_symbol["text-translate-anchor"])})},get layout(){return ly=ly||new ur({"symbol-placement":new et(_e.layout_symbol["symbol-placement"]),"symbol-spacing":new et(_e.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new et(_e.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new nt(_e.layout_symbol["symbol-sort-key"]),"symbol-z-order":new et(_e.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new et(_e.layout_symbol["icon-allow-overlap"]),"icon-overlap":new et(_e.layout_symbol["icon-overlap"]),"icon-ignore-placement":new et(_e.layout_symbol["icon-ignore-placement"]),"icon-optional":new et(_e.layout_symbol["icon-optional"]),"icon-rotation-alignment":new et(_e.layout_symbol["icon-rotation-alignment"]),"icon-size":new nt(_e.layout_symbol["icon-size"]),"icon-text-fit":new et(_e.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new et(_e.layout_symbol["icon-text-fit-padding"]),"icon-image":new nt(_e.layout_symbol["icon-image"]),"icon-rotate":new nt(_e.layout_symbol["icon-rotate"]),"icon-padding":new nt(_e.layout_symbol["icon-padding"]),"icon-keep-upright":new et(_e.layout_symbol["icon-keep-upright"]),"icon-offset":new nt(_e.layout_symbol["icon-offset"]),"icon-anchor":new nt(_e.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new et(_e.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new et(_e.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new et(_e.layout_symbol["text-rotation-alignment"]),"text-field":new nt(_e.layout_symbol["text-field"]),"text-font":new nt(_e.layout_symbol["text-font"]),"text-size":new nt(_e.layout_symbol["text-size"]),"text-max-width":new nt(_e.layout_symbol["text-max-width"]),"text-line-height":new et(_e.layout_symbol["text-line-height"]),"text-letter-spacing":new nt(_e.layout_symbol["text-letter-spacing"]),"text-justify":new nt(_e.layout_symbol["text-justify"]),"text-radial-offset":new nt(_e.layout_symbol["text-radial-offset"]),"text-variable-anchor":new et(_e.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new nt(_e.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new nt(_e.layout_symbol["text-anchor"]),"text-max-angle":new et(_e.layout_symbol["text-max-angle"]),"text-writing-mode":new et(_e.layout_symbol["text-writing-mode"]),"text-rotate":new nt(_e.layout_symbol["text-rotate"]),"text-padding":new et(_e.layout_symbol["text-padding"]),"text-keep-upright":new et(_e.layout_symbol["text-keep-upright"]),"text-transform":new nt(_e.layout_symbol["text-transform"]),"text-offset":new nt(_e.layout_symbol["text-offset"]),"text-allow-overlap":new et(_e.layout_symbol["text-allow-overlap"]),"text-overlap":new et(_e.layout_symbol["text-overlap"]),"text-ignore-placement":new et(_e.layout_symbol["text-ignore-placement"]),"text-optional":new et(_e.layout_symbol["text-optional"])})}};class uy{constructor(e){if(e.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=e.property.overrides?e.property.overrides.runtimeType:us,this.defaultValue=e}evaluate(e){if(e.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(e.formattedSection))return s.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ge("FormatSectionOverride",uy,{omit:["defaultValue"]});class td extends Qr{constructor(e){super(e,zf)}recalculate(e,s){if(super.recalculate(e,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const o=this.layout.get("text-writing-mode");if(o){const h=[];for(const g of o)h.indexOf(g)<0&&h.push(g);this.layout._values["text-writing-mode"]=h}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,s,o,h){const g=this.layout.get(e).evaluate(s,{},o,h),y=this._unevaluatedLayout._values[e];return y.isDataDriven()||$t(y.value)||!g?g:function(v,T){return T.replace(/{([^{}]+)}/g,(E,I)=>v&&I in v?String(v[I]):"")}(s.properties,g)}createBucket(e){return new gl(e)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const e of zf.paint.overridableProperties){if(!td.hasPaintOverride(this.layout,e))continue;const s=this.paint.get(e),o=new uy(s),h=new to(o,s.property.specification);let g=null;g=s.value.kind==="constant"||s.value.kind==="source"?new ia("source",h):new Ho("composite",h,s.value.zoomStops),this.paint._values[e]=new Jr(s.property,g,s.parameters)}}_handleOverridablePaintPropertyUpdate(e,s,o){return!(!this.layout||s.isDataDriven()||o.isDataDriven())&&td.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,s){const o=e.get("text-field"),h=zf.paint.properties[s];let g=!1;const y=v=>{for(const T of v)if(h.overrides&&h.overrides.hasOverride(T))return void(g=!0)};if(o.value.kind==="constant"&&o.value.value instanceof Cr)y(o.value.value.sections);else if(o.value.kind==="source"){const v=E=>{g||(E instanceof hs&&_i(E.value)===zn?y(E.value.sections):E instanceof Go?y(E.sections):E.eachChild(v))},T=o.value;T._styleExpression&&v(T._styleExpression.expression)}return g}}let hy;var _w={get paint(){return hy=hy||new ur({"background-color":new et(_e.paint_background["background-color"]),"background-pattern":new Ic(_e.paint_background["background-pattern"]),"background-opacity":new et(_e.paint_background["background-opacity"])})}};class vw extends Qr{constructor(e){super(e,_w)}}let dy;var xw={get paint(){return dy=dy||new ur({"raster-opacity":new et(_e.paint_raster["raster-opacity"]),"raster-hue-rotate":new et(_e.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new et(_e.paint_raster["raster-brightness-min"]),"raster-brightness-max":new et(_e.paint_raster["raster-brightness-max"]),"raster-saturation":new et(_e.paint_raster["raster-saturation"]),"raster-contrast":new et(_e.paint_raster["raster-contrast"]),"raster-resampling":new et(_e.paint_raster["raster-resampling"]),"raster-fade-duration":new et(_e.paint_raster["raster-fade-duration"])})}};class ww extends Qr{constructor(e){super(e,xw)}}class bw extends Qr{constructor(e){super(e,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=e}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Sw{constructor(e){this._methodToThrottle=e,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Af=63710088e-1;class ya{constructor(e,s){if(isNaN(e)||isNaN(s))throw new Error(`Invalid LngLat object: (${e}, ${s})`);if(this.lng=+e,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ya(Xe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const s=Math.PI/180,o=this.lat*s,h=e.lat*s,g=Math.sin(o)*Math.sin(h)+Math.cos(o)*Math.cos(h)*Math.cos((e.lng-this.lng)*s);return Af*Math.acos(Math.min(g,1))}static convert(e){if(e instanceof ya)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new ya(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new ya(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const py=2*Math.PI*Af;function fy(r){return py*Math.cos(r*Math.PI/180)}function my(r){return(180+r)/360}function gy(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function yy(r,e){return r/fy(e)}function Mf(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}class id{constructor(e,s,o=0){this.x=+e,this.y=+s,this.z=+o}static fromLngLat(e,s=0){const o=ya.convert(e);return new id(my(o.lng),gy(o.lat),yy(s,o.lat))}toLngLat(){return new ya(360*this.x-180,Mf(this.y))}toAltitude(){return this.z*fy(Mf(this.y))}meterInMercatorCoordinateUnits(){return 1/py*(e=Mf(this.y),1/Math.cos(e*Math.PI/180));var e}}function _y(r,e,s){var o=2*Math.PI*6378137/256/Math.pow(2,s);return[r*o-2*Math.PI*6378137/2,e*o-2*Math.PI*6378137/2]}class Df{constructor(e,s,o){if(e<0||e>25||o<0||o>=Math.pow(2,e)||s<0||s>=Math.pow(2,e))throw new Error(`x=${s}, y=${o}, z=${e} outside of bounds. 0<=x<${Math.pow(2,e)}, 0<=y<${Math.pow(2,e)} 0<=z<=25 `);this.z=e,this.x=s,this.y=o,this.key=tu(0,e,e,s,o)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,s,o){const h=(y=this.y,v=this.z,T=_y(256*(g=this.x),256*(y=Math.pow(2,v)-y-1),v),E=_y(256*(g+1),256*(y+1),v),T[0]+","+T[1]+","+E[0]+","+E[1]);var g,y,v,T,E;const I=function(P,D,F){let O,V="";for(let H=P;H>0;H--)O=1<<H-1,V+=(D&O?1:0)+(F&O?2:0);return V}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(o==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,I).replace(/{bbox-epsg-3857}/g,h)}isChildOf(e){const s=this.z-e.z;return s>0&&e.x===this.x>>s&&e.y===this.y>>s}getTilePoint(e){const s=Math.pow(2,this.z);return new K((e.x*s-this.x)*bt,(e.y*s-this.y)*bt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class vy{constructor(e,s){this.wrap=e,this.canonical=s,this.key=tu(e,s.z,s.z,s.x,s.y)}}class nn{constructor(e,s,o,h,g){if(e<o)throw new Error(`overscaledZ should be >= z; overscaledZ = ${e}; z = ${o}`);this.overscaledZ=e,this.wrap=s,this.canonical=new Df(o,+h,+g),this.key=tu(s,e,o,h,g)}clone(){return new nn(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-e;return e>this.canonical.z?new nn(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new nn(e,this.wrap,e,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(e,s){if(e>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${e}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-e;return e>this.canonical.z?tu(this.wrap*+s,e,this.canonical.z,this.canonical.x,this.canonical.y):tu(this.wrap*+s,e,e,this.canonical.x>>o,this.canonical.y>>o)}isChildOf(e){if(e.wrap!==this.wrap)return!1;const s=this.canonical.z-e.canonical.z;return e.overscaledZ===0||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>s&&e.canonical.y===this.canonical.y>>s}children(e){if(this.overscaledZ>=e)return[new nn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,o=2*this.canonical.x,h=2*this.canonical.y;return[new nn(s,this.wrap,s,o,h),new nn(s,this.wrap,s,o+1,h),new nn(s,this.wrap,s,o,h+1),new nn(s,this.wrap,s,o+1,h+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new nn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new nn(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new vy(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new id(e.x-this.wrap,e.y))}}function tu(r,e,s,o,h){(r*=2)<0&&(r=-1*r-1);const g=1<<s;return(g*g*r+g*h+o).toString(36)+s.toString(36)+e.toString(36)}Ge("CanonicalTileID",Df),Ge("OverscaledTileID",nn,{omit:["posMatrix"]});class xy{constructor(e,s,o,h=1,g=1,y=1,v=0){if(this.uid=e,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(o&&!["mapbox","terrarium","custom"].includes(o))return void si(`"${o}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const T=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),o){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=h,this.greenFactor=g,this.blueFactor=y,this.baseShift=v;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let E=0;E<T;E++)this.data[this._idx(-1,E)]=this.data[this._idx(0,E)],this.data[this._idx(T,E)]=this.data[this._idx(T-1,E)],this.data[this._idx(E,-1)]=this.data[this._idx(E,0)],this.data[this._idx(E,T)]=this.data[this._idx(E,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let E=0;E<T;E++)for(let I=0;I<T;I++){const P=this.get(E,I);P>this.max&&(this.max=P),P<this.min&&(this.min=P)}}get(e,s){const o=new Uint8Array(this.data.buffer),h=4*this._idx(e,s);return this.unpack(o[h],o[h+1],o[h+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(e,s){if(e<-1||e>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(e+1)}unpack(e,s,o){return e*this.redFactor+s*this.greenFactor+o*this.blueFactor-this.baseShift}getPixels(){return new rn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,s,o){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let h=s*this.dim,g=s*this.dim+this.dim,y=o*this.dim,v=o*this.dim+this.dim;switch(s){case-1:h=g-1;break;case 1:g=h+1}switch(o){case-1:y=v-1;break;case 1:v=y+1}const T=-s*this.dim,E=-o*this.dim;for(let I=y;I<v;I++)for(let P=h;P<g;P++)this.data[this._idx(P,I)]=e.data[this._idx(P+T,I+E)]}}Ge("DEMData",xy);class wy{constructor(e){this._stringToNumber={},this._numberToString=[];for(let s=0;s<e.length;s++){const o=e[s];this._stringToNumber[o]=s,this._numberToString[s]=o}}encode(e){return this._stringToNumber[e]}decode(e){if(e>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${e} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[e]}}class by{constructor(e,s,o,h,g){this.type="Feature",this._vectorTileFeature=e,e._z=s,e._x=o,e._y=h,this.properties=e.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(e[s]=this[s]);return e}}class Sy{constructor(e,s){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new An(bt,16,0),this.grid3D=new An(bt,16,0),this.featureIndexArray=new k,this.promoteId=s}insert(e,s,o,h,g,y){const v=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(o,h,g);const T=y?this.grid3D:this.grid;for(let E=0;E<s.length;E++){const I=s[E],P=[1/0,1/0,-1/0,-1/0];for(let D=0;D<I.length;D++){const F=I[D];P[0]=Math.min(P[0],F.x),P[1]=Math.min(P[1],F.y),P[2]=Math.max(P[2],F.x),P[3]=Math.max(P[3],F.y)}P[0]<bt&&P[1]<bt&&P[2]>=0&&P[3]>=0&&T.insert(v,P[0],P[1],P[2],P[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new fa.VectorTile(new wf(this.rawTileData)).layers,this.sourceLayerCoder=new wy(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,s,o,h){this.loadVTLayers();const g=e.params||{},y=bt/e.tileSize/e.scale,v=Xo(g.filter),T=e.queryGeometry,E=e.queryPadding*y,I=Cy(T),P=this.grid.query(I.minX-E,I.minY-E,I.maxX+E,I.maxY+E),D=Cy(e.cameraQueryGeometry),F=this.grid3D.query(D.minX-E,D.minY-E,D.maxX+E,D.maxY+E,(H,J,de,ee)=>function(ce,we,Se,Ue,Ye){for(const Ne of ce)if(we<=Ne.x&&Se<=Ne.y&&Ue>=Ne.x&&Ye>=Ne.y)return!0;const Ve=[new K(we,Se),new K(we,Ye),new K(Ue,Ye),new K(Ue,Se)];if(ce.length>2){for(const Ne of Ve)if(cl(ce,Ne))return!0}for(let Ne=0;Ne<ce.length-1;Ne++)if(t2(ce[Ne],ce[Ne+1],Ve))return!0;return!1}(e.cameraQueryGeometry,H-E,J-E,de+E,ee+E));for(const H of F)P.push(H);P.sort(Tw);const O={};let V;for(let H=0;H<P.length;H++){const J=P[H];if(J===V)continue;V=J;const de=this.featureIndexArray.get(J);let ee=null;this.loadMatchingFeature(O,de.bucketIndex,de.sourceLayerIndex,de.featureIndex,v,g.layers,g.availableImages,s,o,h,(ce,we,Se)=>(ee||(ee=Ss(ce)),we.queryIntersectsFeature(T,ce,Se,ee,this.z,e.transform,y,e.pixelPosMatrix)))}return O}loadMatchingFeature(e,s,o,h,g,y,v,T,E,I,P){const D=this.bucketLayerIDs[s];if(y&&!function(H,J){for(let de=0;de<H.length;de++)if(J.indexOf(H[de])>=0)return!0;return!1}(y,D))return;const F=this.sourceLayerCoder.decode(o),O=this.vtLayers[F].feature(h);if(g.needGeometry){const H=Ts(O,!0);if(!g.filter(new Ht(this.tileID.overscaledZ),H,this.tileID.canonical))return}else if(!g.filter(new Ht(this.tileID.overscaledZ),O))return;const V=this.getId(O,F);for(let H=0;H<D.length;H++){const J=D[H];if(y&&y.indexOf(J)<0)continue;const de=T[J];if(!de)continue;let ee={};V&&I&&(ee=I.getState(de.sourceLayer||"_geojsonTileLayer",V));const ce=Ke({},E[J]);ce.paint=Ty(ce.paint,de.paint,O,ee,v),ce.layout=Ty(ce.layout,de.layout,O,ee,v);const we=!P||P(O,de,ee);if(!we)continue;const Se=new by(O,this.z,this.x,this.y,V);Se.layer=ce;let Ue=e[J];Ue===void 0&&(Ue=e[J]=[]),Ue.push({featureIndex:h,feature:Se,intersectionZ:we})}}lookupSymbolFeatures(e,s,o,h,g,y,v,T){const E={};this.loadVTLayers();const I=Xo(g);for(const P of e)this.loadMatchingFeature(E,o,h,P,I,y,v,T,s);return E}hasLayer(e){for(const s of this.bucketLayerIDs)for(const o of s)if(e===o)return!0;return!1}getId(e,s){let o=e.id;return this.promoteId&&(o=e.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof o=="boolean"&&(o=Number(o))),o}}function Ty(r,e,s,o,h){return Dt(r,(g,y)=>{const v=e instanceof ao?e.get(y):null;return v&&v.evaluate?v.evaluate(s,o,h):v})}function Cy(r){let e=1/0,s=1/0,o=-1/0,h=-1/0;for(const g of r)e=Math.min(e,g.x),s=Math.min(s,g.y),o=Math.max(o,g.x),h=Math.max(h,g.y);return{minX:e,minY:s,maxX:o,maxY:h}}function Tw(r,e){return e-r}function Ey(r,e,s,o,h){const g=[];for(let y=0;y<r.length;y++){const v=r[y];let T;for(let E=0;E<v.length-1;E++){let I=v[E],P=v[E+1];I.x<e&&P.x<e||(I.x<e?I=new K(e,I.y+(e-I.x)/(P.x-I.x)*(P.y-I.y))._round():P.x<e&&(P=new K(e,I.y+(e-I.x)/(P.x-I.x)*(P.y-I.y))._round()),I.y<s&&P.y<s||(I.y<s?I=new K(I.x+(s-I.y)/(P.y-I.y)*(P.x-I.x),s)._round():P.y<s&&(P=new K(I.x+(s-I.y)/(P.y-I.y)*(P.x-I.x),s)._round()),I.x>=o&&P.x>=o||(I.x>=o?I=new K(o,I.y+(o-I.x)/(P.x-I.x)*(P.y-I.y))._round():P.x>=o&&(P=new K(o,I.y+(o-I.x)/(P.x-I.x)*(P.y-I.y))._round()),I.y>=h&&P.y>=h||(I.y>=h?I=new K(I.x+(h-I.y)/(P.y-I.y)*(P.x-I.x),h)._round():P.y>=h&&(P=new K(I.x+(h-I.y)/(P.y-I.y)*(P.x-I.x),h)._round()),T&&I.equals(T[T.length-1])||(T=[I],g.push(T)),T.push(P)))))}}return g}Ge("FeatureIndex",Sy,{omit:["rawTileData","sourceLayerCoder"]});class _a extends K{constructor(e,s,o,h){super(e,s),this.angle=o,h!==void 0&&(this.segment=h)}clone(){return new _a(this.x,this.y,this.angle,this.segment)}}function ky(r,e,s,o,h){if(e.segment===void 0||s===0)return!0;let g=e,y=e.segment+1,v=0;for(;v>-s/2;){if(y--,y<0)return!1;v-=r[y].dist(g),g=r[y]}v+=r[y].dist(r[y+1]),y++;const T=[];let E=0;for(;v<s/2;){const I=r[y],P=r[y+1];if(!P)return!1;let D=r[y-1].angleTo(I)-I.angleTo(P);for(D=Math.abs((D+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:v,angleDelta:D}),E+=D;v-T[0].distance>o;)E-=T.shift().angleDelta;if(E>h)return!1;y++,v+=I.dist(P)}return!0}function Iy(r){let e=0;for(let s=0;s<r.length-1;s++)e+=r[s].dist(r[s+1]);return e}function Py(r,e,s){return r?.6*e*s:0}function zy(r,e){return Math.max(r?r.right-r.left:0,e?e.right-e.left:0)}function Cw(r,e,s,o,h,g){const y=Py(s,h,g),v=zy(s,o)*g;let T=0;const E=Iy(r)/2;for(let I=0;I<r.length-1;I++){const P=r[I],D=r[I+1],F=P.dist(D);if(T+F>E){const O=(E-T)/F,V=kr.number(P.x,D.x,O),H=kr.number(P.y,D.y,O),J=new _a(V,H,D.angleTo(P),I);return J._round(),!y||ky(r,J,v,y,e)?J:void 0}T+=F}}function Ew(r,e,s,o,h,g,y,v,T){const E=Py(o,g,y),I=zy(o,h),P=I*y,D=r[0].x===0||r[0].x===T||r[0].y===0||r[0].y===T;return e-P<e/4&&(e=P+e/4),Ay(r,D?e/2*v%e:(I/2+2*g)*y*v%e,e,E,s,P,D,!1,T)}function Ay(r,e,s,o,h,g,y,v,T){const E=g/2,I=Iy(r);let P=0,D=e-s,F=[];for(let O=0;O<r.length-1;O++){const V=r[O],H=r[O+1],J=V.dist(H),de=H.angleTo(V);for(;D+s<P+J;){D+=s;const ee=(D-P)/J,ce=kr.number(V.x,H.x,ee),we=kr.number(V.y,H.y,ee);if(ce>=0&&ce<T&&we>=0&&we<T&&D-E>=0&&D+E<=I){const Se=new _a(ce,we,de,O);Se._round(),o&&!ky(r,Se,g,o,h)||F.push(Se)}}P+=J}return v||F.length||y||(F=Ay(r,P/2,s,o,h,g,y,!0,T)),F}Ge("Anchor",_a);const yl=zr;function My(r,e,s,o){const h=[],g=r.image,y=g.pixelRatio,v=g.paddedRect.w-2*yl,T=g.paddedRect.h-2*yl,E=r.right-r.left,I=r.bottom-r.top,P=g.stretchX||[[0,v]],D=g.stretchY||[[0,T]],F=(Le,We)=>Le+We[1]-We[0],O=P.reduce(F,0),V=D.reduce(F,0),H=v-O,J=T-V;let de=0,ee=O,ce=0,we=V,Se=0,Ue=H,Ye=0,Ve=J;if(g.content&&o){const Le=g.content;de=rd(P,0,Le[0]),ce=rd(D,0,Le[1]),ee=rd(P,Le[0],Le[2]),we=rd(D,Le[1],Le[3]),Se=Le[0]-de,Ye=Le[1]-ce,Ue=Le[2]-Le[0]-ee,Ve=Le[3]-Le[1]-we}const Ne=(Le,We,Oe,Me)=>{const rt=nd(Le.stretch-de,ee,E,r.left),Qe=sd(Le.fixed-Se,Ue,Le.stretch,O),wt=nd(We.stretch-ce,we,I,r.top),Kt=sd(We.fixed-Ye,Ve,We.stretch,V),Yt=nd(Oe.stretch-de,ee,E,r.left),Ci=sd(Oe.fixed-Se,Ue,Oe.stretch,O),$r=nd(Me.stretch-ce,we,I,r.top),pr=sd(Me.fixed-Ye,Ve,Me.stretch,V),xi=new K(rt,wt),Ni=new K(Yt,wt),Hi=new K(Yt,$r),fr=new K(rt,$r),mr=new K(Qe/y,Kt/y),Ei=new K(Ci/y,pr/y),ki=e*Math.PI/180;if(ki){const er=Math.sin(ki),Ar=Math.cos(ki),Mr=[Ar,-er,er,Ar];xi._matMult(Mr),Ni._matMult(Mr),fr._matMult(Mr),Hi._matMult(Mr)}const Qi=Le.stretch+Le.fixed,gr=We.stretch+We.fixed;return{tl:xi,tr:Ni,bl:fr,br:Hi,tex:{x:g.paddedRect.x+yl+Qi,y:g.paddedRect.y+yl+gr,w:Oe.stretch+Oe.fixed-Qi,h:Me.stretch+Me.fixed-gr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:mr,pixelOffsetBR:Ei,minFontScaleX:Ue/y/E,minFontScaleY:Ve/y/I,isSDF:s}};if(o&&(g.stretchX||g.stretchY)){const Le=Dy(P,H,O),We=Dy(D,J,V);for(let Oe=0;Oe<Le.length-1;Oe++){const Me=Le[Oe],rt=Le[Oe+1];for(let Qe=0;Qe<We.length-1;Qe++)h.push(Ne(Me,We[Qe],rt,We[Qe+1]))}}else h.push(Ne({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:v+1},{fixed:0,stretch:T+1}));return h}function rd(r,e,s){let o=0;for(const h of r)o+=Math.max(e,Math.min(s,h[1]))-Math.max(e,Math.min(s,h[0]));return o}function Dy(r,e,s){const o=[{fixed:-yl,stretch:0}];for(const[h,g]of r){const y=o[o.length-1];o.push({fixed:h-y.stretch,stretch:y.stretch}),o.push({fixed:h-y.stretch,stretch:y.stretch+(g-h)})}return o.push({fixed:e+yl,stretch:s}),o}function nd(r,e,s,o){return r/e*s+o}function sd(r,e,s,o){return r-e*s/o}class ad{constructor(e,s,o,h,g,y,v,T,E,I){if(this.boxStartIndex=e.length,E){let P=y.top,D=y.bottom;const F=y.collisionPadding;F&&(P-=F[1],D+=F[3]);let O=D-P;O>0&&(O=Math.max(10,O),this.circleDiameter=O)}else{let P=y.top*v-T[0],D=y.bottom*v+T[2],F=y.left*v-T[3],O=y.right*v+T[1];const V=y.collisionPadding;if(V&&(F-=V[0]*v,P-=V[1]*v,O+=V[2]*v,D+=V[3]*v),I){const H=new K(F,P),J=new K(O,P),de=new K(F,D),ee=new K(O,D),ce=I*Math.PI/180;H._rotate(ce),J._rotate(ce),de._rotate(ce),ee._rotate(ce),F=Math.min(H.x,J.x,de.x,ee.x),O=Math.max(H.x,J.x,de.x,ee.x),P=Math.min(H.y,J.y,de.y,ee.y),D=Math.max(H.y,J.y,de.y,ee.y)}e.emplaceBack(s.x,s.y,F,P,O,D,o,h,g)}this.boxEndIndex=e.length}}class kw{constructor(e=[],s=Iw){if(this.data=e,this.length=this.data.length,this.compare=s,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const e=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:s,compare:o}=this,h=s[e];for(;e>0;){const g=e-1>>1,y=s[g];if(o(h,y)>=0)break;s[e]=y,e=g}s[e]=h}_down(e){const{data:s,compare:o}=this,h=this.length>>1,g=s[e];for(;e<h;){let y=1+(e<<1),v=s[y];const T=y+1;if(T<this.length&&o(s[T],v)<0&&(y=T,v=s[T]),o(v,g)>=0)break;s[e]=v,e=y}s[e]=g}}function Iw(r,e){return r<e?-1:r>e?1:0}function Pw(r,e=1,s=!1){let o=1/0,h=1/0,g=-1/0,y=-1/0;const v=r[0];for(let F=0;F<v.length;F++){const O=v[F];(!F||O.x<o)&&(o=O.x),(!F||O.y<h)&&(h=O.y),(!F||O.x>g)&&(g=O.x),(!F||O.y>y)&&(y=O.y)}const T=Math.min(g-o,y-h);let E=T/2;const I=new kw([],zw);if(T===0)return new K(o,h);for(let F=o;F<g;F+=T)for(let O=h;O<y;O+=T)I.push(new _l(F+E,O+E,E,r));let P=function(F){let O=0,V=0,H=0;const J=F[0];for(let de=0,ee=J.length,ce=ee-1;de<ee;ce=de++){const we=J[de],Se=J[ce],Ue=we.x*Se.y-Se.x*we.y;V+=(we.x+Se.x)*Ue,H+=(we.y+Se.y)*Ue,O+=3*Ue}return new _l(V/O,H/O,0,F)}(r),D=I.length;for(;I.length;){const F=I.pop();(F.d>P.d||!P.d)&&(P=F,s&&console.log("found best %d after %d probes",Math.round(1e4*F.d)/1e4,D)),F.max-P.d<=e||(E=F.h/2,I.push(new _l(F.p.x-E,F.p.y-E,E,r)),I.push(new _l(F.p.x+E,F.p.y-E,E,r)),I.push(new _l(F.p.x-E,F.p.y+E,E,r)),I.push(new _l(F.p.x+E,F.p.y+E,E,r)),D+=4)}return s&&(console.log(`num probes: ${D}`),console.log(`best distance: ${P.d}`)),P.p}function zw(r,e){return e.max-r.max}function _l(r,e,s,o){this.p=new K(r,e),this.h=s,this.d=function(h,g){let y=!1,v=1/0;for(let T=0;T<g.length;T++){const E=g[T];for(let I=0,P=E.length,D=P-1;I<P;D=I++){const F=E[I],O=E[D];F.y>h.y!=O.y>h.y&&h.x<(O.x-F.x)*(h.y-F.y)/(O.y-F.y)+F.x&&(y=!y),v=Math.min(v,g0(h,F,O))}}return(y?1:-1)*Math.sqrt(v)}(this.p,o),this.max=this.d+this.h*Math.SQRT2}var Gi;x.ap=void 0,(Gi=x.ap||(x.ap={}))[Gi.center=1]="center",Gi[Gi.left=2]="left",Gi[Gi.right=3]="right",Gi[Gi.top=4]="top",Gi[Gi.bottom=5]="bottom",Gi[Gi["top-left"]=6]="top-left",Gi[Gi["top-right"]=7]="top-right",Gi[Gi["bottom-left"]=8]="bottom-left",Gi[Gi["bottom-right"]=9]="bottom-right";const va=7,Lf=Number.POSITIVE_INFINITY;function Ly(r,e){return e[1]!==Lf?function(s,o,h){let g=0,y=0;switch(o=Math.abs(o),h=Math.abs(h),s){case"top-right":case"top-left":case"top":y=h-va;break;case"bottom-right":case"bottom-left":case"bottom":y=-h+va}switch(s){case"top-right":case"bottom-right":case"right":g=-o;break;case"top-left":case"bottom-left":case"left":g=o}return[g,y]}(r,e[0],e[1]):function(s,o){let h=0,g=0;o<0&&(o=0);const y=o/Math.SQRT2;switch(s){case"top-right":case"top-left":g=y-va;break;case"bottom-right":case"bottom-left":g=-y+va;break;case"bottom":g=-o+va;break;case"top":g=o-va}switch(s){case"top-right":case"bottom-right":h=-y;break;case"top-left":case"bottom-left":h=y;break;case"left":h=o;break;case"right":h=-o}return[h,g]}(r,e[0])}function Ry(r,e,s){var o;const h=r.layout,g=(o=h.get("text-variable-anchor-offset"))===null||o===void 0?void 0:o.evaluate(e,{},s);if(g){const v=g.values,T=[];for(let E=0;E<v.length;E+=2){const I=T[E]=v[E],P=v[E+1].map(D=>D*Ti);I.startsWith("top")?P[1]-=va:I.startsWith("bottom")&&(P[1]+=va),T[E+1]=P}return new qi(T)}const y=h.get("text-variable-anchor");if(y){let v;v=r._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[h.get("text-radial-offset").evaluate(e,{},s)*Ti,Lf]:h.get("text-offset").evaluate(e,{},s).map(E=>E*Ti);const T=[];for(const E of y)T.push(E,Ly(E,v));return new qi(T)}return null}function Rf(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Aw(r,e,s,o,h,g,y,v,T,E,I){let P=g.textMaxSize.evaluate(e,{});P===void 0&&(P=y);const D=r.layers[0].layout,F=D.get("icon-offset").evaluate(e,{},I),O=By(s.horizontal),V=y/24,H=r.tilePixelRatio*V,J=r.tilePixelRatio*P/24,de=r.tilePixelRatio*v,ee=r.tilePixelRatio*D.get("symbol-spacing"),ce=D.get("text-padding")*r.tilePixelRatio,we=function(Me,rt,Qe,wt=1){const Kt=Me.get("icon-padding").evaluate(rt,{},Qe),Yt=Kt&&Kt.values;return[Yt[0]*wt,Yt[1]*wt,Yt[2]*wt,Yt[3]*wt]}(D,e,I,r.tilePixelRatio),Se=D.get("text-max-angle")/180*Math.PI,Ue=D.get("text-rotation-alignment")!=="viewport"&&D.get("symbol-placement")!=="point",Ye=D.get("icon-rotation-alignment")==="map"&&D.get("symbol-placement")!=="point",Ve=D.get("symbol-placement"),Ne=ee/2,Le=D.get("icon-text-fit");let We;o&&Le!=="none"&&(r.allowVerticalPlacement&&s.vertical&&(We=ay(o,s.vertical,Le,D.get("icon-text-fit-padding"),F,V)),O&&(o=ay(o,O,Le,D.get("icon-text-fit-padding"),F,V)));const Oe=(Me,rt)=>{rt.x<0||rt.x>=bt||rt.y<0||rt.y>=bt||function(Qe,wt,Kt,Yt,Ci,$r,pr,xi,Ni,Hi,fr,mr,Ei,ki,Qi,gr,er,Ar,Mr,Ii,Tt,tr,Wi,Pi,wn){const Dn=Qe.addToLineVertexArray(wt,Kt);let Ln,ks,bn,sn,Dr=0,Is=0,nu=0,Vy=0,$f=-1,qf=-1;const Ps={};let Uy=vt("");if(Qe.allowVerticalPlacement&&Yt.vertical){const ir=xi.layout.get("text-rotate").evaluate(Tt,{},Pi)+90;bn=new ad(Ni,wt,Hi,fr,mr,Yt.vertical,Ei,ki,Qi,ir),pr&&(sn=new ad(Ni,wt,Hi,fr,mr,pr,er,Ar,Qi,ir))}if(Ci){const ir=xi.layout.get("icon-rotate").evaluate(Tt,{}),an=xi.layout.get("icon-text-fit")!=="none",mo=My(Ci,ir,Wi,an),Fn=pr?My(pr,ir,Wi,an):void 0;ks=new ad(Ni,wt,Hi,fr,mr,Ci,er,Ar,!1,ir),Dr=4*mo.length;const go=Qe.iconSizeData;let ts=null;go.kind==="source"?(ts=[es*xi.layout.get("icon-size").evaluate(Tt,{})],ts[0]>ga&&si(`${Qe.layerIds[0]}: Value for "icon-size" is >= ${eu}. Reduce your "icon-size".`)):go.kind==="composite"&&(ts=[es*tr.compositeIconSizes[0].evaluate(Tt,{},Pi),es*tr.compositeIconSizes[1].evaluate(Tt,{},Pi)],(ts[0]>ga||ts[1]>ga)&&si(`${Qe.layerIds[0]}: Value for "icon-size" is >= ${eu}. Reduce your "icon-size".`)),Qe.addSymbols(Qe.icon,mo,ts,Ii,Mr,Tt,x.ah.none,wt,Dn.lineStartIndex,Dn.lineLength,-1,Pi),$f=Qe.icon.placedSymbolArray.length-1,Fn&&(Is=4*Fn.length,Qe.addSymbols(Qe.icon,Fn,ts,Ii,Mr,Tt,x.ah.vertical,wt,Dn.lineStartIndex,Dn.lineLength,-1,Pi),qf=Qe.icon.placedSymbolArray.length-1)}const $y=Object.keys(Yt.horizontal);for(const ir of $y){const an=Yt.horizontal[ir];if(!Ln){Uy=vt(an.text);const Fn=xi.layout.get("text-rotate").evaluate(Tt,{},Pi);Ln=new ad(Ni,wt,Hi,fr,mr,an,Ei,ki,Qi,Fn)}const mo=an.positionedLines.length===1;if(nu+=Fy(Qe,wt,an,$r,xi,Qi,Tt,gr,Dn,Yt.vertical?x.ah.horizontal:x.ah.horizontalOnly,mo?$y:[ir],Ps,$f,tr,Pi),mo)break}Yt.vertical&&(Vy+=Fy(Qe,wt,Yt.vertical,$r,xi,Qi,Tt,gr,Dn,x.ah.vertical,["vertical"],Ps,qf,tr,Pi));const Lw=Ln?Ln.boxStartIndex:Qe.collisionBoxArray.length,Rw=Ln?Ln.boxEndIndex:Qe.collisionBoxArray.length,Fw=bn?bn.boxStartIndex:Qe.collisionBoxArray.length,Bw=bn?bn.boxEndIndex:Qe.collisionBoxArray.length,Ow=ks?ks.boxStartIndex:Qe.collisionBoxArray.length,Nw=ks?ks.boxEndIndex:Qe.collisionBoxArray.length,jw=sn?sn.boxStartIndex:Qe.collisionBoxArray.length,Vw=sn?sn.boxEndIndex:Qe.collisionBoxArray.length;let Rn=-1;const ld=(ir,an)=>ir&&ir.circleDiameter?Math.max(ir.circleDiameter,an):an;Rn=ld(Ln,Rn),Rn=ld(bn,Rn),Rn=ld(ks,Rn),Rn=ld(sn,Rn);const qy=Rn>-1?1:0;qy&&(Rn*=wn/Ti),Qe.glyphOffsetArray.length>=gl.MAX_GLYPHS&&si("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Tt.sortKey!==void 0&&Qe.addToSortKeyRanges(Qe.symbolInstances.length,Tt.sortKey);const Uw=Ry(xi,Tt,Pi),[$w,qw]=function(ir,an){const mo=ir.length,Fn=an==null?void 0:an.values;if((Fn==null?void 0:Fn.length)>0)for(let go=0;go<Fn.length;go+=2){const ts=Fn[go+1];ir.emplaceBack(x.ap[Fn[go]],ts[0],ts[1])}return[mo,ir.length]}(Qe.textAnchorOffsets,Uw);Qe.symbolInstances.emplaceBack(wt.x,wt.y,Ps.right>=0?Ps.right:-1,Ps.center>=0?Ps.center:-1,Ps.left>=0?Ps.left:-1,Ps.vertical||-1,$f,qf,Uy,Lw,Rw,Fw,Bw,Ow,Nw,jw,Vw,Hi,nu,Vy,Dr,Is,qy,0,Ei,Rn,$w,qw)}(r,rt,Me,s,o,h,We,r.layers[0],r.collisionBoxArray,e.index,e.sourceLayerIndex,r.index,H,[ce,ce,ce,ce],Ue,T,de,we,Ye,F,e,g,E,I,y)};if(Ve==="line")for(const Me of Ey(e.geometry,0,0,bt,bt)){const rt=Ew(Me,ee,Se,s.vertical||O,o,24,J,r.overscaling,bt);for(const Qe of rt)O&&Mw(r,O.text,Ne,Qe)||Oe(Me,Qe)}else if(Ve==="line-center"){for(const Me of e.geometry)if(Me.length>1){const rt=Cw(Me,Se,s.vertical||O,o,24,J);rt&&Oe(Me,rt)}}else if(e.type==="Polygon")for(const Me of pf(e.geometry,0)){const rt=Pw(Me,16);Oe(Me[0],new _a(rt.x,rt.y,0))}else if(e.type==="LineString")for(const Me of e.geometry)Oe(Me,new _a(Me[0].x,Me[0].y,0));else if(e.type==="Point")for(const Me of e.geometry)for(const rt of Me)Oe([rt],new _a(rt.x,rt.y,0))}function Fy(r,e,s,o,h,g,y,v,T,E,I,P,D,F,O){const V=function(de,ee,ce,we,Se,Ue,Ye,Ve){const Ne=we.layout.get("text-rotate").evaluate(Ue,{})*Math.PI/180,Le=[];for(const We of ee.positionedLines)for(const Oe of We.positionedGlyphs){if(!Oe.rect)continue;const Me=Oe.rect||{};let rt=Q0+1,Qe=!0,wt=1,Kt=0;const Yt=(Se||Ve)&&Oe.vertical,Ci=Oe.metrics.advance*Oe.scale/2;if(Ve&&ee.verticalizable&&(Kt=We.lineOffset/2-(Oe.imageName?-(Ti-Oe.metrics.width*Oe.scale)/2:(Oe.scale-1)*Ti)),Oe.imageName){const Ii=Ye[Oe.imageName];Qe=Ii.sdf,wt=Ii.pixelRatio,rt=zr/wt}const $r=Se?[Oe.x+Ci,Oe.y]:[0,0];let pr=Se?[0,0]:[Oe.x+Ci+ce[0],Oe.y+ce[1]-Kt],xi=[0,0];Yt&&(xi=pr,pr=[0,0]);const Ni=Oe.metrics.isDoubleResolution?2:1,Hi=(Oe.metrics.left-rt)*Oe.scale-Ci+pr[0],fr=(-Oe.metrics.top-rt)*Oe.scale+pr[1],mr=Hi+Me.w/Ni*Oe.scale/wt,Ei=fr+Me.h/Ni*Oe.scale/wt,ki=new K(Hi,fr),Qi=new K(mr,fr),gr=new K(Hi,Ei),er=new K(mr,Ei);if(Yt){const Ii=new K(-Ci,Ci-Jc),Tt=-Math.PI/2,tr=Ti/2-Ci,Wi=new K(5-Jc-tr,-(Oe.imageName?tr:0)),Pi=new K(...xi);ki._rotateAround(Tt,Ii)._add(Wi)._add(Pi),Qi._rotateAround(Tt,Ii)._add(Wi)._add(Pi),gr._rotateAround(Tt,Ii)._add(Wi)._add(Pi),er._rotateAround(Tt,Ii)._add(Wi)._add(Pi)}if(Ne){const Ii=Math.sin(Ne),Tt=Math.cos(Ne),tr=[Tt,-Ii,Ii,Tt];ki._matMult(tr),Qi._matMult(tr),gr._matMult(tr),er._matMult(tr)}const Ar=new K(0,0),Mr=new K(0,0);Le.push({tl:ki,tr:Qi,bl:gr,br:er,tex:Me,writingMode:ee.writingMode,glyphOffset:$r,sectionIndex:Oe.sectionIndex,isSDF:Qe,pixelOffsetTL:Ar,pixelOffsetBR:Mr,minFontScaleX:0,minFontScaleY:0})}return Le}(0,s,v,h,g,y,o,r.allowVerticalPlacement),H=r.textSizeData;let J=null;H.kind==="source"?(J=[es*h.layout.get("text-size").evaluate(y,{})],J[0]>ga&&si(`${r.layerIds[0]}: Value for "text-size" is >= ${eu}. Reduce your "text-size".`)):H.kind==="composite"&&(J=[es*F.compositeTextSizes[0].evaluate(y,{},O),es*F.compositeTextSizes[1].evaluate(y,{},O)],(J[0]>ga||J[1]>ga)&&si(`${r.layerIds[0]}: Value for "text-size" is >= ${eu}. Reduce your "text-size".`)),r.addSymbols(r.text,V,J,v,g,y,E,e,T.lineStartIndex,T.lineLength,D,O);for(const de of I)P[de]=r.text.placedSymbolArray.length-1;return 4*V.length}function By(r){for(const e in r)return r[e];return null}function Mw(r,e,s,o){const h=r.compareText;if(e in h){const g=h[e];for(let y=g.length-1;y>=0;y--)if(o.dist(g[y])<s)return!0}else h[e]=[];return h[e].push(o),!1}const Oy=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Ff{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,o]=new Uint8Array(e,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const h=o>>4;if(h!==1)throw new Error(`Got v${h} data when expected v1.`);const g=Oy[15&o];if(!g)throw new Error("Unrecognized array type.");const[y]=new Uint16Array(e,2,1),[v]=new Uint32Array(e,4,1);return new Ff(v,y,g,e)}constructor(e,s=64,o=Float64Array,h){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=o,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const g=Oy.indexOf(this.ArrayType),y=2*e*this.ArrayType.BYTES_PER_ELEMENT,v=e*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-v%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${o}.`);h&&h instanceof ArrayBuffer?(this.data=h,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+v+T,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+y+v+T),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+v+T,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=e)}add(e,s){const o=this._pos>>1;return this.ids[o]=o,this.coords[this._pos++]=e,this.coords[this._pos++]=s,o}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return Bf(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,s,o,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:y,nodeSize:v}=this,T=[0,g.length-1,0],E=[];for(;T.length;){const I=T.pop()||0,P=T.pop()||0,D=T.pop()||0;if(P-D<=v){for(let H=D;H<=P;H++){const J=y[2*H],de=y[2*H+1];J>=e&&J<=o&&de>=s&&de<=h&&E.push(g[H])}continue}const F=D+P>>1,O=y[2*F],V=y[2*F+1];O>=e&&O<=o&&V>=s&&V<=h&&E.push(g[F]),(I===0?e<=O:s<=V)&&(T.push(D),T.push(F-1),T.push(1-I)),(I===0?o>=O:h>=V)&&(T.push(F+1),T.push(P),T.push(1-I))}return E}within(e,s,o){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:h,coords:g,nodeSize:y}=this,v=[0,h.length-1,0],T=[],E=o*o;for(;v.length;){const I=v.pop()||0,P=v.pop()||0,D=v.pop()||0;if(P-D<=y){for(let H=D;H<=P;H++)jy(g[2*H],g[2*H+1],e,s)<=E&&T.push(h[H]);continue}const F=D+P>>1,O=g[2*F],V=g[2*F+1];jy(O,V,e,s)<=E&&T.push(h[F]),(I===0?e-o<=O:s-o<=V)&&(v.push(D),v.push(F-1),v.push(1-I)),(I===0?e+o>=O:s+o>=V)&&(v.push(F+1),v.push(P),v.push(1-I))}return T}}function Bf(r,e,s,o,h,g){if(h-o<=s)return;const y=o+h>>1;Ny(r,e,y,o,h,g),Bf(r,e,s,o,y-1,1-g),Bf(r,e,s,y+1,h,1-g)}function Ny(r,e,s,o,h,g){for(;h>o;){if(h-o>600){const E=h-o+1,I=s-o+1,P=Math.log(E),D=.5*Math.exp(2*P/3),F=.5*Math.sqrt(P*D*(E-D)/E)*(I-E/2<0?-1:1);Ny(r,e,s,Math.max(o,Math.floor(s-I*D/E+F)),Math.min(h,Math.floor(s+(E-I)*D/E+F)),g)}const y=e[2*s+g];let v=o,T=h;for(iu(r,e,o,s),e[2*h+g]>y&&iu(r,e,o,h);v<T;){for(iu(r,e,v,T),v++,T--;e[2*v+g]<y;)v++;for(;e[2*T+g]>y;)T--}e[2*o+g]===y?iu(r,e,o,T):(T++,iu(r,e,T,h)),T<=s&&(o=T+1),s<=T&&(h=T-1)}}function iu(r,e,s,o){Of(r,s,o),Of(e,2*s,2*o),Of(e,2*s+1,2*o+1)}function Of(r,e,s){const o=r[e];r[e]=r[s],r[s]=o}function jy(r,e,s,o){const h=r-s,g=e-o;return h*h+g*g}var Nf;x.bd=void 0,(Nf=x.bd||(x.bd={})).create="create",Nf.load="load",Nf.fullLoad="fullLoad";let od=null,ru=[];const jf=1e3/60,Vf="loadTime",Uf="fullLoadTime",Dw={mark(r){performance.mark(r)},frame(r){const e=r;od!=null&&ru.push(e-od),od=e},clearMetrics(){od=null,ru=[],performance.clearMeasures(Vf),performance.clearMeasures(Uf);for(const r in x.bd)performance.clearMarks(x.bd[r])},getPerformanceMetrics(){performance.measure(Vf,x.bd.create,x.bd.load),performance.measure(Uf,x.bd.create,x.bd.fullLoad);const r=performance.getEntriesByName(Vf)[0].duration,e=performance.getEntriesByName(Uf)[0].duration,s=ru.length,o=1/(ru.reduce((g,y)=>g+y,0)/s/1e3),h=ru.filter(g=>g>jf).reduce((g,y)=>g+(y-jf)/jf,0);return{loadTime:r,fullLoadTime:e,fps:o,percentDroppedFrames:h/(s+h)*100,totalFrames:s}}};x.$=Ie,x.A=ul,x.B=function(r){if(pn==null){const e=r.navigator?r.navigator.userAgent:null;pn=!!r.safari||!(!e||!(/\b(iPad|iPhone|iPod)\b/.test(e)||e.match("Safari")&&!e.match("Chrome")))}return pn},x.C=class{constructor(r,e){this.target=r,this.mapId=e,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Sw(()=>this.process()),this.subscription=function(s,o,h,g){return s.addEventListener(o,h,!1),{unsubscribe:()=>{s.removeEventListener(o,h,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=br(self)?r:window}registerMessageHandler(r,e){this.messageHandlers[r]=e}sendAsync(r,e){return new Promise((s,o)=>{const h=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[h]={resolve:s,reject:o},e&&e.signal.addEventListener("abort",()=>{delete this.resolveRejects[h];const v={id:h,type:"<cancel>",origin:location.origin,targetMapId:r.targetMapId,sourceMapId:this.mapId};this.target.postMessage(v)},{once:!0});const g=[],y=Object.assign(Object.assign({},r),{id:h,sourceMapId:this.mapId,origin:location.origin,data:ys(r.data,g)});this.target.postMessage(y,{transfer:g})})}receive(r){const e=r.data,s=e.id;if(!(e.origin!=="file://"&&location.origin!=="file://"&&e.origin!==location.origin||e.targetMapId&&this.mapId!==e.targetMapId)){if(e.type==="<cancel>"){delete this.tasks[s];const o=this.abortControllers[s];return delete this.abortControllers[s],void(o&&o.abort())}if(br(self)||e.mustQueue)return this.tasks[s]=e,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,e)}}process(){if(this.taskQueue.length===0)return;const r=this.taskQueue.shift(),e=this.tasks[r];delete this.tasks[r],this.taskQueue.length>0&&this.invoker.trigger(),e&&this.processTask(r,e)}processTask(r,e){return d(this,void 0,void 0,function*(){if(e.type==="<response>"){const h=this.resolveRejects[r];return delete this.resolveRejects[r],h?void(e.error?h.reject(ca(e.error)):h.resolve(ca(e.data))):void 0}if(!this.messageHandlers[e.type])return void this.completeTask(r,new Error(`Could not find a registered handler for ${e.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=ca(e.data),o=new AbortController;this.abortControllers[r]=o;try{const h=yield this.messageHandlers[e.type](e.sourceMapId,s,o);this.completeTask(r,null,h)}catch(h){this.completeTask(r,h)}})}completeTask(r,e,s){const o=[];delete this.abortControllers[r];const h={id:r,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:e?ys(e):null,data:ys(s,o)};this.target.postMessage(h,{transfer:o})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},x.D=et,x.E=os,x.F=function(){var r=new ul(16);return ul!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},x.G=Ui,x.H=function(r,e,s){var o,h,g,y,v,T,E,I,P,D,F,O,V=s[0],H=s[1],J=s[2];return e===r?(r[12]=e[0]*V+e[4]*H+e[8]*J+e[12],r[13]=e[1]*V+e[5]*H+e[9]*J+e[13],r[14]=e[2]*V+e[6]*H+e[10]*J+e[14],r[15]=e[3]*V+e[7]*H+e[11]*J+e[15]):(h=e[1],g=e[2],y=e[3],v=e[4],T=e[5],E=e[6],I=e[7],P=e[8],D=e[9],F=e[10],O=e[11],r[0]=o=e[0],r[1]=h,r[2]=g,r[3]=y,r[4]=v,r[5]=T,r[6]=E,r[7]=I,r[8]=P,r[9]=D,r[10]=F,r[11]=O,r[12]=o*V+v*H+P*J+e[12],r[13]=h*V+T*H+D*J+e[13],r[14]=g*V+E*H+F*J+e[14],r[15]=y*V+I*H+O*J+e[15]),r},x.I=Sf,x.J=function(r,e,s){var o=s[0],h=s[1],g=s[2];return r[0]=e[0]*o,r[1]=e[1]*o,r[2]=e[2]*o,r[3]=e[3]*o,r[4]=e[4]*h,r[5]=e[5]*h,r[6]=e[6]*h,r[7]=e[7]*h,r[8]=e[8]*g,r[9]=e[9]*g,r[10]=e[10]*g,r[11]=e[11]*g,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},x.K=x0,x.L=function(r,e){const s={};for(let o=0;o<e.length;o++){const h=e[o];h in r&&(s[h]=r[h])}return s},x.M=ya,x.N=my,x.O=gy,x.P=K,x.Q=nn,x.R=rn,x.S=oe,x.T=Ec,x.U=Q,x.V=dt,x.W=bt,x.X=di,x.Y=id,x.Z=class extends Jn{},x._=d,x.a=Kr,x.a$=function(r,e,s){return r[0]=e[0]*s[0],r[1]=e[1]*s[1],r[2]=e[2]*s[2],r[3]=e[3]*s[3],r},x.a0=Df,x.a1=Re,x.a2=r=>{const e=window.document.createElement("video");return e.muted=!0,new Promise(s=>{e.onloadstart=()=>{s(e)};for(const o of r){const h=window.document.createElement("source");Lo(o)||(e.crossOrigin="Anonymous"),h.src=o,e.appendChild(h)}})},x.a3=function(){return tt++},x.a4=Oh,x.a5=gl,x.a6=Xo,x.a7=Ts,x.a8=Ht,x.a9=by,x.aA=Ot,x.aB=function(r,e){if(!r)return[{command:"setStyle",args:[e]}];let s=[];try{if(!Ct(r.version,e.version))return[{command:"setStyle",args:[e]}];Ct(r.center,e.center)||s.push({command:"setCenter",args:[e.center]}),Ct(r.zoom,e.zoom)||s.push({command:"setZoom",args:[e.zoom]}),Ct(r.bearing,e.bearing)||s.push({command:"setBearing",args:[e.bearing]}),Ct(r.pitch,e.pitch)||s.push({command:"setPitch",args:[e.pitch]}),Ct(r.sprite,e.sprite)||s.push({command:"setSprite",args:[e.sprite]}),Ct(r.glyphs,e.glyphs)||s.push({command:"setGlyphs",args:[e.glyphs]}),Ct(r.transition,e.transition)||s.push({command:"setTransition",args:[e.transition]}),Ct(r.light,e.light)||s.push({command:"setLight",args:[e.light]}),Ct(r.terrain,e.terrain)||s.push({command:"setTerrain",args:[e.terrain]}),Ct(r.sky,e.sky)||s.push({command:"setSky",args:[e.sky]});const o={},h=[];(function(y,v,T,E){let I;for(I in v=v||{},y=y||{})Object.prototype.hasOwnProperty.call(y,I)&&(Object.prototype.hasOwnProperty.call(v,I)||qs(I,T,E));for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&(Object.prototype.hasOwnProperty.call(y,I)?Ct(y[I],v[I])||(y[I].type==="geojson"&&v[I].type==="geojson"&&Gs(y,v,I)?Bi(T,{command:"setGeoJSONSourceData",args:[I,v[I].data]}):Zs(I,v,T,E)):fn(I,v,T))})(r.sources,e.sources,h,o);const g=[];r.layers&&r.layers.forEach(y=>{"source"in y&&o[y.source]?s.push({command:"removeLayer",args:[y.id]}):g.push(y)}),s=s.concat(h),function(y,v,T){v=v||[];const E=(y=y||[]).map(Hs),I=v.map(Hs),P=y.reduce(Ga,{}),D=v.reduce(Ga,{}),F=E.slice(),O=Object.create(null);let V,H,J,de,ee;for(let ce=0,we=0;ce<E.length;ce++)V=E[ce],Object.prototype.hasOwnProperty.call(D,V)?we++:(Bi(T,{command:"removeLayer",args:[V]}),F.splice(F.indexOf(V,we),1));for(let ce=0,we=0;ce<I.length;ce++)V=I[I.length-1-ce],F[F.length-1-ce]!==V&&(Object.prototype.hasOwnProperty.call(P,V)?(Bi(T,{command:"removeLayer",args:[V]}),F.splice(F.lastIndexOf(V,F.length-we),1)):we++,de=F[F.length-ce],Bi(T,{command:"addLayer",args:[D[V],de]}),F.splice(F.length-ce,0,V),O[V]=!0);for(let ce=0;ce<I.length;ce++)if(V=I[ce],H=P[V],J=D[V],!O[V]&&!Ct(H,J))if(Ct(H.source,J.source)&&Ct(H["source-layer"],J["source-layer"])&&Ct(H.type,J.type)){for(ee in cs(H.layout,J.layout,T,V,null,"setLayoutProperty"),cs(H.paint,J.paint,T,V,null,"setPaintProperty"),Ct(H.filter,J.filter)||Bi(T,{command:"setFilter",args:[V,J.filter]}),Ct(H.minzoom,J.minzoom)&&Ct(H.maxzoom,J.maxzoom)||Bi(T,{command:"setLayerZoomRange",args:[V,J.minzoom,J.maxzoom]}),H)Object.prototype.hasOwnProperty.call(H,ee)&&ee!=="layout"&&ee!=="paint"&&ee!=="filter"&&ee!=="metadata"&&ee!=="minzoom"&&ee!=="maxzoom"&&(ee.indexOf("paint.")===0?cs(H[ee],J[ee],T,V,ee.slice(6),"setPaintProperty"):Ct(H[ee],J[ee])||Bi(T,{command:"setLayerProperty",args:[V,ee,J[ee]]}));for(ee in J)Object.prototype.hasOwnProperty.call(J,ee)&&!Object.prototype.hasOwnProperty.call(H,ee)&&ee!=="layout"&&ee!=="paint"&&ee!=="filter"&&ee!=="metadata"&&ee!=="minzoom"&&ee!=="maxzoom"&&(ee.indexOf("paint.")===0?cs(H[ee],J[ee],T,V,ee.slice(6),"setPaintProperty"):Ct(H[ee],J[ee])||Bi(T,{command:"setLayerProperty",args:[V,ee,J[ee]]}))}else Bi(T,{command:"removeLayer",args:[V]}),de=F[F.lastIndexOf(V)+1],Bi(T,{command:"addLayer",args:[J,de]})}(g,e.layers,s)}catch(o){console.warn("Unable to compute style diff:",o),s=[{command:"setStyle",args:[e]}]}return s},x.aC=function(r){const e=[],s=r.id;return s===void 0&&e.push({message:`layers.${s}: missing required property "id"`}),r.render===void 0&&e.push({message:`layers.${s}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&e.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),e},x.aD=function r(e,s){if(Array.isArray(e)){if(!Array.isArray(s)||e.length!==s.length)return!1;for(let o=0;o<e.length;o++)if(!r(e[o],s[o]))return!1;return!0}if(typeof e=="object"&&e!==null&&s!==null){if(typeof s!="object"||Object.keys(e).length!==Object.keys(s).length)return!1;for(const o in e)if(!r(e[o],s[o]))return!1;return!0}return e===s},x.aE=Dt,x.aF=xt,x.aG=class extends qt{constructor(r,e){super(r,e),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},x.aH=Zi,x.aI=class extends qt{constructor(r,e){super(r,e),this.current=ws}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let e=1;e<16;e++)if(r[e]!==this.current[e]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},x.aJ=en,x.aK=class extends qt{constructor(r,e){super(r,e),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},x.aL=class extends qt{constructor(r,e){super(r,e),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},x.aM=vn,x.aN=function(r,e,s,o,h,g,y){var v=1/(e-s),T=1/(o-h),E=1/(g-y);return r[0]=-2*v,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*T,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*E,r[11]=0,r[12]=(e+s)*v,r[13]=(h+o)*T,r[14]=(y+g)*E,r[15]=1,r},x.aO=Ft,x.aP=r2,x.aQ=class extends uo{},x.aR=Y2,x.aS=class extends ha{},x.aT=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},x.aU=C0,x.aV=z,x.aW=class extends Fc{},x.aX=ge,x.aY=function(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]},x.aZ=function(r,e){var s=r[0],o=r[1],h=r[2],g=r[3],y=r[4],v=r[5],T=r[6],E=r[7],I=r[8],P=r[9],D=r[10],F=r[11],O=r[12],V=r[13],H=r[14],J=r[15],de=e[0],ee=e[1],ce=e[2],we=e[3],Se=e[4],Ue=e[5],Ye=e[6],Ve=e[7],Ne=e[8],Le=e[9],We=e[10],Oe=e[11],Me=e[12],rt=e[13],Qe=e[14],wt=e[15];return Math.abs(s-de)<=dr*Math.max(1,Math.abs(s),Math.abs(de))&&Math.abs(o-ee)<=dr*Math.max(1,Math.abs(o),Math.abs(ee))&&Math.abs(h-ce)<=dr*Math.max(1,Math.abs(h),Math.abs(ce))&&Math.abs(g-we)<=dr*Math.max(1,Math.abs(g),Math.abs(we))&&Math.abs(y-Se)<=dr*Math.max(1,Math.abs(y),Math.abs(Se))&&Math.abs(v-Ue)<=dr*Math.max(1,Math.abs(v),Math.abs(Ue))&&Math.abs(T-Ye)<=dr*Math.max(1,Math.abs(T),Math.abs(Ye))&&Math.abs(E-Ve)<=dr*Math.max(1,Math.abs(E),Math.abs(Ve))&&Math.abs(I-Ne)<=dr*Math.max(1,Math.abs(I),Math.abs(Ne))&&Math.abs(P-Le)<=dr*Math.max(1,Math.abs(P),Math.abs(Le))&&Math.abs(D-We)<=dr*Math.max(1,Math.abs(D),Math.abs(We))&&Math.abs(F-Oe)<=dr*Math.max(1,Math.abs(F),Math.abs(Oe))&&Math.abs(O-Me)<=dr*Math.max(1,Math.abs(O),Math.abs(Me))&&Math.abs(V-rt)<=dr*Math.max(1,Math.abs(V),Math.abs(rt))&&Math.abs(H-Qe)<=dr*Math.max(1,Math.abs(H),Math.abs(Qe))&&Math.abs(J-wt)<=dr*Math.max(1,Math.abs(J),Math.abs(wt))},x.a_=function(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r},x.aa=function(r){const e={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,o,h,g)=>{const y=h||g;return e[o]=!y||y.toLowerCase(),""}),e["max-age"]){const s=parseInt(e["max-age"],10);isNaN(s)?delete e["max-age"]:e["max-age"]=s}return e},x.ab=function(r,e){const s=[];for(const o in r)o in e||s.push(o);return s},x.ac=je,x.ad=function(r,e,s){var o=Math.sin(s),h=Math.cos(s),g=e[0],y=e[1],v=e[2],T=e[3],E=e[4],I=e[5],P=e[6],D=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=g*h+E*o,r[1]=y*h+I*o,r[2]=v*h+P*o,r[3]=T*h+D*o,r[4]=E*h-g*o,r[5]=I*h-y*o,r[6]=P*h-v*o,r[7]=D*h-T*o,r},x.ae=function(r){var e=new ul(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e},x.af=Zh,x.ag=function(r,e){let s=0,o=0;if(r.kind==="constant")o=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:h,minZoom:g,maxZoom:y}=r,v=h?je(Ji.interpolationFactor(h,e,g,y),0,1):0;r.kind==="camera"?o=kr.number(r.minSize,r.maxSize,v):s=v}return{uSizeT:s,uSize:o}},x.ai=function(r,{uSize:e,uSizeT:s},{lowerSize:o,upperSize:h}){return r.kind==="source"?o/es:r.kind==="composite"?kr.number(o/es,h/es,s):e},x.aj=kf,x.ak=function(r,e,s,o){const h=e.y-r.y,g=e.x-r.x,y=o.y-s.y,v=o.x-s.x,T=y*g-v*h;if(T===0)return null;const E=(v*(r.y-s.y)-y*(r.x-s.x))/T;return new K(r.x+E*g,r.y+E*h)},x.al=Ey,x.am=Cs,x.an=af,x.ao=Ti,x.aq=Ef,x.ar=function(r,e){var s=e[0],o=e[1],h=e[2],g=e[3],y=e[4],v=e[5],T=e[6],E=e[7],I=e[8],P=e[9],D=e[10],F=e[11],O=e[12],V=e[13],H=e[14],J=e[15],de=s*v-o*y,ee=s*T-h*y,ce=s*E-g*y,we=o*T-h*v,Se=o*E-g*v,Ue=h*E-g*T,Ye=I*V-P*O,Ve=I*H-D*O,Ne=I*J-F*O,Le=P*H-D*V,We=P*J-F*V,Oe=D*J-F*H,Me=de*Oe-ee*We+ce*Le+we*Ne-Se*Ve+Ue*Ye;return Me?(r[0]=(v*Oe-T*We+E*Le)*(Me=1/Me),r[1]=(h*We-o*Oe-g*Le)*Me,r[2]=(V*Ue-H*Se+J*we)*Me,r[3]=(D*Se-P*Ue-F*we)*Me,r[4]=(T*Ne-y*Oe-E*Ve)*Me,r[5]=(s*Oe-h*Ne+g*Ve)*Me,r[6]=(H*ce-O*Ue-J*ee)*Me,r[7]=(I*Ue-D*ce+F*ee)*Me,r[8]=(y*We-v*Ne+E*Ye)*Me,r[9]=(o*Ne-s*We-g*Ye)*Me,r[10]=(O*Se-V*ce+J*de)*Me,r[11]=(P*ce-I*Se-F*de)*Me,r[12]=(v*Ve-y*Le-T*Ye)*Me,r[13]=(s*Le-o*Ve+h*Ye)*Me,r[14]=(V*ee-O*we-H*de)*Me,r[15]=(I*we-P*ee+D*de)*Me,r):null},x.as=Rf,x.at=Cf,x.au=Ff,x.av=function(){const r={},e=_e.$version;for(const s in _e.$root){const o=_e.$root[s];if(o.required){let h=null;h=s==="version"?e:o.type==="array"?[]:{},h!=null&&(r[s]=h)}}return r},x.aw=bc,x.ax=$s,x.ay=function(r){r=r.slice();const e=Object.create(null);for(let s=0;s<r.length;s++)e[r[s].id]=r[s];for(let s=0;s<r.length;s++)"ref"in r[s]&&(r[s]=Za(r[s],e[r[s].ref]));return r},x.az=function(r){if(r.type==="custom")return new bw(r);switch(r.type){case"background":return new vw(r);case"circle":return new n2(r);case"fill":return new T2(r);case"fill-extrusion":return new N2(r);case"heatmap":return new a2(r);case"hillshade":return new l2(r);case"line":return new H2(r);case"raster":return new ww(r);case"symbol":return new td(r)}},x.b=He,x.b0=function(r,e){return r[0]*e[0]+r[1]*e[1]+r[2]*e[2]+r[3]*e[3]},x.b1=Xe,x.b2=vy,x.b3=yy,x.b4=function(r,e,s,o,h){var g,y=1/Math.tan(e/2);return r[0]=y/s,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=y,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,h!=null&&h!==1/0?(r[10]=(h+o)*(g=1/(o-h)),r[14]=2*h*o*g):(r[10]=-1,r[14]=-2*o),r},x.b5=function(r,e,s){var o=Math.sin(s),h=Math.cos(s),g=e[4],y=e[5],v=e[6],T=e[7],E=e[8],I=e[9],P=e[10],D=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=g*h+E*o,r[5]=y*h+I*o,r[6]=v*h+P*o,r[7]=T*h+D*o,r[8]=E*h-g*o,r[9]=I*h-y*o,r[10]=P*h-v*o,r[11]=D*h-T*o,r},x.b6=le,x.b7=xe,x.b8=function(r){return r*Math.PI/180},x.b9=function(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},x.bA=_s,x.ba=class extends rl{},x.bb=Af,x.bc=Dw,x.be=Xr,x.bf=function(r,e){Kr.REGISTERED_PROTOCOLS[r]=e},x.bg=function(r){delete Kr.REGISTERED_PROTOCOLS[r]},x.bh=function(r,e){const s={};for(let h=0;h<r.length;h++){const g=e&&e[r[h].id]||rf(r[h]);e&&(e[r[h].id]=g);let y=s[g];y||(y=s[g]=[]),y.push(r[h])}const o=[];for(const h in s)o.push(s[h]);return o},x.bi=Ge,x.bj=wy,x.bk=Sy,x.bl=ty,x.bm=function(r){r.bucket.createArrays(),r.bucket.tilePixelRatio=bt/(512*r.bucket.overscaling),r.bucket.compareText={},r.bucket.iconsNeedLinear=!1;const e=r.bucket.layers[0],s=e.layout,o=e._unevaluatedLayout._values,h={layoutIconSize:o["icon-size"].possiblyEvaluate(new Ht(r.bucket.zoom+1),r.canonical),layoutTextSize:o["text-size"].possiblyEvaluate(new Ht(r.bucket.zoom+1),r.canonical),textMaxSize:o["text-size"].possiblyEvaluate(new Ht(18))};if(r.bucket.textSizeData.kind==="composite"){const{minZoom:E,maxZoom:I}=r.bucket.textSizeData;h.compositeTextSizes=[o["text-size"].possiblyEvaluate(new Ht(E),r.canonical),o["text-size"].possiblyEvaluate(new Ht(I),r.canonical)]}if(r.bucket.iconSizeData.kind==="composite"){const{minZoom:E,maxZoom:I}=r.bucket.iconSizeData;h.compositeIconSizes=[o["icon-size"].possiblyEvaluate(new Ht(E),r.canonical),o["icon-size"].possiblyEvaluate(new Ht(I),r.canonical)]}const g=s.get("text-line-height")*Ti,y=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",v=s.get("text-keep-upright"),T=s.get("text-size");for(const E of r.bucket.features){const I=s.get("text-font").evaluate(E,{},r.canonical).join(","),P=T.evaluate(E,{},r.canonical),D=h.layoutTextSize.evaluate(E,{},r.canonical),F=h.layoutIconSize.evaluate(E,{},r.canonical),O={horizontal:{},vertical:void 0},V=E.text;let H,J=[0,0];if(V){const ce=V.toString(),we=s.get("text-letter-spacing").evaluate(E,{},r.canonical)*Ti,Se=Qo(ce)?we:0,Ue=s.get("text-anchor").evaluate(E,{},r.canonical),Ye=Ry(e,E,r.canonical);if(!Ye){const Oe=s.get("text-radial-offset").evaluate(E,{},r.canonical);J=Oe?Ly(Ue,[Oe*Ti,Lf]):s.get("text-offset").evaluate(E,{},r.canonical).map(Me=>Me*Ti)}let Ve=y?"center":s.get("text-justify").evaluate(E,{},r.canonical);const Ne=s.get("symbol-placement"),Le=Ne==="point"?s.get("text-max-width").evaluate(E,{},r.canonical)*Ti:0,We=()=>{r.bucket.allowVerticalPlacement&&so(ce)&&(O.vertical=Jh(V,r.glyphMap,r.glyphPositions,r.imagePositions,I,Le,g,Ue,"left",Se,J,x.ah.vertical,!0,Ne,D,P))};if(!y&&Ye){const Oe=new Set;if(Ve==="auto")for(let rt=0;rt<Ye.values.length;rt+=2)Oe.add(Rf(Ye.values[rt]));else Oe.add(Ve);let Me=!1;for(const rt of Oe)if(!O.horizontal[rt])if(Me)O.horizontal[rt]=O.horizontal[0];else{const Qe=Jh(V,r.glyphMap,r.glyphPositions,r.imagePositions,I,Le,g,"center",rt,Se,J,x.ah.horizontal,!1,Ne,D,P);Qe&&(O.horizontal[rt]=Qe,Me=Qe.positionedLines.length===1)}We()}else{Ve==="auto"&&(Ve=Rf(Ue));const Oe=Jh(V,r.glyphMap,r.glyphPositions,r.imagePositions,I,Le,g,Ue,Ve,Se,J,x.ah.horizontal,!1,Ne,D,P);Oe&&(O.horizontal[Ve]=Oe),We(),so(ce)&&y&&v&&(O.vertical=Jh(V,r.glyphMap,r.glyphPositions,r.imagePositions,I,Le,g,Ue,Ve,Se,J,x.ah.vertical,!1,Ne,D,P))}}let de=!1;if(E.icon&&E.icon.name){const ce=r.imageMap[E.icon.name];ce&&(H=fw(r.imagePositions[E.icon.name],s.get("icon-offset").evaluate(E,{},r.canonical),s.get("icon-anchor").evaluate(E,{},r.canonical)),de=!!ce.sdf,r.bucket.sdfIcons===void 0?r.bucket.sdfIcons=de:r.bucket.sdfIcons!==de&&si("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ce.pixelRatio!==r.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(r.bucket.iconsNeedLinear=!0))}const ee=By(O.horizontal)||O.vertical;r.bucket.iconsInText=!!ee&&ee.iconsInText,(ee||H)&&Aw(r.bucket,E,O,H,r.imageMap,h,D,F,J,de,r.canonical)}r.showCollisionBoxes&&r.bucket.generateCollisionDebugBuffers()},x.bn=vf,x.bo=gf,x.bp=_f,x.bq=fa,x.br=wf,x.bs=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},x.bt=function(r,e,s,o,h){return d(this,void 0,void 0,function*(){if(Q())try{return yield dt(r,e,s,o,h)}catch{}return function(g,y,v,T,E){const I=g.width,P=g.height;It&&Mt||(It=new OffscreenCanvas(I,P),Mt=It.getContext("2d",{willReadFrequently:!0})),It.width=I,It.height=P,Mt.drawImage(g,0,0,I,P);const D=Mt.getImageData(y,v,T,E);return Mt.clearRect(0,0,I,P),D.data}(r,e,s,o,h)})},x.bu=xy,x.bv=R,x.bw=W,x.bx=G0,x.by=Vt,x.bz=function(r){return r.message===Or},x.c=Ai,x.d=r=>d(void 0,void 0,void 0,function*(){if(r.byteLength===0)return createImageBitmap(new ImageData(1,1));const e=new Blob([new Uint8Array(r)],{type:"image/png"});try{return createImageBitmap(e)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),x.e=Ke,x.f=r=>new Promise((e,s)=>{const o=new Image;o.onload=()=>{e(o),URL.revokeObjectURL(o.src),o.onload=null,window.requestAnimationFrame(()=>{o.src=ht})},o.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const h=new Blob([new Uint8Array(r)],{type:"image/png"});o.src=r.byteLength?URL.createObjectURL(h):ht}),x.g=Fi,x.h=(r,e)=>qn(Ke(r,{type:"json"}),e),x.i=br,x.j=Si,x.k=Hn,x.l=(r,e)=>qn(Ke(r,{type:"arrayBuffer"}),e),x.m=qn,x.n=function(r){return new wf(r).readFields(lw,[])},x.o=qc,x.p=ey,x.q=ur,x.r=vc,x.s=Lo,x.t=Ah,x.u=qe,x.v=_e,x.w=si,x.x=la,x.y=function([r,e,s]){return e+=90,e*=Math.PI/180,s*=Math.PI/180,{x:r*Math.cos(e)*Math.sin(s),y:r*Math.sin(e)*Math.sin(s),z:r*Math.cos(s)}},x.z=kr}),_("worker",["./shared"],function(x){class d{constructor(M){this.keyCache={},M&&this.replace(M)}replace(M){this._layerConfigs={},this._layers={},this.update(M,[])}update(M,L){for(const $ of M){this._layerConfigs[$.id]=$;const ne=this._layers[$.id]=x.az($);ne._featureFilter=x.a6(ne.filter),this.keyCache[$.id]&&delete this.keyCache[$.id]}for(const $ of L)delete this.keyCache[$],delete this._layerConfigs[$],delete this._layers[$];this.familiesBySource={};const N=x.bh(Object.values(this._layerConfigs),this.keyCache);for(const $ of N){const ne=$.map(ve=>this._layers[ve.id]),se=ne[0];if(se.visibility==="none")continue;const he=se.source||"";let te=this.familiesBySource[he];te||(te=this.familiesBySource[he]={});const pe=se.sourceLayer||"_geojsonTileLayer";let Ee=te[pe];Ee||(Ee=te[pe]=[]),Ee.push(ne)}}}class R{constructor(M){const L={},N=[];for(const he in M){const te=M[he],pe=L[he]={};for(const Ee in te){const ve=te[+Ee];if(!ve||ve.bitmap.width===0||ve.bitmap.height===0)continue;const be={x:0,y:0,w:ve.bitmap.width+2,h:ve.bitmap.height+2};N.push(be),pe[Ee]={rect:be,metrics:ve.metrics}}}const{w:$,h:ne}=x.p(N),se=new x.o({width:$||1,height:ne||1});for(const he in M){const te=M[he];for(const pe in te){const Ee=te[+pe];if(!Ee||Ee.bitmap.width===0||Ee.bitmap.height===0)continue;const ve=L[he][pe].rect;x.o.copy(Ee.bitmap,se,{x:0,y:0},{x:ve.x+1,y:ve.y+1},Ee.bitmap)}}this.image=se,this.positions=L}}x.bi("GlyphAtlas",R);class W{constructor(M){this.tileID=new x.Q(M.tileID.overscaledZ,M.tileID.wrap,M.tileID.canonical.z,M.tileID.canonical.x,M.tileID.canonical.y),this.uid=M.uid,this.zoom=M.zoom,this.pixelRatio=M.pixelRatio,this.tileSize=M.tileSize,this.source=M.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=M.showCollisionBoxes,this.collectResourceTiming=!!M.collectResourceTiming,this.returnDependencies=!!M.returnDependencies,this.promoteId=M.promoteId,this.inFlightDependencies=[]}parse(M,L,N,$){return x._(this,void 0,void 0,function*(){this.status="parsing",this.data=M,this.collisionBoxArray=new x.a4;const ne=new x.bj(Object.keys(M.layers).sort()),se=new x.bk(this.tileID,this.promoteId);se.bucketLayerIDs=[];const he={},te={featureIndex:se,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:N},pe=L.familiesBySource[this.source];for(const mt in pe){const ei=M.layers[mt];if(!ei)continue;ei.version===1&&x.w(`Vector tile source "${this.source}" layer "${mt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Mi=ne.encode(mt),lr=[];for(let $i=0;$i<ei.length;$i++){const Yi=ei.feature($i),Tr=se.getId(Yi,mt);lr.push({feature:Yi,id:Tr,index:$i,sourceLayerIndex:Mi})}for(const $i of pe[mt]){const Yi=$i[0];Yi.source!==this.source&&x.w(`layer.source = ${Yi.source} does not equal this.source = ${this.source}`),Yi.minzoom&&this.zoom<Math.floor(Yi.minzoom)||Yi.maxzoom&&this.zoom>=Yi.maxzoom||Yi.visibility!=="none"&&(re($i,this.zoom,N),(he[Yi.id]=Yi.createBucket({index:se.bucketLayerIDs.length,layers:$i,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Mi,sourceID:this.source})).populate(lr,te,this.tileID.canonical),se.bucketLayerIDs.push($i.map(Tr=>Tr.id)))}}const Ee=x.aE(te.glyphDependencies,mt=>Object.keys(mt).map(Number));this.inFlightDependencies.forEach(mt=>mt==null?void 0:mt.abort()),this.inFlightDependencies=[];let ve=Promise.resolve({});if(Object.keys(Ee).length){const mt=new AbortController;this.inFlightDependencies.push(mt),ve=$.sendAsync({type:"getGlyphs",data:{stacks:Ee,source:this.source,tileID:this.tileID,type:"glyphs"}},mt)}const be=Object.keys(te.iconDependencies);let Je=Promise.resolve({});if(be.length){const mt=new AbortController;this.inFlightDependencies.push(mt),Je=$.sendAsync({type:"getImages",data:{icons:be,source:this.source,tileID:this.tileID,type:"icons"}},mt)}const ot=Object.keys(te.patternDependencies);let st=Promise.resolve({});if(ot.length){const mt=new AbortController;this.inFlightDependencies.push(mt),st=$.sendAsync({type:"getImages",data:{icons:ot,source:this.source,tileID:this.tileID,type:"patterns"}},mt)}const[Et,ct,Gt]=yield Promise.all([ve,Je,st]),jt=new R(Et),ui=new x.bl(ct,Gt);for(const mt in he){const ei=he[mt];ei instanceof x.a5?(re(ei.layers,this.zoom,N),x.bm({bucket:ei,glyphMap:Et,glyphPositions:jt.positions,imageMap:ct,imagePositions:ui.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):ei.hasPattern&&(ei instanceof x.bn||ei instanceof x.bo||ei instanceof x.bp)&&(re(ei.layers,this.zoom,N),ei.addFeatures(te,this.tileID.canonical,ui.patternPositions))}return this.status="done",{buckets:Object.values(he).filter(mt=>!mt.isEmpty()),featureIndex:se,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:jt.image,imageAtlas:ui,glyphMap:this.returnDependencies?Et:null,iconMap:this.returnDependencies?ct:null,glyphPositions:this.returnDependencies?jt.positions:null}})}}function re(Z,M,L){const N=new x.a8(M);for(const $ of Z)$.recalculate(N,L)}class K{constructor(M,L,N){this.actor=M,this.layerIndex=L,this.availableImages=N,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(M,L){return x._(this,void 0,void 0,function*(){const N=yield x.l(M.request,L);try{return{vectorTile:new x.bq.VectorTile(new x.br(N.data)),rawData:N.data,cacheControl:N.cacheControl,expires:N.expires}}catch($){const ne=new Uint8Array(N.data);let se=`Unable to parse the tile at ${M.request.url}, `;throw se+=ne[0]===31&&ne[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${$.messge}`,new Error(se)}})}loadTile(M){return x._(this,void 0,void 0,function*(){const L=M.uid,N=!!(M&&M.request&&M.request.collectResourceTiming)&&new x.bs(M.request),$=new W(M);this.loading[L]=$;const ne=new AbortController;$.abort=ne;try{const se=yield this.loadVectorTile(M,ne);if(delete this.loading[L],!se)return null;const he=se.rawData,te={};se.expires&&(te.expires=se.expires),se.cacheControl&&(te.cacheControl=se.cacheControl);const pe={};if(N){const ve=N.finish();ve&&(pe.resourceTiming=JSON.parse(JSON.stringify(ve)))}$.vectorTile=se.vectorTile;const Ee=$.parse(se.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[L]=$,this.fetching[L]={rawTileData:he,cacheControl:te,resourceTiming:pe};try{const ve=yield Ee;return x.e({rawTileData:he.slice(0)},ve,te,pe)}finally{delete this.fetching[L]}}catch(se){throw delete this.loading[L],$.status="done",this.loaded[L]=$,se}})}reloadTile(M){return x._(this,void 0,void 0,function*(){const L=M.uid;if(!this.loaded||!this.loaded[L])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const N=this.loaded[L];if(N.showCollisionBoxes=M.showCollisionBoxes,N.status==="parsing"){const $=yield N.parse(N.vectorTile,this.layerIndex,this.availableImages,this.actor);let ne;if(this.fetching[L]){const{rawTileData:se,cacheControl:he,resourceTiming:te}=this.fetching[L];delete this.fetching[L],ne=x.e({rawTileData:se.slice(0)},$,he,te)}else ne=$;return ne}if(N.status==="done"&&N.vectorTile)return N.parse(N.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(M){return x._(this,void 0,void 0,function*(){const L=this.loading,N=M.uid;L&&L[N]&&L[N].abort&&(L[N].abort.abort(),delete L[N])})}removeTile(M){return x._(this,void 0,void 0,function*(){this.loaded&&this.loaded[M.uid]&&delete this.loaded[M.uid]})}}class U{constructor(){this.loaded={}}loadTile(M){return x._(this,void 0,void 0,function*(){const{uid:L,encoding:N,rawImageData:$,redFactor:ne,greenFactor:se,blueFactor:he,baseShift:te}=M,pe=$.width+2,Ee=$.height+2,ve=x.b($)?new x.R({width:pe,height:Ee},yield x.bt($,-1,-1,pe,Ee)):$,be=new x.bu(L,ve,N,ne,se,he,te);return this.loaded=this.loaded||{},this.loaded[L]=be,be})}removeTile(M){const L=this.loaded,N=M.uid;L&&L[N]&&delete L[N]}}function Te(Z,M){if(Z.length!==0){ke(Z[0],M);for(var L=1;L<Z.length;L++)ke(Z[L],!M)}}function ke(Z,M){for(var L=0,N=0,$=0,ne=Z.length,se=ne-1;$<ne;se=$++){var he=(Z[$][0]-Z[se][0])*(Z[se][1]+Z[$][1]),te=L+he;N+=Math.abs(L)>=Math.abs(he)?L-te+he:he-te+L,L=te}L+N>=0!=!!M&&Z.reverse()}var ze=x.bv(function Z(M,L){var N,$=M&&M.type;if($==="FeatureCollection")for(N=0;N<M.features.length;N++)Z(M.features[N],L);else if($==="GeometryCollection")for(N=0;N<M.geometries.length;N++)Z(M.geometries[N],L);else if($==="Feature")Z(M.geometry,L);else if($==="Polygon")Te(M.coordinates,L);else if($==="MultiPolygon")for(N=0;N<M.coordinates.length;N++)Te(M.coordinates[N],L);return M});const $e=x.bq.VectorTileFeature.prototype.toGeoJSON;var oe={exports:{}},Q=x.bw,le=x.bq.VectorTileFeature,xe=je;function je(Z,M){this.options=M||{},this.features=Z,this.length=Z.length}function Xe(Z,M){this.id=typeof Z.id=="number"?Z.id:void 0,this.type=Z.type,this.rawGeometry=Z.type===1?[Z.geometry]:Z.geometry,this.properties=Z.tags,this.extent=M||4096}je.prototype.feature=function(Z){return new Xe(this.features[Z],this.options.extent)},Xe.prototype.loadGeometry=function(){var Z=this.rawGeometry;this.geometry=[];for(var M=0;M<Z.length;M++){for(var L=Z[M],N=[],$=0;$<L.length;$++)N.push(new Q(L[$][0],L[$][1]));this.geometry.push(N)}return this.geometry},Xe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Z=this.geometry,M=1/0,L=-1/0,N=1/0,$=-1/0,ne=0;ne<Z.length;ne++)for(var se=Z[ne],he=0;he<se.length;he++){var te=se[he];M=Math.min(M,te.x),L=Math.max(L,te.x),N=Math.min(N,te.y),$=Math.max($,te.y)}return[M,N,L,$]},Xe.prototype.toGeoJSON=le.prototype.toGeoJSON;var Ke=x.bx,tt=xe;function Dt(Z){var M=new Ke;return function(L,N){for(var $ in L.layers)N.writeMessage(3,xt,L.layers[$])}(Z,M),M.finish()}function xt(Z,M){var L;M.writeVarintField(15,Z.version||1),M.writeStringField(1,Z.name||""),M.writeVarintField(5,Z.extent||4096);var N={keys:[],values:[],keycache:{},valuecache:{}};for(L=0;L<Z.length;L++)N.feature=Z.feature(L),M.writeMessage(2,Ot,N);var $=N.keys;for(L=0;L<$.length;L++)M.writeStringField(3,$[L]);var ne=N.values;for(L=0;L<ne.length;L++)M.writeMessage(4,br,ne[L])}function Ot(Z,M){var L=Z.feature;L.id!==void 0&&M.writeVarintField(1,L.id),M.writeMessage(2,Nt,Z),M.writeVarintField(3,L.type),M.writeMessage(4,Pn,L)}function Nt(Z,M){var L=Z.feature,N=Z.keys,$=Z.values,ne=Z.keycache,se=Z.valuecache;for(var he in L.properties){var te=L.properties[he],pe=ne[he];if(te!==null){pe===void 0&&(N.push(he),ne[he]=pe=N.length-1),M.writeVarint(pe);var Ee=typeof te;Ee!=="string"&&Ee!=="boolean"&&Ee!=="number"&&(te=JSON.stringify(te));var ve=Ee+":"+te,be=se[ve];be===void 0&&($.push(te),se[ve]=be=$.length-1),M.writeVarint(be)}}}function si(Z,M){return(M<<3)+(7&Z)}function ar(Z){return Z<<1^Z>>31}function Pn(Z,M){for(var L=Z.loadGeometry(),N=Z.type,$=0,ne=0,se=L.length,he=0;he<se;he++){var te=L[he],pe=1;N===1&&(pe=te.length),M.writeVarint(si(1,pe));for(var Ee=N===3?te.length-1:te.length,ve=0;ve<Ee;ve++){ve===1&&N!==1&&M.writeVarint(si(2,Ee-1));var be=te[ve].x-$,Je=te[ve].y-ne;M.writeVarint(ar(be)),M.writeVarint(ar(Je)),$+=be,ne+=Je}N===3&&M.writeVarint(si(7,1))}}function br(Z,M){var L=typeof Z;L==="string"?M.writeStringField(1,Z):L==="boolean"?M.writeBooleanField(7,Z):L==="number"&&(Z%1!=0?M.writeDoubleField(3,Z):Z<0?M.writeSVarintField(6,Z):M.writeVarintField(5,Z))}oe.exports=Dt,oe.exports.fromVectorTileJs=Dt,oe.exports.fromGeojsonVt=function(Z,M){M=M||{};var L={};for(var N in Z)L[N]=new tt(Z[N].features,M),L[N].name=N,L[N].version=M.version,L[N].extent=M.extent;return Dt({layers:L})},oe.exports.GeoJSONWrapper=tt;var pn=x.bv(oe.exports);const He={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Z=>Z},ht=Math.fround||(dt=new Float32Array(1),Z=>(dt[0]=+Z,dt[0]));var dt;const It=3,Mt=5,Or=6;class Ai{constructor(M){this.options=Object.assign(Object.create(He),M),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(M){const{log:L,minZoom:N,maxZoom:$}=this.options;L&&console.time("total time");const ne=`prepare ${M.length} points`;L&&console.time(ne),this.points=M;const se=[];for(let te=0;te<M.length;te++){const pe=M[te];if(!pe.geometry)continue;const[Ee,ve]=pe.geometry.coordinates,be=ht(Ui(Ee)),Je=ht(Xr(ve));se.push(be,Je,1/0,te,-1,1),this.options.reduce&&se.push(0)}let he=this.trees[$+1]=this._createTree(se);L&&console.timeEnd(ne);for(let te=$;te>=N;te--){const pe=+Date.now();he=this.trees[te]=this._createTree(this._cluster(he,te)),L&&console.log("z%d: %d clusters in %dms",te,he.numItems,+Date.now()-pe)}return L&&console.timeEnd("total time"),this}getClusters(M,L){let N=((M[0]+180)%360+360)%360-180;const $=Math.max(-90,Math.min(90,M[1]));let ne=M[2]===180?180:((M[2]+180)%360+360)%360-180;const se=Math.max(-90,Math.min(90,M[3]));if(M[2]-M[0]>=360)N=-180,ne=180;else if(N>ne){const ve=this.getClusters([N,$,180,se],L),be=this.getClusters([-180,$,ne,se],L);return ve.concat(be)}const he=this.trees[this._limitZoom(L)],te=he.range(Ui(N),Xr(se),Ui(ne),Xr($)),pe=he.data,Ee=[];for(const ve of te){const be=this.stride*ve;Ee.push(pe[be+Mt]>1?Kr(pe,be,this.clusterProps):this.points[pe[be+It]])}return Ee}getChildren(M){const L=this._getOriginId(M),N=this._getOriginZoom(M),$="No cluster with the specified id.",ne=this.trees[N];if(!ne)throw new Error($);const se=ne.data;if(L*this.stride>=se.length)throw new Error($);const he=this.options.radius/(this.options.extent*Math.pow(2,N-1)),te=ne.within(se[L*this.stride],se[L*this.stride+1],he),pe=[];for(const Ee of te){const ve=Ee*this.stride;se[ve+4]===M&&pe.push(se[ve+Mt]>1?Kr(se,ve,this.clusterProps):this.points[se[ve+It]])}if(pe.length===0)throw new Error($);return pe}getLeaves(M,L,N){const $=[];return this._appendLeaves($,M,L=L||10,N=N||0,0),$}getTile(M,L,N){const $=this.trees[this._limitZoom(M)],ne=Math.pow(2,M),{extent:se,radius:he}=this.options,te=he/se,pe=(N-te)/ne,Ee=(N+1+te)/ne,ve={features:[]};return this._addTileFeatures($.range((L-te)/ne,pe,(L+1+te)/ne,Ee),$.data,L,N,ne,ve),L===0&&this._addTileFeatures($.range(1-te/ne,pe,1,Ee),$.data,ne,N,ne,ve),L===ne-1&&this._addTileFeatures($.range(0,pe,te/ne,Ee),$.data,-1,N,ne,ve),ve.features.length?ve:null}getClusterExpansionZoom(M){let L=this._getOriginZoom(M)-1;for(;L<=this.options.maxZoom;){const N=this.getChildren(M);if(L++,N.length!==1)break;M=N[0].properties.cluster_id}return L}_appendLeaves(M,L,N,$,ne){const se=this.getChildren(L);for(const he of se){const te=he.properties;if(te&&te.cluster?ne+te.point_count<=$?ne+=te.point_count:ne=this._appendLeaves(M,te.cluster_id,N,$,ne):ne<$?ne++:M.push(he),M.length===N)break}return ne}_createTree(M){const L=new x.au(M.length/this.stride|0,this.options.nodeSize,Float32Array);for(let N=0;N<M.length;N+=this.stride)L.add(M[N],M[N+1]);return L.finish(),L.data=M,L}_addTileFeatures(M,L,N,$,ne,se){for(const he of M){const te=he*this.stride,pe=L[te+Mt]>1;let Ee,ve,be;if(pe)Ee=Fi(L,te,this.clusterProps),ve=L[te],be=L[te+1];else{const st=this.points[L[te+It]];Ee=st.properties;const[Et,ct]=st.geometry.coordinates;ve=Ui(Et),be=Xr(ct)}const Je={type:1,geometry:[[Math.round(this.options.extent*(ve*ne-N)),Math.round(this.options.extent*(be*ne-$))]],tags:Ee};let ot;ot=pe||this.options.generateId?L[te+It]:this.points[L[te+It]].id,ot!==void 0&&(Je.id=ot),se.features.push(Je)}}_limitZoom(M){return Math.max(this.options.minZoom,Math.min(Math.floor(+M),this.options.maxZoom+1))}_cluster(M,L){const{radius:N,extent:$,reduce:ne,minPoints:se}=this.options,he=N/($*Math.pow(2,L)),te=M.data,pe=[],Ee=this.stride;for(let ve=0;ve<te.length;ve+=Ee){if(te[ve+2]<=L)continue;te[ve+2]=L;const be=te[ve],Je=te[ve+1],ot=M.within(te[ve],te[ve+1],he),st=te[ve+Mt];let Et=st;for(const ct of ot){const Gt=ct*Ee;te[Gt+2]>L&&(Et+=te[Gt+Mt])}if(Et>st&&Et>=se){let ct,Gt=be*st,jt=Je*st,ui=-1;const mt=((ve/Ee|0)<<5)+(L+1)+this.points.length;for(const ei of ot){const Mi=ei*Ee;if(te[Mi+2]<=L)continue;te[Mi+2]=L;const lr=te[Mi+Mt];Gt+=te[Mi]*lr,jt+=te[Mi+1]*lr,te[Mi+4]=mt,ne&&(ct||(ct=this._map(te,ve,!0),ui=this.clusterProps.length,this.clusterProps.push(ct)),ne(ct,this._map(te,Mi)))}te[ve+4]=mt,pe.push(Gt/Et,jt/Et,1/0,mt,-1,Et),ne&&pe.push(ui)}else{for(let ct=0;ct<Ee;ct++)pe.push(te[ve+ct]);if(Et>1)for(const ct of ot){const Gt=ct*Ee;if(!(te[Gt+2]<=L)){te[Gt+2]=L;for(let jt=0;jt<Ee;jt++)pe.push(te[Gt+jt])}}}}return pe}_getOriginId(M){return M-this.points.length>>5}_getOriginZoom(M){return(M-this.points.length)%32}_map(M,L,N){if(M[L+Mt]>1){const se=this.clusterProps[M[L+Or]];return N?Object.assign({},se):se}const $=this.points[M[L+It]].properties,ne=this.options.map($);return N&&ne===$?Object.assign({},ne):ne}}function Kr(Z,M,L){return{type:"Feature",id:Z[M+It],properties:Fi(Z,M,L),geometry:{type:"Point",coordinates:[(N=Z[M],360*(N-.5)),$s(Z[M+1])]}};var N}function Fi(Z,M,L){const N=Z[M+Mt],$=N>=1e4?`${Math.round(N/1e3)}k`:N>=1e3?Math.round(N/100)/10+"k":N,ne=Z[M+Or],se=ne===-1?{}:Object.assign({},L[ne]);return Object.assign(se,{cluster:!0,cluster_id:Z[M+It],point_count:N,point_count_abbreviated:$})}function Ui(Z){return Z/360+.5}function Xr(Z){const M=Math.sin(Z*Math.PI/180),L=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return L<0?0:L>1?1:L}function $s(Z){const M=(180-360*Z)*Math.PI/180;return 360*Math.atan(Math.exp(M))/Math.PI-90}function qn(Z,M,L,N){for(var $,ne=N,se=L-M>>1,he=L-M,te=Z[M],pe=Z[M+1],Ee=Z[L],ve=Z[L+1],be=M+3;be<L;be+=3){var Je=Lo(Z[be],Z[be+1],te,pe,Ee,ve);if(Je>ne)$=be,ne=Je;else if(Je===ne){var ot=Math.abs(be-se);ot<he&&($=be,he=ot)}}ne>N&&($-M>3&&qn(Z,M,$,N),Z[$+2]=ne,L-$>3&&qn(Z,$,L,N))}function Lo(Z,M,L,N,$,ne){var se=$-L,he=ne-N;if(se!==0||he!==0){var te=((Z-L)*se+(M-N)*he)/(se*se+he*he);te>1?(L=$,N=ne):te>0&&(L+=se*te,N+=he*te)}return(se=Z-L)*se+(he=M-N)*he}function Zn(Z,M,L,N){var $={id:Z===void 0?null:Z,type:M,geometry:L,tags:N,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ne){var se=ne.geometry,he=ne.type;if(he==="Point"||he==="MultiPoint"||he==="LineString")Gn(ne,se);else if(he==="Polygon"||he==="MultiLineString")for(var te=0;te<se.length;te++)Gn(ne,se[te]);else if(he==="MultiPolygon")for(te=0;te<se.length;te++)for(var pe=0;pe<se[te].length;pe++)Gn(ne,se[te][pe])}($),$}function Gn(Z,M){for(var L=0;L<M.length;L+=3)Z.minX=Math.min(Z.minX,M[L]),Z.minY=Math.min(Z.minY,M[L+1]),Z.maxX=Math.max(Z.maxX,M[L]),Z.maxY=Math.max(Z.maxY,M[L+1])}function Hn(Z,M,L,N){if(M.geometry){var $=M.geometry.coordinates,ne=M.geometry.type,se=Math.pow(L.tolerance/((1<<L.maxZoom)*L.extent),2),he=[],te=M.id;if(L.promoteId?te=M.properties[L.promoteId]:L.generateId&&(te=N||0),ne==="Point")Si($,he);else if(ne==="MultiPoint")for(var pe=0;pe<$.length;pe++)Si($[pe],he);else if(ne==="LineString")os($,he,se,!1);else if(ne==="MultiLineString"){if(L.lineMetrics){for(pe=0;pe<$.length;pe++)os($[pe],he=[],se,!1),Z.push(Zn(te,"LineString",he,M.properties));return}_e($,he,se,!1)}else if(ne==="Polygon")_e($,he,se,!0);else{if(ne!=="MultiPolygon"){if(ne==="GeometryCollection"){for(pe=0;pe<M.geometry.geometries.length;pe++)Hn(Z,{id:te,geometry:M.geometry.geometries[pe],properties:M.properties},L,N);return}throw new Error("Input data is not a valid GeoJSON object.")}for(pe=0;pe<$.length;pe++){var Ee=[];_e($[pe],Ee,se,!0),he.push(Ee)}}Z.push(Zn(te,ne,he,M.properties))}}function Si(Z,M){M.push(ls(Z[0])),M.push(Za(Z[1])),M.push(0)}function os(Z,M,L,N){for(var $,ne,se=0,he=0;he<Z.length;he++){var te=ls(Z[he][0]),pe=Za(Z[he][1]);M.push(te),M.push(pe),M.push(0),he>0&&(se+=N?($*pe-te*ne)/2:Math.sqrt(Math.pow(te-$,2)+Math.pow(pe-ne,2))),$=te,ne=pe}var Ee=M.length-3;M[2]=1,qn(M,0,Ee,L),M[Ee+2]=1,M.size=Math.abs(se),M.start=0,M.end=M.size}function _e(Z,M,L,N){for(var $=0;$<Z.length;$++){var ne=[];os(Z[$],ne,L,N),M.push(ne)}}function ls(Z){return Z/360+.5}function Za(Z){var M=Math.sin(Z*Math.PI/180),L=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return L<0?0:L>1?1:L}function Ct(Z,M,L,N,$,ne,se,he){if(N/=M,ne>=(L/=M)&&se<N)return Z;if(se<L||ne>=N)return null;for(var te=[],pe=0;pe<Z.length;pe++){var Ee=Z[pe],ve=Ee.geometry,be=Ee.type,Je=$===0?Ee.minX:Ee.minY,ot=$===0?Ee.maxX:Ee.maxY;if(Je>=L&&ot<N)te.push(Ee);else if(!(ot<L||Je>=N)){var st=[];if(be==="Point"||be==="MultiPoint")Bi(ve,st,L,N,$);else if(be==="LineString")fn(ve,st,L,N,$,!1,he.lineMetrics);else if(be==="MultiLineString")Zs(ve,st,L,N,$,!1);else if(be==="Polygon")Zs(ve,st,L,N,$,!0);else if(be==="MultiPolygon")for(var Et=0;Et<ve.length;Et++){var ct=[];Zs(ve[Et],ct,L,N,$,!0),ct.length&&st.push(ct)}if(st.length){if(he.lineMetrics&&be==="LineString"){for(Et=0;Et<st.length;Et++)te.push(Zn(Ee.id,be,st[Et],Ee.tags));continue}be!=="LineString"&&be!=="MultiLineString"||(st.length===1?(be="LineString",st=st[0]):be="MultiLineString"),be!=="Point"&&be!=="MultiPoint"||(be=st.length===3?"Point":"MultiPoint"),te.push(Zn(Ee.id,be,st,Ee.tags))}}}return te.length?te:null}function Bi(Z,M,L,N,$){for(var ne=0;ne<Z.length;ne+=3){var se=Z[ne+$];se>=L&&se<=N&&(M.push(Z[ne]),M.push(Z[ne+1]),M.push(Z[ne+2]))}}function fn(Z,M,L,N,$,ne,se){for(var he,te,pe=qs(Z),Ee=$===0?cs:Hs,ve=Z.start,be=0;be<Z.length-3;be+=3){var Je=Z[be],ot=Z[be+1],st=Z[be+2],Et=Z[be+3],ct=Z[be+4],Gt=$===0?Je:ot,jt=$===0?Et:ct,ui=!1;se&&(he=Math.sqrt(Math.pow(Je-Et,2)+Math.pow(ot-ct,2))),Gt<L?jt>L&&(te=Ee(pe,Je,ot,Et,ct,L),se&&(pe.start=ve+he*te)):Gt>N?jt<N&&(te=Ee(pe,Je,ot,Et,ct,N),se&&(pe.start=ve+he*te)):Gs(pe,Je,ot,st),jt<L&&Gt>=L&&(te=Ee(pe,Je,ot,Et,ct,L),ui=!0),jt>N&&Gt<=N&&(te=Ee(pe,Je,ot,Et,ct,N),ui=!0),!ne&&ui&&(se&&(pe.end=ve+he*te),M.push(pe),pe=qs(Z)),se&&(ve+=he)}var mt=Z.length-3;Je=Z[mt],ot=Z[mt+1],st=Z[mt+2],(Gt=$===0?Je:ot)>=L&&Gt<=N&&Gs(pe,Je,ot,st),mt=pe.length-3,ne&&mt>=3&&(pe[mt]!==pe[0]||pe[mt+1]!==pe[1])&&Gs(pe,pe[0],pe[1],pe[2]),pe.length&&M.push(pe)}function qs(Z){var M=[];return M.size=Z.size,M.start=Z.start,M.end=Z.end,M}function Zs(Z,M,L,N,$,ne){for(var se=0;se<Z.length;se++)fn(Z[se],M,L,N,$,ne,!1)}function Gs(Z,M,L,N){Z.push(M),Z.push(L),Z.push(N)}function cs(Z,M,L,N,$,ne){var se=(ne-M)/(N-M);return Z.push(ne),Z.push(L+($-L)*se),Z.push(1),se}function Hs(Z,M,L,N,$,ne){var se=(ne-L)/($-L);return Z.push(M+(N-M)*se),Z.push(ne),Z.push(1),se}function Ga(Z,M){for(var L=[],N=0;N<Z.length;N++){var $,ne=Z[N],se=ne.type;if(se==="Point"||se==="MultiPoint"||se==="LineString")$=Re(ne.geometry,M);else if(se==="MultiLineString"||se==="Polygon"){$=[];for(var he=0;he<ne.geometry.length;he++)$.push(Re(ne.geometry[he],M))}else if(se==="MultiPolygon")for($=[],he=0;he<ne.geometry.length;he++){for(var te=[],pe=0;pe<ne.geometry[he].length;pe++)te.push(Re(ne.geometry[he][pe],M));$.push(te)}L.push(Zn(ne.id,se,$,ne.tags))}return L}function Re(Z,M){var L=[];L.size=Z.size,Z.start!==void 0&&(L.start=Z.start,L.end=Z.end);for(var N=0;N<Z.length;N+=3)L.push(Z[N]+M,Z[N+1],Z[N+2]);return L}function Sr(Z,M){if(Z.transformed)return Z;var L,N,$,ne=1<<Z.z,se=Z.x,he=Z.y;for(L=0;L<Z.features.length;L++){var te=Z.features[L],pe=te.geometry,Ee=te.type;if(te.geometry=[],Ee===1)for(N=0;N<pe.length;N+=2)te.geometry.push(or(pe[N],pe[N+1],M,ne,se,he));else for(N=0;N<pe.length;N++){var ve=[];for($=0;$<pe[N].length;$+=2)ve.push(or(pe[N][$],pe[N][$+1],M,ne,se,he));te.geometry.push(ve)}}return Z.transformed=!0,Z}function or(Z,M,L,N,$,ne){return[Math.round(L*(Z*N-$)),Math.round(L*(M*N-ne))]}function Ha(Z,M,L,N,$){for(var ne=M===$.maxZoom?0:$.tolerance/((1<<M)*$.extent),se={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:L,y:N,z:M,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},he=0;he<Z.length;he++){se.numFeatures++,us(se,Z[he],ne,$);var te=Z[he].minX,pe=Z[he].minY,Ee=Z[he].maxX,ve=Z[he].maxY;te<se.minX&&(se.minX=te),pe<se.minY&&(se.minY=pe),Ee>se.maxX&&(se.maxX=Ee),ve>se.maxY&&(se.maxY=ve)}return se}function us(Z,M,L,N){var $=M.geometry,ne=M.type,se=[];if(ne==="Point"||ne==="MultiPoint")for(var he=0;he<$.length;he+=3)se.push($[he]),se.push($[he+1]),Z.numPoints++,Z.numSimplified++;else if(ne==="LineString")De(se,$,Z,L,!1,!1);else if(ne==="MultiLineString"||ne==="Polygon")for(he=0;he<$.length;he++)De(se,$[he],Z,L,ne==="Polygon",he===0);else if(ne==="MultiPolygon")for(var te=0;te<$.length;te++){var pe=$[te];for(he=0;he<pe.length;he++)De(se,pe[he],Z,L,!0,he===0)}if(se.length){var Ee=M.tags||null;if(ne==="LineString"&&N.lineMetrics){for(var ve in Ee={},M.tags)Ee[ve]=M.tags[ve];Ee.mapbox_clip_start=$.start/$.size,Ee.mapbox_clip_end=$.end/$.size}var be={geometry:se,type:ne==="Polygon"||ne==="MultiPolygon"?3:ne==="LineString"||ne==="MultiLineString"?2:1,tags:Ee};M.id!==null&&(be.id=M.id),Z.features.push(be)}}function De(Z,M,L,N,$,ne){var se=N*N;if(N>0&&M.size<($?se:N))L.numPoints+=M.length/3;else{for(var he=[],te=0;te<M.length;te+=3)(N===0||M[te+2]>se)&&(L.numSimplified++,he.push(M[te]),he.push(M[te+1])),L.numPoints++;$&&function(pe,Ee){for(var ve=0,be=0,Je=pe.length,ot=Je-2;be<Je;ot=be,be+=2)ve+=(pe[be]-pe[ot])*(pe[be+1]+pe[ot+1]);if(ve>0===Ee)for(be=0,Je=pe.length;be<Je/2;be+=2){var st=pe[be],Et=pe[be+1];pe[be]=pe[Je-2-be],pe[be+1]=pe[Je-1-be],pe[Je-2-be]=st,pe[Je-1-be]=Et}}(he,ne),Z.push(he)}}function yt(Z,M){var L=(M=this.options=function($,ne){for(var se in ne)$[se]=ne[se];return $}(Object.create(this.options),M)).debug;if(L&&console.time("preprocess data"),M.maxZoom<0||M.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(M.promoteId&&M.generateId)throw new Error("promoteId and generateId cannot be used together.");var N=function($,ne){var se=[];if($.type==="FeatureCollection")for(var he=0;he<$.features.length;he++)Hn(se,$.features[he],ne,he);else Hn(se,$.type==="Feature"?$:{geometry:$},ne);return se}(Z,M);this.tiles={},this.tileCoords=[],L&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",M.indexMaxZoom,M.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),N=function($,ne){var se=ne.buffer/ne.extent,he=$,te=Ct($,1,-1-se,se,0,-1,2,ne),pe=Ct($,1,1-se,2+se,0,-1,2,ne);return(te||pe)&&(he=Ct($,1,-se,1+se,0,-1,2,ne)||[],te&&(he=Ga(te,1).concat(he)),pe&&(he=he.concat(Ga(pe,-1)))),he}(N,M),N.length&&this.splitTile(N,0,0,0),L&&(N.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pt(Z,M,L){return 32*((1<<Z)*L+M)+Z}function Oi(Z,M){return M?Z.properties[M]:Z.id}function Nr(Z,M){if(Z==null)return!0;if(Z.type==="Feature")return Oi(Z,M)!=null;if(Z.type==="FeatureCollection"){const L=new Set;for(const N of Z.features){const $=Oi(N,M);if($==null||L.has($))return!1;L.add($)}return!0}return!1}function ft(Z,M){const L=new Map;if(Z!=null)if(Z.type==="Feature")L.set(Oi(Z,M),Z);else for(const N of Z.features)L.set(Oi(N,M),N);return L}yt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},yt.prototype.splitTile=function(Z,M,L,N,$,ne,se){for(var he=[Z,M,L,N],te=this.options,pe=te.debug;he.length;){N=he.pop(),L=he.pop(),M=he.pop(),Z=he.pop();var Ee=1<<M,ve=pt(M,L,N),be=this.tiles[ve];if(!be&&(pe>1&&console.time("creation"),be=this.tiles[ve]=Ha(Z,M,L,N,te),this.tileCoords.push({z:M,x:L,y:N}),pe)){pe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",M,L,N,be.numFeatures,be.numPoints,be.numSimplified),console.timeEnd("creation"));var Je="z"+M;this.stats[Je]=(this.stats[Je]||0)+1,this.total++}if(be.source=Z,$){if(M===te.maxZoom||M===$)continue;var ot=1<<$-M;if(L!==Math.floor(ne/ot)||N!==Math.floor(se/ot))continue}else if(M===te.indexMaxZoom||be.numPoints<=te.indexMaxPoints)continue;if(be.source=null,Z.length!==0){pe>1&&console.time("clipping");var st,Et,ct,Gt,jt,ui,mt=.5*te.buffer/te.extent,ei=.5-mt,Mi=.5+mt,lr=1+mt;st=Et=ct=Gt=null,jt=Ct(Z,Ee,L-mt,L+Mi,0,be.minX,be.maxX,te),ui=Ct(Z,Ee,L+ei,L+lr,0,be.minX,be.maxX,te),Z=null,jt&&(st=Ct(jt,Ee,N-mt,N+Mi,1,be.minY,be.maxY,te),Et=Ct(jt,Ee,N+ei,N+lr,1,be.minY,be.maxY,te),jt=null),ui&&(ct=Ct(ui,Ee,N-mt,N+Mi,1,be.minY,be.maxY,te),Gt=Ct(ui,Ee,N+ei,N+lr,1,be.minY,be.maxY,te),ui=null),pe>1&&console.timeEnd("clipping"),he.push(st||[],M+1,2*L,2*N),he.push(Et||[],M+1,2*L,2*N+1),he.push(ct||[],M+1,2*L+1,2*N),he.push(Gt||[],M+1,2*L+1,2*N+1)}}},yt.prototype.getTile=function(Z,M,L){var N=this.options,$=N.extent,ne=N.debug;if(Z<0||Z>24)return null;var se=1<<Z,he=pt(Z,M=(M%se+se)%se,L);if(this.tiles[he])return Sr(this.tiles[he],$);ne>1&&console.log("drilling down to z%d-%d-%d",Z,M,L);for(var te,pe=Z,Ee=M,ve=L;!te&&pe>0;)pe--,Ee=Math.floor(Ee/2),ve=Math.floor(ve/2),te=this.tiles[pt(pe,Ee,ve)];return te&&te.source?(ne>1&&console.log("found parent tile z%d-%d-%d",pe,Ee,ve),ne>1&&console.time("drilling down"),this.splitTile(te.source,pe,Ee,ve,Z,M,L),ne>1&&console.timeEnd("drilling down"),this.tiles[he]?Sr(this.tiles[he],$):null):null};class Wn extends K{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(M,L){return x._(this,void 0,void 0,function*(){const N=M.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const $=this._geoJSONIndex.getTile(N.z,N.x,N.y);if(!$)return null;const ne=new class{constructor(he){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=x.W,this.length=he.length,this._features=he}feature(he){return new class{constructor(te){this._feature=te,this.extent=x.W,this.type=te.type,this.properties=te.tags,"id"in te&&!isNaN(te.id)&&(this.id=parseInt(te.id,10))}loadGeometry(){if(this._feature.type===1){const te=[];for(const pe of this._feature.geometry)te.push([new x.P(pe[0],pe[1])]);return te}{const te=[];for(const pe of this._feature.geometry){const Ee=[];for(const ve of pe)Ee.push(new x.P(ve[0],ve[1]));te.push(Ee)}return te}}toGeoJSON(te,pe,Ee){return $e.call(this,te,pe,Ee)}}(this._features[he])}}($.features);let se=pn(ne);return se.byteOffset===0&&se.byteLength===se.buffer.byteLength||(se=new Uint8Array(se)),{vectorTile:ne,rawData:se.buffer}})}loadData(M){return x._(this,void 0,void 0,function*(){var L;(L=this._pendingRequest)===null||L===void 0||L.abort();const N=!!(M&&M.request&&M.request.collectResourceTiming)&&new x.bs(M.request);this._pendingRequest=new AbortController;try{let $=yield this.loadGeoJSON(M,this._pendingRequest);if(delete this._pendingRequest,typeof $!="object")throw new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`);if(ze($,!0),M.filter){const se=x.by(M.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map(te=>`${te.key}: ${te.message}`).join(", "));$={type:"FeatureCollection",features:$.features.filter(te=>se.value.evaluate({zoom:0},te))}}this._geoJSONIndex=M.cluster?new Ai(function({superclusterOptions:se,clusterProperties:he}){if(!he||!se)return se;const te={},pe={},Ee={accumulated:null,zoom:0},ve={properties:null},be=Object.keys(he);for(const Je of be){const[ot,st]=he[Je],Et=x.by(st),ct=x.by(typeof ot=="string"?[ot,["accumulated"],["get",Je]]:ot);te[Je]=Et.value,pe[Je]=ct.value}return se.map=Je=>{ve.properties=Je;const ot={};for(const st of be)ot[st]=te[st].evaluate(Ee,ve);return ot},se.reduce=(Je,ot)=>{ve.properties=ot;for(const st of be)Ee.accumulated=Je[st],Je[st]=pe[st].evaluate(Ee,ve)},se}(M)).load($.features):function(se,he){return new yt(se,he)}($,M.geojsonVtOptions),this.loaded={};const ne={};if(N){const se=N.finish();se&&(ne.resourceTiming={},ne.resourceTiming[M.source]=JSON.parse(JSON.stringify(se)))}return ne}catch($){if(delete this._pendingRequest,x.bz($))return{abandoned:!0};throw $}})}reloadTile(M){const L=this.loaded;return L&&L[M.uid]?super.reloadTile(M):this.loadTile(M)}loadGeoJSON(M,L){return x._(this,void 0,void 0,function*(){const{promoteId:N}=M;if(M.request){const $=yield x.h(M.request,L);return this._dataUpdateable=Nr($.data,N)?ft($.data,N):void 0,$.data}if(typeof M.data=="string")try{const $=JSON.parse(M.data);return this._dataUpdateable=Nr($,N)?ft($,N):void 0,$}catch{throw new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`)}if(!M.dataDiff)throw new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${M.source}`);return function($,ne,se){var he,te,pe,Ee;if(ne.removeAll&&$.clear(),ne.remove)for(const ve of ne.remove)$.delete(ve);if(ne.add)for(const ve of ne.add){const be=Oi(ve,se);be!=null&&$.set(be,ve)}if(ne.update)for(const ve of ne.update){let be=$.get(ve.id);if(be==null)continue;const Je=!ve.removeAllProperties&&(((he=ve.removeProperties)===null||he===void 0?void 0:he.length)>0||((te=ve.addOrUpdateProperties)===null||te===void 0?void 0:te.length)>0);if((ve.newGeometry||ve.removeAllProperties||Je)&&(be=Object.assign({},be),$.set(ve.id,be),Je&&(be.properties=Object.assign({},be.properties))),ve.newGeometry&&(be.geometry=ve.newGeometry),ve.removeAllProperties)be.properties={};else if(((pe=ve.removeProperties)===null||pe===void 0?void 0:pe.length)>0)for(const ot of ve.removeProperties)Object.prototype.hasOwnProperty.call(be.properties,ot)&&delete be.properties[ot];if(((Ee=ve.addOrUpdateProperties)===null||Ee===void 0?void 0:Ee.length)>0)for(const{key:ot,value:st}of ve.addOrUpdateProperties)be.properties[ot]=st}}(this._dataUpdateable,M.dataDiff,N),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(M){return x._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(M){return this._geoJSONIndex.getClusterExpansionZoom(M.clusterId)}getClusterChildren(M){return this._geoJSONIndex.getChildren(M.clusterId)}getClusterLeaves(M){return this._geoJSONIndex.getLeaves(M.clusterId,M.limit,M.offset)}}class zn{constructor(M){this.self=M,this.actor=new x.C(M),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(L,N)=>{if(this.externalWorkerSourceTypes[L])throw new Error(`Worker source with name "${L}" already registered.`);this.externalWorkerSourceTypes[L]=N},this.self.addProtocol=x.bf,this.self.removeProtocol=x.bg,this.self.registerRTLTextPlugin=L=>{if(x.bA.isParsed())throw new Error("RTL text plugin already registered.");x.bA.setMethods(L)},this.actor.registerMessageHandler("loadDEMTile",(L,N)=>this._getDEMWorkerSource(L,N.source).loadTile(N)),this.actor.registerMessageHandler("removeDEMTile",(L,N)=>x._(this,void 0,void 0,function*(){this._getDEMWorkerSource(L,N.source).removeTile(N)})),this.actor.registerMessageHandler("getClusterExpansionZoom",(L,N)=>x._(this,void 0,void 0,function*(){return this._getWorkerSource(L,N.type,N.source).getClusterExpansionZoom(N)})),this.actor.registerMessageHandler("getClusterChildren",(L,N)=>x._(this,void 0,void 0,function*(){return this._getWorkerSource(L,N.type,N.source).getClusterChildren(N)})),this.actor.registerMessageHandler("getClusterLeaves",(L,N)=>x._(this,void 0,void 0,function*(){return this._getWorkerSource(L,N.type,N.source).getClusterLeaves(N)})),this.actor.registerMessageHandler("loadData",(L,N)=>this._getWorkerSource(L,N.type,N.source).loadData(N)),this.actor.registerMessageHandler("loadTile",(L,N)=>this._getWorkerSource(L,N.type,N.source).loadTile(N)),this.actor.registerMessageHandler("reloadTile",(L,N)=>this._getWorkerSource(L,N.type,N.source).reloadTile(N)),this.actor.registerMessageHandler("abortTile",(L,N)=>this._getWorkerSource(L,N.type,N.source).abortTile(N)),this.actor.registerMessageHandler("removeTile",(L,N)=>this._getWorkerSource(L,N.type,N.source).removeTile(N)),this.actor.registerMessageHandler("removeSource",(L,N)=>x._(this,void 0,void 0,function*(){if(!this.workerSources[L]||!this.workerSources[L][N.type]||!this.workerSources[L][N.type][N.source])return;const $=this.workerSources[L][N.type][N.source];delete this.workerSources[L][N.type][N.source],$.removeSource!==void 0&&$.removeSource(N)})),this.actor.registerMessageHandler("removeMap",L=>x._(this,void 0,void 0,function*(){delete this.layerIndexes[L],delete this.availableImages[L],delete this.workerSources[L],delete this.demWorkerSources[L]})),this.actor.registerMessageHandler("setReferrer",(L,N)=>x._(this,void 0,void 0,function*(){this.referrer=N})),this.actor.registerMessageHandler("syncRTLPluginState",(L,N)=>this._syncRTLPluginState(L,N)),this.actor.registerMessageHandler("importScript",(L,N)=>x._(this,void 0,void 0,function*(){this.self.importScripts(N)})),this.actor.registerMessageHandler("setImages",(L,N)=>this._setImages(L,N)),this.actor.registerMessageHandler("updateLayers",(L,N)=>x._(this,void 0,void 0,function*(){this._getLayerIndex(L).update(N.layers,N.removedIds)})),this.actor.registerMessageHandler("setLayers",(L,N)=>x._(this,void 0,void 0,function*(){this._getLayerIndex(L).replace(N)}))}_setImages(M,L){return x._(this,void 0,void 0,function*(){this.availableImages[M]=L;for(const N in this.workerSources[M]){const $=this.workerSources[M][N];for(const ne in $)$[ne].availableImages=L}})}_syncRTLPluginState(M,L){return x._(this,void 0,void 0,function*(){if(x.bA.isParsed())return x.bA.getState();if(L.pluginStatus!=="loading")return x.bA.setState(L),L;const N=L.pluginURL;if(this.self.importScripts(N),x.bA.isParsed()){const $={pluginStatus:"loaded",pluginURL:N};return x.bA.setState($),$}throw x.bA.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${N}`)})}_getAvailableImages(M){let L=this.availableImages[M];return L||(L=[]),L}_getLayerIndex(M){let L=this.layerIndexes[M];return L||(L=this.layerIndexes[M]=new d),L}_getWorkerSource(M,L,N){if(this.workerSources[M]||(this.workerSources[M]={}),this.workerSources[M][L]||(this.workerSources[M][L]={}),!this.workerSources[M][L][N]){const $={sendAsync:(ne,se)=>(ne.targetMapId=M,this.actor.sendAsync(ne,se))};switch(L){case"vector":this.workerSources[M][L][N]=new K($,this._getLayerIndex(M),this._getAvailableImages(M));break;case"geojson":this.workerSources[M][L][N]=new Wn($,this._getLayerIndex(M),this._getAvailableImages(M));break;default:this.workerSources[M][L][N]=new this.externalWorkerSourceTypes[L]($,this._getLayerIndex(M),this._getAvailableImages(M))}}return this.workerSources[M][L][N]}_getDEMWorkerSource(M,L){return this.demWorkerSources[M]||(this.demWorkerSources[M]={}),this.demWorkerSources[M][L]||(this.demWorkerSources[M][L]=new U),this.demWorkerSources[M][L]}}return x.i(self)&&(self.worker=new zn(self)),zn}),_("index",["exports","./shared"],function(x,d){var R="4.1.2";let W,re;const K={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:f=>new Promise((t,a)=>{const c=requestAnimationFrame(t);f.signal.addEventListener("abort",()=>{cancelAnimationFrame(c),a(d.c())})}),getImageData(f,t=0){return this.getImageCanvasContext(f).getImageData(-t,-t,f.width+2*t,f.height+2*t)},getImageCanvasContext(f){const t=window.document.createElement("canvas"),a=t.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return t.width=f.width,t.height=f.height,a.drawImage(f,0,0,f.width,f.height),a},resolveURL:f=>(W||(W=document.createElement("a")),W.href=f,W.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(re==null&&(re=matchMedia("(prefers-reduced-motion: reduce)")),re.matches)}};class U{static testProp(t){if(!U.docStyle)return t[0];for(let a=0;a<t.length;a++)if(t[a]in U.docStyle)return t[a];return t[0]}static create(t,a,c){const u=window.document.createElement(t);return a!==void 0&&(u.className=a),c&&c.appendChild(u),u}static createNS(t,a){return window.document.createElementNS(t,a)}static disableDrag(){U.docStyle&&U.selectProp&&(U.userSelect=U.docStyle[U.selectProp],U.docStyle[U.selectProp]="none")}static enableDrag(){U.docStyle&&U.selectProp&&(U.docStyle[U.selectProp]=U.userSelect)}static setTransform(t,a){t.style[U.transformProp]=a}static addEventListener(t,a,c,u={}){t.addEventListener(a,c,"passive"in u?u:u.capture)}static removeEventListener(t,a,c,u={}){t.removeEventListener(a,c,"passive"in u?u:u.capture)}static suppressClickInternal(t){t.preventDefault(),t.stopPropagation(),window.removeEventListener("click",U.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",U.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",U.suppressClickInternal,!0)},0)}static getScale(t){const a=t.getBoundingClientRect();return{x:a.width/t.offsetWidth||1,y:a.height/t.offsetHeight||1,boundingClientRect:a}}static getPoint(t,a,c){const u=a.boundingClientRect;return new d.P((c.clientX-u.left)/a.x-t.clientLeft,(c.clientY-u.top)/a.y-t.clientTop)}static mousePos(t,a){const c=U.getScale(t);return U.getPoint(t,c,a)}static touchPos(t,a){const c=[],u=U.getScale(t);for(let m=0;m<a.length;m++)c.push(U.getPoint(t,u,a[m]));return c}static mouseButton(t){return t.button}static remove(t){t.parentNode&&t.parentNode.removeChild(t)}}U.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,U.selectProp=U.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),U.transformProp=U.testProp(["transform","WebkitTransform"]);const Te={supported:!1,testSupport:function(f){!$e&&ze&&(oe?Q(f):ke=f)}};let ke,ze,$e=!1,oe=!1;function Q(f){const t=f.createTexture();f.bindTexture(f.TEXTURE_2D,t);try{if(f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,ze),f.isContextLost())return;Te.supported=!0}catch{}f.deleteTexture(t),$e=!0}var le,xe;typeof document<"u"&&(ze=document.createElement("img"),ze.onload=function(){ke&&Q(ke),ke=null,oe=!0},ze.onerror=function(){$e=!0,ke=null},ze.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(f){let t,a,c,u;f.resetRequestQueue=()=>{t=[],a=0,c=0,u={}},f.addThrottleControl=C=>{const k=c++;return u[k]=C,k},f.removeThrottleControl=C=>{delete u[C],w()},f.getImage=(C,k,z=!0)=>new Promise((A,B)=>{Te.supported&&(C.headers||(C.headers={}),C.headers.accept="image/webp,*/*"),d.e(C,{type:"image"}),t.push({abortController:k,requestParameters:C,supportImageRefresh:z,state:"queued",onError:G=>{B(G)},onSuccess:G=>{A(G)}}),w()});const m=C=>d._(this,void 0,void 0,function*(){C.state="running";const{requestParameters:k,supportImageRefresh:z,onError:A,onSuccess:B,abortController:G}=C,q=z===!1&&!d.i(self)&&!d.g(k.url)&&(!k.headers||Object.keys(k.headers).reduce((ie,fe)=>ie&&fe==="accept",!0));a++;const X=q?S(k,G):d.m(k,G);try{const ie=yield X;delete C.abortController,C.state="completed",ie.data instanceof HTMLImageElement||d.b(ie.data)?B(ie):ie.data&&B({data:yield(j=ie.data,typeof createImageBitmap=="function"?d.d(j):d.f(j)),cacheControl:ie.cacheControl,expires:ie.expires})}catch(ie){delete C.abortController,A(ie)}finally{a--,w()}var j}),w=()=>{const C=(()=>{for(const k of Object.keys(u))if(u[k]())return!0;return!1})()?d.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:d.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let k=a;k<C&&t.length>0;k++){const z=t.shift();z.abortController.signal.aborted?k--:m(z)}},S=(C,k)=>new Promise((z,A)=>{const B=new Image,G=C.url,q=C.credentials;q&&q==="include"?B.crossOrigin="use-credentials":(q&&q==="same-origin"||!d.s(G))&&(B.crossOrigin="anonymous"),k.signal.addEventListener("abort",()=>{B.src="",A(d.c())}),B.fetchPriority="high",B.onload=()=>{B.onerror=B.onload=null,z({data:B})},B.onerror=()=>{B.onerror=B.onload=null,k.signal.aborted||A(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},B.src=G})}(le||(le={})),le.resetRequestQueue(),function(f){f.Glyphs="Glyphs",f.Image="Image",f.Source="Source",f.SpriteImage="SpriteImage",f.SpriteJSON="SpriteJSON",f.Style="Style",f.Tile="Tile",f.Unknown="Unknown"}(xe||(xe={}));class je{constructor(t){this._transformRequestFn=t}transformRequest(t,a){return this._transformRequestFn&&this._transformRequestFn(t,a)||{url:t}}normalizeSpriteURL(t,a,c){const u=function(m){const w=m.match(Xe);if(!w)throw new Error(`Unable to parse URL "${m}"`);return{protocol:w[1],authority:w[2],path:w[3]||"/",params:w[4]?w[4].split("&"):[]}}(t);return u.path+=`${a}${c}`,function(m){const w=m.params.length?`?${m.params.join("&")}`:"";return`${m.protocol}://${m.authority}${m.path}${w}`}(u)}setTransformRequest(t){this._transformRequestFn=t}}const Xe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ke(f){var t=new d.A(3);return t[0]=f[0],t[1]=f[1],t[2]=f[2],t}var tt,Dt=function(f,t,a){return f[0]=t[0]-a[0],f[1]=t[1]-a[1],f[2]=t[2]-a[2],f};tt=new d.A(3),d.A!=Float32Array&&(tt[0]=0,tt[1]=0,tt[2]=0);var xt=function(f){var t=f[0],a=f[1];return t*t+a*a};function Ot(f){const t=[];if(typeof f=="string")t.push({id:"default",url:f});else if(f&&f.length>0){const a=[];for(const{id:c,url:u}of f){const m=`${c}${u}`;a.indexOf(m)===-1&&(a.push(m),t.push({id:c,url:u}))}}return t}(function(){var f=new d.A(2);d.A!=Float32Array&&(f[0]=0,f[1]=0)})();class Nt{constructor(t,a,c,u){this.context=t,this.format=c,this.texture=t.gl.createTexture(),this.update(a,u)}update(t,a,c){const{width:u,height:m}=t,w=!(this.size&&this.size[0]===u&&this.size[1]===m||c),{context:S}=this,{gl:C}=S;if(this.useMipmap=!!(a&&a.useMipmap),C.bindTexture(C.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===C.RGBA&&(!a||a.premultiply!==!1)),w)this.size=[u,m],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||d.b(t)?C.texImage2D(C.TEXTURE_2D,0,this.format,this.format,C.UNSIGNED_BYTE,t):C.texImage2D(C.TEXTURE_2D,0,this.format,u,m,0,this.format,C.UNSIGNED_BYTE,t.data);else{const{x:k,y:z}=c||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||d.b(t)?C.texSubImage2D(C.TEXTURE_2D,0,k,z,C.RGBA,C.UNSIGNED_BYTE,t):C.texSubImage2D(C.TEXTURE_2D,0,k,z,u,m,C.RGBA,C.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&C.generateMipmap(C.TEXTURE_2D)}bind(t,a,c){const{context:u}=this,{gl:m}=u;m.bindTexture(m.TEXTURE_2D,this.texture),c!==m.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(c=m.LINEAR),t!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,t),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,c||t),this.filter=t),a!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,a),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}function si(f){const{userImage:t}=f;return!!(t&&t.render&&t.render())&&(f.data.replace(new Uint8Array(t.data.buffer)),!0)}class ar extends d.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new d.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(t){if(this.loaded!==t&&(this.loaded=t,t)){for(const{ids:a,promiseResolve:c}of this.requestors)c(this._getImagesForIds(a));this.requestors=[]}}getImage(t){const a=this.images[t];if(a&&!a.data&&a.spriteData){const c=a.spriteData;a.data=new d.R({width:c.width,height:c.height},c.context.getImageData(c.x,c.y,c.width,c.height).data),a.spriteData=null}return a}addImage(t,a){if(this.images[t])throw new Error(`Image id ${t} already exist, use updateImage instead`);this._validate(t,a)&&(this.images[t]=a)}_validate(t,a){let c=!0;const u=a.data||a.spriteData;return this._validateStretch(a.stretchX,u&&u.width)||(this.fire(new d.j(new Error(`Image "${t}" has invalid "stretchX" value`))),c=!1),this._validateStretch(a.stretchY,u&&u.height)||(this.fire(new d.j(new Error(`Image "${t}" has invalid "stretchY" value`))),c=!1),this._validateContent(a.content,a)||(this.fire(new d.j(new Error(`Image "${t}" has invalid "content" value`))),c=!1),c}_validateStretch(t,a){if(!t)return!0;let c=0;for(const u of t){if(u[0]<c||u[1]<u[0]||a<u[1])return!1;c=u[1]}return!0}_validateContent(t,a){if(!t)return!0;if(t.length!==4)return!1;const c=a.spriteData,u=c&&c.width||a.data.width,m=c&&c.height||a.data.height;return!(t[0]<0||u<t[0]||t[1]<0||m<t[1]||t[2]<0||u<t[2]||t[3]<0||m<t[3]||t[2]<t[0]||t[3]<t[1])}updateImage(t,a,c=!0){const u=this.getImage(t);if(c&&(u.data.width!==a.data.width||u.data.height!==a.data.height))throw new Error(`size mismatch between old image (${u.data.width}x${u.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=u.version+1,this.images[t]=a,this.updatedImages[t]=!0}removeImage(t){const a=this.images[t];delete this.images[t],delete this.patterns[t],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(t){return new Promise((a,c)=>{let u=!0;if(!this.isLoaded())for(const m of t)this.images[m]||(u=!1);this.isLoaded()||u?a(this._getImagesForIds(t)):this.requestors.push({ids:t,promiseResolve:a})})}_getImagesForIds(t){const a={};for(const c of t){let u=this.getImage(c);u||(this.fire(new d.k("styleimagemissing",{id:c})),u=this.getImage(c)),u?a[c]={data:u.data.clone(),pixelRatio:u.pixelRatio,sdf:u.sdf,version:u.version,stretchX:u.stretchX,stretchY:u.stretchY,content:u.content,hasRenderCallback:!!(u.userImage&&u.userImage.render)}:d.w(`Image "${c}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:t,height:a}=this.atlasImage;return{width:t,height:a}}getPattern(t){const a=this.patterns[t],c=this.getImage(t);if(!c)return null;if(a&&a.position.version===c.version)return a.position;if(a)a.position.version=c.version;else{const u={w:c.data.width+2,h:c.data.height+2,x:0,y:0},m=new d.I(u,c);this.patterns[t]={bin:u,position:m}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const a=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Nt(t,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const m in this.patterns)t.push(this.patterns[m].bin);const{w:a,h:c}=d.p(t),u=this.atlasImage;u.resize({width:a||1,height:c||1});for(const m in this.patterns){const{bin:w}=this.patterns[m],S=w.x+1,C=w.y+1,k=this.getImage(m).data,z=k.width,A=k.height;d.R.copy(k,u,{x:0,y:0},{x:S,y:C},{width:z,height:A}),d.R.copy(k,u,{x:0,y:A-1},{x:S,y:C-1},{width:z,height:1}),d.R.copy(k,u,{x:0,y:0},{x:S,y:C+A},{width:z,height:1}),d.R.copy(k,u,{x:z-1,y:0},{x:S-1,y:C},{width:1,height:A}),d.R.copy(k,u,{x:0,y:0},{x:S+z,y:C},{width:1,height:A})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(t){for(const a of t){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const c=this.getImage(a);c||d.w(`Image with ID: "${a}" was not found`),si(c)&&this.updateImage(a,c)}}}const Pn=1e20;function br(f,t,a,c,u,m,w,S,C){for(let k=t;k<t+c;k++)pn(f,a*m+k,m,u,w,S,C);for(let k=a;k<a+u;k++)pn(f,k*m+t,1,c,w,S,C)}function pn(f,t,a,c,u,m,w){m[0]=0,w[0]=-Pn,w[1]=Pn,u[0]=f[t];for(let S=1,C=0,k=0;S<c;S++){u[S]=f[t+S*a];const z=S*S;do{const A=m[C];k=(u[S]-u[A]+z-A*A)/(S-A)/2}while(k<=w[C]&&--C>-1);C++,m[C]=S,w[C]=k,w[C+1]=Pn}for(let S=0,C=0;S<c;S++){for(;w[C+1]<S;)C++;const k=m[C],z=S-k;f[t+S*a]=u[k]+z*z}}class He{constructor(t,a){this.requestManager=t,this.localIdeographFontFamily=a,this.entries={}}setURL(t){this.url=t}getGlyphs(t){return d._(this,void 0,void 0,function*(){const a=[];for(const m in t)for(const w of t[m])a.push(this._getAndCacheGlyphsPromise(m,w));const c=yield Promise.all(a),u={};for(const{stack:m,id:w,glyph:S}of c)u[m]||(u[m]={}),u[m][w]=S&&{id:S.id,bitmap:S.bitmap.clone(),metrics:S.metrics};return u})}_getAndCacheGlyphsPromise(t,a){return d._(this,void 0,void 0,function*(){let c=this.entries[t];c||(c=this.entries[t]={glyphs:{},requests:{},ranges:{}});let u=c.glyphs[a];if(u!==void 0)return{stack:t,id:a,glyph:u};if(u=this._tinySDF(c,t,a),u)return c.glyphs[a]=u,{stack:t,id:a,glyph:u};const m=Math.floor(a/256);if(256*m>65535)throw new Error("glyphs > 65535 not supported");if(c.ranges[m])return{stack:t,id:a,glyph:u};if(!this.url)throw new Error("glyphsUrl is not set");if(!c.requests[m]){const S=He.loadGlyphRange(t,m,this.url,this.requestManager);c.requests[m]=S}const w=yield c.requests[m];for(const S in w)this._doesCharSupportLocalGlyph(+S)||(c.glyphs[+S]=w[+S]);return c.ranges[m]=!0,{stack:t,id:a,glyph:w[a]||null}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(d.u["CJK Unified Ideographs"](t)||d.u["Hangul Syllables"](t)||d.u.Hiragana(t)||d.u.Katakana(t))}_tinySDF(t,a,c){const u=this.localIdeographFontFamily;if(!u||!this._doesCharSupportLocalGlyph(c))return;let m=t.tinySDF;if(!m){let S="400";/bold/i.test(a)?S="900":/medium/i.test(a)?S="500":/light/i.test(a)&&(S="200"),m=t.tinySDF=new He.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:u,fontWeight:S})}const w=m.draw(String.fromCharCode(c));return{id:c,bitmap:new d.o({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}He.loadGlyphRange=function(f,t,a,c){return d._(this,void 0,void 0,function*(){const u=256*t,m=u+255,w=c.transformRequest(a.replace("{fontstack}",f).replace("{range}",`${u}-${m}`),xe.Glyphs),S=yield d.l(w,new AbortController);if(!S||!S.data)throw new Error(`Could not load glyph range. range: ${t}, ${u}-${m}`);const C={};for(const k of d.n(S.data))C[k.id]=k;return C})},He.TinySDF=class{constructor({fontSize:f=24,buffer:t=3,radius:a=8,cutoff:c=.25,fontFamily:u="sans-serif",fontWeight:m="normal",fontStyle:w="normal"}={}){this.buffer=t,this.cutoff=c,this.radius=a;const S=this.size=f+4*t,C=this._createCanvas(S),k=this.ctx=C.getContext("2d",{willReadFrequently:!0});k.font=`${w} ${m} ${f}px ${u}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Uint16Array(S)}_createCanvas(f){const t=document.createElement("canvas");return t.width=t.height=f,t}draw(f){const{width:t,actualBoundingBoxAscent:a,actualBoundingBoxDescent:c,actualBoundingBoxLeft:u,actualBoundingBoxRight:m}=this.ctx.measureText(f),w=Math.ceil(a),S=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-u))),C=Math.min(this.size-this.buffer,w+Math.ceil(c)),k=S+2*this.buffer,z=C+2*this.buffer,A=Math.max(k*z,0),B=new Uint8ClampedArray(A),G={data:B,width:k,height:z,glyphWidth:S,glyphHeight:C,glyphTop:w,glyphLeft:0,glyphAdvance:t};if(S===0||C===0)return G;const{ctx:q,buffer:X,gridInner:j,gridOuter:ie}=this;q.clearRect(X,X,S,C),q.fillText(f,X,X+w);const fe=q.getImageData(X,X,S,C);ie.fill(Pn,0,A),j.fill(0,0,A);for(let Y=0;Y<C;Y++)for(let ue=0;ue<S;ue++){const me=fe.data[4*(Y*S+ue)+3]/255;if(me===0)continue;const ge=(Y+X)*k+ue+X;if(me===1)ie[ge]=0,j[ge]=Pn;else{const ye=.5-me;ie[ge]=ye>0?ye*ye:0,j[ge]=ye<0?ye*ye:0}}br(ie,0,0,k,z,k,this.f,this.v,this.z),br(j,X,X,S,C,k,this.f,this.v,this.z);for(let Y=0;Y<A;Y++){const ue=Math.sqrt(ie[Y])-Math.sqrt(j[Y]);B[Y]=Math.round(255-255*(ue/this.radius+this.cutoff))}return G}};class ht{constructor(){this.specification=d.v.light.position}possiblyEvaluate(t,a){return d.y(t.expression.evaluate(a))}interpolate(t,a,c){return{x:d.z.number(t.x,a.x,c),y:d.z.number(t.y,a.y,c),z:d.z.number(t.z,a.z,c)}}}let dt;class It extends d.E{constructor(t){super(),dt=dt||new d.q({anchor:new d.D(d.v.light.anchor),position:new ht,color:new d.D(d.v.light.color),intensity:new d.D(d.v.light.intensity)}),this._transitionable=new d.T(dt),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,a={}){if(!this._validate(d.r,t,a))for(const c in t){const u=t[c];c.endsWith("-transition")?this._transitionable.setTransition(c.slice(0,-11),u):this._transitionable.setValue(c,u)}}updateTransitions(t){this._transitioning=this._transitionable.transitioned(t,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(t){this.properties=this._transitioning.possiblyEvaluate(t)}_validate(t,a,c){return(!c||c.validate!==!1)&&d.t(this,t.call(d.x,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:d.v}))}}class Mt{constructor(t,a){this.width=t,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(t,a){const c=t.join(",")+String(a);return this.dashEntry[c]||(this.dashEntry[c]=this.addDash(t,a)),this.dashEntry[c]}getDashRanges(t,a,c){const u=[];let m=t.length%2==1?-t[t.length-1]*c:0,w=t[0]*c,S=!0;u.push({left:m,right:w,isDash:S,zeroLength:t[0]===0});let C=t[0];for(let k=1;k<t.length;k++){S=!S;const z=t[k];m=C*c,C+=z,w=C*c,u.push({left:m,right:w,isDash:S,zeroLength:z===0})}return u}addRoundDash(t,a,c){const u=a/2;for(let m=-c;m<=c;m++){const w=this.width*(this.nextRow+c+m);let S=0,C=t[S];for(let k=0;k<this.width;k++){k/C.right>1&&(C=t[++S]);const z=Math.abs(k-C.left),A=Math.abs(k-C.right),B=Math.min(z,A);let G;const q=m/c*(u+1);if(C.isDash){const X=u-Math.abs(q);G=Math.sqrt(B*B+X*X)}else G=u-Math.sqrt(B*B+q*q);this.data[w+k]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(t){for(let S=t.length-1;S>=0;--S){const C=t[S],k=t[S+1];C.zeroLength?t.splice(S,1):k&&k.isDash===C.isDash&&(k.left=C.left,t.splice(S,1))}const a=t[0],c=t[t.length-1];a.isDash===c.isDash&&(a.left=c.left-this.width,c.right=a.right+this.width);const u=this.width*this.nextRow;let m=0,w=t[m];for(let S=0;S<this.width;S++){S/w.right>1&&(w=t[++m]);const C=Math.abs(S-w.left),k=Math.abs(S-w.right),z=Math.min(C,k);this.data[u+S]=Math.max(0,Math.min(255,(w.isDash?z:-z)+128))}}addDash(t,a){const c=a?7:0,u=2*c+1;if(this.nextRow+u>this.height)return d.w("LineAtlas out of space"),null;let m=0;for(let S=0;S<t.length;S++)m+=t[S];if(m!==0){const S=this.width/m,C=this.getDashRanges(t,this.width,S);a?this.addRoundDash(C,S,c):this.addRegularDash(C)}const w={y:(this.nextRow+c+.5)/this.height,height:2*c/this.height,width:m};return this.nextRow+=u,this.dirty=!0,w}bind(t){const a=t.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const Or="maplibre_preloaded_worker_pool";class Ai{constructor(){this.active={}}acquire(t){if(!this.workers)for(this.workers=[];this.workers.length<Ai.workerCount;)this.workers.push(new Worker(d.a.WORKER_URL));return this.active[t]=!0,this.workers.slice()}release(t){delete this.active[t],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Or]}numActive(){return Object.keys(this.active).length}}const Kr=Math.floor(K.hardwareConcurrency/2);let Fi,Ui;function Xr(){return Fi||(Fi=new Ai),Fi}Ai.workerCount=d.B(globalThis)?Math.max(Math.min(Kr,3),1):1;class $s{constructor(t,a){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=a;const c=this.workerPool.acquire(a);for(let u=0;u<c.length;u++){const m=new d.C(c[u],a);m.name=`Worker ${u}`,this.actors.push(m)}if(!this.actors.length)throw new Error("No actors found")}broadcast(t,a){const c=[];for(const u of this.actors)c.push(u.sendAsync({type:t,data:a}));return Promise.all(c)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(t=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],t&&this.workerPool.release(this.id)}registerMessageHandler(t,a){for(const c of this.actors)c.registerMessageHandler(t,a)}}function qn(){return Ui||(Ui=new $s(Xr(),d.G),Ui.registerMessageHandler("getResource",(f,t,a)=>d.m(t,a))),Ui}function Lo(f,t){const a=d.F();return d.H(a,a,[1,1,0]),d.J(a,a,[.5*f.width,.5*f.height,1]),d.K(a,a,f.calculatePosMatrix(t.toUnwrapped()))}function Zn(f,t,a,c,u,m){const w=function(A,B,G){if(A)for(const q of A){const X=B[q];if(X&&X.source===G&&X.type==="fill-extrusion")return!0}else for(const q in B){const X=B[q];if(X.source===G&&X.type==="fill-extrusion")return!0}return!1}(u&&u.layers,t,f.id),S=m.maxPitchScaleFactor(),C=f.tilesIn(c,S,w);C.sort(Gn);const k=[];for(const A of C)k.push({wrappedTileID:A.tileID.wrapped().key,queryResults:A.tile.queryRenderedFeatures(t,a,f._state,A.queryGeometry,A.cameraQueryGeometry,A.scale,u,m,S,Lo(f.transform,A.tileID))});const z=function(A){const B={},G={};for(const q of A){const X=q.queryResults,j=q.wrappedTileID,ie=G[j]=G[j]||{};for(const fe in X){const Y=X[fe],ue=ie[fe]=ie[fe]||{},me=B[fe]=B[fe]||[];for(const ge of Y)ue[ge.featureIndex]||(ue[ge.featureIndex]=!0,me.push(ge))}}return B}(k);for(const A in z)z[A].forEach(B=>{const G=B.feature,q=f.getFeatureState(G.layer["source-layer"],G.id);G.source=G.layer.source,G.layer["source-layer"]&&(G.sourceLayer=G.layer["source-layer"]),G.state=q});return z}function Gn(f,t){const a=f.tileID,c=t.tileID;return a.overscaledZ-c.overscaledZ||a.canonical.y-c.canonical.y||a.wrap-c.wrap||a.canonical.x-c.canonical.x}function Hn(f,t,a){return d._(this,void 0,void 0,function*(){let c=f;if(f.url?c=(yield d.h(t.transformRequest(f.url,xe.Source),a)).data:yield K.frameAsync(a),!c)return null;const u=d.L(d.e(c,f),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in c&&c.vector_layers&&(u.vectorLayerIds=c.vector_layers.map(m=>m.id)),u})}class Si{constructor(t,a){t&&(a?this.setSouthWest(t).setNorthEast(a):Array.isArray(t)&&(t.length===4?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1])))}setNorthEast(t){return this._ne=t instanceof d.M?new d.M(t.lng,t.lat):d.M.convert(t),this}setSouthWest(t){return this._sw=t instanceof d.M?new d.M(t.lng,t.lat):d.M.convert(t),this}extend(t){const a=this._sw,c=this._ne;let u,m;if(t instanceof d.M)u=t,m=t;else{if(!(t instanceof Si))return Array.isArray(t)?t.length===4||t.every(Array.isArray)?this.extend(Si.convert(t)):this.extend(d.M.convert(t)):t&&("lng"in t||"lon"in t)&&"lat"in t?this.extend(d.M.convert(t)):this;if(u=t._sw,m=t._ne,!u||!m)return this}return a||c?(a.lng=Math.min(u.lng,a.lng),a.lat=Math.min(u.lat,a.lat),c.lng=Math.max(m.lng,c.lng),c.lat=Math.max(m.lat,c.lat)):(this._sw=new d.M(u.lng,u.lat),this._ne=new d.M(m.lng,m.lat)),this}getCenter(){return new d.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new d.M(this.getWest(),this.getNorth())}getSouthEast(){return new d.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(t){const{lng:a,lat:c}=d.M.convert(t);let u=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(u=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=c&&c<=this._ne.lat&&u}static convert(t){return t instanceof Si?t:t&&new Si(t)}static fromLngLat(t,a=0){const c=360*a/40075017,u=c/Math.cos(Math.PI/180*t.lat);return new Si(new d.M(t.lng-u,t.lat-c),new d.M(t.lng+u,t.lat+c))}}class os{constructor(t,a,c){this.bounds=Si.convert(this.validateBounds(t)),this.minzoom=a||0,this.maxzoom=c||24}validateBounds(t){return Array.isArray(t)&&t.length===4?[Math.max(-180,t[0]),Math.max(-90,t[1]),Math.min(180,t[2]),Math.min(90,t[3])]:[-180,-90,180,90]}contains(t){const a=Math.pow(2,t.z),c=Math.floor(d.N(this.bounds.getWest())*a),u=Math.floor(d.O(this.bounds.getNorth())*a),m=Math.ceil(d.N(this.bounds.getEast())*a),w=Math.ceil(d.O(this.bounds.getSouth())*a);return t.x>=c&&t.x<m&&t.y>=u&&t.y<w}}class _e extends d.E{constructor(t,a,c,u){if(super(),this.id=t,this.dispatcher=c,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,d.e(this,d.L(a,["url","scheme","tileSize","promoteId"])),this._options=d.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(u)}load(){return d._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield Hn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),t&&(d.e(this,t),t.bounds&&(this.tileBounds=new os(t.bounds,this.minzoom,this.maxzoom)),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new d.j(t))}})}loaded(){return this._loaded}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}onAdd(t){this.map=t,this.load()}setSourceProperty(t){this._tileJSONRequest&&this._tileJSONRequest.abort(),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return d.e({},this._options)}loadTile(t){return d._(this,void 0,void 0,function*(){const a=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c={request:this.map._requestManager.transformRequest(a,xe.Tile),uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};c.request.collectResourceTiming=this._collectResourceTiming;let u="reloadTile";if(t.actor&&t.state!=="expired"){if(t.state==="loading")return new Promise((m,w)=>{t.reloadPromise={resolve:m,reject:w}})}else t.actor=this.dispatcher.getActor(),u="loadTile";t.abortController=new AbortController;try{const m=yield t.actor.sendAsync({type:u,data:c},t.abortController);if(delete t.abortController,t.aborted)return;this._afterTileLoadWorkerResponse(t,m)}catch(m){if(delete t.abortController,t.aborted)return;if(m&&m.status!==404)throw m;this._afterTileLoadWorkerResponse(t,null)}})}_afterTileLoadWorkerResponse(t,a){if(a&&a.resourceTiming&&(t.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&t.setExpiryData(a),t.loadVectorData(a,this.map.painter),t.reloadPromise){const c=t.reloadPromise;t.reloadPromise=null,this.loadTile(t).then(c.resolve).catch(c.reject)}}abortTile(t){return d._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.actor&&(yield t.actor.sendAsync({type:"abortTile",data:{uid:t.uid,type:this.type,source:this.id}}))})}unloadTile(t){return d._(this,void 0,void 0,function*(){t.unloadVectorData(),t.actor&&(yield t.actor.sendAsync({type:"removeTile",data:{uid:t.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ls extends d.E{constructor(t,a,c,u){super(),this.id=t,this.dispatcher=c,this.setEventedParent(u),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=d.e({type:"raster"},a),d.e(this,d.L(a,["url","scheme","tileSize"]))}load(){return d._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const t=yield Hn(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,t&&(d.e(this,t),t.bounds&&(this.tileBounds=new os(t.bounds,this.minzoom,this.maxzoom)),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})))}catch(t){this._tileJSONRequest=null,this.fire(new d.j(t))}})}loaded(){return this._loaded}onAdd(t){this.map=t,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(t){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),t(),this.load()}setTiles(t){return this.setSourceProperty(()=>{this._options.tiles=t}),this}setUrl(t){return this.setSourceProperty(()=>{this.url=t,this._options.url=t}),this}serialize(){return d.e({},this._options)}hasTile(t){return!this.tileBounds||this.tileBounds.contains(t.canonical)}loadTile(t){return d._(this,void 0,void 0,function*(){const a=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);t.abortController=new AbortController;try{const c=yield le.getImage(this.map._requestManager.transformRequest(a,xe.Tile),t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(c&&c.data){this.map._refreshExpiredTiles&&c.cacheControl&&c.expires&&t.setExpiryData({cacheControl:c.cacheControl,expires:c.expires});const u=this.map.painter.context,m=u.gl,w=c.data;t.texture=this.map.painter.getTileTexture(w.width),t.texture?t.texture.update(w,{useMipmap:!0}):(t.texture=new Nt(u,w,m.RGBA,{useMipmap:!0}),t.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE,m.LINEAR_MIPMAP_NEAREST),u.extTextureFilterAnisotropic&&m.texParameterf(m.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax)),t.state="loaded"}}catch(c){if(delete t.abortController,t.aborted)t.state="unloaded";else if(c)throw t.state="errored",c}})}abortTile(t){return d._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController)})}unloadTile(t){return d._(this,void 0,void 0,function*(){t.texture&&this.map.painter.saveTileTexture(t.texture)})}hasTransition(){return!1}}class Za extends ls{constructor(t,a,c,u){super(t,a,c,u),this.type="raster-dem",this.maxzoom=22,this._options=d.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(t){return d._(this,void 0,void 0,function*(){const a=t.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),c=this.map._requestManager.transformRequest(a,xe.Tile);t.neighboringTiles=this._getNeighboringTiles(t.tileID),t.abortController=new AbortController;try{const u=yield le.getImage(c,t.abortController,this.map._refreshExpiredTiles);if(delete t.abortController,t.aborted)return void(t.state="unloaded");if(u&&u.data){const m=u.data;this.map._refreshExpiredTiles&&u.cacheControl&&u.expires&&t.setExpiryData({cacheControl:u.cacheControl,expires:u.expires});const w=d.b(m)&&d.S()?m:yield this.readImageNow(m),S={type:this.type,uid:t.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!t.actor||t.state==="expired"){t.actor=this.dispatcher.getActor();const C=yield t.actor.sendAsync({type:"loadDEMTile",data:S});t.dem=C,t.needsHillshadePrepare=!0,t.needsTerrainPrepare=!0,t.state="loaded"}}}catch(u){if(delete t.abortController,t.aborted)t.state="unloaded";else if(u)throw t.state="errored",u}})}readImageNow(t){return d._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&d.U()){const a=t.width+2,c=t.height+2;try{return new d.R({width:a,height:c},yield d.V(t,-1,-1,a,c))}catch{}}return K.getImageData(t,1)})}_getNeighboringTiles(t){const a=t.canonical,c=Math.pow(2,a.z),u=(a.x-1+c)%c,m=a.x===0?t.wrap-1:t.wrap,w=(a.x+1+c)%c,S=a.x+1===c?t.wrap+1:t.wrap,C={};return C[new d.Q(t.overscaledZ,m,a.z,u,a.y).key]={backfilled:!1},C[new d.Q(t.overscaledZ,S,a.z,w,a.y).key]={backfilled:!1},a.y>0&&(C[new d.Q(t.overscaledZ,m,a.z,u,a.y-1).key]={backfilled:!1},C[new d.Q(t.overscaledZ,t.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},C[new d.Q(t.overscaledZ,S,a.z,w,a.y-1).key]={backfilled:!1}),a.y+1<c&&(C[new d.Q(t.overscaledZ,m,a.z,u,a.y+1).key]={backfilled:!1},C[new d.Q(t.overscaledZ,t.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},C[new d.Q(t.overscaledZ,S,a.z,w,a.y+1).key]={backfilled:!1}),C}unloadTile(t){return d._(this,void 0,void 0,function*(){t.demTexture&&this.map.painter.saveTileTexture(t.demTexture),t.fbo&&(t.fbo.destroy(),delete t.fbo),t.dem&&delete t.dem,delete t.neighboringTiles,t.state="unloaded",t.actor&&(yield t.actor.sendAsync({type:"removeDEMTile",data:{type:this.type,uid:t.uid,source:this.id}}))})}}class Ct extends d.E{constructor(t,a,c,u){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=c.getActor(),this.setEventedParent(u),this._data=a.data,this._options=d.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const m=d.W/this.tileSize;this.workerOptions=d.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*m,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*m,extent:d.W,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:d.W,radius:(a.clusterRadius||50)*m,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return d._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(t){this.map=t,this.load()}setData(t){return this._data=t,this._updateWorkerData(),this}updateData(t){return this._updateWorkerData(t),this}setClusterOptions(t){return this.workerOptions.cluster=t.cluster,t&&(t.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=t.clusterRadius),t.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=t.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(t){return this.actor.sendAsync({type:"getClusterExpansionZoom",data:{type:this.type,clusterId:t,source:this.id}})}getClusterChildren(t){return this.actor.sendAsync({type:"getClusterChildren",data:{type:this.type,clusterId:t,source:this.id}})}getClusterLeaves(t,a,c){return this.actor.sendAsync({type:"getClusterLeaves",data:{type:this.type,source:this.id,clusterId:t,limit:a,offset:c}})}_updateWorkerData(t){return d._(this,void 0,void 0,function*(){const a=d.e({type:this.type},this.workerOptions);t?a.dataDiff=t:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(K.resolveURL(this._data),xe.Source),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new d.k("dataloading",{dataType:"source"}));try{const c=yield this.actor.sendAsync({type:"loadData",data:a});if(this._pendingLoads--,this._removed||c.abandoned)return void this.fire(new d.k("dataabort",{dataType:"source"}));let u=null;c.resourceTiming&&c.resourceTiming[this.id]&&(u=c.resourceTiming[this.id].slice(0));const m={dataType:"source"};this._collectResourceTiming&&u&&u.length>0&&d.e(m,{resourceTiming:u}),this.fire(new d.k("data",Object.assign(Object.assign({},m),{sourceDataType:"metadata"}))),this.fire(new d.k("data",Object.assign(Object.assign({},m),{sourceDataType:"content"})))}catch(c){if(this._pendingLoads--,this._removed)return void this.fire(new d.k("dataabort",{dataType:"source"}));this.fire(new d.j(c))}})}loaded(){return this._pendingLoads===0}loadTile(t){return d._(this,void 0,void 0,function*(){const a=t.actor?"reloadTile":"loadTile";t.actor=this.actor;const c={type:this.type,uid:t.uid,tileID:t.tileID,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};t.abortController=new AbortController;const u=yield this.actor.sendAsync({type:a,data:c},t.abortController);delete t.abortController,t.unloadVectorData(),t.aborted||t.loadVectorData(u,this.map.painter,a==="reloadTile")})}abortTile(t){return d._(this,void 0,void 0,function*(){t.abortController&&(t.abortController.abort(),delete t.abortController),t.aborted=!0})}unloadTile(t){return d._(this,void 0,void 0,function*(){t.unloadVectorData(),yield this.actor.sendAsync({type:"removeTile",data:{uid:t.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"removeSource",data:{type:this.type,source:this.id}})}serialize(){return d.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Bi=d.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class fn extends d.E{constructor(t,a,c,u){super(),this.id=t,this.dispatcher=c,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(u),this.options=a}load(t){return d._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield le.getImage(this.map._requestManager.transformRequest(this.url,xe.Image),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,t&&(this.coordinates=t),this._finishLoading())}catch(a){this._request=null,this.fire(new d.j(a))}})}loaded(){return this._loaded}updateImage(t){return t.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=t.url,this.load(t.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(t){this.map=t,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(t){this.coordinates=t;const a=t.map(d.Y.fromLngLat);this.tileID=function(u){let m=1/0,w=1/0,S=-1/0,C=-1/0;for(const B of u)m=Math.min(m,B.x),w=Math.min(w,B.y),S=Math.max(S,B.x),C=Math.max(C,B.y);const k=Math.max(S-m,C-w),z=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),A=Math.pow(2,z);return new d.a0(z,Math.floor((m+S)/2*A),Math.floor((w+C)/2*A))}(a),this.minzoom=this.maxzoom=this.tileID.z;const c=a.map(u=>this.tileID.getTilePoint(u)._round());return this._boundsArray=new d.Z,this._boundsArray.emplaceBack(c[0].x,c[0].y,0,0),this._boundsArray.emplaceBack(c[1].x,c[1].y,d.W,0),this._boundsArray.emplaceBack(c[3].x,c[3].y,0,d.W),this._boundsArray.emplaceBack(c[2].x,c[2].y,d.W,d.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const t=this.map.painter.context,a=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Bi.members)),this.boundsSegments||(this.boundsSegments=d.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Nt(t,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let c=!1;for(const u in this.tiles){const m=this.tiles[u];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture,c=!0)}c&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(t){return d._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(t.tileID.canonical)?(this.tiles[String(t.tileID.wrap)]=t,t.buckets={}):t.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class qs extends fn{constructor(t,a,c,u){super(t,a,c,u),this.roundZoom=!0,this.type="video",this.options=a}load(){return d._(this,void 0,void 0,function*(){this._loaded=!1;const t=this.options;this.urls=[];for(const a of t.urls)this.urls.push(this.map._requestManager.transformRequest(a,xe.Source).url);try{const a=yield d.a2(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new d.j(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const a=this.video.seekable;t<a.start(0)||t>a.end(0)?this.fire(new d.j(new d.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(t){this.map||(this.map=t,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const t=this.map.painter.context,a=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,Bi.members)),this.boundsSegments||(this.boundsSegments=d.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new Nt(t,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let c=!1;for(const u in this.tiles){const m=this.tiles[u];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture,c=!0)}c&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Zs extends fn{constructor(t,a,c,u){super(t,a,c,u),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(m=>!Array.isArray(m)||m.length!==2||m.some(w=>typeof w!="number"))||this.fire(new d.j(new d.a1(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new d.j(new d.a1(`sources.${t}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new d.j(new d.a1(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new d.j(new d.a1(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new d.j(new d.a1(`sources.${t}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return d._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new d.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(t){this.map=t,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,c=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,Bi.members)),this.boundsSegments||(this.boundsSegments=d.$.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Nt(a,this.canvas,c.RGBA,{premultiply:!0});let u=!1;for(const m in this.tiles){const w=this.tiles[m];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,u=!0)}u&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const t of[this.canvas.width,this.canvas.height])if(isNaN(t)||t<=0)return!0;return!1}}const Gs={},cs=f=>{switch(f){case"geojson":return Ct;case"image":return fn;case"raster":return ls;case"raster-dem":return Za;case"vector":return _e;case"video":return qs;case"canvas":return Zs}return Gs[f]},Hs="RTLPluginLoaded";class Ga extends d.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=qn()}_syncState(t){return this.status=t,this.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(t){return d._(this,arguments,void 0,function*(a,c=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=K.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!c)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return d._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new d.k(Hs))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Re=null;function Sr(){return Re||(Re=new Ga),Re}class or{constructor(t,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=t,this.uid=d.a3(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(t){const a=t+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(t){this.demTexture&&t.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(t,a,c){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=function(u,m){const w={};if(!m)return w;for(const S of u){const C=S.layerIds.map(k=>m.getLayer(k)).filter(Boolean);if(C.length!==0){S.layers=C,S.stateDependentLayerIds&&(S.stateDependentLayers=S.stateDependentLayerIds.map(k=>C.filter(z=>z.id===k)[0]));for(const k of C)w[k.id]=S}}return w}(t.buckets,a.style),this.hasSymbolBuckets=!1;for(const u in this.buckets){const m=this.buckets[u];if(m instanceof d.a5){if(this.hasSymbolBuckets=!0,!c)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const u in this.buckets){const m=this.buckets[u];if(m instanceof d.a5&&m.hasRTLText){this.hasRTLText=!0,Sr().lazyLoad();break}}this.queryPadding=0;for(const u in this.buckets){const m=this.buckets[u];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(u).queryRadius(m))}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage)}else this.collisionBoxArray=new d.a4}unloadVectorData(){for(const t in this.buckets)this.buckets[t].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(t){return this.buckets[t.id]}upload(t){for(const c in this.buckets){const u=this.buckets[c];u.uploadPending()&&u.upload(t)}const a=t.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Nt(t,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Nt(t,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(t){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(t,this.imageAtlasTexture)}queryRenderedFeatures(t,a,c,u,m,w,S,C,k,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:u,cameraQueryGeometry:m,scale:w,tileSize:this.tileSize,pixelPosMatrix:z,transform:C,params:S,queryPadding:this.queryPadding*k},t,a,c):{}}querySourceFeatures(t,a){const c=this.latestFeatureIndex;if(!c||!c.rawTileData)return;const u=c.loadVTLayers(),m=a&&a.sourceLayer?a.sourceLayer:"",w=u._geojsonTileLayer||u[m];if(!w)return;const S=d.a6(a&&a.filter),{z:C,x:k,y:z}=this.tileID.canonical,A={z:C,x:k,y:z};for(let B=0;B<w.length;B++){const G=w.feature(B);if(S.needGeometry){const j=d.a7(G,!0);if(!S.filter(new d.a8(this.tileID.overscaledZ),j,this.tileID.canonical))continue}else if(!S.filter(new d.a8(this.tileID.overscaledZ),G))continue;const q=c.getId(G,m),X=new d.a9(G,C,k,z,q);X.tile=A,t.push(X)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(t){const a=this.expirationTime;if(t.cacheControl){const c=d.aa(t.cacheControl);c["max-age"]&&(this.expirationTime=Date.now()+1e3*c["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const c=Date.now();let u=!1;if(this.expirationTime>c)u=!1;else if(a)if(this.expirationTime<a)u=!0;else{const m=this.expirationTime-a;m?this.expirationTime=c+Math.max(m,3e4):u=!0}else u=!0;u?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(t,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(t).length===0)return;const c=this.latestFeatureIndex.loadVTLayers();for(const u in this.buckets){if(!a.style.hasLayer(u))continue;const m=this.buckets[u],w=m.layers[0].sourceLayer||"_geojsonTileLayer",S=c[w],C=t[w];if(!S||!C||Object.keys(C).length===0)continue;m.update(C,S,this.imageAtlas&&this.imageAtlas.patternPositions||{});const k=a&&a.style&&a.style.getLayer(u);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(m)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<K.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=K.now()+t}setDependencies(t,a){const c={};for(const u of a)c[u]=!0;this.dependencies[t]=c}hasDependency(t,a){for(const c of t){const u=this.dependencies[c];if(u){for(const m of a)if(u[m])return!0}}return!1}}class Ha{constructor(t,a){this.max=t,this.onRemove=a,this.reset()}reset(){for(const t in this.data)for(const a of this.data[t])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(t,a,c){const u=t.wrapped().key;this.data[u]===void 0&&(this.data[u]=[]);const m={value:a,timeout:void 0};if(c!==void 0&&(m.timeout=setTimeout(()=>{this.remove(t,m)},c)),this.data[u].push(m),this.order.push(u),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(t){return t.wrapped().key in this.data}getAndRemove(t){return this.has(t)?this._getAndRemoveByKey(t.wrapped().key):null}_getAndRemoveByKey(t){const a=this.data[t].shift();return a.timeout&&clearTimeout(a.timeout),this.data[t].length===0&&delete this.data[t],this.order.splice(this.order.indexOf(t),1),a.value}getByKey(t){const a=this.data[t];return a?a[0].value:null}get(t){return this.has(t)?this.data[t.wrapped().key][0].value:null}remove(t,a){if(!this.has(t))return this;const c=t.wrapped().key,u=a===void 0?0:this.data[c].indexOf(a),m=this.data[c][u];return this.data[c].splice(u,1),m.timeout&&clearTimeout(m.timeout),this.data[c].length===0&&delete this.data[c],this.onRemove(m.value),this.order.splice(this.order.indexOf(c),1),this}setMaxSize(t){for(this.max=t;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(t){const a=[];for(const c in this.data)for(const u of this.data[c])t(u.value)||a.push(u);for(const c of a)this.remove(c.value.tileID,c)}}class us{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,a,c){const u=String(a);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][u]=this.stateChanges[t][u]||{},d.e(this.stateChanges[t][u],c),this.deletedStates[t]===null){this.deletedStates[t]={};for(const m in this.state[t])m!==u&&(this.deletedStates[t][m]=null)}else if(this.deletedStates[t]&&this.deletedStates[t][u]===null){this.deletedStates[t][u]={};for(const m in this.state[t][u])c[m]||(this.deletedStates[t][u][m]=null)}else for(const m in c)this.deletedStates[t]&&this.deletedStates[t][u]&&this.deletedStates[t][u][m]===null&&delete this.deletedStates[t][u][m]}removeFeatureState(t,a,c){if(this.deletedStates[t]===null)return;const u=String(a);if(this.deletedStates[t]=this.deletedStates[t]||{},c&&a!==void 0)this.deletedStates[t][u]!==null&&(this.deletedStates[t][u]=this.deletedStates[t][u]||{},this.deletedStates[t][u][c]=null);else if(a!==void 0)if(this.stateChanges[t]&&this.stateChanges[t][u])for(c in this.deletedStates[t][u]={},this.stateChanges[t][u])this.deletedStates[t][u][c]=null;else this.deletedStates[t][u]=null;else this.deletedStates[t]=null}getState(t,a){const c=String(a),u=d.e({},(this.state[t]||{})[c],(this.stateChanges[t]||{})[c]);if(this.deletedStates[t]===null)return{};if(this.deletedStates[t]){const m=this.deletedStates[t][a];if(m===null)return{};for(const w in m)delete u[w]}return u}initializeTileState(t,a){t.setFeatureState(this.state,a)}coalesceChanges(t,a){const c={};for(const u in this.stateChanges){this.state[u]=this.state[u]||{};const m={};for(const w in this.stateChanges[u])this.state[u][w]||(this.state[u][w]={}),d.e(this.state[u][w],this.stateChanges[u][w]),m[w]=this.state[u][w];c[u]=m}for(const u in this.deletedStates){this.state[u]=this.state[u]||{};const m={};if(this.deletedStates[u]===null)for(const w in this.state[u])m[w]={},this.state[u][w]={};else for(const w in this.deletedStates[u]){if(this.deletedStates[u][w]===null)this.state[u][w]={};else for(const S of Object.keys(this.deletedStates[u][w]))delete this.state[u][w][S];m[w]=this.state[u][w]}c[u]=c[u]||{},d.e(c[u],m)}if(this.stateChanges={},this.deletedStates={},Object.keys(c).length!==0)for(const u in t)t[u].setFeatureState(c,a)}}class De extends d.E{constructor(t,a,c){super(),this.id=t,this.dispatcher=c,this.on("data",u=>{u.dataType==="source"&&u.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&u.dataType==="source"&&u.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((u,m,w,S)=>{const C=new(cs(m.type))(u,m,w,S);if(C.id!==u)throw new Error(`Expected Source id to be ${u} instead of ${C.id}`);return C})(t,a,c,this),this._tiles={},this._cache=new Ha(0,u=>this._unloadTile(u)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new us,this._didEmitContent=!1,this._updated=!1}onAdd(t){this.map=t,this._maxTileCacheSize=t?t._maxTileCacheSize:null,this._maxTileCacheZoomLevels=t?t._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(t)}onRemove(t){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(t)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const t in this._tiles){const a=this._tiles[t];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const t=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,t&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(t,a,c){return d._(this,void 0,void 0,function*(){try{yield this._source.loadTile(t),this._tileLoaded(t,a,c)}catch(u){t.state="errored",u.status!==404?this._source.fire(new d.j(u,{tile:t})):this.update(this.transform,this.terrain)}})}_unloadTile(t){this._source.unloadTile&&this._source.unloadTile(t)}_abortTile(t){this._source.abortTile&&this._source.abortTile(t),this._source.fire(new d.k("dataabort",{tile:t,coord:t.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(t){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const c=this._tiles[a];c.upload(t),c.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(t=>t.tileID).sort(yt).map(t=>t.key)}getRenderableIds(t){const a=[];for(const c in this._tiles)this._isIdRenderable(c,t)&&a.push(this._tiles[c]);return t?a.sort((c,u)=>{const m=c.tileID,w=u.tileID,S=new d.P(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),C=new d.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-w.overscaledZ||C.y-S.y||C.x-S.x}).map(c=>c.tileID.key):a.map(c=>c.tileID).sort(yt).map(c=>c.key)}hasRenderableParent(t){const a=this.findLoadedParent(t,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(t,a){return this._tiles[t]&&this._tiles[t].hasData()&&!this._coveredTiles[t]&&(a||!this._tiles[t].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const t in this._tiles)this._tiles[t].state!=="errored"&&this._reloadTile(t,"reloading")}}_reloadTile(t,a){return d._(this,void 0,void 0,function*(){const c=this._tiles[t];c&&(c.state!=="loading"&&(c.state=a),yield this._loadTile(c,t,a))})}_tileLoaded(t,a,c){t.timeAdded=K.now(),c==="expired"&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(a,t),this.getSource().type==="raster-dem"&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),t.aborted||this._source.fire(new d.k("data",{dataType:"source",tile:t,coord:t.tileID}))}_backfillDEM(t){const a=this.getRenderableIds();for(let u=0;u<a.length;u++){const m=a[u];if(t.neighboringTiles&&t.neighboringTiles[m]){const w=this.getTileByID(m);c(t,w),c(w,t)}}function c(u,m){u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0;let w=m.tileID.canonical.x-u.tileID.canonical.x;const S=m.tileID.canonical.y-u.tileID.canonical.y,C=Math.pow(2,u.tileID.canonical.z),k=m.tileID.key;w===0&&S===0||Math.abs(S)>1||(Math.abs(w)>1&&(Math.abs(w+C)===1?w+=C:Math.abs(w-C)===1&&(w-=C)),m.dem&&u.dem&&(u.dem.backfillBorder(m.dem,w,S),u.neighboringTiles&&u.neighboringTiles[k]&&(u.neighboringTiles[k].backfilled=!0)))}}getTile(t){return this.getTileByID(t.key)}getTileByID(t){return this._tiles[t]}_retainLoadedChildren(t,a,c,u){for(const m in this._tiles){let w=this._tiles[m];if(u[m]||!w.hasData()||w.tileID.overscaledZ<=a||w.tileID.overscaledZ>c)continue;let S=w.tileID;for(;w&&w.tileID.overscaledZ>a+1;){const k=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[k.key],w&&w.hasData()&&(S=k)}let C=S;for(;C.overscaledZ>a;)if(C=C.scaledTo(C.overscaledZ-1),t[C.key]){u[S.key]=S;break}}}findLoadedParent(t,a){if(t.key in this._loadedParentTiles){const c=this._loadedParentTiles[t.key];return c&&c.tileID.overscaledZ>=a?c:null}for(let c=t.overscaledZ-1;c>=a;c--){const u=t.scaledTo(c),m=this._getLoadedTile(u);if(m)return m}}_getLoadedTile(t){const a=this._tiles[t.key];return a&&a.hasData()?a:this._cache.getByKey(t.wrapped().key)}updateCacheSize(t){const a=Math.ceil(t.width/this._source.tileSize)+1,c=Math.ceil(t.height/this._source.tileSize)+1,u=Math.floor(a*c*(this._maxTileCacheZoomLevels===null?d.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),m=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,u):u;this._cache.setMaxSize(m)}handleWrapJump(t){const a=Math.round((t-(this._prevLng===void 0?t:this._prevLng))/360);if(this._prevLng=t,a){const c={};for(const u in this._tiles){const m=this._tiles[u];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+a),c[m.tileID.key]=m}this._tiles=c;for(const u in this._timers)clearTimeout(this._timers[u]),delete this._timers[u];for(const u in this._tiles)this._setTileReloadTimer(u,this._tiles[u])}}update(t,a){if(this.transform=t,this.terrain=a,!this._sourceLoaded||this._paused)return;let c;this.updateCacheSize(t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?c=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new d.Q(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(c=t.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a}),this._source.hasTile&&(c=c.filter(z=>this._source.hasTile(z)))):c=[];const u=t.coveringZoomLevel(this._source),m=Math.max(u-De.maxOverzooming,this._source.minzoom),w=Math.max(u+De.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const z={};for(const A of c)if(A.canonical.z>this._source.minzoom){const B=A.scaledTo(A.canonical.z-1);z[B.key]=B;const G=A.scaledTo(Math.max(this._source.minzoom,Math.min(A.canonical.z,5)));z[G.key]=G}c=c.concat(Object.values(z))}const S=c.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,S&&this.fire(new d.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const C=this._updateRetainedTiles(c,u);if(pt(this._source.type)){const z={},A={},B=Object.keys(C),G=K.now();for(const q of B){const X=C[q],j=this._tiles[q];if(!j||j.fadeEndTime!==0&&j.fadeEndTime<=G)continue;const ie=this.findLoadedParent(X,m);ie&&(this._addTile(ie.tileID),z[ie.tileID.key]=ie.tileID),A[q]=X}this._retainLoadedChildren(A,u,w,C);for(const q in z)C[q]||(this._coveredTiles[q]=!0,C[q]=z[q]);if(a){const q={},X={};for(const j of c)this._tiles[j.key].hasData()?q[j.key]=j:X[j.key]=j;for(const j in X){const ie=X[j].children(this._source.maxzoom);this._tiles[ie[0].key]&&this._tiles[ie[1].key]&&this._tiles[ie[2].key]&&this._tiles[ie[3].key]&&(q[ie[0].key]=C[ie[0].key]=ie[0],q[ie[1].key]=C[ie[1].key]=ie[1],q[ie[2].key]=C[ie[2].key]=ie[2],q[ie[3].key]=C[ie[3].key]=ie[3],delete X[j])}for(const j in X){const ie=this.findLoadedParent(X[j],this._source.minzoom);if(ie){q[ie.tileID.key]=C[ie.tileID.key]=ie.tileID;for(const fe in q)q[fe].isChildOf(ie.tileID)&&delete q[fe]}}for(const j in this._tiles)q[j]||(this._coveredTiles[j]=!0)}}for(const z in C)this._tiles[z].clearFadeHold();const k=d.ab(this._tiles,C);for(const z of k){const A=this._tiles[z];A.hasSymbolBuckets&&!A.holdingForFade()?A.setHoldDuration(this.map._fadeDuration):A.hasSymbolBuckets&&!A.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const t in this._tiles)this._tiles[t].holdingForFade()&&this._removeTile(t)}_updateRetainedTiles(t,a){const c={},u={},m=Math.max(a-De.maxOverzooming,this._source.minzoom),w=Math.max(a+De.maxUnderzooming,this._source.minzoom),S={};for(const C of t){const k=this._addTile(C);c[C.key]=C,k.hasData()||a<this._source.maxzoom&&(S[C.key]=C)}this._retainLoadedChildren(S,a,w,c);for(const C of t){let k=this._tiles[C.key];if(k.hasData())continue;if(a+1>this._source.maxzoom){const A=C.children(this._source.maxzoom)[0],B=this.getTile(A);if(B&&B.hasData()){c[A.key]=A;continue}}else{const A=C.children(this._source.maxzoom);if(c[A[0].key]&&c[A[1].key]&&c[A[2].key]&&c[A[3].key])continue}let z=k.wasRequested();for(let A=C.overscaledZ-1;A>=m;--A){const B=C.scaledTo(A);if(u[B.key])break;if(u[B.key]=!0,k=this.getTile(B),!k&&z&&(k=this._addTile(B)),k){const G=k.hasData();if((z||G)&&(c[B.key]=B),z=k.wasRequested(),G)break}}}return c}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const t in this._tiles){const a=[];let c,u=this._tiles[t].tileID;for(;u.overscaledZ>0;){if(u.key in this._loadedParentTiles){c=this._loadedParentTiles[u.key];break}a.push(u.key);const m=u.scaledTo(u.overscaledZ-1);if(c=this._getLoadedTile(m),c)break;u=m}for(const m of a)this._loadedParentTiles[m]=c}}_addTile(t){let a=this._tiles[t.key];if(a)return a;a=this._cache.getAndRemove(t),a&&(this._setTileReloadTimer(t.key,a),a.tileID=t,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,a)));const c=a;return a||(a=new or(t,this._source.tileSize*t.overscaleFactor()),this._loadTile(a,t.key,a.state)),a.uses++,this._tiles[t.key]=a,c||this._source.fire(new d.k("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(t,a){t in this._timers&&(clearTimeout(this._timers[t]),delete this._timers[t]);const c=a.getExpiryTimeout();c&&(this._timers[t]=setTimeout(()=>{this._reloadTile(t,"expired"),delete this._timers[t]},c))}_removeTile(t){const a=this._tiles[t];a&&(a.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),delete this._timers[t]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const t in this._tiles)this._removeTile(t);this._cache.reset()}tilesIn(t,a,c){const u=[],m=this.transform;if(!m)return u;const w=c?m.getCameraQueryGeometry(t):t,S=t.map(q=>m.pointCoordinate(q,this.terrain)),C=w.map(q=>m.pointCoordinate(q,this.terrain)),k=this.getIds();let z=1/0,A=1/0,B=-1/0,G=-1/0;for(const q of C)z=Math.min(z,q.x),A=Math.min(A,q.y),B=Math.max(B,q.x),G=Math.max(G,q.y);for(let q=0;q<k.length;q++){const X=this._tiles[k[q]];if(X.holdingForFade())continue;const j=X.tileID,ie=Math.pow(2,m.zoom-X.tileID.overscaledZ),fe=a*X.queryPadding*d.W/X.tileSize/ie,Y=[j.getTilePoint(new d.Y(z,A)),j.getTilePoint(new d.Y(B,G))];if(Y[0].x-fe<d.W&&Y[0].y-fe<d.W&&Y[1].x+fe>=0&&Y[1].y+fe>=0){const ue=S.map(ge=>j.getTilePoint(ge)),me=C.map(ge=>j.getTilePoint(ge));u.push({tile:X,tileID:j,queryGeometry:ue,cameraQueryGeometry:me,scale:ie})}}return u}getVisibleCoordinates(t){const a=this.getRenderableIds(t).map(c=>this._tiles[c].tileID);for(const c of a)c.posMatrix=this.transform.calculatePosMatrix(c.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(pt(this._source.type)){const t=K.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=t)return!0}return!1}setFeatureState(t,a,c){this._state.updateState(t=t||"_geojsonTileLayer",a,c)}removeFeatureState(t,a,c){this._state.removeFeatureState(t=t||"_geojsonTileLayer",a,c)}getFeatureState(t,a){return this._state.getState(t=t||"_geojsonTileLayer",a)}setDependencies(t,a,c){const u=this._tiles[t];u&&u.setDependencies(a,c)}reloadTilesForDependencies(t,a){for(const c in this._tiles)this._tiles[c].hasDependency(t,a)&&this._reloadTile(c,"reloading");this._cache.filter(c=>!c.hasDependency(t,a))}}function yt(f,t){const a=Math.abs(2*f.wrap)-+(f.wrap<0),c=Math.abs(2*t.wrap)-+(t.wrap<0);return f.overscaledZ-t.overscaledZ||c-a||t.canonical.y-f.canonical.y||t.canonical.x-f.canonical.x}function pt(f){return f==="raster"||f==="image"||f==="video"}De.maxOverzooming=10,De.maxUnderzooming=3;class Oi{constructor(t,a){this.reset(t,a)}reset(t,a){this.points=t||[],this._distances=[0];for(let c=1;c<this.points.length;c++)this._distances[c]=this._distances[c-1]+this.points[c].dist(this.points[c-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(this.points.length===1)return this.points[0];t=d.ac(t,0,1);let a=1,c=this._distances[a];const u=t*this.paddedLength+this.padding;for(;c<u&&a<this._distances.length;)c=this._distances[++a];const m=a-1,w=this._distances[m],S=c-w,C=S>0?(u-w)/S:0;return this.points[m].mult(1-C).add(this.points[a].mult(C))}}function Nr(f,t){let a=!0;return f==="always"||f!=="never"&&t!=="never"||(a=!1),a}class ft{constructor(t,a,c){const u=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(t/c),this.yCellCount=Math.ceil(a/c);for(let w=0;w<this.xCellCount*this.yCellCount;w++)u.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=a,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(t,a,c,u,m){this._forEachCell(a,c,u,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(t),this.bboxes.push(a),this.bboxes.push(c),this.bboxes.push(u),this.bboxes.push(m)}insertCircle(t,a,c,u){this._forEachCell(a-u,c-u,a+u,c+u,this._insertCircleCell,this.circleUid++),this.circleKeys.push(t),this.circles.push(a),this.circles.push(c),this.circles.push(u)}_insertBoxCell(t,a,c,u,m,w){this.boxCells[m].push(w)}_insertCircleCell(t,a,c,u,m,w){this.circleCells[m].push(w)}_query(t,a,c,u,m,w,S){if(c<0||t>this.width||u<0||a>this.height)return[];const C=[];if(t<=0&&a<=0&&this.width<=c&&this.height<=u){if(m)return[{key:null,x1:t,y1:a,x2:c,y2:u}];for(let k=0;k<this.boxKeys.length;k++)C.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){const z=this.circles[3*k],A=this.circles[3*k+1],B=this.circles[3*k+2];C.push({key:this.circleKeys[k],x1:z-B,y1:A-B,x2:z+B,y2:A+B})}}else this._forEachCell(t,a,c,u,this._queryCell,C,{hitTest:m,overlapMode:w,seenUids:{box:{},circle:{}}},S);return C}query(t,a,c,u){return this._query(t,a,c,u,!1,null)}hitTest(t,a,c,u,m,w){return this._query(t,a,c,u,!0,m,w).length>0}hitTestCircle(t,a,c,u,m){const w=t-c,S=t+c,C=a-c,k=a+c;if(S<0||w>this.width||k<0||C>this.height)return!1;const z=[];return this._forEachCell(w,C,S,k,this._queryCellCircle,z,{hitTest:!0,overlapMode:u,circle:{x:t,y:a,radius:c},seenUids:{box:{},circle:{}}},m),z.length>0}_queryCell(t,a,c,u,m,w,S,C){const{seenUids:k,hitTest:z,overlapMode:A}=S,B=this.boxCells[m];if(B!==null){const q=this.bboxes;for(const X of B)if(!k.box[X]){k.box[X]=!0;const j=4*X,ie=this.boxKeys[X];if(t<=q[j+2]&&a<=q[j+3]&&c>=q[j+0]&&u>=q[j+1]&&(!C||C(ie))&&(!z||!Nr(A,ie.overlapMode))&&(w.push({key:ie,x1:q[j],y1:q[j+1],x2:q[j+2],y2:q[j+3]}),z))return!0}}const G=this.circleCells[m];if(G!==null){const q=this.circles;for(const X of G)if(!k.circle[X]){k.circle[X]=!0;const j=3*X,ie=this.circleKeys[X];if(this._circleAndRectCollide(q[j],q[j+1],q[j+2],t,a,c,u)&&(!C||C(ie))&&(!z||!Nr(A,ie.overlapMode))){const fe=q[j],Y=q[j+1],ue=q[j+2];if(w.push({key:ie,x1:fe-ue,y1:Y-ue,x2:fe+ue,y2:Y+ue}),z)return!0}}}return!1}_queryCellCircle(t,a,c,u,m,w,S,C){const{circle:k,seenUids:z,overlapMode:A}=S,B=this.boxCells[m];if(B!==null){const q=this.bboxes;for(const X of B)if(!z.box[X]){z.box[X]=!0;const j=4*X,ie=this.boxKeys[X];if(this._circleAndRectCollide(k.x,k.y,k.radius,q[j+0],q[j+1],q[j+2],q[j+3])&&(!C||C(ie))&&!Nr(A,ie.overlapMode))return w.push(!0),!0}}const G=this.circleCells[m];if(G!==null){const q=this.circles;for(const X of G)if(!z.circle[X]){z.circle[X]=!0;const j=3*X,ie=this.circleKeys[X];if(this._circlesCollide(q[j],q[j+1],q[j+2],k.x,k.y,k.radius)&&(!C||C(ie))&&!Nr(A,ie.overlapMode))return w.push(!0),!0}}}_forEachCell(t,a,c,u,m,w,S,C){const k=this._convertToXCellCoord(t),z=this._convertToYCellCoord(a),A=this._convertToXCellCoord(c),B=this._convertToYCellCoord(u);for(let G=k;G<=A;G++)for(let q=z;q<=B;q++)if(m.call(this,t,a,c,u,this.xCellCount*q+G,w,S,C))return}_convertToXCellCoord(t){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(t*this.xScale)))}_convertToYCellCoord(t){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(t*this.yScale)))}_circlesCollide(t,a,c,u,m,w){const S=u-t,C=m-a,k=c+w;return k*k>S*S+C*C}_circleAndRectCollide(t,a,c,u,m,w,S){const C=(w-u)/2,k=Math.abs(t-(u+C));if(k>C+c)return!1;const z=(S-m)/2,A=Math.abs(a-(m+z));if(A>z+c)return!1;if(k<=C||A<=z)return!0;const B=k-C,G=A-z;return B*B+G*G<=c*c}}function Wn(f,t,a,c,u){const m=d.F();return t?(d.J(m,m,[1/u,1/u,1]),a||d.ad(m,m,c.angle)):d.K(m,c.labelPlaneMatrix,f),m}function zn(f,t,a,c,u){if(t){const m=d.ae(f);return d.J(m,m,[u,u,1]),a||d.ad(m,m,-c.angle),m}return c.glCoordMatrix}function Z(f,t,a){let c;a?(c=[f.x,f.y,a(f.x,f.y),1],d.af(c,c,t)):(c=[f.x,f.y,0,1],ot(c,c,t));const u=c[3];return{point:new d.P(c[0]/u,c[1]/u),signedDistanceFromCamera:u}}function M(f,t){return .5+f/t*.5}function L(f,t){const a=f[0]/f[3],c=f[1]/f[3];return a>=-t[0]&&a<=t[0]&&c>=-t[1]&&c<=t[1]}function N(f,t,a,c,u,m,w,S,C,k){const z=c?f.textSizeData:f.iconSizeData,A=d.ag(z,a.transform.zoom),B=[256/a.width*2+1,256/a.height*2+1],G=c?f.text.dynamicLayoutVertexArray:f.icon.dynamicLayoutVertexArray;G.clear();const q=f.lineVertexArray,X=c?f.text.placedSymbolArray:f.icon.placedSymbolArray,j=a.transform.width/a.transform.height;let ie=!1;for(let fe=0;fe<X.length;fe++){const Y=X.get(fe);if(Y.hidden||Y.writingMode===d.ah.vertical&&!ie){Je(Y.numGlyphs,G);continue}let ue;if(ie=!1,k?(ue=[Y.anchorX,Y.anchorY,k(Y.anchorX,Y.anchorY),1],d.af(ue,ue,t)):(ue=[Y.anchorX,Y.anchorY,0,1],ot(ue,ue,t)),!L(ue,B)){Je(Y.numGlyphs,G);continue}const me=M(a.transform.cameraToCenterDistance,ue[3]),ge=d.ai(z,A,Y),ye=w?ge/me:ge*me,Pe=new d.P(Y.anchorX,Y.anchorY),Ce=Z(Pe,u,k).point,Ie={projections:{},offsets:{}},Ze=se(Y,ye,!1,S,t,u,m,f.glyphOffsetArray,q,G,Ce,Pe,Ie,j,C,k);ie=Ze.useVertical,(Ze.notEnoughRoom||ie||Ze.needsFlipping&&se(Y,ye,!0,S,t,u,m,f.glyphOffsetArray,q,G,Ce,Pe,Ie,j,C,k).notEnoughRoom)&&Je(Y.numGlyphs,G)}c?f.text.dynamicLayoutVertexBuffer.updateData(G):f.icon.dynamicLayoutVertexBuffer.updateData(G)}function $(f,t,a,c,u,m,w,S,C,k,z,A,B){const G=S.glyphStartIndex+S.numGlyphs,q=S.lineStartIndex,X=S.lineStartIndex+S.lineLength,j=t.getoffsetX(S.glyphStartIndex),ie=t.getoffsetX(G-1),fe=ve(f*j,a,c,u,m,w,S.segment,q,X,C,k,z,A,B);if(!fe)return null;const Y=ve(f*ie,a,c,u,m,w,S.segment,q,X,C,k,z,A,B);return Y?{first:fe,last:Y}:null}function ne(f,t,a,c){return f===d.ah.horizontal&&Math.abs(a.y-t.y)>Math.abs(a.x-t.x)*c?{useVertical:!0}:(f===d.ah.vertical?t.y<a.y:t.x>a.x)?{needsFlipping:!0}:null}function se(f,t,a,c,u,m,w,S,C,k,z,A,B,G,q,X){const j=t/24,ie=f.lineOffsetX*j,fe=f.lineOffsetY*j;let Y;if(f.numGlyphs>1){const ue=f.glyphStartIndex+f.numGlyphs,me=f.lineStartIndex,ge=f.lineStartIndex+f.lineLength,ye=$(j,S,ie,fe,a,z,A,f,C,m,B,q,X);if(!ye)return{notEnoughRoom:!0};const Pe=Z(ye.first.point,w,X).point,Ce=Z(ye.last.point,w,X).point;if(c&&!a){const Ie=ne(f.writingMode,Pe,Ce,G);if(Ie)return Ie}Y=[ye.first];for(let Ie=f.glyphStartIndex+1;Ie<ue-1;Ie++)Y.push(ve(j*S.getoffsetX(Ie),ie,fe,a,z,A,f.segment,me,ge,C,m,B,q,X));Y.push(ye.last)}else{if(c&&!a){const me=Z(A,u,X).point,ge=f.lineStartIndex+f.segment+1,ye=new d.P(C.getx(ge),C.gety(ge)),Pe=Z(ye,u,X),Ce=Pe.signedDistanceFromCamera>0?Pe.point:he(A,ye,me,1,u,X),Ie=ne(f.writingMode,me,Ce,G);if(Ie)return Ie}const ue=ve(j*S.getoffsetX(f.glyphStartIndex),ie,fe,a,z,A,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,C,m,B,q,X);if(!ue)return{notEnoughRoom:!0};Y=[ue]}for(const ue of Y)d.aj(k,ue.point,ue.angle);return{}}function he(f,t,a,c,u,m){const w=Z(f.add(f.sub(t)._unit()),u,m).point,S=a.sub(w);return a.add(S._mult(c/S.mag()))}function te(f,t){const{projectionCache:a,lineVertexArray:c,labelPlaneMatrix:u,tileAnchorPoint:m,distanceFromAnchor:w,getElevation:S,previousVertex:C,direction:k,absOffsetX:z}=t;if(a.projections[f])return a.projections[f];const A=new d.P(c.getx(f),c.gety(f)),B=Z(A,u,S);if(B.signedDistanceFromCamera>0)return a.projections[f]=B.point,B.point;const G=f-k;return he(w===0?m:new d.P(c.getx(G),c.gety(G)),A,C,z-w+1,u,S)}function pe(f,t,a){return f._unit()._perp()._mult(t*a)}function Ee(f,t,a,c,u,m,w,S){const{projectionCache:C,direction:k}=S;if(C.offsets[f])return C.offsets[f];const z=a.add(t);if(f+k<c||f+k>=u)return C.offsets[f]=z,z;const A=te(f+k,S),B=pe(A.sub(a),w,k),G=a.add(B),q=A.add(B);return C.offsets[f]=d.ak(m,z,G,q)||z,C.offsets[f]}function ve(f,t,a,c,u,m,w,S,C,k,z,A,B,G){const q=c?f-t:f+t;let X=q>0?1:-1,j=0;c&&(X*=-1,j=Math.PI),X<0&&(j+=Math.PI);let ie,fe,Y=X>0?S+w:S+w+1,ue=u,me=u,ge=0,ye=0;const Pe=Math.abs(q),Ce=[];let Ie;for(;ge+ye<=Pe;){if(Y+=X,Y<S||Y>=C)return null;ge+=ye,me=ue,fe=ie;const Be={projectionCache:A,lineVertexArray:k,labelPlaneMatrix:z,tileAnchorPoint:m,distanceFromAnchor:ge,getElevation:G,previousVertex:me,direction:X,absOffsetX:Pe};if(ue=te(Y,Be),a===0)Ce.push(me),Ie=ue.sub(me);else{let at;const gt=ue.sub(me);at=gt.mag()===0?pe(te(Y+X,Be).sub(ue),a,X):pe(gt,a,X),fe||(fe=me.add(at)),ie=Ee(Y,at,ue,S,C,fe,a,Be),Ce.push(fe),Ie=ie.sub(fe)}ye=Ie.mag()}const Ze=Ie._mult((Pe-ge)/ye)._add(fe||me),ut=j+Math.atan2(ue.y-me.y,ue.x-me.x);return Ce.push(Ze),{point:Ze,angle:B?ut:0,path:Ce}}const be=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Je(f,t){for(let a=0;a<f;a++){const c=t.length;t.resize(c+4),t.float32.set(be,3*c)}}function ot(f,t,a){const c=t[0],u=t[1];return f[0]=a[0]*c+a[4]*u+a[12],f[1]=a[1]*c+a[5]*u+a[13],f[3]=a[3]*c+a[7]*u+a[15],f}const st=100;class Et{constructor(t,a=new ft(t.width+200,t.height+200,25),c=new ft(t.width+200,t.height+200,25)){this.transform=t,this.grid=a,this.ignoredGrid=c,this.pitchfactor=Math.cos(t._pitch)*t.cameraToCenterDistance,this.screenRightBoundary=t.width+st,this.screenBottomBoundary=t.height+st,this.gridRightBoundary=t.width+200,this.gridBottomBoundary=t.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(t,a,c,u,m,w){const S=this.projectAndGetPerspectiveRatio(u,t.anchorPointX,t.anchorPointY,w),C=c*S.perspectiveRatio,k=t.x1*C+S.point.x,z=t.y1*C+S.point.y,A=t.x2*C+S.point.x,B=t.y2*C+S.point.y;return!this.isInsideGrid(k,z,A,B)||a!=="always"&&this.grid.hitTest(k,z,A,B,a,m)||S.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[k,z,A,B],offscreen:this.isOffscreen(k,z,A,B)}}placeCollisionCircles(t,a,c,u,m,w,S,C,k,z,A,B,G,q){const X=[],j=new d.P(a.anchorX,a.anchorY),ie=Z(j,w,q),fe=M(this.transform.cameraToCenterDistance,ie.signedDistanceFromCamera),Y=(z?m/fe:m*fe)/d.ao,ue=Z(j,S,q).point,me=$(Y,u,a.lineOffsetX*Y,a.lineOffsetY*Y,!1,ue,j,a,c,S,{projections:{},offsets:{}},!1,q);let ge=!1,ye=!1,Pe=!0;if(me){const Ce=.5*B*fe+G,Ie=new d.P(-100,-100),Ze=new d.P(this.screenRightBoundary,this.screenBottomBoundary),ut=new Oi,Be=me.first,at=me.last;let gt=[];for(let _t=Be.path.length-1;_t>=1;_t--)gt.push(Be.path[_t]);for(let _t=1;_t<at.path.length;_t++)gt.push(at.path[_t]);const St=2.5*Ce;if(C){const _t=gt.map(vt=>Z(vt,C,q));gt=_t.some(vt=>vt.signedDistanceFromCamera<=0)?[]:_t.map(vt=>vt.point)}let lt=[];if(gt.length>0){const _t=gt[0].clone(),vt=gt[0].clone();for(let Jt=1;Jt<gt.length;Jt++)_t.x=Math.min(_t.x,gt[Jt].x),_t.y=Math.min(_t.y,gt[Jt].y),vt.x=Math.max(vt.x,gt[Jt].x),vt.y=Math.max(vt.y,gt[Jt].y);lt=_t.x>=Ie.x&&vt.x<=Ze.x&&_t.y>=Ie.y&&vt.y<=Ze.y?[gt]:vt.x<Ie.x||_t.x>Ze.x||vt.y<Ie.y||_t.y>Ze.y?[]:d.al([gt],Ie.x,Ie.y,Ze.x,Ze.y)}for(const _t of lt){ut.reset(_t,.25*Ce);let vt=0;vt=ut.length<=.5*Ce?1:Math.ceil(ut.paddedLength/St)+1;for(let Jt=0;Jt<vt;Jt++){const Ut=Jt/Math.max(vt-1,1),hr=ut.lerp(Ut),vi=hr.x+st,qt=hr.y+st;X.push(vi,qt,Ce,0);const Zi=vi-Ce,en=qt-Ce,vn=vi+Ce,ws=qt+Ce;if(Pe=Pe&&this.isOffscreen(Zi,en,vn,ws),ye=ye||this.isInsideGrid(Zi,en,vn,ws),t!=="always"&&this.grid.hitTestCircle(vi,qt,Ce,t,A)&&(ge=!0,!k))return{circles:[],offscreen:!1,collisionDetected:ge}}}}return{circles:!k&&ge||!ye||fe<this.perspectiveRatioCutoff?[]:X,offscreen:Pe,collisionDetected:ge}}queryRenderedSymbols(t){if(t.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let c=1/0,u=1/0,m=-1/0,w=-1/0;for(const z of t){const A=new d.P(z.x+st,z.y+st);c=Math.min(c,A.x),u=Math.min(u,A.y),m=Math.max(m,A.x),w=Math.max(w,A.y),a.push(A)}const S=this.grid.query(c,u,m,w).concat(this.ignoredGrid.query(c,u,m,w)),C={},k={};for(const z of S){const A=z.key;if(C[A.bucketInstanceId]===void 0&&(C[A.bucketInstanceId]={}),C[A.bucketInstanceId][A.featureIndex])continue;const B=[new d.P(z.x1,z.y1),new d.P(z.x2,z.y1),new d.P(z.x2,z.y2),new d.P(z.x1,z.y2)];d.am(a,B)&&(C[A.bucketInstanceId][A.featureIndex]=!0,k[A.bucketInstanceId]===void 0&&(k[A.bucketInstanceId]=[]),k[A.bucketInstanceId].push(A.featureIndex))}return k}insertCollisionBox(t,a,c,u,m,w){(c?this.ignoredGrid:this.grid).insert({bucketInstanceId:u,featureIndex:m,collisionGroupID:w,overlapMode:a},t[0],t[1],t[2],t[3])}insertCollisionCircles(t,a,c,u,m,w){const S=c?this.ignoredGrid:this.grid,C={bucketInstanceId:u,featureIndex:m,collisionGroupID:w,overlapMode:a};for(let k=0;k<t.length;k+=4)S.insertCircle(C,t[k],t[k+1],t[k+2])}projectAndGetPerspectiveRatio(t,a,c,u){let m;return u?(m=[a,c,u(a,c),1],d.af(m,m,t)):(m=[a,c,0,1],ot(m,m,t)),{point:new d.P((m[0]/m[3]+1)/2*this.transform.width+st,(-m[1]/m[3]+1)/2*this.transform.height+st),perspectiveRatio:.5+this.transform.cameraToCenterDistance/m[3]*.5}}isOffscreen(t,a,c,u){return c<st||t>=this.screenRightBoundary||u<st||a>this.screenBottomBoundary}isInsideGrid(t,a,c,u){return c>=0&&t<this.gridRightBoundary&&u>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const t=d.an([]);return d.H(t,t,[-100,-100,0]),t}}function ct(f,t,a){return t*(d.W/(f.tileSize*Math.pow(2,a-f.tileID.overscaledZ)))}class Gt{constructor(t,a,c,u){this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?a:-a))):u&&c?1:0,this.placed=c}isHidden(){return this.opacity===0&&!this.placed}}class jt{constructor(t,a,c,u,m){this.text=new Gt(t?t.text:null,a,c,m),this.icon=new Gt(t?t.icon:null,a,u,m)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ui{constructor(t,a,c){this.text=t,this.icon=a,this.skipFade=c}}class mt{constructor(){this.invProjMatrix=d.F(),this.viewportMatrix=d.F(),this.circles=[]}}class ei{constructor(t,a,c,u,m){this.bucketInstanceId=t,this.featureIndex=a,this.sourceLayerIndex=c,this.bucketIndex=u,this.tileID=m}}class Mi{constructor(t){this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}get(t){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[t]){const a=++this.maxGroupID;this.collisionGroups[t]={ID:a,predicate:c=>c.collisionGroupID===a}}return this.collisionGroups[t]}}function lr(f,t,a,c,u){const{horizontalAlign:m,verticalAlign:w}=d.at(f);return new d.P(-(m-.5)*t+c[0]*u,-(w-.5)*a+c[1]*u)}function $i(f,t,a,c,u,m){const{x1:w,x2:S,y1:C,y2:k,anchorPointX:z,anchorPointY:A}=f,B=new d.P(t,a);return c&&B._rotate(u?m:-m),{x1:w+B.x,y1:C+B.y,x2:S+B.x,y2:k+B.y,anchorPointX:z,anchorPointY:A}}class Yi{constructor(t,a,c,u,m){this.transform=t.clone(),this.terrain=a,this.collisionIndex=new Et(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=c,this.retainedQueryData={},this.collisionGroups=new Mi(u),this.collisionCircleArrays={},this.prevPlacement=m,m&&(m.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,a,c,u){const m=c.getBucket(a),w=c.latestFeatureIndex;if(!m||!w||a.id!==m.layerIds[0])return;const S=c.collisionBoxArray,C=m.layers[0].layout,k=Math.pow(2,this.transform.zoom-c.tileID.overscaledZ),z=c.tileSize/d.W,A=this.transform.calculatePosMatrix(c.tileID.toUnwrapped()),B=C.get("text-pitch-alignment")==="map",G=C.get("text-rotation-alignment")==="map",q=ct(c,1,this.transform.zoom),X=Wn(A,B,G,this.transform,q);let j=null;if(B){const fe=zn(A,B,G,this.transform,q);j=d.K([],this.transform.labelPlaneMatrix,fe)}this.retainedQueryData[m.bucketInstanceId]=new ei(m.bucketInstanceId,w,m.sourceLayerIndex,m.index,c.tileID);const ie={bucket:m,layout:C,posMatrix:A,textLabelPlaneMatrix:X,labelToScreenMatrix:j,scale:k,textPixelRatio:z,holdingForFade:c.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:d.ag(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(u)for(const fe of m.sortKeyRanges){const{sortKey:Y,symbolInstanceStart:ue,symbolInstanceEnd:me}=fe;t.push({sortKey:Y,symbolInstanceStart:ue,symbolInstanceEnd:me,parameters:ie})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:ie})}attemptAnchorPlacement(t,a,c,u,m,w,S,C,k,z,A,B,G,q,X,j){const ie=d.ap[t.textAnchor],fe=[t.textOffset0,t.textOffset1],Y=lr(ie,c,u,fe,m),ue=this.collisionIndex.placeCollisionBox($i(a,Y.x,Y.y,w,S,this.transform.angle),A,C,k,z.predicate,j);if((!X||this.collisionIndex.placeCollisionBox($i(X,Y.x,Y.y,w,S,this.transform.angle),A,C,k,z.predicate,j).box.length!==0)&&ue.box.length>0){let me;if(this.prevPlacement&&this.prevPlacement.variableOffsets[B.crossTileID]&&this.prevPlacement.placements[B.crossTileID]&&this.prevPlacement.placements[B.crossTileID].text&&(me=this.prevPlacement.variableOffsets[B.crossTileID].anchor),B.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[B.crossTileID]={textOffset:fe,width:c,height:u,anchor:ie,textBoxScale:m,prevAnchor:me},this.markUsedJustification(G,ie,B,q),G.allowVerticalPlacement&&(this.markUsedOrientation(G,q,B),this.placedOrientations[B.crossTileID]=q),{shift:Y,placedGlyphBoxes:ue}}}placeLayerBucketPart(t,a,c){const{bucket:u,layout:m,posMatrix:w,textLabelPlaneMatrix:S,labelToScreenMatrix:C,textPixelRatio:k,holdingForFade:z,collisionBoxArray:A,partiallyEvaluatedTextSize:B,collisionGroup:G}=t.parameters,q=m.get("text-optional"),X=m.get("icon-optional"),j=d.aq(m,"text-overlap","text-allow-overlap"),ie=j==="always",fe=d.aq(m,"icon-overlap","icon-allow-overlap"),Y=fe==="always",ue=m.get("text-rotation-alignment")==="map",me=m.get("text-pitch-alignment")==="map",ge=m.get("icon-text-fit")!=="none",ye=m.get("symbol-z-order")==="viewport-y",Pe=ie&&(Y||!u.hasIconData()||X),Ce=Y&&(ie||!u.hasTextData()||q);!u.collisionArrays&&A&&u.deserializeCollisionBoxes(A);const Ie=this.retainedQueryData[u.bucketInstanceId].tileID,Ze=this.terrain?(Be,at)=>this.terrain.getElevation(Ie,Be,at):null,ut=(Be,at)=>{var gt,St;if(a[Be.crossTileID])return;if(z)return void(this.placements[Be.crossTileID]=new ui(!1,!1,!1));let lt=!1,_t=!1,vt=!0,Jt=null,Ut={box:null,offscreen:null},hr={box:null,offscreen:null},vi=null,qt=null,Zi=null,en=0,vn=0,ws=0;at.textFeatureIndex?en=at.textFeatureIndex:Be.useRuntimeCollisionCircles&&(en=Be.featureIndex),at.verticalTextFeatureIndex&&(vn=at.verticalTextFeatureIndex);const bs=at.textBox;if(bs){const ii=Xt=>{let Li=d.ah.horizontal;if(u.allowVerticalPlacement&&!Xt&&this.prevPlacement){const Pr=this.prevPlacement.placedOrientations[Be.crossTileID];Pr&&(this.placedOrientations[Be.crossTileID]=Pr,Li=Pr,this.markUsedOrientation(u,Li,Be))}return Li},Wt=(Xt,Li)=>{if(u.allowVerticalPlacement&&Be.numVerticalGlyphVertices>0&&at.verticalTextBox){for(const Pr of u.writingModes)if(Pr===d.ah.vertical?(Ut=Li(),hr=Ut):Ut=Xt(),Ut&&Ut.box&&Ut.box.length)break}else Ut=Xt()},li=Be.textAnchorOffsetStartIndex,pa=Be.textAnchorOffsetEndIndex;if(pa===li){const Xt=(Li,Pr)=>{const bt=this.collisionIndex.placeCollisionBox(Li,j,k,w,G.predicate,Ze);return bt&&bt.box&&bt.box.length&&(this.markUsedOrientation(u,Pr,Be),this.placedOrientations[Be.crossTileID]=Pr),bt};Wt(()=>Xt(bs,d.ah.horizontal),()=>{const Li=at.verticalTextBox;return u.allowVerticalPlacement&&Be.numVerticalGlyphVertices>0&&Li?Xt(Li,d.ah.vertical):{box:null,offscreen:null}}),ii(Ut&&Ut.box&&Ut.box.length)}else{let Xt=d.ap[(St=(gt=this.prevPlacement)===null||gt===void 0?void 0:gt.variableOffsets[Be.crossTileID])===null||St===void 0?void 0:St.anchor];const Li=(bt,Nc,Nh)=>{const Ss=bt.x2-bt.x1,Ts=bt.y2-bt.y1,ll=Be.textBoxScale,jc=ge&&fe==="never"?Nc:null;let Cs={box:[],offscreen:!1},jh=j==="never"?1:2,Vc="never";Xt&&jh++;for(let Vh=0;Vh<jh;Vh++){for(let ho=li;ho<pa;ho++){const Uh=u.textAnchorOffsets.get(ho);if(Xt&&Uh.textAnchor!==Xt)continue;const po=this.attemptAnchorPlacement(Uh,bt,Ss,Ts,ll,ue,me,k,w,G,Vc,Be,u,Nh,jc,Ze);if(po&&(Cs=po.placedGlyphBoxes,Cs&&Cs.box&&Cs.box.length))return lt=!0,Jt=po.shift,Cs}Xt?Xt=null:Vc=j}return Cs};Wt(()=>Li(bs,at.iconBox,d.ah.horizontal),()=>{const bt=at.verticalTextBox;return u.allowVerticalPlacement&&!(Ut&&Ut.box&&Ut.box.length)&&Be.numVerticalGlyphVertices>0&&bt?Li(bt,at.verticalIconBox,d.ah.vertical):{box:null,offscreen:null}}),Ut&&(lt=Ut.box,vt=Ut.offscreen);const Pr=ii(Ut&&Ut.box);if(!lt&&this.prevPlacement){const bt=this.prevPlacement.variableOffsets[Be.crossTileID];bt&&(this.variableOffsets[Be.crossTileID]=bt,this.markUsedJustification(u,bt.anchor,Be,Pr))}}}if(vi=Ut,lt=vi&&vi.box&&vi.box.length>0,vt=vi&&vi.offscreen,Be.useRuntimeCollisionCircles){const ii=u.text.placedSymbolArray.get(Be.centerJustifiedTextSymbolIndex),Wt=d.ai(u.textSizeData,B,ii),li=m.get("text-padding");qt=this.collisionIndex.placeCollisionCircles(j,ii,u.lineVertexArray,u.glyphOffsetArray,Wt,w,S,C,c,me,G.predicate,Be.collisionCircleDiameter,li,Ze),qt.circles.length&&qt.collisionDetected&&!c&&d.w("Collisions detected, but collision boxes are not shown"),lt=ie||qt.circles.length>0&&!qt.collisionDetected,vt=vt&&qt.offscreen}if(at.iconFeatureIndex&&(ws=at.iconFeatureIndex),at.iconBox){const ii=Wt=>{const li=ge&&Jt?$i(Wt,Jt.x,Jt.y,ue,me,this.transform.angle):Wt;return this.collisionIndex.placeCollisionBox(li,fe,k,w,G.predicate,Ze)};hr&&hr.box&&hr.box.length&&at.verticalIconBox?(Zi=ii(at.verticalIconBox),_t=Zi.box.length>0):(Zi=ii(at.iconBox),_t=Zi.box.length>0),vt=vt&&Zi.offscreen}const xn=q||Be.numHorizontalGlyphVertices===0&&Be.numVerticalGlyphVertices===0,tn=X||Be.numIconVertices===0;if(xn||tn?tn?xn||(_t=_t&&lt):lt=_t&&lt:_t=lt=_t&&lt,lt&&vi&&vi.box&&this.collisionIndex.insertCollisionBox(vi.box,j,m.get("text-ignore-placement"),u.bucketInstanceId,hr&&hr.box&&vn?vn:en,G.ID),_t&&Zi&&this.collisionIndex.insertCollisionBox(Zi.box,fe,m.get("icon-ignore-placement"),u.bucketInstanceId,ws,G.ID),qt&&(lt&&this.collisionIndex.insertCollisionCircles(qt.circles,j,m.get("text-ignore-placement"),u.bucketInstanceId,en,G.ID),c)){const ii=u.bucketInstanceId;let Wt=this.collisionCircleArrays[ii];Wt===void 0&&(Wt=this.collisionCircleArrays[ii]=new mt);for(let li=0;li<qt.circles.length;li+=4)Wt.circles.push(qt.circles[li+0]),Wt.circles.push(qt.circles[li+1]),Wt.circles.push(qt.circles[li+2]),Wt.circles.push(qt.collisionDetected?1:0)}if(Be.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(u.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Be.crossTileID]=new ui(lt||Pe,_t||Ce,vt||u.justReloaded),a[Be.crossTileID]=!0};if(ye){if(t.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Be=u.getSortedSymbolIndexes(this.transform.angle);for(let at=Be.length-1;at>=0;--at){const gt=Be[at];ut(u.symbolInstances.get(gt),u.collisionArrays[gt])}}else for(let Be=t.symbolInstanceStart;Be<t.symbolInstanceEnd;Be++)ut(u.symbolInstances.get(Be),u.collisionArrays[Be]);if(c&&u.bucketInstanceId in this.collisionCircleArrays){const Be=this.collisionCircleArrays[u.bucketInstanceId];d.ar(Be.invProjMatrix,w),Be.viewportMatrix=this.collisionIndex.getViewportMatrix()}u.justReloaded=!1}markUsedJustification(t,a,c,u){let m;m=u===d.ah.vertical?c.verticalPlacedTextSymbolIndex:{left:c.leftJustifiedTextSymbolIndex,center:c.centerJustifiedTextSymbolIndex,right:c.rightJustifiedTextSymbolIndex}[d.as(a)];const w=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex,c.verticalPlacedTextSymbolIndex];for(const S of w)S>=0&&(t.text.placedSymbolArray.get(S).crossTileID=m>=0&&S!==m?0:c.crossTileID)}markUsedOrientation(t,a,c){const u=a===d.ah.horizontal||a===d.ah.horizontalOnly?a:0,m=a===d.ah.vertical?a:0,w=[c.leftJustifiedTextSymbolIndex,c.centerJustifiedTextSymbolIndex,c.rightJustifiedTextSymbolIndex];for(const S of w)t.text.placedSymbolArray.get(S).placedOrientation=u;c.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(c.verticalPlacedTextSymbolIndex).placedOrientation=m)}commit(t){this.commitTime=t,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let c=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const u=a?a.symbolFadeChange(t):1,m=a?a.opacities:{},w=a?a.variableOffsets:{},S=a?a.placedOrientations:{};for(const C in this.placements){const k=this.placements[C],z=m[C];z?(this.opacities[C]=new jt(z,u,k.text,k.icon),c=c||k.text!==z.text.placed||k.icon!==z.icon.placed):(this.opacities[C]=new jt(null,u,k.text,k.icon,k.skipFade),c=c||k.text||k.icon)}for(const C in m){const k=m[C];if(!this.opacities[C]){const z=new jt(k,u,!1,!1);z.isHidden()||(this.opacities[C]=z,c=c||k.text.placed||k.icon.placed)}}for(const C in w)this.variableOffsets[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.variableOffsets[C]=w[C]);for(const C in S)this.placedOrientations[C]||!this.opacities[C]||this.opacities[C].isHidden()||(this.placedOrientations[C]=S[C]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");c?this.lastPlacementChangeTime=t:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:t)}updateLayerOpacities(t,a){const c={};for(const u of a){const m=u.getBucket(t);m&&u.latestFeatureIndex&&t.id===m.layerIds[0]&&this.updateBucketOpacities(m,c,u.collisionBoxArray)}}updateBucketOpacities(t,a,c){t.hasTextData()&&(t.text.opacityVertexArray.clear(),t.text.hasVisibleVertices=!1),t.hasIconData()&&(t.icon.opacityVertexArray.clear(),t.icon.hasVisibleVertices=!1),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const u=t.layers[0],m=u.layout,w=new jt(null,0,!1,!1,!0),S=m.get("text-allow-overlap"),C=m.get("icon-allow-overlap"),k=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=m.get("text-rotation-alignment")==="map",A=m.get("text-pitch-alignment")==="map",B=m.get("icon-text-fit")!=="none",G=new jt(null,0,S&&(C||!t.hasIconData()||m.get("icon-optional")),C&&(S||!t.hasTextData()||m.get("text-optional")),!0);!t.collisionArrays&&c&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(c);const q=(X,j,ie)=>{for(let fe=0;fe<j/4;fe++)X.opacityVertexArray.emplaceBack(ie);X.hasVisibleVertices=X.hasVisibleVertices||ie!==qi};for(let X=0;X<t.symbolInstances.length;X++){const j=t.symbolInstances.get(X),{numHorizontalGlyphVertices:ie,numVerticalGlyphVertices:fe,crossTileID:Y}=j;let ue=this.opacities[Y];a[Y]?ue=w:ue||(ue=G,this.opacities[Y]=ue),a[Y]=!0;const me=j.numIconVertices>0,ge=this.placedOrientations[j.crossTileID],ye=ge===d.ah.vertical,Pe=ge===d.ah.horizontal||ge===d.ah.horizontalOnly;if(ie>0||fe>0){const Ce=ih(ue.text);q(t.text,ie,ye?qi:Ce),q(t.text,fe,Pe?qi:Ce);const Ie=ue.text.isHidden();[j.rightJustifiedTextSymbolIndex,j.centerJustifiedTextSymbolIndex,j.leftJustifiedTextSymbolIndex].forEach(Be=>{Be>=0&&(t.text.placedSymbolArray.get(Be).hidden=Ie||ye?1:0)}),j.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(j.verticalPlacedTextSymbolIndex).hidden=Ie||Pe?1:0);const Ze=this.variableOffsets[j.crossTileID];Ze&&this.markUsedJustification(t,Ze.anchor,j,ge);const ut=this.placedOrientations[j.crossTileID];ut&&(this.markUsedJustification(t,"left",j,ut),this.markUsedOrientation(t,ut,j))}if(me){const Ce=ih(ue.icon),Ie=!(B&&j.verticalPlacedIconSymbolIndex&&ye);j.placedIconSymbolIndex>=0&&(q(t.icon,j.numIconVertices,Ie?Ce:qi),t.icon.placedSymbolArray.get(j.placedIconSymbolIndex).hidden=ue.icon.isHidden()),j.verticalPlacedIconSymbolIndex>=0&&(q(t.icon,j.numVerticalIconVertices,Ie?qi:Ce),t.icon.placedSymbolArray.get(j.verticalPlacedIconSymbolIndex).hidden=ue.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const Ce=t.collisionArrays[X];if(Ce){let Ie=new d.P(0,0);if(Ce.textBox||Ce.verticalTextBox){let ut=!0;if(k){const Be=this.variableOffsets[Y];Be?(Ie=lr(Be.anchor,Be.width,Be.height,Be.textOffset,Be.textBoxScale),z&&Ie._rotate(A?this.transform.angle:-this.transform.angle)):ut=!1}Ce.textBox&&Tr(t.textCollisionBox.collisionVertexArray,ue.text.placed,!ut||ye,Ie.x,Ie.y),Ce.verticalTextBox&&Tr(t.textCollisionBox.collisionVertexArray,ue.text.placed,!ut||Pe,Ie.x,Ie.y)}const Ze=!!(!Pe&&Ce.verticalIconBox);Ce.iconBox&&Tr(t.iconCollisionBox.collisionVertexArray,ue.icon.placed,Ze,B?Ie.x:0,B?Ie.y:0),Ce.verticalIconBox&&Tr(t.iconCollisionBox.collisionVertexArray,ue.icon.placed,!Ze,B?Ie.x:0,B?Ie.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.text.opacityVertexArray.length!==t.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${t.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${t.text.layoutVertexArray.length}) / 4`);if(t.icon.opacityVertexArray.length!==t.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${t.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${t.icon.layoutVertexArray.length}) / 4`);if(t.bucketInstanceId in this.collisionCircleArrays){const X=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=X.invProjMatrix,t.placementViewportMatrix=X.viewportMatrix,t.collisionCircleArray=X.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(t){return this.fadeDuration===0?1:(t-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(t){return Math.max(0,(this.transform.zoom-t)/1.5)}hasTransitions(t){return this.stale||t-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(t,a){const c=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*c>t}setStale(){this.stale=!0}}function Tr(f,t,a,c,u){f.emplaceBack(t?1:0,a?1:0,c||0,u||0),f.emplaceBack(t?1:0,a?1:0,c||0,u||0),f.emplaceBack(t?1:0,a?1:0,c||0,u||0),f.emplaceBack(t?1:0,a?1:0,c||0,u||0)}const th=Math.pow(2,25),Vp=Math.pow(2,24),Ft=Math.pow(2,17),Xl=Math.pow(2,16),Yl=Math.pow(2,9),Cr=Math.pow(2,8),Er=Math.pow(2,1);function ih(f){if(f.opacity===0&&!f.placed)return 0;if(f.opacity===1&&f.placed)return 4294967295;const t=f.placed?1:0,a=Math.floor(127*f.opacity);return a*th+t*Vp+a*Ft+t*Xl+a*Yl+t*Cr+a*Er+t}const qi=0;class jr{constructor(t){this._sortAcrossTiles=t.layout.get("symbol-z-order")!=="viewport-y"&&!t.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(t,a,c,u,m){const w=this._bucketParts;for(;this._currentTileIndex<t.length;)if(a.getBucketParts(w,u,t[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((S,C)=>S.sortKey-C.sortKey));this._currentPartIndex<w.length;)if(a.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,c),this._currentPartIndex++,m())return!0;return!1}}class rh{constructor(t,a,c,u,m,w,S,C){this.placement=new Yi(t,a,w,S,C),this._currentPlacementIndex=c.length-1,this._forceFullPlacement=u,this._showCollisionBoxes=m,this._done=!1}isDone(){return this._done}continuePlacement(t,a,c){const u=K.now(),m=()=>!this._forceFullPlacement&&K.now()-u>2;for(;this._currentPlacementIndex>=0;){const w=a[t[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=S)&&(!w.maxzoom||w.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new jr(w)),this._inProgressLayer.continuePlacement(c[w.source],this.placement,this._showCollisionBoxes,w,m))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(t){return this.placement.commit(t),this.placement}}const Kn=512/d.W/2;class _i{constructor(t,a,c){this.tileID=t,this.bucketInstanceId=c,this._symbolsByKey={};const u=new Map;for(let m=0;m<a.length;m++){const w=a.get(m),S=w.key,C=u.get(S);C?C.push(w):u.set(S,[w])}for(const[m,w]of u){const S={positions:w.map(C=>({x:Math.floor(C.anchorX*Kn),y:Math.floor(C.anchorY*Kn)})),crossTileIDs:w.map(C=>C.crossTileID)};if(S.positions.length>128){const C=new d.au(S.positions.length,16,Uint16Array);for(const{x:k,y:z}of S.positions)C.add(k,z);C.finish(),delete S.positions,S.index=C}this._symbolsByKey[m]=S}}getScaledCoordinates(t,a){const{x:c,y:u,z:m}=this.tileID.canonical,{x:w,y:S,z:C}=a.canonical,k=Kn/Math.pow(2,C-m),z=(S*d.W+t.anchorY)*k,A=u*d.W*Kn;return{x:Math.floor((w*d.W+t.anchorX)*k-c*d.W*Kn),y:Math.floor(z-A)}}findMatches(t,a,c){const u=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let m=0;m<t.length;m++){const w=t.get(m);if(w.crossTileID)continue;const S=this._symbolsByKey[w.key];if(!S)continue;const C=this.getScaledCoordinates(w,a);if(S.index){const k=S.index.range(C.x-u,C.y-u,C.x+u,C.y+u).sort();for(const z of k){const A=S.crossTileIDs[z];if(!c[A]){c[A]=!0,w.crossTileID=A;break}}}else if(S.positions)for(let k=0;k<S.positions.length;k++){const z=S.positions[k],A=S.crossTileIDs[k];if(Math.abs(z.x-C.x)<=u&&Math.abs(z.y-C.y)<=u&&!c[A]){c[A]=!0,w.crossTileID=A;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:t})=>t)}}class Wa{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class hs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(t){const a=Math.round((t-this.lng)/360);if(a!==0)for(const c in this.indexes){const u=this.indexes[c],m={};for(const w in u){const S=u[w];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+a),m[S.tileID.key]=S}this.indexes[c]=m}this.lng=t}addBucket(t,a,c){if(this.indexes[t.overscaledZ]&&this.indexes[t.overscaledZ][t.key]){if(this.indexes[t.overscaledZ][t.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(t.overscaledZ,this.indexes[t.overscaledZ][t.key])}for(let m=0;m<a.symbolInstances.length;m++)a.symbolInstances.get(m).crossTileID=0;this.usedCrossTileIDs[t.overscaledZ]||(this.usedCrossTileIDs[t.overscaledZ]={});const u=this.usedCrossTileIDs[t.overscaledZ];for(const m in this.indexes){const w=this.indexes[m];if(Number(m)>t.overscaledZ)for(const S in w){const C=w[S];C.tileID.isChildOf(t)&&C.findMatches(a.symbolInstances,t,u)}else{const S=w[t.scaledTo(Number(m)).key];S&&S.findMatches(a.symbolInstances,t,u)}}for(let m=0;m<a.symbolInstances.length;m++){const w=a.symbolInstances.get(m);w.crossTileID||(w.crossTileID=c.generate(),u[w.crossTileID]=!0)}return this.indexes[t.overscaledZ]===void 0&&(this.indexes[t.overscaledZ]={}),this.indexes[t.overscaledZ][t.key]=new _i(t,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(t,a){for(const c of a.getCrossTileIDsLists())for(const u of c)delete this.usedCrossTileIDs[t][u]}removeStaleBuckets(t){let a=!1;for(const c in this.indexes){const u=this.indexes[c];for(const m in u)t[u[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(c,u[m]),delete u[m],a=!0)}return a}}class ai{constructor(){this.layerIndexes={},this.crossTileIDs=new Wa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(t,a,c){let u=this.layerIndexes[t.id];u===void 0&&(u=this.layerIndexes[t.id]=new hs);let m=!1;const w={};u.handleWrapJump(c);for(const S of a){const C=S.getBucket(t);C&&t.id===C.layerIds[0]&&(C.bucketInstanceId||(C.bucketInstanceId=++this.maxBucketInstanceId),u.addBucket(S.tileID,C,this.crossTileIDs)&&(m=!0),w[C.bucketInstanceId]=!0)}return u.removeStaleBuckets(w)&&(m=!0),m}pruneUnusedLayers(t){const a={};t.forEach(c=>{a[c]=!0});for(const c in this.layerIndexes)a[c]||delete this.layerIndexes[c]}}const ds=(f,t)=>d.t(f,t&&t.filter(a=>a.identifier!=="source.canvas")),Yr=d.av();class Ro extends d.E{constructor(t,a={}){super(),this._rtlPluginLoaded=()=>{for(const c in this.sourceCaches){const u=this.sourceCaches[c].getSource().type;u!=="vector"&&u!=="geojson"||this.sourceCaches[c].reload()}},this.map=t,this.dispatcher=new $s(Xr(),t._getMapId()),this.dispatcher.registerMessageHandler("getGlyphs",(c,u)=>this.getGlyphs(c,u)),this.dispatcher.registerMessageHandler("getImages",(c,u)=>this.getImages(c,u)),this.imageManager=new ar,this.imageManager.setEventedParent(this),this.glyphManager=new He(t._requestManager,a.localIdeographFontFamily),this.lineAtlas=new Mt(256,512),this.crossTileSymbolIndex=new ai,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new d.aw,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",d.ax()),Sr().on(Hs,this._rtlPluginLoaded),this.on("data",c=>{if(c.dataType!=="source"||c.sourceDataType!=="metadata")return;const u=this.sourceCaches[c.sourceId];if(!u)return;const m=u.getSource();if(m&&m.vectorLayerIds)for(const w in this._layers){const S=this._layers[w];S.source===m.id&&this._validateLayer(S)}})}loadURL(t,a={},c){this.fire(new d.k("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const u=this.map._requestManager.transformRequest(t,xe.Style);this._loadStyleRequest=new AbortController,d.h(u,this._loadStyleRequest).then(m=>{this._loadStyleRequest=null,this._load(m.data,a,c)}).catch(m=>{this._loadStyleRequest=null,m&&this.fire(new d.j(m))})}loadJSON(t,a={},c){this.fire(new d.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,K.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(t,a,c)}).catch(()=>{})}loadEmpty(){this.fire(new d.k("dataloading",{dataType:"style"})),this._load(Yr,{validate:!1})}_load(t,a,c){var u;const m=a.transformStyle?a.transformStyle(c,t):t;if(!a.validate||!ds(this,d.x(m))){this._loaded=!0,this.stylesheet=m;for(const w in m.sources)this.addSource(w,m.sources[w],{validate:!1});m.sprite?this._loadSprite(m.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(m.glyphs),this._createLayers(),this.light=new It(this.stylesheet.light),this.map.setTerrain((u=this.stylesheet.terrain)!==null&&u!==void 0?u:null),this.fire(new d.k("data",{dataType:"style"})),this.fire(new d.k("style.load"))}}_createLayers(){const t=d.ay(this.stylesheet.layers);this.dispatcher.broadcast("setLayers",t),this._order=t.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of t){const c=d.az(a);c.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=c}}_loadSprite(t,a=!1,c=void 0){let u;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(m,w,S,C){return d._(this,void 0,void 0,function*(){const k=Ot(m),z=S>1?"@2x":"",A={},B={};for(const{id:G,url:q}of k){const X=w.transformRequest(w.normalizeSpriteURL(q,z,".json"),xe.SpriteJSON);A[G]=d.h(X,C);const j=w.transformRequest(w.normalizeSpriteURL(q,z,".png"),xe.SpriteImage);B[G]=le.getImage(j,C)}return yield Promise.all([...Object.values(A),...Object.values(B)]),function(G,q){return d._(this,void 0,void 0,function*(){const X={};for(const j in G){X[j]={};const ie=K.getImageCanvasContext((yield q[j]).data),fe=(yield G[j]).data;for(const Y in fe){const{width:ue,height:me,x:ge,y:ye,sdf:Pe,pixelRatio:Ce,stretchX:Ie,stretchY:Ze,content:ut}=fe[Y];X[j][Y]={data:null,pixelRatio:Ce,sdf:Pe,stretchX:Ie,stretchY:Ze,content:ut,spriteData:{width:ue,height:me,x:ge,y:ye,context:ie}}}}return X})}(A,B)})}(t,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(m=>{if(this._spriteRequest=null,m)for(const w in m){this._spritesImagesIds[w]=[];const S=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(C=>!(C in m)):[];for(const C of S)this.imageManager.removeImage(C),this._changedImages[C]=!0;for(const C in m[w]){const k=w==="default"?C:`${w}:${C}`;this._spritesImagesIds[w].push(k),k in this.imageManager.images?this.imageManager.updateImage(k,m[w][C],!1):this.imageManager.addImage(k,m[w][C]),a&&(this._changedImages[k]=!0)}}}).catch(m=>{this._spriteRequest=null,u=m,this.fire(new d.j(u))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new d.k("data",{dataType:"style"})),c&&c(u)})}_unloadSprite(){for(const t of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(t),this._changedImages[t]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}_validateLayer(t){const a=this.sourceCaches[t.source];if(!a)return;const c=t.sourceLayer;if(!c)return;const u=a.getSource();(u.type==="geojson"||u.vectorLayerIds&&u.vectorLayerIds.indexOf(c)===-1)&&this.fire(new d.j(new Error(`Source layer "${c}" does not exist on source "${u.id}" as specified by style layer "${t.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const t in this.sourceCaches)if(!this.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(t){const a=this._serializedAllLayers();if(!t||t.length===0)return Object.values(a);const c=[];for(const u of t)a[u]&&c.push(a[u]);return c}_serializedAllLayers(){let t=this._serializedLayers;if(t)return t;t=this._serializedLayers={};const a=Object.keys(this._layers);for(const c of a){const u=this._layers[c];u.type!=="custom"&&(t[c]=u.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const t in this.sourceCaches)if(this.sourceCaches[t].hasTransition())return!0;for(const t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(t){if(!this._loaded)return;const a=this._changed;if(this._changed){const u=Object.keys(this._updatedLayers),m=Object.keys(this._removedLayers);(u.length||m.length)&&this._updateWorkerLayers(u,m);for(const w in this._updatedSources){const S=this._updatedSources[w];if(S==="reload")this._reloadSource(w);else{if(S!=="clear")throw new Error(`Invalid action ${S}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}const c={};for(const u in this.sourceCaches){const m=this.sourceCaches[u];c[u]=m.used,m.used=!1}for(const u of this._order){const m=this._layers[u];m.recalculate(t,this._availableImages),!m.isHidden(t.zoom)&&m.source&&(this.sourceCaches[m.source].used=!0)}for(const u in c){const m=this.sourceCaches[u];c[u]!==m.used&&m.fire(new d.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:u}))}this.light.recalculate(t),this.z=t.zoom,a&&this.fire(new d.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const t=Object.keys(this._changedImages);if(t.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],t);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const t in this.sourceCaches)this.sourceCaches[t].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(t,a){this.dispatcher.broadcast("updateLayers",{layers:this._serializeByIds(t),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(t,a={}){var c;this._checkLoaded();const u=this.serialize();if(t=a.transformStyle?a.transformStyle(u,t):t,((c=a.validate)===null||c===void 0||c)&&ds(this,d.x(t)))return!1;(t=d.aA(t)).layers=d.ay(t.layers);const m=d.aB(u,t),w=this._getOperationsToPerform(m);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const S of w.operations)S();return this.stylesheet=t,this._serializedLayers=null,!0}_getOperationsToPerform(t){const a=[],c=[];for(const u of t)switch(u.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,u.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,u.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,u.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,u.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,u.args));break;case"addSource":a.push(()=>this.addSource.apply(this,u.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,u.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,u.args));break;case"setLight":a.push(()=>this.setLight.apply(this,u.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,u.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,u.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,u.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,u.args));break;case"setTransition":a.push(()=>{});break;default:c.push(u.command)}return{operations:a,unimplemented:c}}addImage(t,a){if(this.getImage(t))return this.fire(new d.j(new Error(`An image named "${t}" already exists.`)));this.imageManager.addImage(t,a),this._afterImageUpdated(t)}updateImage(t,a){this.imageManager.updateImage(t,a)}getImage(t){return this.imageManager.getImage(t)}removeImage(t){if(!this.getImage(t))return this.fire(new d.j(new Error(`An image named "${t}" does not exist.`)));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,a,c={}){if(this._checkLoaded(),this.sourceCaches[t]!==void 0)throw new Error(`Source "${t}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(d.x.source,`sources.${t}`,a,null,c))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const u=this.sourceCaches[t]=new De(t,a,this.dispatcher);u.style=this,u.setEventedParent(this,()=>({isSourceLoaded:u.loaded(),source:u.serialize(),sourceId:t})),u.onAdd(this.map),this._changed=!0}removeSource(t){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error("There is no source with this ID");for(const c in this._layers)if(this._layers[c].source===t)return this.fire(new d.j(new Error(`Source "${t}" cannot be removed while layer "${c}" is using it.`)));const a=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],a.fire(new d.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:t})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(t,a){if(this._checkLoaded(),this.sourceCaches[t]===void 0)throw new Error(`There is no source with this ID=${t}`);const c=this.sourceCaches[t].getSource();if(c.type!=="geojson")throw new Error(`geojsonSource.type is ${c.type}, which is !== 'geojson`);c.setData(a),this._changed=!0}getSource(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()}addLayer(t,a,c={}){this._checkLoaded();const u=t.id;if(this.getLayer(u))return void this.fire(new d.j(new Error(`Layer "${u}" already exists on this map.`)));let m;if(t.type==="custom"){if(ds(this,d.aC(t)))return;m=d.az(t)}else{if("source"in t&&typeof t.source=="object"&&(this.addSource(u,t.source),t=d.aA(t),t=d.e(t,{source:u})),this._validate(d.x.layer,`layers.${u}`,t,{arrayIndex:-1},c))return;m=d.az(t),this._validateLayer(m),m.setEventedParent(this,{layer:{id:u}})}const w=a?this._order.indexOf(a):this._order.length;if(a&&w===-1)this.fire(new d.j(new Error(`Cannot add layer "${u}" before non-existing layer "${a}".`)));else{if(this._order.splice(w,0,u),this._layerOrderChanged=!0,this._layers[u]=m,this._removedLayers[u]&&m.source&&m.type!=="custom"){const S=this._removedLayers[u];delete this._removedLayers[u],S.type!==m.type?this._updatedSources[m.source]="clear":(this._updatedSources[m.source]="reload",this.sourceCaches[m.source].pause())}this._updateLayer(m),m.onAdd&&m.onAdd(this.map)}}moveLayer(t,a){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new d.j(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===a)return;const c=this._order.indexOf(t);this._order.splice(c,1);const u=a?this._order.indexOf(a):this._order.length;a&&u===-1?this.fire(new d.j(new Error(`Cannot move layer "${t}" before non-existing layer "${a}".`))):(this._order.splice(u,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const a=this._layers[t];if(!a)return void this.fire(new d.j(new Error(`Cannot remove non-existing layer "${t}".`)));a.setEventedParent(null);const c=this._order.indexOf(t);this._order.splice(c,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=a,delete this._layers[t],this._serializedLayers&&delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],a.onRemove&&a.onRemove(this.map)}getLayer(t){return this._layers[t]}getLayersOrder(){return[...this._order]}hasLayer(t){return t in this._layers}setLayerZoomRange(t,a,c){this._checkLoaded();const u=this.getLayer(t);u?u.minzoom===a&&u.maxzoom===c||(a!=null&&(u.minzoom=a),c!=null&&(u.maxzoom=c),this._updateLayer(u)):this.fire(new d.j(new Error(`Cannot set the zoom range of non-existing layer "${t}".`)))}setFilter(t,a,c={}){this._checkLoaded();const u=this.getLayer(t);if(u){if(!d.aD(u.filter,a))return a==null?(u.filter=void 0,void this._updateLayer(u)):void(this._validate(d.x.filter,`layers.${u.id}.filter`,a,null,c)||(u.filter=d.aA(a),this._updateLayer(u)))}else this.fire(new d.j(new Error(`Cannot filter non-existing layer "${t}".`)))}getFilter(t){return d.aA(this.getLayer(t).filter)}setLayoutProperty(t,a,c,u={}){this._checkLoaded();const m=this.getLayer(t);m?d.aD(m.getLayoutProperty(a),c)||(m.setLayoutProperty(a,c,u),this._updateLayer(m)):this.fire(new d.j(new Error(`Cannot style non-existing layer "${t}".`)))}getLayoutProperty(t,a){const c=this.getLayer(t);if(c)return c.getLayoutProperty(a);this.fire(new d.j(new Error(`Cannot get style of non-existing layer "${t}".`)))}setPaintProperty(t,a,c,u={}){this._checkLoaded();const m=this.getLayer(t);m?d.aD(m.getPaintProperty(a),c)||(m.setPaintProperty(a,c,u)&&this._updateLayer(m),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new d.j(new Error(`Cannot style non-existing layer "${t}".`)))}getPaintProperty(t,a){return this.getLayer(t).getPaintProperty(a)}setFeatureState(t,a){this._checkLoaded();const c=t.source,u=t.sourceLayer,m=this.sourceCaches[c];if(m===void 0)return void this.fire(new d.j(new Error(`The source '${c}' does not exist in the map's style.`)));const w=m.getSource().type;w==="geojson"&&u?this.fire(new d.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||u?(t.id===void 0&&this.fire(new d.j(new Error("The feature id parameter must be provided."))),m.setFeatureState(u,t.id,a)):this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(t,a){this._checkLoaded();const c=t.source,u=this.sourceCaches[c];if(u===void 0)return void this.fire(new d.j(new Error(`The source '${c}' does not exist in the map's style.`)));const m=u.getSource().type,w=m==="vector"?t.sourceLayer:void 0;m!=="vector"||w?a&&typeof t.id!="string"&&typeof t.id!="number"?this.fire(new d.j(new Error("A feature id is required to remove its specific state property."))):u.removeFeatureState(w,t.id,a):this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(t){this._checkLoaded();const a=t.source,c=t.sourceLayer,u=this.sourceCaches[a];if(u!==void 0)return u.getSource().type!=="vector"||c?(t.id===void 0&&this.fire(new d.j(new Error("The feature id parameter must be provided."))),u.getFeatureState(c,t.id)):void this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new d.j(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return d.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const t=d.aE(this.sourceCaches,m=>m.serialize()),a=this._serializeByIds(this._order),c=this.map.getTerrain()||void 0,u=this.stylesheet;return d.aF({version:u.version,name:u.name,metadata:u.metadata,light:u.light,center:u.center,zoom:u.zoom,bearing:u.bearing,pitch:u.pitch,sprite:u.sprite,glyphs:u.glyphs,transition:u.transition,sources:t,layers:a,terrain:c},m=>m!==void 0)}_updateLayer(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&this.sourceCaches[t.source].getSource().type!=="raster"&&(this._updatedSources[t.source]="reload",this.sourceCaches[t.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(t){const a=w=>this._layers[w].type==="fill-extrusion",c={},u=[];for(let w=this._order.length-1;w>=0;w--){const S=this._order[w];if(a(S)){c[S]=w;for(const C of t){const k=C[S];if(k)for(const z of k)u.push(z)}}}u.sort((w,S)=>S.intersectionZ-w.intersectionZ);const m=[];for(let w=this._order.length-1;w>=0;w--){const S=this._order[w];if(a(S))for(let C=u.length-1;C>=0;C--){const k=u[C].feature;if(c[k.layer.id]<w)break;m.push(k),u.pop()}else for(const C of t){const k=C[S];if(k)for(const z of k)m.push(z.feature)}}return m}queryRenderedFeatures(t,a,c){a&&a.filter&&this._validate(d.x.filter,"queryRenderedFeatures.filter",a.filter,null,a);const u={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new d.j(new Error("parameters.layers must be an Array."))),[];for(const S of a.layers){const C=this._layers[S];if(!C)return this.fire(new d.j(new Error(`The layer '${S}' does not exist in the map's style and cannot be queried for features.`))),[];u[C.source]=!0}}const m=[];a.availableImages=this._availableImages;const w=this._serializedAllLayers();for(const S in this.sourceCaches)a.layers&&!u[S]||m.push(Zn(this.sourceCaches[S],this._layers,w,t,a,c));return this.placement&&m.push(function(S,C,k,z,A,B,G){const q={},X=B.queryRenderedSymbols(z),j=[];for(const ie of Object.keys(X).map(Number))j.push(G[ie]);j.sort(Gn);for(const ie of j){const fe=ie.featureIndex.lookupSymbolFeatures(X[ie.bucketInstanceId],C,ie.bucketIndex,ie.sourceLayerIndex,A.filter,A.layers,A.availableImages,S);for(const Y in fe){const ue=q[Y]=q[Y]||[],me=fe[Y];me.sort((ge,ye)=>{const Pe=ie.featureSortOrder;if(Pe){const Ce=Pe.indexOf(ge.featureIndex);return Pe.indexOf(ye.featureIndex)-Ce}return ye.featureIndex-ge.featureIndex});for(const ge of me)ue.push(ge)}}for(const ie in q)q[ie].forEach(fe=>{const Y=fe.feature,ue=k[S[ie].source].getFeatureState(Y.layer["source-layer"],Y.id);Y.source=Y.layer.source,Y.layer["source-layer"]&&(Y.sourceLayer=Y.layer["source-layer"]),Y.state=ue});return q}(this._layers,w,this.sourceCaches,t,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(m)}querySourceFeatures(t,a){a&&a.filter&&this._validate(d.x.filter,"querySourceFeatures.filter",a.filter,null,a);const c=this.sourceCaches[t];return c?function(u,m){const w=u.getRenderableIds().map(k=>u.getTileByID(k)),S=[],C={};for(let k=0;k<w.length;k++){const z=w[k],A=z.tileID.canonical.key;C[A]||(C[A]=!0,z.querySourceFeatures(S,m))}return S}(c,a):[]}getLight(){return this.light.getLight()}setLight(t,a={}){this._checkLoaded();const c=this.light.getLight();let u=!1;for(const w in t)if(!d.aD(t[w],c[w])){u=!0;break}if(!u)return;const m={now:K.now(),transition:d.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,a),this.light.updateTransitions(m)}_validate(t,a,c,u,m={}){return(!m||m.validate!==!1)&&ds(this,t.call(d.x,d.e({key:a,style:this.serialize(),value:c,styleSpec:d.v},u)))}_remove(t=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Sr().off(Hs,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const c=this.sourceCaches[a];c.setEventedParent(null),c.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),t&&this.dispatcher.broadcast("removeMap",void 0),this.dispatcher.remove(t)}_clearSource(t){this.sourceCaches[t].clearTiles()}_reloadSource(t){this.sourceCaches[t].resume(),this.sourceCaches[t].reload()}_updateSources(t){for(const a in this.sourceCaches)this.sourceCaches[a].update(t,this.map.terrain)}_generateCollisionBoxes(){for(const t in this.sourceCaches)this._reloadSource(t)}_updatePlacement(t,a,c,u,m=!1){let w=!1,S=!1;const C={};for(const k of this._order){const z=this._layers[k];if(z.type!=="symbol")continue;if(!C[z.source]){const B=this.sourceCaches[z.source];C[z.source]=B.getRenderableIds(!0).map(G=>B.getTileByID(G)).sort((G,q)=>q.tileID.overscaledZ-G.tileID.overscaledZ||(G.tileID.isLessThan(q.tileID)?-1:1))}const A=this.crossTileSymbolIndex.addLayer(z,C[z.source],t.center.lng);w=w||A}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((m=m||this._layerOrderChanged||c===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(K.now(),t.zoom))&&(this.pauseablePlacement=new rh(t,this.map.terrain,this._order,m,a,c,u,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,C),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(K.now()),S=!0),w&&this.pauseablePlacement.placement.setStale()),S||w)for(const k of this._order){const z=this._layers[k];z.type==="symbol"&&this.placement.updateLayerOpacities(z,C[z.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(K.now())}_releaseSymbolFadeTiles(){for(const t in this.sourceCaches)this.sourceCaches[t].releaseSymbolFadeTiles()}getImages(t,a){return d._(this,void 0,void 0,function*(){const c=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const u=this.sourceCaches[a.source];return u&&u.setDependencies(a.tileID.key,a.type,a.icons),c})}getGlyphs(t,a){return d._(this,void 0,void 0,function*(){const c=yield this.glyphManager.getGlyphs(a.stacks),u=this.sourceCaches[a.source];return u&&u.setDependencies(a.tileID.key,a.type,[""]),c})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(t,a={}){this._checkLoaded(),t&&this._validate(d.x.glyphs,"glyphs",t,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=t,this.glyphManager.entries={},this.glyphManager.setURL(t))}addSprite(t,a,c={},u){this._checkLoaded();const m=[{id:t,url:a}],w=[...Ot(this.stylesheet.sprite),...m];this._validate(d.x.sprite,"sprite",w,null,c)||(this.stylesheet.sprite=w,this._loadSprite(m,!0,u))}removeSprite(t){this._checkLoaded();const a=Ot(this.stylesheet.sprite);if(a.find(c=>c.id===t)){if(this._spritesImagesIds[t])for(const c of this._spritesImagesIds[t])this.imageManager.removeImage(c),this._changedImages[c]=!0;a.splice(a.findIndex(c=>c.id===t),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[t],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}else this.fire(new d.j(new Error(`Sprite "${t}" doesn't exists on this map.`)))}getSprite(){return Ot(this.stylesheet.sprite)}setSprite(t,a={},c){this._checkLoaded(),t&&this._validate(d.x.sprite,"sprite",t,null,a)||(this.stylesheet.sprite=t,t?this._loadSprite(t,!0,c):(this._unloadSprite(),c&&c(null)))}}var mn=d.X([{name:"a_pos",type:"Int16",components:2}]),Jl="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const Ws={prelude:Lt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Lt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Lt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Lt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Lt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Lt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Lt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Lt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Lt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Lt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Lt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Lt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Lt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Lt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Lt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Lt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Lt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Lt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Lt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Lt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Lt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Lt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Lt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Lt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Lt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Lt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Lt("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Jl),terrainDepth:Lt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Jl),terrainCoords:Lt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Jl)};function Lt(f,t){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,c=t.match(/attribute ([\w]+) ([\w]+)/g),u=f.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),m=t.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=m?m.concat(u):u,S={};return{fragmentSource:f=f.replace(a,(C,k,z,A,B)=>(S[B]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${B}
varying ${z} ${A} ${B};
#else
uniform ${z} ${A} u_${B};
#endif
`:`
#ifdef HAS_UNIFORM_u_${B}
    ${z} ${A} ${B} = u_${B};
#endif
`)),vertexSource:t=t.replace(a,(C,k,z,A,B)=>{const G=A==="float"?"vec2":"vec4",q=B.match(/color/)?"color":G;return S[B]?k==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${z} ${G} a_${B};
varying ${z} ${A} ${B};
#else
uniform ${z} ${A} u_${B};
#endif
`:q==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = a_${B};
#else
    ${z} ${A} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${B} = unpack_mix_${q}(a_${B}, u_${B}_t);
#else
    ${z} ${A} ${B} = u_${B};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${B}
uniform lowp float u_${B}_t;
attribute ${z} ${G} a_${B};
#else
uniform ${z} ${A} u_${B};
#endif
`:q==="vec4"?`
#ifndef HAS_UNIFORM_u_${B}
    ${z} ${A} ${B} = a_${B};
#else
    ${z} ${A} ${B} = u_${B};
#endif
`:`
#ifndef HAS_UNIFORM_u_${B}
    ${z} ${A} ${B} = unpack_mix_${q}(a_${B}, u_${B}_t);
#else
    ${z} ${A} ${B} = u_${B};
#endif
`}),staticAttributes:c,staticUniforms:w}}class Fo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(t,a,c,u,m,w,S,C,k){this.context=t;let z=this.boundPaintVertexBuffers.length!==u.length;for(let A=0;!z&&A<u.length;A++)this.boundPaintVertexBuffers[A]!==u[A]&&(z=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==c||z||this.boundIndexBuffer!==m||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==S||this.boundDynamicVertexBuffer2!==C||this.boundDynamicVertexBuffer3!==k?this.freshBind(a,c,u,m,w,S,C,k):(t.bindVertexArray.set(this.vao),S&&S.bind(),m&&m.dynamicDraw&&m.bind(),C&&C.bind(),k&&k.bind())}freshBind(t,a,c,u,m,w,S,C){const k=t.numAttributes,z=this.context,A=z.gl;this.vao&&this.destroy(),this.vao=z.createVertexArray(),z.bindVertexArray.set(this.vao),this.boundProgram=t,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=c,this.boundIndexBuffer=u,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=S,this.boundDynamicVertexBuffer3=C,a.enableAttributes(A,t);for(const B of c)B.enableAttributes(A,t);w&&w.enableAttributes(A,t),S&&S.enableAttributes(A,t),C&&C.enableAttributes(A,t),a.bind(),a.setVertexAttribPointers(A,t,m);for(const B of c)B.bind(),B.setVertexAttribPointers(A,t,m);w&&(w.bind(),w.setVertexAttribPointers(A,t,m)),u&&u.bind(),S&&(S.bind(),S.setVertexAttribPointers(A,t,m)),C&&(C.bind(),C.setVertexAttribPointers(A,t,m)),z.currentNumAttributes=k}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function gn(f){const t=[];for(let a=0;a<f.length;a++){if(f[a]===null)continue;const c=f[a].split(" ");t.push(c.pop())}return t}class Ql{constructor(t,a,c,u,m,w){const S=t.gl;this.program=S.createProgram();const C=gn(a.staticAttributes),k=c?c.getBinderAttributes():[],z=C.concat(k),A=Ws.prelude.staticUniforms?gn(Ws.prelude.staticUniforms):[],B=a.staticUniforms?gn(a.staticUniforms):[],G=c?c.getBinderUniforms():[],q=A.concat(B).concat(G),X=[];for(const ge of q)X.indexOf(ge)<0&&X.push(ge);const j=c?c.defines():[];m&&j.push("#define OVERDRAW_INSPECTOR;"),w&&j.push("#define TERRAIN3D;");const ie=j.concat(Ws.prelude.fragmentSource,a.fragmentSource).join(`
`),fe=j.concat(Ws.prelude.vertexSource,a.vertexSource).join(`
`),Y=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);if(S.shaderSource(Y,ie),S.compileShader(Y),!S.getShaderParameter(Y,S.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${S.getShaderInfoLog(Y)}`);S.attachShader(this.program,Y);const ue=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);if(S.shaderSource(ue,fe),S.compileShader(ue),!S.getShaderParameter(ue,S.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${S.getShaderInfoLog(ue)}`);S.attachShader(this.program,ue),this.attributes={};const me={};this.numAttributes=z.length;for(let ge=0;ge<this.numAttributes;ge++)z[ge]&&(S.bindAttribLocation(this.program,ge,z[ge]),this.attributes[z[ge]]=ge);if(S.linkProgram(this.program),!S.getProgramParameter(this.program,S.LINK_STATUS))throw new Error(`Program failed to link: ${S.getProgramInfoLog(this.program)}`);S.deleteShader(ue),S.deleteShader(Y);for(let ge=0;ge<X.length;ge++){const ye=X[ge];if(ye&&!me[ye]){const Pe=S.getUniformLocation(this.program,ye);Pe&&(me[ye]=Pe)}}this.fixedUniforms=u(t,me),this.terrainUniforms=((ge,ye)=>({u_depth:new d.aG(ge,ye.u_depth),u_terrain:new d.aG(ge,ye.u_terrain),u_terrain_dim:new d.aH(ge,ye.u_terrain_dim),u_terrain_matrix:new d.aI(ge,ye.u_terrain_matrix),u_terrain_unpack:new d.aJ(ge,ye.u_terrain_unpack),u_terrain_exaggeration:new d.aH(ge,ye.u_terrain_exaggeration)}))(t,me),this.binderUniforms=c?c.getUniforms(t,me):[]}draw(t,a,c,u,m,w,S,C,k,z,A,B,G,q,X,j,ie,fe){const Y=t.gl;if(this.failedToCreate)return;if(t.program.set(this.program),t.setDepthMode(c),t.setStencilMode(u),t.setColorMode(m),t.setCullFace(w),C){t.activeTexture.set(Y.TEXTURE2),Y.bindTexture(Y.TEXTURE_2D,C.depthTexture),t.activeTexture.set(Y.TEXTURE3),Y.bindTexture(Y.TEXTURE_2D,C.texture);for(const me in this.terrainUniforms)this.terrainUniforms[me].set(C[me])}for(const me in this.fixedUniforms)this.fixedUniforms[me].set(S[me]);X&&X.setUniforms(t,this.binderUniforms,G,{zoom:q});let ue=0;switch(a){case Y.LINES:ue=2;break;case Y.TRIANGLES:ue=3;break;case Y.LINE_STRIP:ue=1}for(const me of B.get()){const ge=me.vaos||(me.vaos={});(ge[k]||(ge[k]=new Fo)).bind(t,this,z,X?X.getPaintVertexBuffers():[],A,me.vertexOffset,j,ie,fe),Y.drawElements(a,me.primitiveLength*ue,Y.UNSIGNED_SHORT,me.primitiveOffset*ue*2)}}}function Ka(f,t,a){const c=1/ct(a,1,t.transform.tileZoom),u=Math.pow(2,a.tileID.overscaledZ),m=a.tileSize*Math.pow(2,t.transform.tileZoom)/u,w=m*(a.tileID.canonical.x+a.tileID.wrap*u),S=m*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[c,f.fromScale,f.toScale],u_fade:f.t,u_pixel_coord_upper:[w>>16,S>>16],u_pixel_coord_lower:[65535&w,65535&S]}}const nh=(f,t,a,c)=>{const u=t.style.light,m=u.properties.get("position"),w=[m.x,m.y,m.z],S=function(){var k=new d.A(9);return d.A!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}();u.properties.get("anchor")==="viewport"&&function(k,z){var A=Math.sin(z),B=Math.cos(z);k[0]=B,k[1]=A,k[2]=0,k[3]=-A,k[4]=B,k[5]=0,k[6]=0,k[7]=0,k[8]=1}(S,-t.transform.angle),function(k,z,A){var B=z[0],G=z[1],q=z[2];k[0]=B*A[0]+G*A[3]+q*A[6],k[1]=B*A[1]+G*A[4]+q*A[7],k[2]=B*A[2]+G*A[5]+q*A[8]}(w,w,S);const C=u.properties.get("color");return{u_matrix:f,u_lightpos:w,u_lightintensity:u.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_vertical_gradient:+a,u_opacity:c}},Up=(f,t,a,c,u,m,w)=>d.e(nh(f,t,a,c),Ka(m,t,w),{u_height_factor:-Math.pow(2,u.overscaledZ)/w.tileSize/8}),Bo=f=>({u_matrix:f}),sh=(f,t,a,c)=>d.e(Bo(f),Ka(a,t,c)),ah=(f,t)=>({u_matrix:f,u_world:t}),$p=(f,t,a,c,u)=>d.e(sh(f,t,a,c),{u_world:u}),oh=(f,t,a,c)=>{const u=f.transform;let m,w;if(c.paint.get("circle-pitch-alignment")==="map"){const S=ct(a,1,u.zoom);m=!0,w=[S,S]}else m=!1,w=u.pixelsToGLUnits;return{u_camera_to_center_distance:u.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_matrix:f.translatePosMatrix(t.posMatrix,a,c.paint.get("circle-translate"),c.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:f.pixelRatio,u_extrude_scale:w}},qp=(f,t,a)=>{const c=ct(a,1,t.zoom),u=Math.pow(2,t.zoom-a.tileID.overscaledZ),m=a.tileID.overscaleFactor();return{u_matrix:f,u_camera_to_center_distance:t.cameraToCenterDistance,u_pixels_to_tile_units:c,u_extrude_scale:[t.pixelsToGLUnits[0]/(c*u),t.pixelsToGLUnits[1]/(c*u)],u_overscale_factor:m}},Oo=(f,t,a=1)=>({u_matrix:f,u_color:t,u_overlay:0,u_overlay_scale:a}),ec=f=>({u_matrix:f}),lh=(f,t,a,c)=>({u_matrix:f,u_extrude_scale:ct(t,1,a),u_intensity:c});function ch(f,t){const a=Math.pow(2,t.canonical.z),c=t.canonical.y;return[new d.Y(0,c/a).toLngLat().lat,new d.Y(0,(c+1)/a).toLngLat().lat]}const No=(f,t,a,c)=>{const u=f.transform;return{u_matrix:Ya(f,t,a,c),u_ratio:1/ct(t,1,u.zoom),u_device_pixel_ratio:f.pixelRatio,u_units_to_pixels:[1/u.pixelsToGLUnits[0],1/u.pixelsToGLUnits[1]]}},ps=(f,t,a,c,u)=>d.e(No(f,t,a,u),{u_image:0,u_image_height:c}),jo=(f,t,a,c,u)=>{const m=f.transform,w=Xa(t,m);return{u_matrix:Ya(f,t,a,u),u_texsize:t.imageAtlasTexture.size,u_ratio:1/ct(t,1,m.zoom),u_device_pixel_ratio:f.pixelRatio,u_image:0,u_scale:[w,c.fromScale,c.toScale],u_fade:c.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Vr=(f,t,a,c,u,m)=>{const w=f.lineAtlas,S=Xa(t,f.transform),C=a.layout.get("line-cap")==="round",k=w.getDash(c.from,C),z=w.getDash(c.to,C),A=k.width*u.fromScale,B=z.width*u.toScale;return d.e(No(f,t,a,m),{u_patternscale_a:[S/A,-k.height/2],u_patternscale_b:[S/B,-z.height/2],u_sdfgamma:w.width/(256*Math.min(A,B)*f.pixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:z.y,u_mix:u.t})};function Xa(f,t){return 1/ct(f,1,t.tileZoom)}function Ya(f,t,a,c){return f.translatePosMatrix(c?c.posMatrix:t.tileID.posMatrix,t,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const Ja=(f,t,a,c,u)=>{return{u_matrix:f,u_tl_parent:t,u_scale_parent:a,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*u.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:u.paint.get("raster-brightness-min"),u_brightness_high:u.paint.get("raster-brightness-max"),u_saturation_factor:(w=u.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(m=u.paint.get("raster-contrast"),m>0?1/(1-m):1+m),u_spin_weights:Vo(u.paint.get("raster-hue-rotate"))};var m,w};function Vo(f){f*=Math.PI/180;const t=Math.sin(f),a=Math.cos(f);return[(2*a+1)/3,(-Math.sqrt(3)*t-a+1)/3,(Math.sqrt(3)*t-a+1)/3]}const Qa=(f,t,a,c,u,m,w,S,C,k)=>{const z=u.transform;return{u_is_size_zoom_constant:+(f==="constant"||f==="source"),u_is_size_feature_constant:+(f==="constant"||f==="camera"),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:z.cameraToCenterDistance,u_pitch:z.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:z.width/z.height,u_fade_change:u.options.fadeDuration?u.symbolFadeChange:1,u_matrix:m,u_label_plane_matrix:w,u_coord_matrix:S,u_is_text:+C,u_pitch_with_map:+c,u_texsize:k,u_texture:0}},Ks=(f,t,a,c,u,m,w,S,C,k,z)=>{const A=u.transform;return d.e(Qa(f,t,a,c,u,m,w,S,C,k),{u_gamma_scale:c?Math.cos(A._pitch)*A.cameraToCenterDistance:1,u_device_pixel_ratio:u.pixelRatio,u_is_halo:+z})},Zp=(f,t,a,c,u,m,w,S,C,k)=>d.e(Ks(f,t,a,c,u,m,w,S,!0,C,!0),{u_texsize_icon:k,u_texture_icon:1}),Gp=(f,t,a)=>({u_matrix:f,u_opacity:t,u_color:a}),uh=(f,t,a,c,u,m)=>d.e(function(w,S,C,k){const z=C.imageManager.getPattern(w.from.toString()),A=C.imageManager.getPattern(w.to.toString()),{width:B,height:G}=C.imageManager.getPixelSize(),q=Math.pow(2,k.tileID.overscaledZ),X=k.tileSize*Math.pow(2,C.transform.tileZoom)/q,j=X*(k.tileID.canonical.x+k.tileID.wrap*q),ie=X*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:A.tl,u_pattern_br_b:A.br,u_texsize:[B,G],u_mix:S.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:A.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/ct(k,1,C.transform.tileZoom),u_pixel_coord_upper:[j>>16,ie>>16],u_pixel_coord_lower:[65535&j,65535&ie]}}(c,m,a,u),{u_matrix:f,u_opacity:t}),Hp={fillExtrusion:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_lightpos:new d.aK(f,t.u_lightpos),u_lightintensity:new d.aH(f,t.u_lightintensity),u_lightcolor:new d.aK(f,t.u_lightcolor),u_vertical_gradient:new d.aH(f,t.u_vertical_gradient),u_opacity:new d.aH(f,t.u_opacity)}),fillExtrusionPattern:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_lightpos:new d.aK(f,t.u_lightpos),u_lightintensity:new d.aH(f,t.u_lightintensity),u_lightcolor:new d.aK(f,t.u_lightcolor),u_vertical_gradient:new d.aH(f,t.u_vertical_gradient),u_height_factor:new d.aH(f,t.u_height_factor),u_image:new d.aG(f,t.u_image),u_texsize:new d.aL(f,t.u_texsize),u_pixel_coord_upper:new d.aL(f,t.u_pixel_coord_upper),u_pixel_coord_lower:new d.aL(f,t.u_pixel_coord_lower),u_scale:new d.aK(f,t.u_scale),u_fade:new d.aH(f,t.u_fade),u_opacity:new d.aH(f,t.u_opacity)}),fill:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix)}),fillPattern:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_image:new d.aG(f,t.u_image),u_texsize:new d.aL(f,t.u_texsize),u_pixel_coord_upper:new d.aL(f,t.u_pixel_coord_upper),u_pixel_coord_lower:new d.aL(f,t.u_pixel_coord_lower),u_scale:new d.aK(f,t.u_scale),u_fade:new d.aH(f,t.u_fade)}),fillOutline:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_world:new d.aL(f,t.u_world)}),fillOutlinePattern:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_world:new d.aL(f,t.u_world),u_image:new d.aG(f,t.u_image),u_texsize:new d.aL(f,t.u_texsize),u_pixel_coord_upper:new d.aL(f,t.u_pixel_coord_upper),u_pixel_coord_lower:new d.aL(f,t.u_pixel_coord_lower),u_scale:new d.aK(f,t.u_scale),u_fade:new d.aH(f,t.u_fade)}),circle:(f,t)=>({u_camera_to_center_distance:new d.aH(f,t.u_camera_to_center_distance),u_scale_with_map:new d.aG(f,t.u_scale_with_map),u_pitch_with_map:new d.aG(f,t.u_pitch_with_map),u_extrude_scale:new d.aL(f,t.u_extrude_scale),u_device_pixel_ratio:new d.aH(f,t.u_device_pixel_ratio),u_matrix:new d.aI(f,t.u_matrix)}),collisionBox:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_camera_to_center_distance:new d.aH(f,t.u_camera_to_center_distance),u_pixels_to_tile_units:new d.aH(f,t.u_pixels_to_tile_units),u_extrude_scale:new d.aL(f,t.u_extrude_scale),u_overscale_factor:new d.aH(f,t.u_overscale_factor)}),collisionCircle:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_inv_matrix:new d.aI(f,t.u_inv_matrix),u_camera_to_center_distance:new d.aH(f,t.u_camera_to_center_distance),u_viewport_size:new d.aL(f,t.u_viewport_size)}),debug:(f,t)=>({u_color:new d.aM(f,t.u_color),u_matrix:new d.aI(f,t.u_matrix),u_overlay:new d.aG(f,t.u_overlay),u_overlay_scale:new d.aH(f,t.u_overlay_scale)}),clippingMask:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix)}),heatmap:(f,t)=>({u_extrude_scale:new d.aH(f,t.u_extrude_scale),u_intensity:new d.aH(f,t.u_intensity),u_matrix:new d.aI(f,t.u_matrix)}),heatmapTexture:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_world:new d.aL(f,t.u_world),u_image:new d.aG(f,t.u_image),u_color_ramp:new d.aG(f,t.u_color_ramp),u_opacity:new d.aH(f,t.u_opacity)}),hillshade:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_image:new d.aG(f,t.u_image),u_latrange:new d.aL(f,t.u_latrange),u_light:new d.aL(f,t.u_light),u_shadow:new d.aM(f,t.u_shadow),u_highlight:new d.aM(f,t.u_highlight),u_accent:new d.aM(f,t.u_accent)}),hillshadePrepare:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_image:new d.aG(f,t.u_image),u_dimension:new d.aL(f,t.u_dimension),u_zoom:new d.aH(f,t.u_zoom),u_unpack:new d.aJ(f,t.u_unpack)}),line:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_ratio:new d.aH(f,t.u_ratio),u_device_pixel_ratio:new d.aH(f,t.u_device_pixel_ratio),u_units_to_pixels:new d.aL(f,t.u_units_to_pixels)}),lineGradient:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_ratio:new d.aH(f,t.u_ratio),u_device_pixel_ratio:new d.aH(f,t.u_device_pixel_ratio),u_units_to_pixels:new d.aL(f,t.u_units_to_pixels),u_image:new d.aG(f,t.u_image),u_image_height:new d.aH(f,t.u_image_height)}),linePattern:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_texsize:new d.aL(f,t.u_texsize),u_ratio:new d.aH(f,t.u_ratio),u_device_pixel_ratio:new d.aH(f,t.u_device_pixel_ratio),u_image:new d.aG(f,t.u_image),u_units_to_pixels:new d.aL(f,t.u_units_to_pixels),u_scale:new d.aK(f,t.u_scale),u_fade:new d.aH(f,t.u_fade)}),lineSDF:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_ratio:new d.aH(f,t.u_ratio),u_device_pixel_ratio:new d.aH(f,t.u_device_pixel_ratio),u_units_to_pixels:new d.aL(f,t.u_units_to_pixels),u_patternscale_a:new d.aL(f,t.u_patternscale_a),u_patternscale_b:new d.aL(f,t.u_patternscale_b),u_sdfgamma:new d.aH(f,t.u_sdfgamma),u_image:new d.aG(f,t.u_image),u_tex_y_a:new d.aH(f,t.u_tex_y_a),u_tex_y_b:new d.aH(f,t.u_tex_y_b),u_mix:new d.aH(f,t.u_mix)}),raster:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_tl_parent:new d.aL(f,t.u_tl_parent),u_scale_parent:new d.aH(f,t.u_scale_parent),u_buffer_scale:new d.aH(f,t.u_buffer_scale),u_fade_t:new d.aH(f,t.u_fade_t),u_opacity:new d.aH(f,t.u_opacity),u_image0:new d.aG(f,t.u_image0),u_image1:new d.aG(f,t.u_image1),u_brightness_low:new d.aH(f,t.u_brightness_low),u_brightness_high:new d.aH(f,t.u_brightness_high),u_saturation_factor:new d.aH(f,t.u_saturation_factor),u_contrast_factor:new d.aH(f,t.u_contrast_factor),u_spin_weights:new d.aK(f,t.u_spin_weights)}),symbolIcon:(f,t)=>({u_is_size_zoom_constant:new d.aG(f,t.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aG(f,t.u_is_size_feature_constant),u_size_t:new d.aH(f,t.u_size_t),u_size:new d.aH(f,t.u_size),u_camera_to_center_distance:new d.aH(f,t.u_camera_to_center_distance),u_pitch:new d.aH(f,t.u_pitch),u_rotate_symbol:new d.aG(f,t.u_rotate_symbol),u_aspect_ratio:new d.aH(f,t.u_aspect_ratio),u_fade_change:new d.aH(f,t.u_fade_change),u_matrix:new d.aI(f,t.u_matrix),u_label_plane_matrix:new d.aI(f,t.u_label_plane_matrix),u_coord_matrix:new d.aI(f,t.u_coord_matrix),u_is_text:new d.aG(f,t.u_is_text),u_pitch_with_map:new d.aG(f,t.u_pitch_with_map),u_texsize:new d.aL(f,t.u_texsize),u_texture:new d.aG(f,t.u_texture)}),symbolSDF:(f,t)=>({u_is_size_zoom_constant:new d.aG(f,t.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aG(f,t.u_is_size_feature_constant),u_size_t:new d.aH(f,t.u_size_t),u_size:new d.aH(f,t.u_size),u_camera_to_center_distance:new d.aH(f,t.u_camera_to_center_distance),u_pitch:new d.aH(f,t.u_pitch),u_rotate_symbol:new d.aG(f,t.u_rotate_symbol),u_aspect_ratio:new d.aH(f,t.u_aspect_ratio),u_fade_change:new d.aH(f,t.u_fade_change),u_matrix:new d.aI(f,t.u_matrix),u_label_plane_matrix:new d.aI(f,t.u_label_plane_matrix),u_coord_matrix:new d.aI(f,t.u_coord_matrix),u_is_text:new d.aG(f,t.u_is_text),u_pitch_with_map:new d.aG(f,t.u_pitch_with_map),u_texsize:new d.aL(f,t.u_texsize),u_texture:new d.aG(f,t.u_texture),u_gamma_scale:new d.aH(f,t.u_gamma_scale),u_device_pixel_ratio:new d.aH(f,t.u_device_pixel_ratio),u_is_halo:new d.aG(f,t.u_is_halo)}),symbolTextAndIcon:(f,t)=>({u_is_size_zoom_constant:new d.aG(f,t.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aG(f,t.u_is_size_feature_constant),u_size_t:new d.aH(f,t.u_size_t),u_size:new d.aH(f,t.u_size),u_camera_to_center_distance:new d.aH(f,t.u_camera_to_center_distance),u_pitch:new d.aH(f,t.u_pitch),u_rotate_symbol:new d.aG(f,t.u_rotate_symbol),u_aspect_ratio:new d.aH(f,t.u_aspect_ratio),u_fade_change:new d.aH(f,t.u_fade_change),u_matrix:new d.aI(f,t.u_matrix),u_label_plane_matrix:new d.aI(f,t.u_label_plane_matrix),u_coord_matrix:new d.aI(f,t.u_coord_matrix),u_is_text:new d.aG(f,t.u_is_text),u_pitch_with_map:new d.aG(f,t.u_pitch_with_map),u_texsize:new d.aL(f,t.u_texsize),u_texsize_icon:new d.aL(f,t.u_texsize_icon),u_texture:new d.aG(f,t.u_texture),u_texture_icon:new d.aG(f,t.u_texture_icon),u_gamma_scale:new d.aH(f,t.u_gamma_scale),u_device_pixel_ratio:new d.aH(f,t.u_device_pixel_ratio),u_is_halo:new d.aG(f,t.u_is_halo)}),background:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_opacity:new d.aH(f,t.u_opacity),u_color:new d.aM(f,t.u_color)}),backgroundPattern:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_opacity:new d.aH(f,t.u_opacity),u_image:new d.aG(f,t.u_image),u_pattern_tl_a:new d.aL(f,t.u_pattern_tl_a),u_pattern_br_a:new d.aL(f,t.u_pattern_br_a),u_pattern_tl_b:new d.aL(f,t.u_pattern_tl_b),u_pattern_br_b:new d.aL(f,t.u_pattern_br_b),u_texsize:new d.aL(f,t.u_texsize),u_mix:new d.aH(f,t.u_mix),u_pattern_size_a:new d.aL(f,t.u_pattern_size_a),u_pattern_size_b:new d.aL(f,t.u_pattern_size_b),u_scale_a:new d.aH(f,t.u_scale_a),u_scale_b:new d.aH(f,t.u_scale_b),u_pixel_coord_upper:new d.aL(f,t.u_pixel_coord_upper),u_pixel_coord_lower:new d.aL(f,t.u_pixel_coord_lower),u_tile_units_to_pixels:new d.aH(f,t.u_tile_units_to_pixels)}),terrain:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_texture:new d.aG(f,t.u_texture),u_ele_delta:new d.aH(f,t.u_ele_delta)}),terrainDepth:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_ele_delta:new d.aH(f,t.u_ele_delta)}),terrainCoords:(f,t)=>({u_matrix:new d.aI(f,t.u_matrix),u_texture:new d.aG(f,t.u_texture),u_terrain_coords_id:new d.aH(f,t.u_terrain_coords_id),u_ele_delta:new d.aH(f,t.u_ele_delta)})};class fs{constructor(t,a,c){this.context=t;const u=t.gl;this.buffer=u.createBuffer(),this.dynamicDraw=!!c,this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),u.bufferData(u.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?u.DYNAMIC_DRAW:u.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(t){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,t.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Uo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class kr{constructor(t,a,c,u){this.length=a.length,this.attributes=c,this.itemSize=a.bytesPerElement,this.dynamicDraw=u,this.context=t;const m=t.gl;this.buffer=m.createBuffer(),t.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(t){if(t.length!==this.length)throw new Error(`Length of new data is ${t.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,t.arrayBuffer)}enableAttributes(t,a){for(let c=0;c<this.attributes.length;c++){const u=a.attributes[this.attributes[c].name];u!==void 0&&t.enableVertexAttribArray(u)}}setVertexAttribPointers(t,a,c){for(let u=0;u<this.attributes.length;u++){const m=this.attributes[u],w=a.attributes[m.name];w!==void 0&&t.vertexAttribPointer(w,m.components,t[Uo[m.type]],!1,this.itemSize,m.offset+this.itemSize*(c||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ji=new WeakMap;function Xs(f){var t;if(Ji.has(f))return Ji.get(f);{const a=(t=f.getParameter(f.VERSION))===null||t===void 0?void 0:t.startsWith("WebGL 2.0");return Ji.set(f,a),a}}class Pt{constructor(t){this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(t){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class $o extends Pt{getDefault(){return d.aO.transparent}set(t){const a=this.current;(t.r!==a.r||t.g!==a.g||t.b!==a.b||t.a!==a.a||this.dirty)&&(this.gl.clearColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class tc extends Pt{getDefault(){return 1}set(t){(t!==this.current||this.dirty)&&(this.gl.clearDepth(t),this.current=t,this.dirty=!1)}}class ic extends Pt{getDefault(){return 0}set(t){(t!==this.current||this.dirty)&&(this.gl.clearStencil(t),this.current=t,this.dirty=!1)}}class qo extends Pt{getDefault(){return[!0,!0,!0,!0]}set(t){const a=this.current;(t[0]!==a[0]||t[1]!==a[1]||t[2]!==a[2]||t[3]!==a[3]||this.dirty)&&(this.gl.colorMask(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class rc extends Pt{getDefault(){return!0}set(t){(t!==this.current||this.dirty)&&(this.gl.depthMask(t),this.current=t,this.dirty=!1)}}class nc extends Pt{getDefault(){return 255}set(t){(t!==this.current||this.dirty)&&(this.gl.stencilMask(t),this.current=t,this.dirty=!1)}}class Zo extends Pt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(t){const a=this.current;(t.func!==a.func||t.ref!==a.ref||t.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(t.func,t.ref,t.mask),this.current=t,this.dirty=!1)}}class hh extends Pt{getDefault(){const t=this.gl;return[t.KEEP,t.KEEP,t.KEEP]}set(t){const a=this.current;(t[0]!==a[0]||t[1]!==a[1]||t[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(t[0],t[1],t[2]),this.current=t,this.dirty=!1)}}class dh extends Pt{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;t?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=t,this.dirty=!1}}class Ys extends Pt{getDefault(){return[0,1]}set(t){const a=this.current;(t[0]!==a[0]||t[1]!==a[1]||this.dirty)&&(this.gl.depthRange(t[0],t[1]),this.current=t,this.dirty=!1)}}class Wp extends Pt{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;t?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=t,this.dirty=!1}}class Kp extends Pt{getDefault(){return this.gl.LESS}set(t){(t!==this.current||this.dirty)&&(this.gl.depthFunc(t),this.current=t,this.dirty=!1)}}class Xp extends Pt{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;t?a.enable(a.BLEND):a.disable(a.BLEND),this.current=t,this.dirty=!1}}class Yp extends Pt{getDefault(){const t=this.gl;return[t.ONE,t.ZERO]}set(t){const a=this.current;(t[0]!==a[0]||t[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(t[0],t[1]),this.current=t,this.dirty=!1)}}class Jp extends Pt{getDefault(){return d.aO.transparent}set(t){const a=this.current;(t.r!==a.r||t.g!==a.g||t.b!==a.b||t.a!==a.a||this.dirty)&&(this.gl.blendColor(t.r,t.g,t.b,t.a),this.current=t,this.dirty=!1)}}class Qp extends Pt{getDefault(){return this.gl.FUNC_ADD}set(t){(t!==this.current||this.dirty)&&(this.gl.blendEquation(t),this.current=t,this.dirty=!1)}}class sc extends Pt{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;t?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=t,this.dirty=!1}}class Go extends Pt{getDefault(){return this.gl.BACK}set(t){(t!==this.current||this.dirty)&&(this.gl.cullFace(t),this.current=t,this.dirty=!1)}}class ac extends Pt{getDefault(){return this.gl.CCW}set(t){(t!==this.current||this.dirty)&&(this.gl.frontFace(t),this.current=t,this.dirty=!1)}}class oc extends Pt{getDefault(){return null}set(t){(t!==this.current||this.dirty)&&(this.gl.useProgram(t),this.current=t,this.dirty=!1)}}class Js extends Pt{getDefault(){return this.gl.TEXTURE0}set(t){(t!==this.current||this.dirty)&&(this.gl.activeTexture(t),this.current=t,this.dirty=!1)}}class ph extends Pt{getDefault(){const t=this.gl;return[0,0,t.drawingBufferWidth,t.drawingBufferHeight]}set(t){const a=this.current;(t[0]!==a[0]||t[1]!==a[1]||t[2]!==a[2]||t[3]!==a[3]||this.dirty)&&(this.gl.viewport(t[0],t[1],t[2],t[3]),this.current=t,this.dirty=!1)}}class fh extends Pt{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,t),this.current=t,this.dirty=!1}}class lc extends Pt{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class ms extends Pt{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,t),this.current=t,this.dirty=!1}}class mh extends Pt{getDefault(){return null}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class Qs extends Pt{getDefault(){return null}set(t){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,t),this.current=t,this.dirty=!1}}class ea extends Pt{getDefault(){return null}set(t){var a;if(t===this.current&&!this.dirty)return;const c=this.gl;Xs(c)?c.bindVertexArray(t):(a=c.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(t),this.current=t,this.dirty=!1}}class gh extends Pt{getDefault(){return 4}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,t),this.current=t,this.dirty=!1}}class cc extends Pt{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t),this.current=t,this.dirty=!1}}class zt extends Pt{getDefault(){return!1}set(t){if(t===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,t),this.current=t,this.dirty=!1}}class ta extends Pt{constructor(t,a){super(t),this.context=t,this.parent=a}getDefault(){return null}}class ef extends ta{setDirty(){this.dirty=!0}set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,t,0),this.current=t,this.dirty=!1}}class yh extends ta{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class eo extends ta{set(t){if(t===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,t),this.current=t,this.dirty=!1}}class tf{constructor(t,a,c,u,m){this.context=t,this.width=a,this.height=c;const w=t.gl,S=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new ef(t,S),u)this.depthAttachment=m?new eo(t,S):new yh(t,S);else if(m)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const t=this.context.gl,a=this.colorAttachment.get();if(a&&t.deleteTexture(a),this.depthAttachment){const c=this.depthAttachment.get();c&&t.deleteRenderbuffer(c)}t.deleteFramebuffer(this.framebuffer)}}class hi{constructor(t,a,c){this.blendFunction=t,this.blendColor=a,this.mask=c}}hi.Replace=[1,0],hi.disabled=new hi(hi.Replace,d.aO.transparent,[!1,!1,!1,!1]),hi.unblended=new hi(hi.Replace,d.aO.transparent,[!0,!0,!0,!0]),hi.alphaBlended=new hi([1,771],d.aO.transparent,[!0,!0,!0,!0]);class _h{constructor(t){var a,c;if(this.gl=t,this.clearColor=new $o(this),this.clearDepth=new tc(this),this.clearStencil=new ic(this),this.colorMask=new qo(this),this.depthMask=new rc(this),this.stencilMask=new nc(this),this.stencilFunc=new Zo(this),this.stencilOp=new hh(this),this.stencilTest=new dh(this),this.depthRange=new Ys(this),this.depthTest=new Wp(this),this.depthFunc=new Kp(this),this.blend=new Xp(this),this.blendFunc=new Yp(this),this.blendColor=new Jp(this),this.blendEquation=new Qp(this),this.cullFace=new sc(this),this.cullFaceSide=new Go(this),this.frontFace=new ac(this),this.program=new oc(this),this.activeTexture=new Js(this),this.viewport=new ph(this),this.bindFramebuffer=new fh(this),this.bindRenderbuffer=new lc(this),this.bindTexture=new ms(this),this.bindVertexBuffer=new mh(this),this.bindElementBuffer=new Qs(this),this.bindVertexArray=new ea(this),this.pixelStoreUnpack=new gh(this),this.pixelStoreUnpackPremultiplyAlpha=new cc(this),this.pixelStoreUnpackFlipY=new zt(this),this.extTextureFilterAnisotropic=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=t.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),Xs(t)){this.HALF_FLOAT=t.HALF_FLOAT;const u=t.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=t.RGBA16F)!==null&&a!==void 0?a:u==null?void 0:u.RGBA16F_EXT,this.RGB16F=(c=t.RGB16F)!==null&&c!==void 0?c:u==null?void 0:u.RGB16F_EXT,t.getExtension("EXT_color_buffer_float")}else{t.getExtension("EXT_color_buffer_half_float"),t.getExtension("OES_texture_half_float_linear");const u=t.getExtension("OES_texture_half_float");this.HALF_FLOAT=u==null?void 0:u.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(t,a){return new fs(this,t,a)}createVertexBuffer(t,a,c){return new kr(this,t,a,c)}createRenderbuffer(t,a,c){const u=this.gl,m=u.createRenderbuffer();return this.bindRenderbuffer.set(m),u.renderbufferStorage(u.RENDERBUFFER,t,a,c),this.bindRenderbuffer.set(null),m}createFramebuffer(t,a,c,u){return new tf(this,t,a,c,u)}clear({color:t,depth:a,stencil:c}){const u=this.gl;let m=0;t&&(m|=u.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(m|=u.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),c!==void 0&&(m|=u.STENCIL_BUFFER_BIT,this.clearStencil.set(c),this.stencilMask.set(255)),u.clear(m)}setCullFace(t){t.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(t.mode),this.frontFace.set(t.frontFace))}setDepthMode(t){t.func!==this.gl.ALWAYS||t.mask?(this.depthTest.set(!0),this.depthFunc.set(t.func),this.depthMask.set(t.mask),this.depthRange.set(t.range)):this.depthTest.set(!1)}setStencilMode(t){t.test.func!==this.gl.ALWAYS||t.mask?(this.stencilTest.set(!0),this.stencilMask.set(t.mask),this.stencilOp.set([t.fail,t.depthFail,t.pass]),this.stencilFunc.set({func:t.test.func,ref:t.ref,mask:t.test.mask})):this.stencilTest.set(!1)}setColorMode(t){d.aD(t.blendFunction,hi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor)),this.colorMask.set(t.mask)}createVertexArray(){var t;return Xs(this.gl)?this.gl.createVertexArray():(t=this.gl.getExtension("OES_vertex_array_object"))===null||t===void 0?void 0:t.createVertexArrayOES()}deleteVertexArray(t){var a;return Xs(this.gl)?this.gl.deleteVertexArray(t):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(t)}unbindVAO(){this.bindVertexArray.set(null)}}class kt{constructor(t,a,c){this.func=t,this.mask=a,this.range=c}}kt.ReadOnly=!1,kt.ReadWrite=!0,kt.disabled=new kt(519,kt.ReadOnly,[0,1]);const to=7680;class $t{constructor(t,a,c,u,m,w){this.test=t,this.ref=a,this.mask=c,this.fail=u,this.depthFail=m,this.pass=w}}$t.disabled=new $t({func:519,mask:0},0,0,to,to,to);class Vt{constructor(t,a,c){this.enable=t,this.mode=a,this.frontFace=c}}let ia;function Ho(f,t,a,c,u,m,w){const S=f.context,C=S.gl,k=f.useProgram("collisionBox"),z=[];let A=0,B=0;for(let Y=0;Y<c.length;Y++){const ue=c[Y],me=t.getTile(ue),ge=me.getBucket(a);if(!ge)continue;let ye=ue.posMatrix;u[0]===0&&u[1]===0||(ye=f.translatePosMatrix(ue.posMatrix,me,u,m));const Pe=w?ge.textCollisionBox:ge.iconCollisionBox,Ce=ge.collisionCircleArray;if(Ce.length>0){const Ie=d.F(),Ze=ye;d.aP(Ie,ge.placementInvProjMatrix,f.transform.glCoordMatrix),d.aP(Ie,Ie,ge.placementViewportMatrix),z.push({circleArray:Ce,circleOffset:B,transform:Ze,invTransform:Ie,coord:ue}),A+=Ce.length/4,B=A}Pe&&k.draw(S,C.LINES,kt.disabled,$t.disabled,f.colorModeForRenderPass(),Vt.disabled,qp(ye,f.transform,me),f.style.map.terrain&&f.style.map.terrain.getTerrainData(ue),a.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,null,f.transform.zoom,null,null,Pe.collisionVertexBuffer)}if(!w||!z.length)return;const G=f.useProgram("collisionCircle"),q=new d.aQ;q.resize(4*A),q._trim();let X=0;for(const Y of z)for(let ue=0;ue<Y.circleArray.length/4;ue++){const me=4*ue,ge=Y.circleArray[me+0],ye=Y.circleArray[me+1],Pe=Y.circleArray[me+2],Ce=Y.circleArray[me+3];q.emplace(X++,ge,ye,Pe,Ce,0),q.emplace(X++,ge,ye,Pe,Ce,1),q.emplace(X++,ge,ye,Pe,Ce,2),q.emplace(X++,ge,ye,Pe,Ce,3)}(!ia||ia.length<2*A)&&(ia=function(Y){const ue=2*Y,me=new d.aS;me.resize(ue),me._trim();for(let ge=0;ge<ue;ge++){const ye=6*ge;me.uint16[ye+0]=4*ge+0,me.uint16[ye+1]=4*ge+1,me.uint16[ye+2]=4*ge+2,me.uint16[ye+3]=4*ge+2,me.uint16[ye+4]=4*ge+3,me.uint16[ye+5]=4*ge+0}return me}(A));const j=S.createIndexBuffer(ia,!0),ie=S.createVertexBuffer(q,d.aR.members,!0);for(const Y of z){const ue={u_matrix:Y.transform,u_inv_matrix:Y.invTransform,u_camera_to_center_distance:(fe=f.transform).cameraToCenterDistance,u_viewport_size:[fe.width,fe.height]};G.draw(S,C.TRIANGLES,kt.disabled,$t.disabled,f.colorModeForRenderPass(),Vt.disabled,ue,f.style.map.terrain&&f.style.map.terrain.getTerrainData(Y.coord),a.id,ie,j,d.$.simpleSegment(0,2*Y.circleOffset,Y.circleArray.length,Y.circleArray.length/2),null,f.transform.zoom,null,null,null)}var fe;ie.destroy(),j.destroy()}Vt.disabled=new Vt(!1,1029,2305),Vt.backCCW=new Vt(!0,1029,2305);const vh=d.an(new Float32Array(16));function Wo(f,t,a,c,u,m){const{horizontalAlign:w,verticalAlign:S}=d.at(f);return new d.P((-(w-.5)*t/u+c[0])*m,(-(S-.5)*a/u+c[1])*m)}function Ko(f,t,a,c,u,m,w,S,C,k,z){const A=f.text.placedSymbolArray,B=f.text.dynamicLayoutVertexArray,G=f.icon.dynamicLayoutVertexArray,q={};B.clear();for(let X=0;X<A.length;X++){const j=A.get(X),ie=j.hidden||!j.crossTileID||f.allowVerticalPlacement&&!j.placedOrientation?null:c[j.crossTileID];if(ie){const fe=new d.P(j.anchorX,j.anchorY),Y=Z(fe,a?w:m,z),ue=M(u.cameraToCenterDistance,Y.signedDistanceFromCamera);let me=d.ai(f.textSizeData,C,j)*ue/d.ao;a&&(me*=f.tilePixelRatio/S);const{width:ge,height:ye,anchor:Pe,textOffset:Ce,textBoxScale:Ie}=ie,Ze=Wo(Pe,ge,ye,Ce,Ie,me),ut=a?Z(fe.add(Ze),m,z).point:Y.point.add(t?Ze.rotate(-u.angle):Ze),Be=f.allowVerticalPlacement&&j.placedOrientation===d.ah.vertical?Math.PI/2:0;for(let at=0;at<j.numGlyphs;at++)d.aj(B,ut,Be);k&&j.associatedIconIndex>=0&&(q[j.associatedIconIndex]={shiftedAnchor:ut,angle:Be})}else Je(j.numGlyphs,B)}if(k){G.clear();const X=f.icon.placedSymbolArray;for(let j=0;j<X.length;j++){const ie=X.get(j);if(ie.hidden)Je(ie.numGlyphs,G);else{const fe=q[j];if(fe)for(let Y=0;Y<ie.numGlyphs;Y++)d.aj(G,fe.shiftedAnchor,fe.angle);else Je(ie.numGlyphs,G)}}f.icon.dynamicLayoutVertexBuffer.updateData(G)}f.text.dynamicLayoutVertexBuffer.updateData(B)}function uc(f,t,a){return a.iconsInText&&t?"symbolTextAndIcon":f?"symbolSDF":"symbolIcon"}function xh(f,t,a,c,u,m,w,S,C,k,z,A){const B=f.context,G=B.gl,q=f.transform,X=S==="map",j=C==="map",ie=S!=="viewport"&&a.layout.get("symbol-placement")!=="point",fe=X&&!j&&!ie,Y=!a.layout.get("symbol-sort-key").isConstant();let ue=!1;const me=f.depthModeForSublayer(0,kt.ReadOnly),ge=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ye=[];for(const Pe of c){const Ce=t.getTile(Pe),Ie=Ce.getBucket(a);if(!Ie)continue;const Ze=u?Ie.text:Ie.icon;if(!Ze||!Ze.segments.get().length||!Ze.hasVisibleVertices)continue;const ut=Ze.programConfigurations.get(a.id),Be=u||Ie.sdfIcons,at=u?Ie.textSizeData:Ie.iconSizeData,gt=j||q.pitch!==0,St=f.useProgram(uc(Be,u,Ie),ut),lt=d.ag(at,q.zoom),_t=f.style.map.terrain&&f.style.map.terrain.getTerrainData(Pe);let vt,Jt,Ut,hr,vi=[0,0],qt=null;if(u)Jt=Ce.glyphAtlasTexture,Ut=G.LINEAR,vt=Ce.glyphAtlasTexture.size,Ie.iconsInText&&(vi=Ce.imageAtlasTexture.size,qt=Ce.imageAtlasTexture,hr=gt||f.options.rotating||f.options.zooming||at.kind==="composite"||at.kind==="camera"?G.LINEAR:G.NEAREST);else{const Xt=a.layout.get("icon-size").constantOr(0)!==1||Ie.iconsNeedLinear;Jt=Ce.imageAtlasTexture,Ut=Be||f.options.rotating||f.options.zooming||Xt||gt?G.LINEAR:G.NEAREST,vt=Ce.imageAtlasTexture.size}const Zi=ct(Ce,1,f.transform.zoom),en=Wn(Pe.posMatrix,j,X,f.transform,Zi),vn=zn(Pe.posMatrix,j,X,f.transform,Zi),ws=ge&&Ie.hasTextData(),bs=a.layout.get("icon-text-fit")!=="none"&&ws&&Ie.hasIconData();if(ie){const Xt=f.style.map.terrain?(Pr,bt)=>f.style.map.terrain.getElevation(Pe,Pr,bt):null,Li=a.layout.get("text-rotation-alignment")==="map";N(Ie,Pe.posMatrix,f,u,en,vn,j,k,Li,Xt)}const xn=f.translatePosMatrix(Pe.posMatrix,Ce,m,w),tn=ie||u&&ge||bs?vh:en,ii=f.translatePosMatrix(vn,Ce,m,w,!0),Wt=Be&&a.paint.get(u?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let li;li=Be?Ie.iconsInText?Zp(at.kind,lt,fe,j,f,xn,tn,ii,vt,vi):Ks(at.kind,lt,fe,j,f,xn,tn,ii,u,vt,!0):Qa(at.kind,lt,fe,j,f,xn,tn,ii,u,vt);const pa={program:St,buffers:Ze,uniformValues:li,atlasTexture:Jt,atlasTextureIcon:qt,atlasInterpolation:Ut,atlasInterpolationIcon:hr,isSDF:Be,hasHalo:Wt};if(Y&&Ie.canOverlap){ue=!0;const Xt=Ze.segments.get();for(const Li of Xt)ye.push({segments:new d.$([Li]),sortKey:Li.sortKey,state:pa,terrainData:_t})}else ye.push({segments:Ze.segments,sortKey:0,state:pa,terrainData:_t})}ue&&ye.sort((Pe,Ce)=>Pe.sortKey-Ce.sortKey);for(const Pe of ye){const Ce=Pe.state;if(B.activeTexture.set(G.TEXTURE0),Ce.atlasTexture.bind(Ce.atlasInterpolation,G.CLAMP_TO_EDGE),Ce.atlasTextureIcon&&(B.activeTexture.set(G.TEXTURE1),Ce.atlasTextureIcon&&Ce.atlasTextureIcon.bind(Ce.atlasInterpolationIcon,G.CLAMP_TO_EDGE)),Ce.isSDF){const Ie=Ce.uniformValues;Ce.hasHalo&&(Ie.u_is_halo=1,Xo(Ce.buffers,Pe.segments,a,f,Ce.program,me,z,A,Ie,Pe.terrainData)),Ie.u_is_halo=0}Xo(Ce.buffers,Pe.segments,a,f,Ce.program,me,z,A,Ce.uniformValues,Pe.terrainData)}}function Xo(f,t,a,c,u,m,w,S,C,k){const z=c.context;u.draw(z,z.gl.TRIANGLES,m,w,S,Vt.disabled,C,k,a.id,f.layoutVertexBuffer,f.indexBuffer,t,a.paint,c.transform.zoom,f.programConfigurations.get(a.id),f.dynamicLayoutVertexBuffer,f.opacityVertexBuffer)}function wh(f,t,a,c,u){if(!a||!c||!c.imageAtlas)return;const m=c.imageAtlas.patternPositions;let w=m[a.to.toString()],S=m[a.from.toString()];if(!w&&S&&(w=S),!S&&w&&(S=w),!w||!S){const C=u.getPaintProperty(t);w=m[C],S=m[C]}w&&S&&f.setConstantPatternPositions(w,S)}function hc(f,t,a,c,u,m,w){const S=f.context.gl,C="fill-pattern",k=a.paint.get(C),z=k&&k.constantOr(1),A=a.getCrossfadeParameters();let B,G,q,X,j;w?(G=z&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",B=S.LINES):(G=z?"fillPattern":"fill",B=S.TRIANGLES);const ie=k.constantOr(null);for(const fe of c){const Y=t.getTile(fe);if(z&&!Y.patternsLoaded())continue;const ue=Y.getBucket(a);if(!ue)continue;const me=ue.programConfigurations.get(a.id),ge=f.useProgram(G,me),ye=f.style.map.terrain&&f.style.map.terrain.getTerrainData(fe);z&&(f.context.activeTexture.set(S.TEXTURE0),Y.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),me.updatePaintBuffers(A)),wh(me,C,ie,Y,a);const Pe=ye?fe:null,Ce=f.translatePosMatrix(Pe?Pe.posMatrix:fe.posMatrix,Y,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(w){X=ue.indexBuffer2,j=ue.segments2;const Ie=[S.drawingBufferWidth,S.drawingBufferHeight];q=G==="fillOutlinePattern"&&z?$p(Ce,f,A,Y,Ie):ah(Ce,Ie)}else X=ue.indexBuffer,j=ue.segments,q=z?sh(Ce,f,A,Y):Bo(Ce);ge.draw(f.context,B,u,f.stencilModeForClipping(fe),m,Vt.disabled,q,ye,a.id,ue.layoutVertexBuffer,X,j,a.paint,f.transform.zoom,me)}}function ra(f,t,a,c,u,m,w){const S=f.context,C=S.gl,k="fill-extrusion-pattern",z=a.paint.get(k),A=z.constantOr(1),B=a.getCrossfadeParameters(),G=a.paint.get("fill-extrusion-opacity"),q=z.constantOr(null);for(const X of c){const j=t.getTile(X),ie=j.getBucket(a);if(!ie)continue;const fe=f.style.map.terrain&&f.style.map.terrain.getTerrainData(X),Y=ie.programConfigurations.get(a.id),ue=f.useProgram(A?"fillExtrusionPattern":"fillExtrusion",Y);A&&(f.context.activeTexture.set(C.TEXTURE0),j.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),Y.updatePaintBuffers(B)),wh(Y,k,q,j,a);const me=f.translatePosMatrix(X.posMatrix,j,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),ge=a.paint.get("fill-extrusion-vertical-gradient"),ye=A?Up(me,f,ge,G,X,B,j):nh(me,f,ge,G);ue.draw(S,S.gl.TRIANGLES,u,m,w,Vt.backCCW,ye,fe,a.id,ie.layoutVertexBuffer,ie.indexBuffer,ie.segments,a.paint,f.transform.zoom,Y,f.style.map.terrain&&ie.centroidVertexBuffer)}}function dc(f,t,a,c,u,m,w){const S=f.context,C=S.gl,k=a.fbo;if(!k)return;const z=f.useProgram("hillshade"),A=f.style.map.terrain&&f.style.map.terrain.getTerrainData(t);S.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,k.colorAttachment.get()),z.draw(S,C.TRIANGLES,u,m,w,Vt.disabled,((B,G,q,X)=>{const j=q.paint.get("hillshade-shadow-color"),ie=q.paint.get("hillshade-highlight-color"),fe=q.paint.get("hillshade-accent-color");let Y=q.paint.get("hillshade-illumination-direction")*(Math.PI/180);q.paint.get("hillshade-illumination-anchor")==="viewport"&&(Y-=B.transform.angle);const ue=!B.options.moving;return{u_matrix:X?X.posMatrix:B.transform.calculatePosMatrix(G.tileID.toUnwrapped(),ue),u_image:0,u_latrange:ch(0,G.tileID),u_light:[q.paint.get("hillshade-exaggeration"),Y],u_shadow:j,u_highlight:ie,u_accent:fe}})(f,a,c,A?t:null),A,c.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments)}function bh(f,t,a,c,u,m){const w=f.context,S=w.gl,C=t.dem;if(C&&C.data){const k=C.dim,z=C.stride,A=C.getPixels();if(w.activeTexture.set(S.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||f.getTileTexture(z),t.demTexture){const G=t.demTexture;G.update(A,{premultiply:!1}),G.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else t.demTexture=new Nt(w,A,S.RGBA,{premultiply:!1}),t.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);w.activeTexture.set(S.TEXTURE0);let B=t.fbo;if(!B){const G=new Nt(w,{width:k,height:k,data:null},S.RGBA);G.bind(S.LINEAR,S.CLAMP_TO_EDGE),B=t.fbo=w.createFramebuffer(k,k,!0,!1),B.colorAttachment.set(G.texture)}w.bindFramebuffer.set(B.framebuffer),w.viewport.set([0,0,k,k]),f.useProgram("hillshadePrepare").draw(w,S.TRIANGLES,c,u,m,Vt.disabled,((G,q)=>{const X=q.stride,j=d.F();return d.aN(j,0,d.W,-d.W,0,0,1),d.H(j,j,[0,-d.W,0]),{u_matrix:j,u_image:1,u_dimension:[X,X],u_zoom:G.overscaledZ,u_unpack:q.getUnpackVector()}})(t.tileID,C),null,a.id,f.rasterBoundsBuffer,f.quadTriangleIndexBuffer,f.rasterBoundsSegments),t.needsHillshadePrepare=!1}}function Sh(f,t,a,c,u,m){const w=c.paint.get("raster-fade-duration");if(!m&&w>0){const S=K.now(),C=(S-f.timeAdded)/w,k=t?(S-t.timeAdded)/w:-1,z=a.getSource(),A=u.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),B=!t||Math.abs(t.tileID.overscaledZ-A)>Math.abs(f.tileID.overscaledZ-A),G=B&&f.refreshedUponExpiration?1:d.ac(B?C:1-k,0,1);return f.refreshedUponExpiration&&C>=1&&(f.refreshedUponExpiration=!1),t?{opacity:1,mix:1-G}:{opacity:G,mix:0}}return{opacity:1,mix:0}}const Yo=new d.aO(1,0,0,1),pc=new d.aO(0,1,0,1),rf=new d.aO(0,0,1,1),Th=new d.aO(1,0,1,1),oi=new d.aO(0,1,1,1);function Xn(f,t,a,c){na(f,0,t+a/2,f.transform.width,a,c)}function Ir(f,t,a,c){na(f,t-a/2,0,a,f.transform.height,c)}function na(f,t,a,c,u,m){const w=f.context,S=w.gl;S.enable(S.SCISSOR_TEST),S.scissor(t*f.pixelRatio,a*f.pixelRatio,c*f.pixelRatio,u*f.pixelRatio),w.clear({color:m}),S.disable(S.SCISSOR_TEST)}function fc(f,t,a){const c=f.context,u=c.gl,m=a.posMatrix,w=f.useProgram("debug"),S=kt.disabled,C=$t.disabled,k=f.colorModeForRenderPass(),z="$debug",A=f.style.map.terrain&&f.style.map.terrain.getTerrainData(a);c.activeTexture.set(u.TEXTURE0);const B=t.getTileByID(a.key).latestRawTileData,G=Math.floor((B&&B.byteLength||0)/1024),q=t.getTile(a).tileSize,X=512/Math.min(q,512)*(a.overscaledZ/f.transform.zoom)*.5;let j=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(j+=` => ${a.overscaledZ}`),function(ie,fe){ie.initDebugOverlayCanvas();const Y=ie.debugOverlayCanvas,ue=ie.context.gl,me=ie.debugOverlayCanvas.getContext("2d");me.clearRect(0,0,Y.width,Y.height),me.shadowColor="white",me.shadowBlur=2,me.lineWidth=1.5,me.strokeStyle="white",me.textBaseline="top",me.font="bold 36px Open Sans, sans-serif",me.fillText(fe,5,5),me.strokeText(fe,5,5),ie.debugOverlayTexture.update(Y),ie.debugOverlayTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE)}(f,`${j} ${G}kB`),w.draw(c,u.TRIANGLES,S,C,hi.alphaBlended,Vt.disabled,Oo(m,d.aO.transparent,X),null,z,f.debugBuffer,f.quadTriangleIndexBuffer,f.debugSegments),w.draw(c,u.LINE_STRIP,S,C,k,Vt.disabled,Oo(m,d.aO.red),A,z,f.debugBuffer,f.tileBorderIndexBuffer,f.debugSegments)}function mc(f,t,a){const c=f.context,u=c.gl,m=f.colorModeForRenderPass(),w=new kt(u.LEQUAL,kt.ReadWrite,f.depthRangeFor3D),S=f.useProgram("terrain"),C=t.getTerrainMesh();c.bindFramebuffer.set(null),c.viewport.set([0,0,f.width,f.height]);for(const k of a){const z=f.renderToTexture.getTexture(k),A=t.getTerrainData(k.tileID);c.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,z.texture);const B={u_matrix:f.transform.calculatePosMatrix(k.tileID.toUnwrapped()),u_texture:0,u_ele_delta:t.getMeshFrameDelta(f.transform.zoom)};S.draw(c,u.TRIANGLES,w,$t.disabled,m,Vt.backCCW,B,A,"terrain",C.vertexBuffer,C.indexBuffer,C.segments)}}class sa{constructor(t,a){this.context=new _h(t),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:d.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=De.maxUnderzooming+De.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ai}resize(t,a,c){if(this.width=Math.floor(t*c),this.height=Math.floor(a*c),this.pixelRatio=c,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const u of this.style._order)this.style._layers[u].resize()}setup(){const t=this.context,a=new d.aV;a.emplaceBack(0,0),a.emplaceBack(d.W,0),a.emplaceBack(0,d.W),a.emplaceBack(d.W,d.W),this.tileExtentBuffer=t.createVertexBuffer(a,mn.members),this.tileExtentSegments=d.$.simpleSegment(0,0,4,2);const c=new d.aV;c.emplaceBack(0,0),c.emplaceBack(d.W,0),c.emplaceBack(0,d.W),c.emplaceBack(d.W,d.W),this.debugBuffer=t.createVertexBuffer(c,mn.members),this.debugSegments=d.$.simpleSegment(0,0,4,5);const u=new d.Z;u.emplaceBack(0,0,0,0),u.emplaceBack(d.W,0,d.W,0),u.emplaceBack(0,d.W,0,d.W),u.emplaceBack(d.W,d.W,d.W,d.W),this.rasterBoundsBuffer=t.createVertexBuffer(u,Bi.members),this.rasterBoundsSegments=d.$.simpleSegment(0,0,4,2);const m=new d.aV;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(m,mn.members),this.viewportSegments=d.$.simpleSegment(0,0,4,2);const w=new d.aW;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(w);const S=new d.aX;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(S);const C=this.context.gl;this.stencilClearMode=new $t({func:C.ALWAYS,mask:0},0,255,C.ZERO,C.ZERO,C.ZERO)}clearStencil(){const t=this.context,a=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const c=d.F();d.aN(c,0,this.width,this.height,0,0,1),d.J(c,c,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,a.TRIANGLES,kt.disabled,this.stencilClearMode,hi.disabled,Vt.disabled,ec(c),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,a){if(this.currentStencilSource===t.source||!t.isTileClipped()||!a||!a.length)return;this.currentStencilSource=t.source;const c=this.context,u=c.gl;this.nextStencilID+a.length>256&&this.clearStencil(),c.setColorMode(hi.disabled),c.setDepthMode(kt.disabled);const m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of a){const S=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,C=this.style.map.terrain&&this.style.map.terrain.getTerrainData(w);m.draw(c,u.TRIANGLES,kt.disabled,new $t({func:u.ALWAYS,mask:0},S,255,u.KEEP,u.KEEP,u.REPLACE),hi.disabled,Vt.disabled,ec(w.posMatrix),C,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,a=this.context.gl;return new $t({func:a.NOTEQUAL,mask:255},t,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(t){const a=this.context.gl;return new $t({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(t){const a=this.context.gl,c=t.sort((w,S)=>S.overscaledZ-w.overscaledZ),u=c[c.length-1].overscaledZ,m=c[0].overscaledZ-u+1;if(m>1){this.currentStencilSource=void 0,this.nextStencilID+m>256&&this.clearStencil();const w={};for(let S=0;S<m;S++)w[S+u]=new $t({func:a.GEQUAL,mask:255},S+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=m,[w,c]}return[{[u]:$t.disabled},c]}colorModeForRenderPass(){const t=this.context.gl;return this._showOverdrawInspector?new hi([t.CONSTANT_COLOR,t.ONE],new d.aO(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?hi.unblended:hi.alphaBlended}depthModeForSublayer(t,a,c){if(!this.opaquePassEnabledForLayer())return kt.disabled;const u=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new kt(c||this.context.gl.LEQUAL,a,[u,u])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,a){this.style=t,this.options=a,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(K.now()),this.imageManager.beginFrame();const c=this.style._order,u=this.style.sourceCaches,m={},w={},S={};for(const C in u){const k=u[C];k.used&&k.prepare(this.context),m[C]=k.getVisibleCoordinates(),w[C]=m[C].slice().reverse(),S[C]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let C=0;C<c.length;C++)if(this.style._layers[c[C]].is3D()){this.opaquePassCutoff=C;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const C of c){const k=this.style._layers[C];if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;const z=w[k.source];(k.type==="custom"||z.length)&&this.renderLayer(this,u[k.source],k,z)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?d.aO.black:d.aO.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=c.length-1;this.currentLayer>=0;this.currentLayer--){const C=this.style._layers[c[this.currentLayer]],k=u[C.source],z=m[C.source];this._renderTileClippingMasks(C,z),this.renderLayer(this,k,C,z)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<c.length;this.currentLayer++){const C=this.style._layers[c[this.currentLayer]],k=u[C.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(C))continue;const z=(C.type==="symbol"?S:w)[C.source];this._renderTileClippingMasks(C,m[C.source]),this.renderLayer(this,k,C,z)}if(this.options.showTileBoundaries){const C=function(k,z){let A=null;const B=Object.values(k._layers).flatMap(j=>j.source&&!j.isHidden(z)?[k.sourceCaches[j.source]]:[]),G=B.filter(j=>j.getSource().type==="vector"),q=B.filter(j=>j.getSource().type!=="vector"),X=j=>{(!A||A.getSource().maxzoom<j.getSource().maxzoom)&&(A=j)};return G.forEach(j=>X(j)),A||q.forEach(j=>X(j)),A}(this.style,this.transform.zoom);C&&function(k,z,A){for(let B=0;B<A.length;B++)fc(k,z,A[B])}(this,C,C.getVisibleCoordinates())}this.options.showPadding&&function(C){const k=C.transform.padding;Xn(C,C.transform.height-(k.top||0),3,Yo),Xn(C,k.bottom||0,3,pc),Ir(C,k.left||0,3,rf),Ir(C,C.transform.width-(k.right||0),3,Th);const z=C.transform.centerPoint;(function(A,B,G,q){na(A,B-1,G-10,2,20,q),na(A,B-10,G-1,20,2,q)})(C,z.x,C.transform.height-z.y,oi)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(t){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,c=this.transform.projMatrix;let u=this.terrainFacilitator.dirty;u||(u=t?!d.aY(a,c):!d.aZ(a,c)),u||(u=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),u&&(d.a_(a,c),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(m,w){const S=m.context,C=S.gl,k=hi.unblended,z=new kt(C.LEQUAL,kt.ReadWrite,[0,1]),A=w.getTerrainMesh(),B=w.sourceCache.getRenderableTiles(),G=m.useProgram("terrainDepth");S.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),S.viewport.set([0,0,m.width/devicePixelRatio,m.height/devicePixelRatio]),S.clear({color:d.aO.transparent,depth:1});for(const q of B){const X=w.getTerrainData(q.tileID),j={u_matrix:m.transform.calculatePosMatrix(q.tileID.toUnwrapped()),u_ele_delta:w.getMeshFrameDelta(m.transform.zoom)};G.draw(S,C.TRIANGLES,z,$t.disabled,k,Vt.backCCW,j,X,"terrain",A.vertexBuffer,A.indexBuffer,A.segments)}S.bindFramebuffer.set(null),S.viewport.set([0,0,m.width,m.height])}(this,this.style.map.terrain),function(m,w){const S=m.context,C=S.gl,k=hi.unblended,z=new kt(C.LEQUAL,kt.ReadWrite,[0,1]),A=w.getTerrainMesh(),B=w.getCoordsTexture(),G=w.sourceCache.getRenderableTiles(),q=m.useProgram("terrainCoords");S.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),S.viewport.set([0,0,m.width/devicePixelRatio,m.height/devicePixelRatio]),S.clear({color:d.aO.transparent,depth:1}),w.coordsIndex=[];for(const X of G){const j=w.getTerrainData(X.tileID);S.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,B.texture);const ie={u_matrix:m.transform.calculatePosMatrix(X.tileID.toUnwrapped()),u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(m.transform.zoom)};q.draw(S,C.TRIANGLES,z,$t.disabled,k,Vt.backCCW,ie,j,"terrain",A.vertexBuffer,A.indexBuffer,A.segments),w.coordsIndex.push(X.tileID.key)}S.bindFramebuffer.set(null),S.viewport.set([0,0,m.width,m.height])}(this,this.style.map.terrain))}renderLayer(t,a,c,u){if(!c.isHidden(this.transform.zoom)&&(c.type==="background"||c.type==="custom"||(u||[]).length))switch(this.id=c.id,c.type){case"symbol":(function(m,w,S,C,k){if(m.renderPass!=="translucent")return;const z=$t.disabled,A=m.colorModeForRenderPass();(S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(B,G,q,X,j,ie,fe){const Y=G.transform,ue=j==="map",me=ie==="map";for(const ge of B){const ye=X.getTile(ge),Pe=ye.getBucket(q);if(!Pe||!Pe.text||!Pe.text.segments.get().length)continue;const Ce=d.ag(Pe.textSizeData,Y.zoom),Ie=ct(ye,1,G.transform.zoom),Ze=Wn(ge.posMatrix,me,ue,G.transform,Ie),ut=q.layout.get("icon-text-fit")!=="none"&&Pe.hasIconData();if(Ce){const Be=Math.pow(2,Y.zoom-ye.tileID.overscaledZ);Ko(Pe,ue,me,fe,Y,Ze,ge.posMatrix,Be,Ce,ut,G.style.map.terrain?(at,gt)=>G.style.map.terrain.getElevation(ge,at,gt):null)}}}(C,m,S,w,S.layout.get("text-rotation-alignment"),S.layout.get("text-pitch-alignment"),k),S.paint.get("icon-opacity").constantOr(1)!==0&&xh(m,w,S,C,!1,S.paint.get("icon-translate"),S.paint.get("icon-translate-anchor"),S.layout.get("icon-rotation-alignment"),S.layout.get("icon-pitch-alignment"),S.layout.get("icon-keep-upright"),z,A),S.paint.get("text-opacity").constantOr(1)!==0&&xh(m,w,S,C,!0,S.paint.get("text-translate"),S.paint.get("text-translate-anchor"),S.layout.get("text-rotation-alignment"),S.layout.get("text-pitch-alignment"),S.layout.get("text-keep-upright"),z,A),w.map.showCollisionBoxes&&(Ho(m,w,S,C,S.paint.get("text-translate"),S.paint.get("text-translate-anchor"),!0),Ho(m,w,S,C,S.paint.get("icon-translate"),S.paint.get("icon-translate-anchor"),!1))})(t,a,c,u,this.style.placement.variableOffsets);break;case"circle":(function(m,w,S,C){if(m.renderPass!=="translucent")return;const k=S.paint.get("circle-opacity"),z=S.paint.get("circle-stroke-width"),A=S.paint.get("circle-stroke-opacity"),B=!S.layout.get("circle-sort-key").isConstant();if(k.constantOr(1)===0&&(z.constantOr(1)===0||A.constantOr(1)===0))return;const G=m.context,q=G.gl,X=m.depthModeForSublayer(0,kt.ReadOnly),j=$t.disabled,ie=m.colorModeForRenderPass(),fe=[];for(let Y=0;Y<C.length;Y++){const ue=C[Y],me=w.getTile(ue),ge=me.getBucket(S);if(!ge)continue;const ye=ge.programConfigurations.get(S.id),Pe=m.useProgram("circle",ye),Ce=ge.layoutVertexBuffer,Ie=ge.indexBuffer,Ze=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ue),ut={programConfiguration:ye,program:Pe,layoutVertexBuffer:Ce,indexBuffer:Ie,uniformValues:oh(m,ue,me,S),terrainData:Ze};if(B){const Be=ge.segments.get();for(const at of Be)fe.push({segments:new d.$([at]),sortKey:at.sortKey,state:ut})}else fe.push({segments:ge.segments,sortKey:0,state:ut})}B&&fe.sort((Y,ue)=>Y.sortKey-ue.sortKey);for(const Y of fe){const{programConfiguration:ue,program:me,layoutVertexBuffer:ge,indexBuffer:ye,uniformValues:Pe,terrainData:Ce}=Y.state;me.draw(G,q.TRIANGLES,X,j,ie,Vt.disabled,Pe,Ce,S.id,ge,ye,Y.segments,S.paint,m.transform.zoom,ue)}})(t,a,c,u);break;case"heatmap":(function(m,w,S,C){if(S.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const k=m.context,z=k.gl,A=$t.disabled,B=new hi([z.ONE,z.ONE],d.aO.transparent,[!0,!0,!0,!0]);(function(G,q,X){const j=G.gl;G.activeTexture.set(j.TEXTURE1),G.viewport.set([0,0,q.width/4,q.height/4]);let ie=X.heatmapFbo;if(ie)j.bindTexture(j.TEXTURE_2D,ie.colorAttachment.get()),G.bindFramebuffer.set(ie.framebuffer);else{const fe=j.createTexture();j.bindTexture(j.TEXTURE_2D,fe),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.LINEAR),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,j.LINEAR),ie=X.heatmapFbo=G.createFramebuffer(q.width/4,q.height/4,!1,!1),function(Y,ue,me,ge){var ye,Pe;const Ce=Y.gl,Ie=(ye=Y.HALF_FLOAT)!==null&&ye!==void 0?ye:Ce.UNSIGNED_BYTE,Ze=(Pe=Y.RGBA16F)!==null&&Pe!==void 0?Pe:Ce.RGBA;Ce.texImage2D(Ce.TEXTURE_2D,0,Ze,ue.width/4,ue.height/4,0,Ce.RGBA,Ie,null),ge.colorAttachment.set(me)}(G,q,fe,ie)}})(k,m,S),k.clear({color:d.aO.transparent});for(let G=0;G<C.length;G++){const q=C[G];if(w.hasRenderableParent(q))continue;const X=w.getTile(q),j=X.getBucket(S);if(!j)continue;const ie=j.programConfigurations.get(S.id),fe=m.useProgram("heatmap",ie),{zoom:Y}=m.transform;fe.draw(k,z.TRIANGLES,kt.disabled,A,B,Vt.disabled,lh(q.posMatrix,X,Y,S.paint.get("heatmap-intensity")),null,S.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,S.paint,m.transform.zoom,ie)}k.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(k,z){const A=k.context,B=A.gl,G=z.heatmapFbo;if(!G)return;A.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,G.colorAttachment.get()),A.activeTexture.set(B.TEXTURE1);let q=z.colorRampTexture;q||(q=z.colorRampTexture=new Nt(A,z.colorRamp,B.RGBA)),q.bind(B.LINEAR,B.CLAMP_TO_EDGE),k.useProgram("heatmapTexture").draw(A,B.TRIANGLES,kt.disabled,$t.disabled,k.colorModeForRenderPass(),Vt.disabled,((X,j,ie,fe)=>{const Y=d.F();d.aN(Y,0,X.width,X.height,0,0,1);const ue=X.context.gl;return{u_matrix:Y,u_world:[ue.drawingBufferWidth,ue.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:j.paint.get("heatmap-opacity")}})(k,z),null,z.id,k.viewportBuffer,k.quadTriangleIndexBuffer,k.viewportSegments,z.paint,k.transform.zoom)}(m,S))})(t,a,c,u);break;case"line":(function(m,w,S,C){if(m.renderPass!=="translucent")return;const k=S.paint.get("line-opacity"),z=S.paint.get("line-width");if(k.constantOr(1)===0||z.constantOr(1)===0)return;const A=m.depthModeForSublayer(0,kt.ReadOnly),B=m.colorModeForRenderPass(),G=S.paint.get("line-dasharray"),q=S.paint.get("line-pattern"),X=q.constantOr(1),j=S.paint.get("line-gradient"),ie=S.getCrossfadeParameters(),fe=X?"linePattern":G?"lineSDF":j?"lineGradient":"line",Y=m.context,ue=Y.gl;let me=!0;for(const ge of C){const ye=w.getTile(ge);if(X&&!ye.patternsLoaded())continue;const Pe=ye.getBucket(S);if(!Pe)continue;const Ce=Pe.programConfigurations.get(S.id),Ie=m.context.program.get(),Ze=m.useProgram(fe,Ce),ut=me||Ze.program!==Ie,Be=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ge),at=q.constantOr(null);if(at&&ye.imageAtlas){const lt=ye.imageAtlas,_t=lt.patternPositions[at.to.toString()],vt=lt.patternPositions[at.from.toString()];_t&&vt&&Ce.setConstantPatternPositions(_t,vt)}const gt=Be?ge:null,St=X?jo(m,ye,S,ie,gt):G?Vr(m,ye,S,G,ie,gt):j?ps(m,ye,S,Pe.lineClipsArray.length,gt):No(m,ye,S,gt);if(X)Y.activeTexture.set(ue.TEXTURE0),ye.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),Ce.updatePaintBuffers(ie);else if(G&&(ut||m.lineAtlas.dirty))Y.activeTexture.set(ue.TEXTURE0),m.lineAtlas.bind(Y);else if(j){const lt=Pe.gradients[S.id];let _t=lt.texture;if(S.gradientVersion!==lt.version){let vt=256;if(S.stepInterpolant){const Jt=w.getSource().maxzoom,Ut=ge.canonical.z===Jt?Math.ceil(1<<m.transform.maxZoom-ge.canonical.z):1;vt=d.ac(d.aT(Pe.maxLineLength/d.W*1024*Ut),256,Y.maxTextureSize)}lt.gradient=d.aU({expression:S.gradientExpression(),evaluationKey:"lineProgress",resolution:vt,image:lt.gradient||void 0,clips:Pe.lineClipsArray}),lt.texture?lt.texture.update(lt.gradient):lt.texture=new Nt(Y,lt.gradient,ue.RGBA),lt.version=S.gradientVersion,_t=lt.texture}Y.activeTexture.set(ue.TEXTURE0),_t.bind(S.stepInterpolant?ue.NEAREST:ue.LINEAR,ue.CLAMP_TO_EDGE)}Ze.draw(Y,ue.TRIANGLES,A,m.stencilModeForClipping(ge),B,Vt.disabled,St,Be,S.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,S.paint,m.transform.zoom,Ce,Pe.layoutVertexBuffer2),me=!1}})(t,a,c,u);break;case"fill":(function(m,w,S,C){const k=S.paint.get("fill-color"),z=S.paint.get("fill-opacity");if(z.constantOr(1)===0)return;const A=m.colorModeForRenderPass(),B=S.paint.get("fill-pattern"),G=m.opaquePassEnabledForLayer()&&!B.constantOr(1)&&k.constantOr(d.aO.transparent).a===1&&z.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===G){const q=m.depthModeForSublayer(1,m.renderPass==="opaque"?kt.ReadWrite:kt.ReadOnly);hc(m,w,S,C,q,A,!1)}if(m.renderPass==="translucent"&&S.paint.get("fill-antialias")){const q=m.depthModeForSublayer(S.getPaintProperty("fill-outline-color")?2:0,kt.ReadOnly);hc(m,w,S,C,q,A,!0)}})(t,a,c,u);break;case"fill-extrusion":(function(m,w,S,C){const k=S.paint.get("fill-extrusion-opacity");if(k!==0&&m.renderPass==="translucent"){const z=new kt(m.context.gl.LEQUAL,kt.ReadWrite,m.depthRangeFor3D);if(k!==1||S.paint.get("fill-extrusion-pattern").constantOr(1))ra(m,w,S,C,z,$t.disabled,hi.disabled),ra(m,w,S,C,z,m.stencilModeFor3D(),m.colorModeForRenderPass());else{const A=m.colorModeForRenderPass();ra(m,w,S,C,z,$t.disabled,A)}}})(t,a,c,u);break;case"hillshade":(function(m,w,S,C){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const k=m.context,z=m.depthModeForSublayer(0,kt.ReadOnly),A=m.colorModeForRenderPass(),[B,G]=m.renderPass==="translucent"?m.stencilConfigForOverlap(C):[{},C];for(const q of G){const X=w.getTile(q);X.needsHillshadePrepare!==void 0&&X.needsHillshadePrepare&&m.renderPass==="offscreen"?bh(m,X,S,z,$t.disabled,A):m.renderPass==="translucent"&&dc(m,q,X,S,z,B[q.overscaledZ],A)}k.viewport.set([0,0,m.width,m.height])})(t,a,c,u);break;case"raster":(function(m,w,S,C){if(m.renderPass!=="translucent"||S.paint.get("raster-opacity")===0||!C.length)return;const k=m.context,z=k.gl,A=w.getSource(),B=m.useProgram("raster"),G=m.colorModeForRenderPass(),[q,X]=A instanceof fn?[{},C]:m.stencilConfigForOverlap(C),j=X[X.length-1].overscaledZ,ie=!m.options.moving;for(const fe of X){const Y=m.depthModeForSublayer(fe.overscaledZ-j,S.paint.get("raster-opacity")===1?kt.ReadWrite:kt.ReadOnly,z.LESS),ue=w.getTile(fe);ue.registerFadeDuration(S.paint.get("raster-fade-duration"));const me=w.findLoadedParent(fe,0),ge=Sh(ue,me,w,S,m.transform,m.style.map.terrain);let ye,Pe;const Ce=S.paint.get("raster-resampling")==="nearest"?z.NEAREST:z.LINEAR;k.activeTexture.set(z.TEXTURE0),ue.texture.bind(Ce,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(z.TEXTURE1),me?(me.texture.bind(Ce,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),ye=Math.pow(2,me.tileID.overscaledZ-ue.tileID.overscaledZ),Pe=[ue.tileID.canonical.x*ye%1,ue.tileID.canonical.y*ye%1]):ue.texture.bind(Ce,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST);const Ie=m.style.map.terrain&&m.style.map.terrain.getTerrainData(fe),Ze=Ie?fe:null,ut=Ze?Ze.posMatrix:m.transform.calculatePosMatrix(fe.toUnwrapped(),ie),Be=Ja(ut,Pe||[0,0],ye||1,ge,S);A instanceof fn?B.draw(k,z.TRIANGLES,Y,$t.disabled,G,Vt.disabled,Be,Ie,S.id,A.boundsBuffer,m.quadTriangleIndexBuffer,A.boundsSegments):B.draw(k,z.TRIANGLES,Y,q[fe.overscaledZ],G,Vt.disabled,Be,Ie,S.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}})(t,a,c,u);break;case"background":(function(m,w,S,C){const k=S.paint.get("background-color"),z=S.paint.get("background-opacity");if(z===0)return;const A=m.context,B=A.gl,G=m.transform,q=G.tileSize,X=S.paint.get("background-pattern");if(m.isPatternMissing(X))return;const j=!X&&k.a===1&&z===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==j)return;const ie=$t.disabled,fe=m.depthModeForSublayer(0,j==="opaque"?kt.ReadWrite:kt.ReadOnly),Y=m.colorModeForRenderPass(),ue=m.useProgram(X?"backgroundPattern":"background"),me=C||G.coveringTiles({tileSize:q,terrain:m.style.map.terrain});X&&(A.activeTexture.set(B.TEXTURE0),m.imageManager.bind(m.context));const ge=S.getCrossfadeParameters();for(const ye of me){const Pe=C?ye.posMatrix:m.transform.calculatePosMatrix(ye.toUnwrapped()),Ce=X?uh(Pe,z,m,X,{tileID:ye,tileSize:q},ge):Gp(Pe,z,k),Ie=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ye);ue.draw(A,B.TRIANGLES,fe,ie,Y,Vt.disabled,Ce,Ie,S.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}})(t,0,c,u);break;case"custom":(function(m,w,S){const C=m.context,k=S.implementation;if(m.renderPass==="offscreen"){const z=k.prerender;z&&(m.setCustomLayerDefaults(),C.setColorMode(m.colorModeForRenderPass()),z.call(k,C.gl,m.transform.customLayerMatrix()),C.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),C.setColorMode(m.colorModeForRenderPass()),C.setStencilMode($t.disabled);const z=k.renderingMode==="3d"?new kt(m.context.gl.LEQUAL,kt.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,kt.ReadOnly);C.setDepthMode(z),k.render(C.gl,m.transform.customLayerMatrix()),C.setDirty(),m.setBaseState(),C.bindFramebuffer.set(null)}})(t,0,c)}}translatePosMatrix(t,a,c,u,m){if(!c[0]&&!c[1])return t;const w=m?u==="map"?this.transform.angle:0:u==="viewport"?-this.transform.angle:0;if(w){const k=Math.sin(w),z=Math.cos(w);c=[c[0]*z-c[1]*k,c[0]*k+c[1]*z]}const S=[m?c[0]:ct(a,c[0],this.transform.zoom),m?c[1]:ct(a,c[1],this.transform.zoom),0],C=new Float32Array(16);return d.H(C,t,S),C}saveTileTexture(t){const a=this._tileTextures[t.size[0]];a?a.push(t):this._tileTextures[t.size[0]]=[t]}getTileTexture(t){const a=this._tileTextures[t];return a&&a.length>0?a.pop():null}isPatternMissing(t){if(!t)return!1;if(!t.from||!t.to)return!0;const a=this.imageManager.getPattern(t.from.toString()),c=this.imageManager.getPattern(t.to.toString());return!a||!c}useProgram(t,a){this.cache=this.cache||{};const c=t+(a?a.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[c]||(this.cache[c]=new Ql(this.context,Ws[t],a,Hp[t],this._showOverdrawInspector,this.style.map.terrain)),this.cache[c]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const t=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(t.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Nt(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:t,drawingBufferHeight:a}=this.context.gl;return this.width!==t||this.height!==a}}class gs{constructor(t,a){this.points=t,this.planes=a}static fromInvProjectionMatrix(t,a,c){const u=Math.pow(2,c),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const C=1/(S=d.af([],S,t))[3]/a*u;return d.a$(S,S,[C,C,1/S[3],C])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const C=function(B,G){var q=G[0],X=G[1],j=G[2],ie=q*q+X*X+j*j;return ie>0&&(ie=1/Math.sqrt(ie)),B[0]=G[0]*ie,B[1]=G[1]*ie,B[2]=G[2]*ie,B}([],function(B,G,q){var X=G[0],j=G[1],ie=G[2],fe=q[0],Y=q[1],ue=q[2];return B[0]=j*ue-ie*Y,B[1]=ie*fe-X*ue,B[2]=X*Y-j*fe,B}([],Dt([],m[S[0]],m[S[1]]),Dt([],m[S[2]],m[S[1]]))),k=-((z=C)[0]*(A=m[S[1]])[0]+z[1]*A[1]+z[2]*A[2]);var z,A;return C.concat(k)});return new gs(m,w)}}class aa{constructor(t,a){this.min=t,this.max=a,this.center=function(c,u,m){return c[0]=.5*u[0],c[1]=.5*u[1],c[2]=.5*u[2],c}([],function(c,u,m){return c[0]=u[0]+m[0],c[1]=u[1]+m[1],c[2]=u[2]+m[2],c}([],this.min,this.max))}quadrant(t){const a=[t%2==0,t<2],c=Ke(this.min),u=Ke(this.max);for(let m=0;m<a.length;m++)c[m]=a[m]?this.min[m]:this.center[m],u[m]=a[m]?this.center[m]:this.max[m];return u[2]=this.max[2],new aa(c,u)}distanceX(t){return Math.max(Math.min(this.max[0],t[0]),this.min[0])-t[0]}distanceY(t){return Math.max(Math.min(this.max[1],t[1]),this.min[1])-t[1]}intersects(t){const a=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let c=!0;for(let u=0;u<t.planes.length;u++){const m=t.planes[u];let w=0;for(let S=0;S<a.length;S++)d.b0(m,a[S])>=0&&w++;if(w===0)return 0;w!==a.length&&(c=!1)}if(c)return 2;for(let u=0;u<3;u++){let m=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let S=0;S<t.points.length;S++){const C=t.points[S][u]-this.min[u];m=Math.min(m,C),w=Math.max(w,C)}if(w<0||m>this.max[u]-this.min[u])return 0}return 1}}class io{constructor(t=0,a=0,c=0,u=0){if(isNaN(t)||t<0||isNaN(a)||a<0||isNaN(c)||c<0||isNaN(u)||u<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=t,this.bottom=a,this.left=c,this.right=u}interpolate(t,a,c){return a.top!=null&&t.top!=null&&(this.top=d.z.number(t.top,a.top,c)),a.bottom!=null&&t.bottom!=null&&(this.bottom=d.z.number(t.bottom,a.bottom,c)),a.left!=null&&t.left!=null&&(this.left=d.z.number(t.left,a.left,c)),a.right!=null&&t.right!=null&&(this.right=d.z.number(t.right,a.right,c)),this}getCenter(t,a){const c=d.ac((this.left+t-this.right)/2,0,t),u=d.ac((this.top+a-this.bottom)/2,0,a);return new d.P(c,u)}equals(t){return this.top===t.top&&this.bottom===t.bottom&&this.left===t.left&&this.right===t.right}clone(){return new io(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const gc=85.051129;class Jo{constructor(t,a,c,u,m){this.tileSize=512,this._renderWorldCopies=m===void 0||!!m,this._minZoom=t||0,this._maxZoom=a||22,this._minPitch=c??0,this._maxPitch=u??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new d.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new io,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const t=new Jo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return t.apply(this),t}apply(t){this.tileSize=t.tileSize,this.latRange=t.latRange,this.width=t.width,this.height=t.height,this._center=t._center,this._elevation=t._elevation,this.minElevationForCurrentTile=t.minElevationForCurrentTile,this.zoom=t.zoom,this.angle=t.angle,this._fov=t._fov,this._pitch=t._pitch,this._unmodified=t._unmodified,this._edgeInsets=t._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))}get maxZoom(){return this._maxZoom}set maxZoom(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))}get minPitch(){return this._minPitch}set minPitch(t){this._minPitch!==t&&(this._minPitch=t,this.pitch=Math.max(this.pitch,t))}get maxPitch(){return this._maxPitch}set maxPitch(t){this._maxPitch!==t&&(this._maxPitch=t,this.pitch=Math.min(this.pitch,t))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(t){t===void 0?t=!0:t===null&&(t=!1),this._renderWorldCopies=t}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new d.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const a=-d.b1(t,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=function(){var c=new d.A(4);return d.A!=Float32Array&&(c[1]=0,c[2]=0),c[0]=1,c[3]=1,c}(),function(c,u,m){var w=u[0],S=u[1],C=u[2],k=u[3],z=Math.sin(m),A=Math.cos(m);c[0]=w*A+C*z,c[1]=S*A+k*z,c[2]=w*-z+C*A,c[3]=S*-z+k*A}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const a=d.ac(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(t){const a=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.tileZoom=Math.max(0,Math.floor(a)),this.scale=this.zoomScale(a),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(t){t!==this._elevation&&(this._elevation=t,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(t){this._edgeInsets.equals(t)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,t,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(t){return this._edgeInsets.equals(t)}interpolatePadding(t,a,c){this._unmodified=!1,this._edgeInsets.interpolate(t,a,c),this._constrain(),this._calcMatrices()}coveringZoomLevel(t){const a=(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(t){const a=[new d.b2(0,t)];if(this._renderWorldCopies){const c=this.pointCoordinate(new d.P(0,0)),u=this.pointCoordinate(new d.P(this.width,0)),m=this.pointCoordinate(new d.P(this.width,this.height)),w=this.pointCoordinate(new d.P(0,this.height)),S=Math.floor(Math.min(c.x,u.x,m.x,w.x)),C=Math.floor(Math.max(c.x,u.x,m.x,w.x)),k=1;for(let z=S-k;z<=C+k;z++)z!==0&&a.push(new d.b2(z,t))}return a}coveringTiles(t){var a,c;let u=this.coveringZoomLevel(t);const m=u;if(t.minzoom!==void 0&&u<t.minzoom)return[];t.maxzoom!==void 0&&u>t.maxzoom&&(u=t.maxzoom);const w=this.pointCoordinate(this.getCameraPoint()),S=d.Y.fromLngLat(this.center),C=Math.pow(2,u),k=[C*w.x,C*w.y,0],z=[C*S.x,C*S.y,0],A=gs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,u);let B=t.minzoom||0;!t.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(B=u);const G=t.terrain?2/Math.min(this.tileSize,t.tileSize)*this.tileSize:3,q=Y=>({aabb:new aa([Y*C,0,0],[(Y+1)*C,C,0]),zoom:0,x:0,y:0,wrap:Y,fullyVisible:!1}),X=[],j=[],ie=u,fe=t.reparseOverscaled?m:u;if(this._renderWorldCopies)for(let Y=1;Y<=3;Y++)X.push(q(-Y)),X.push(q(Y));for(X.push(q(0));X.length>0;){const Y=X.pop(),ue=Y.x,me=Y.y;let ge=Y.fullyVisible;if(!ge){const Ze=Y.aabb.intersects(A);if(Ze===0)continue;ge=Ze===2}const ye=t.terrain?k:z,Pe=Y.aabb.distanceX(ye),Ce=Y.aabb.distanceY(ye),Ie=Math.max(Math.abs(Pe),Math.abs(Ce));if(Y.zoom===ie||Ie>G+(1<<ie-Y.zoom)-2&&Y.zoom>=B){const Ze=ie-Y.zoom,ut=k[0]-.5-(ue<<Ze),Be=k[1]-.5-(me<<Ze);j.push({tileID:new d.Q(Y.zoom===ie?fe:Y.zoom,Y.wrap,Y.zoom,ue,me),distanceSq:xt([z[0]-.5-ue,z[1]-.5-me]),tileDistanceToCamera:Math.sqrt(ut*ut+Be*Be)})}else for(let Ze=0;Ze<4;Ze++){const ut=(ue<<1)+Ze%2,Be=(me<<1)+(Ze>>1),at=Y.zoom+1;let gt=Y.aabb.quadrant(Ze);if(t.terrain){const St=new d.Q(at,Y.wrap,at,ut,Be),lt=t.terrain.getMinMaxElevation(St),_t=(a=lt.minElevation)!==null&&a!==void 0?a:this.elevation,vt=(c=lt.maxElevation)!==null&&c!==void 0?c:this.elevation;gt=new aa([gt.min[0],gt.min[1],_t],[gt.max[0],gt.max[1],vt])}X.push({aabb:gt,zoom:at,x:ut,y:Be,wrap:Y.wrap,fullyVisible:ge})}}return j.sort((Y,ue)=>Y.distanceSq-ue.distanceSq).map(Y=>Y.tileID)}resize(t,a){this.width=t,this.height=a,this.pixelsToGLUnits=[2/t,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(t){return Math.pow(2,t)}scaleZoom(t){return Math.log(t)/Math.LN2}project(t){const a=d.ac(t.lat,-85.051129,gc);return new d.P(d.N(t.lng)*this.worldSize,d.O(a)*this.worldSize)}unproject(t){return new d.Y(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(t){const a=this.elevation,c=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,u=this.pointLocation(this.centerPoint,t),m=t.getElevationForLngLatZoom(u,this.tileZoom);if(!(this.elevation-m))return;const w=c+a-m,S=Math.cos(this._pitch)*this.cameraToCenterDistance/w/d.b3(1,u.lat),C=this.scaleZoom(S/this.tileSize);this._elevation=m,this._center=u,this.zoom=C}setLocationAtPoint(t,a){const c=this.pointCoordinate(a),u=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(t),w=new d.Y(m.x-(c.x-u.x),m.y-(c.y-u.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(t,a){return a?this.coordinatePoint(this.locationCoordinate(t),a.getElevationForLngLatZoom(t,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(t))}pointLocation(t,a){return this.coordinateLocation(this.pointCoordinate(t,a))}locationCoordinate(t){return d.Y.fromLngLat(t)}coordinateLocation(t){return t&&t.toLngLat()}pointCoordinate(t,a){if(a){const B=a.pointCoordinate(t);if(B!=null)return B}const c=[t.x,t.y,0,1],u=[t.x,t.y,1,1];d.af(c,c,this.pixelMatrixInverse),d.af(u,u,this.pixelMatrixInverse);const m=c[3],w=u[3],S=c[1]/m,C=u[1]/w,k=c[2]/m,z=u[2]/w,A=k===z?0:(0-k)/(z-k);return new d.Y(d.z.number(c[0]/m,u[0]/w,A)/this.worldSize,d.z.number(S,C,A)/this.worldSize)}coordinatePoint(t,a=0,c=this.pixelMatrix){const u=[t.x*this.worldSize,t.y*this.worldSize,a,1];return d.af(u,u,c),new d.P(u[0]/u[3],u[1]/u[3])}getBounds(){const t=Math.max(0,this.height/2-this.getHorizon());return new Si().extend(this.pointLocation(new d.P(0,t))).extend(this.pointLocation(new d.P(this.width,t))).extend(this.pointLocation(new d.P(this.width,this.height))).extend(this.pointLocation(new d.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Si([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(t){t?(this.lngRange=[t.getWest(),t.getEast()],this.latRange=[t.getSouth(),t.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,gc])}calculatePosMatrix(t,a=!1){const c=t.key,u=a?this._alignedPosMatrixCache:this._posMatrixCache;if(u[c])return u[c];const m=t.canonical,w=this.worldSize/this.zoomScale(m.z),S=m.x+Math.pow(2,m.z)*t.wrap,C=d.an(new Float64Array(16));return d.H(C,C,[S*w,m.y*w,0]),d.J(C,C,[w/d.W,w/d.W,1]),d.K(C,a?this.alignedProjMatrix:this.projMatrix,C),u[c]=new Float32Array(C),u[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(t,a){a=d.ac(+a,this.minZoom,this.maxZoom);const c={center:new d.M(t.lng,t.lat),zoom:a};let u=this.lngRange;if(!this._renderWorldCopies&&u===null){const Y=179.9999999999;u=[-Y,Y]}const m=this.tileSize*this.zoomScale(c.zoom);let w=0,S=m,C=0,k=m,z=0,A=0;const{x:B,y:G}=this.size;if(this.latRange){const Y=this.latRange;w=d.O(Y[1])*m,S=d.O(Y[0])*m,S-w<G&&(z=G/(S-w))}u&&(C=d.b1(d.N(u[0])*m,0,m),k=d.b1(d.N(u[1])*m,0,m),k<C&&(k+=m),k-C<B&&(A=B/(k-C)));const{x:q,y:X}=this.project.call({worldSize:m},t);let j,ie;const fe=Math.max(A||0,z||0);if(fe){const Y=new d.P(A?(k+C)/2:q,z?(S+w)/2:X);return c.center=this.unproject.call({worldSize:m},Y).wrap(),c.zoom+=this.scaleZoom(fe),c}if(this.latRange){const Y=G/2;X-Y<w&&(ie=w+Y),X+Y>S&&(ie=S-Y)}if(u){const Y=(C+k)/2;let ue=q;this._renderWorldCopies&&(ue=d.b1(q,Y-m/2,Y+m/2));const me=B/2;ue-me<C&&(j=C+me),ue+me>k&&(j=k-me)}if(j!==void 0||ie!==void 0){const Y=new d.P(j??q,ie??X);c.center=this.unproject.call({worldSize:m},Y).wrap()}return c}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t=this._unmodified,{center:a,zoom:c}=this.getConstrained(this.center,this.zoom);this.center=a,this.zoom=c,this._unmodified=t,this._constraining=!1}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,a=this.point.x,c=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=d.b3(1,this.center.lat)*this.worldSize;let u=d.an(new Float64Array(16));d.J(u,u,[this.width/2,-this.height/2,1]),d.H(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=d.an(new Float64Array(16)),d.J(u,u,[1,-1,1]),d.H(u,u,[-1,-1,0]),d.J(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u;const m=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),w=Math.min(this.elevation,this.minElevationForCurrentTile),S=m-w*this._pixelPerMeter/Math.cos(this._pitch),C=w<0?S:m,k=Math.PI/2+this._pitch,z=this._fov*(.5+t.y/this.height),A=Math.sin(z)*C/Math.sin(d.ac(Math.PI-k-z,.01,Math.PI-.01)),B=this.getHorizon(),G=2*Math.atan(B/this.cameraToCenterDistance)*(.5+t.y/(2*B)),q=Math.sin(G)*C/Math.sin(d.ac(Math.PI-k-G,.01,Math.PI-.01)),X=Math.min(A,q),j=1.01*(Math.cos(Math.PI/2-this._pitch)*X+C),ie=this.height/50;u=new Float64Array(16),d.b4(u,this._fov,this.width/this.height,ie,j),u[8]=2*-t.x/this.width,u[9]=2*t.y/this.height,d.J(u,u,[1,-1,1]),d.H(u,u,[0,0,-this.cameraToCenterDistance]),d.b5(u,u,this._pitch),d.ad(u,u,this.angle),d.H(u,u,[-a,-c,0]),this.mercatorMatrix=d.J([],u,[this.worldSize,this.worldSize,this.worldSize]),d.J(u,u,[1,1,this._pixelPerMeter]),this.pixelMatrix=d.K(new Float64Array(16),this.labelPlaneMatrix,u),d.H(u,u,[0,0,-this.elevation]),this.projMatrix=u,this.invProjMatrix=d.ar([],u),this.pixelMatrix3D=d.K(new Float64Array(16),this.labelPlaneMatrix,u);const fe=this.width%2/2,Y=this.height%2/2,ue=Math.cos(this.angle),me=Math.sin(this.angle),ge=a-Math.round(a)+ue*fe+me*Y,ye=c-Math.round(c)+ue*Y+me*fe,Pe=new Float64Array(u);if(d.H(Pe,Pe,[ge>.5?ge-1:ge,ye>.5?ye-1:ye,0]),this.alignedProjMatrix=Pe,u=d.ar(new Float64Array(16),this.pixelMatrix),!u)throw new Error("failed to invert matrix");this.pixelMatrixInverse=u,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const t=this.pointCoordinate(new d.P(0,0)),a=[t.x*this.worldSize,t.y*this.worldSize,0,1];return d.af(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new d.P(0,t))}getCameraQueryGeometry(t){const a=this.getCameraPoint();if(t.length===1)return[t[0],a];{let c=a.x,u=a.y,m=a.x,w=a.y;for(const S of t)c=Math.min(c,S.x),u=Math.min(u,S.y),m=Math.max(m,S.x),w=Math.max(w,S.y);return[new d.P(c,u),new d.P(m,u),new d.P(m,w),new d.P(c,w),new d.P(c,u)]}}lngLatToCameraDepth(t,a){const c=this.locationCoordinate(t),u=[c.x*this.worldSize,c.y*this.worldSize,a,1];return d.af(u,u,this.projMatrix),u[2]/u[3]}}function yc(f,t){let a,c=!1,u=null,m=null;const w=()=>{u=null,c&&(f.apply(m,a),u=setTimeout(w,t),c=!1)};return(...S)=>(c=!0,m=this,a=S,u||w(),u)}class _c{constructor(t){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let c;return a.split("&").map(u=>u.split("=")).forEach(u=>{u[0]===this._hashName&&(c=u)}),(c&&c[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(a.length>=3&&!a.some(c=>isNaN(c))){const c=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:c,pitch:+(a[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,a)}catch{}},this._updateHash=yc(this._updateHashUnthrottled,300),this._hashName=t&&encodeURIComponent(t)}addTo(t){return this._map=t,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const a=this._map.getCenter(),c=Math.round(100*this._map.getZoom())/100,u=Math.ceil((c*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,u),w=Math.round(a.lng*m)/m,S=Math.round(a.lat*m)/m,C=this._map.getBearing(),k=this._map.getPitch();let z="";if(z+=t?`/${w}/${S}/${c}`:`${c}/${S}/${w}`,(C||k)&&(z+="/"+Math.round(10*C)/10),k&&(z+=`/${Math.round(k)}`),this._hashName){const A=this._hashName;let B=!1;const G=window.location.hash.slice(1).split("&").map(q=>{const X=q.split("=")[0];return X===A?(B=!0,`${X}=${z}`):q}).filter(q=>q);return B||G.push(`${A}=${z}`),`#${G.join("&")}`}return`#${z}`}}const yn={linearity:.3,easing:d.b6(0,0,.3,1)},Ch=d.e({deceleration:2500,maxSpeed:1400},yn),Eh=d.e({deceleration:20,maxSpeed:1400},yn),kh=d.e({deceleration:1e3,maxSpeed:360},yn),Ih=d.e({deceleration:1e3,maxSpeed:90},yn);class Ph{constructor(t){this._map=t,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:K.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,a=K.now();for(;t.length>0&&a-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,pan:new d.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:m}of this._inertiaBuffer)a.zoom+=m.zoomDelta||0,a.bearing+=m.bearingDelta||0,a.pitch+=m.pitchDelta||0,m.panDelta&&a.pan._add(m.panDelta),m.around&&(a.around=m.around),m.pinchAround&&(a.pinchAround=m.pinchAround);const c=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,u={};if(a.pan.mag()){const m=no(a.pan.mag(),c,d.e({},Ch,t||{}));u.offset=a.pan.mult(m.amount/a.pan.mag()),u.center=this._map.transform.center,ro(u,m)}if(a.zoom){const m=no(a.zoom,c,Eh);u.zoom=this._map.transform.zoom+m.amount,ro(u,m)}if(a.bearing){const m=no(a.bearing,c,kh);u.bearing=this._map.transform.bearing+d.ac(m.amount,-179,179),ro(u,m)}if(a.pitch){const m=no(a.pitch,c,Ih);u.pitch=this._map.transform.pitch+m.amount,ro(u,m)}if(u.zoom||u.bearing){const m=a.pinchAround===void 0?a.around:a.pinchAround;u.around=m?this._map.unproject(m):this._map.getCenter()}return this.clear(),d.e(u,{noMoveStart:!0})}}function ro(f,t){(!f.duration||f.duration<t.duration)&&(f.duration=t.duration,f.easing=t.easing)}function no(f,t,a){const{maxSpeed:c,linearity:u,deceleration:m}=a,w=d.ac(f*u/(t/1e3),-c,c),S=Math.abs(w)/(m*u);return{easing:a.easing,duration:1e3*S,amount:w*(S/2)}}class Di extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,a,c,u={}){const m=U.mousePos(a.getCanvas(),c),w=a.unproject(m);super(t,d.e({point:m,lngLat:w,originalEvent:c},u)),this._defaultPrevented=!1,this.target=a}}class oa extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,a,c){const u=t==="touchend"?c.changedTouches:c.touches,m=U.touchPos(a.getCanvasContainer(),u),w=m.map(C=>a.unproject(C)),S=m.reduce((C,k,z,A)=>C.add(k.div(A.length)),new d.P(0,0));super(t,{points:m,point:S,lngLats:w,lngLat:a.unproject(S),originalEvent:c}),this._defaultPrevented=!1}}class Ur extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,a,c){super(t,{originalEvent:c}),this._defaultPrevented=!1}}class _n{constructor(t,a){this._map=t,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(t){return this._firePreventable(new Ur(t.type,this._map,t))}mousedown(t,a){return this._mousedownPos=a,this._firePreventable(new Di(t.type,this._map,t))}mouseup(t){this._map.fire(new Di(t.type,this._map,t))}click(t,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new Di(t.type,this._map,t))}dblclick(t){return this._firePreventable(new Di(t.type,this._map,t))}mouseover(t){this._map.fire(new Di(t.type,this._map,t))}mouseout(t){this._map.fire(new Di(t.type,this._map,t))}touchstart(t){return this._firePreventable(new oa(t.type,this._map,t))}touchmove(t){this._map.fire(new oa(t.type,this._map,t))}touchend(t){this._map.fire(new oa(t.type,this._map,t))}touchcancel(t){this._map.fire(new oa(t.type,this._map,t))}_firePreventable(t){if(this._map.fire(t),t.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class zh{constructor(t){this._map=t}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(t){this._map.fire(new Di(t.type,this._map,t))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Di("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(t){this._delayContextMenu?this._contextMenuEvent=t:this._ignoreContextMenu||this._map.fire(new Di(t.type,this._map,t)),this._map.listens("contextmenu")&&t.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class cr{constructor(t){this._map=t}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(t){return this.transform.pointLocation(d.P.convert(t),this._map.terrain)}}class la{constructor(t,a){this._map=t,this._tr=new cr(t),this._el=t.getCanvasContainer(),this._container=t.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(t,a){this.isEnabled()&&t.shiftKey&&t.button===0&&(U.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(t,a){if(!this._active)return;const c=a;if(this._lastPos.equals(c)||!this._box&&c.dist(this._startPos)<this._clickTolerance)return;const u=this._startPos;this._lastPos=c,this._box||(this._box=U.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",t));const m=Math.min(u.x,c.x),w=Math.max(u.x,c.x),S=Math.min(u.y,c.y),C=Math.max(u.y,c.y);U.setTransform(this._box,`translate(${m}px,${S}px)`),this._box.style.width=w-m+"px",this._box.style.height=C-S+"px"}mouseupWindow(t,a){if(!this._active||t.button!==0)return;const c=this._startPos,u=a;if(this.reset(),U.suppressClick(),c.x!==u.x||c.y!==u.y)return this._map.fire(new d.k("boxzoomend",{originalEvent:t})),{cameraAnimation:m=>m.fitScreenCoordinates(c,u,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",t)}keydown(t){this._active&&t.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",t))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(U.remove(this._box),this._box=null),U.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,a){return this._map.fire(new d.k(t,{originalEvent:a}))}}function vc(f,t){if(f.length!==t.length)throw new Error(`The number of touches and points are not equal - touches ${f.length}, points ${t.length}`);const a={};for(let c=0;c<f.length;c++)a[f[c].identifier]=t[c];return a}class nf{constructor(t){this.reset(),this.numTouches=t.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,a,c){(this.centroid||c.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=t.timeStamp),c.length===this.numTouches&&(this.centroid=function(u){const m=new d.P(0,0);for(const w of u)m._add(w);return m.div(u.length)}(a),this.touches=vc(c,a)))}touchmove(t,a,c){if(this.aborted||!this.centroid)return;const u=vc(c,a);for(const m in this.touches){const w=u[m];(!w||w.dist(this.touches[m])>30)&&(this.aborted=!0)}}touchend(t,a,c){if((!this.centroid||t.timeStamp-this.startTime>500)&&(this.aborted=!0),c.length===0){const u=!this.aborted&&this.centroid;if(this.reset(),u)return u}}}class xc{constructor(t){this.singleTap=new nf(t),this.numTaps=t.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(t,a,c){this.singleTap.touchstart(t,a,c)}touchmove(t,a,c){this.singleTap.touchmove(t,a,c)}touchend(t,a,c){const u=this.singleTap.touchend(t,a,c);if(u){const m=t.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(u)<30;if(m&&w||this.reset(),this.count++,this.lastTime=t.timeStamp,this.lastTap=u,this.count===this.numTaps)return this.reset(),u}}}class Ah{constructor(t){this._tr=new cr(t),this._zoomIn=new xc({numTouches:1,numTaps:2}),this._zoomOut=new xc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(t,a,c){this._zoomIn.touchstart(t,a,c),this._zoomOut.touchstart(t,a,c)}touchmove(t,a,c){this._zoomIn.touchmove(t,a,c),this._zoomOut.touchmove(t,a,c)}touchend(t,a,c){const u=this._zoomIn.touchend(t,a,c),m=this._zoomOut.touchend(t,a,c),w=this._tr;return u?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(u)},{originalEvent:t})}):m?(this._active=!0,t.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(m)},{originalEvent:t})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class An{constructor(t){this._enabled=!!t.enable,this._moveStateManager=t.moveStateManager,this._clickTolerance=t.clickTolerance||1,this._moveFunction=t.move,this._activateOnStart=!!t.activateOnStart,t.assignEvents(this),this.reset()}reset(t){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(t)}_move(...t){const a=this._moveFunction(...t);if(a.bearingDelta||a.pitchDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(t,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(t)&&(this._moveStateManager.startMove(t),this._lastPoint=a.length?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(t,a){if(!this.isEnabled())return;const c=this._lastPoint;if(!c)return;if(t.preventDefault(),!this._moveStateManager.isValidMoveEvent(t))return void this.reset(t);const u=a.length?a[0]:a;return!this._moved&&u.dist(c)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=u,this._move(c,u))}dragEnd(t){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(t)&&(this._moved&&U.suppressClick(),this.reset(t))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Yn={0:1,2:2};class Ge{constructor(t){this._correctEvent=t.checkCorrectEvent}startMove(t){const a=U.mouseButton(t);this._eventButton=a}endMove(t){delete this._eventButton}isValidStartEvent(t){return this._correctEvent(t)}isValidMoveEvent(t){return!function(a,c){const u=Yn[c];return a.buttons===void 0||(a.buttons&u)!==u}(t,this._eventButton)}isValidEndEvent(t){return U.mouseButton(t)===this._eventButton}}class wc{constructor(){this._firstTouch=void 0}_isOneFingerTouch(t){return t.targetTouches.length===1}_isSameTouchEvent(t){return t.targetTouches[0].identifier===this._firstTouch}startMove(t){this._firstTouch=t.targetTouches[0].identifier}endMove(t){delete this._firstTouch}isValidStartEvent(t){return this._isOneFingerTouch(t)}isValidMoveEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}isValidEndEvent(t){return this._isOneFingerTouch(t)&&this._isSameTouchEvent(t)}}const ys=f=>{f.mousedown=f.dragStart,f.mousemoveWindow=f.dragMove,f.mouseup=f.dragEnd,f.contextmenu=function(t){t.preventDefault()}},ca=({enable:f,clickTolerance:t,bearingDegreesPerPixelMoved:a=.8})=>{const c=new Ge({checkCorrectEvent:u=>U.mouseButton(u)===0&&u.ctrlKey||U.mouseButton(u)===2});return new An({clickTolerance:t,move:(u,m)=>({bearingDelta:(m.x-u.x)*a}),moveStateManager:c,enable:f,assignEvents:ys})},bc=({enable:f,clickTolerance:t,pitchDegreesPerPixelMoved:a=-.5})=>{const c=new Ge({checkCorrectEvent:u=>U.mouseButton(u)===0&&u.ctrlKey||U.mouseButton(u)===2});return new An({clickTolerance:t,move:(u,m)=>({pitchDelta:(m.y-u.y)*a}),moveStateManager:c,enable:f,assignEvents:ys})};class qe{constructor(t,a){this._clickTolerance=t.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new d.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(t,a,c){return this._calculateTransform(t,a,c)}touchmove(t,a,c){if(this._active&&!(c.length<this.minTouchs()))return t.preventDefault(),this._calculateTransform(t,a,c)}touchend(t,a,c){this._calculateTransform(t,a,c),this._active&&c.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,a,c){c.length>0&&(this._active=!0);const u=vc(c,a),m=new d.P(0,0),w=new d.P(0,0);let S=0;for(const k in u){const z=u[k],A=this._touches[k];A&&(m._add(z),w._add(z.sub(A)),S++,u[k]=z)}if(this._touches=u,S<this.minTouchs()||!w.mag())return;const C=w.div(S);return this._sum._add(C),this._sum.mag()<this._clickTolerance?void 0:{around:m.div(S),panDelta:C}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class so{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(t,a,c){this._firstTwoTouches||c.length<2||(this._firstTwoTouches=[c[0].identifier,c[1].identifier],this._start([a[0],a[1]]))}touchmove(t,a,c){if(!this._firstTwoTouches)return;t.preventDefault();const[u,m]=this._firstTwoTouches,w=Qo(c,a,u),S=Qo(c,a,m);if(!w||!S)return;const C=this._aroundCenter?null:w.add(S).div(2);return this._move([w,S],C,t)}touchend(t,a,c){if(!this._firstTwoTouches)return;const[u,m]=this._firstTwoTouches,w=Qo(c,a,u),S=Qo(c,a,m);w&&S||(this._active&&U.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(t){this._enabled=!0,this._aroundCenter=!!t&&t.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Qo(f,t,a){for(let c=0;c<f.length;c++)if(f[c].identifier===a)return t[c]}function Mh(f,t){return Math.log(f/t)/Math.LN2}class el extends so{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(t){this._startDistance=this._distance=t[0].dist(t[1])}_move(t,a){const c=this._distance;if(this._distance=t[0].dist(t[1]),this._active||!(Math.abs(Mh(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mh(this._distance,c),pinchAround:a}}}function Sc(f,t){return 180*f.angleWith(t)/Math.PI}class Tc extends so{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(t){this._startVector=this._vector=t[0].sub(t[1]),this._minDiameter=t[0].dist(t[1])}_move(t,a,c){const u=this._vector;if(this._vector=t[0].sub(t[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Sc(this._vector,u),pinchAround:a}}_isBelowThreshold(t){this._minDiameter=Math.min(this._minDiameter,t.mag());const a=25/(Math.PI*this._minDiameter)*360,c=Sc(t,this._startVector);return Math.abs(c)<a}}function Cc(f){return Math.abs(f.y)>Math.abs(f.x)}class Dh extends so{constructor(t){super(),this._currentTouchCount=0,this._map=t}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(t,a,c){super.touchstart(t,a,c),this._currentTouchCount=c.length}_start(t){this._lastPoints=t,Cc(t[0].sub(t[1]))&&(this._valid=!1)}_move(t,a,c){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const u=t[0].sub(this._lastPoints[0]),m=t[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(u,m,c.timeStamp),this._valid?(this._lastPoints=t,this._active=!0,{pitchDelta:(u.y+m.y)/2*-.5}):void 0}gestureBeginsVertically(t,a,c){if(this._valid!==void 0)return this._valid;const u=t.mag()>=2,m=a.mag()>=2;if(!u&&!m)return;if(!u||!m)return this._firstMove===void 0&&(this._firstMove=c),c-this._firstMove<100&&void 0;const w=t.y>0==a.y>0;return Cc(t)&&Cc(a)&&w}}const _s={panStep:100,bearingStep:15,pitchStep:10};class Ht{constructor(t){this._tr=new cr(t);const a=_s;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(t){if(t.altKey||t.ctrlKey||t.metaKey)return;let a=0,c=0,u=0,m=0,w=0;switch(t.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:t.shiftKey?c=-1:(t.preventDefault(),m=-1);break;case 39:t.shiftKey?c=1:(t.preventDefault(),m=1);break;case 38:t.shiftKey?u=1:(t.preventDefault(),w=-1);break;case 40:t.shiftKey?u=-1:(t.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(c=0,u=0),{cameraAnimation:S=>{const C=this._tr;S.easeTo({duration:300,easeId:"keyboardHandler",easing:tl,zoom:a?Math.round(C.zoom)+a*(t.shiftKey?2:1):C.zoom,bearing:C.bearing+c*this._bearingStep,pitch:C.pitch+u*this._pitchStep,offset:[-m*this._panStep,-w*this._panStep],center:C.center},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function tl(f){return f*(2-f)}const il=4.000244140625;class Ec{constructor(t,a){this._onTimeout=c=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(c)},this._map=t,this._tr=new cr(t),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(t){this._defaultZoomRate=t}setWheelZoomRate(t){this._wheelZoomRate=t}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(t){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!t&&t.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!t[this._map.cooperativeGestures._bypassKey])return;let a=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const c=K.now(),u=c-(this._lastWheelEventTime||0);this._lastWheelEventTime=c,a!==0&&a%il==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":u>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(u*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),t.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=t,this._delta-=a,this._active||this._start(t)),t.preventDefault()}_start(t){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=U.mousePos(this._map.getCanvas(),t),c=this._tr;this._around=a.y>c.transform.height/2-c.transform.getHorizon()?d.M.convert(this._aroundCenter?c.center:c.unproject(a)):d.M.convert(c.center),this._aroundPoint=c.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const t=this._tr.transform;if(this._delta!==0){const S=this._type==="wheel"&&Math.abs(this._delta)>il?this._wheelZoomRate:this._defaultZoomRate;let C=2/(1+Math.exp(-Math.abs(this._delta*S)));this._delta<0&&C!==0&&(C=1/C);const k=typeof this._targetZoom=="number"?t.zoomScale(this._targetZoom):t.scale;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(k*C))),this._type==="wheel"&&(this._startZoom=t.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom=="number"?this._targetZoom:t.zoom,c=this._startZoom,u=this._easing;let m,w=!1;if(this._type==="wheel"&&c&&u){const S=Math.min((K.now()-this._lastWheelEventTime)/200,1),C=u(S);m=d.z.number(c,a,C),S<1?this._frameId||(this._frameId=!0):w=!0}else m=a,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:m-t.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let a=d.b7;if(this._prevEase){const c=this._prevEase,u=(K.now()-c.start)/c.duration,m=c.easing(u+.01)-c.easing(u),w=.27/Math.sqrt(m*m+1e-4)*.01,S=Math.sqrt(.0729-w*w);a=d.b6(w,S,.25,1)}return this._prevEase={start:K.now(),duration:t,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class kc{constructor(t,a){this._clickZoom=t,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Lh{constructor(t){this._tr=new cr(t),this.reset()}reset(){this._active=!1}dblclick(t,a){return t.preventDefault(),{cameraAnimation:c=>{c.easeTo({duration:300,zoom:this._tr.zoom+(t.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:t})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sf{constructor(){this._tap=new xc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(t,a,c){if(!this._swipePoint)if(this._tapTime){const u=a[0],m=t.timeStamp-this._tapTime<500,w=this._tapPoint.dist(u)<30;m&&w?c.length>0&&(this._swipePoint=u,this._swipeTouch=c[0].identifier):this.reset()}else this._tap.touchstart(t,a,c)}touchmove(t,a,c){if(this._tapTime){if(this._swipePoint){if(c[0].identifier!==this._swipeTouch)return;const u=a[0],m=u.y-this._swipePoint.y;return this._swipePoint=u,t.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(t,a,c)}touchend(t,a,c){if(this._tapTime)this._swipePoint&&c.length===0&&this.reset();else{const u=this._tap.touchend(t,a,c);u&&(this._tapTime=t.timeStamp,this._tapPoint=u)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Jr{constructor(t,a,c){this._el=t,this._mousePan=a,this._touchPan=c}enable(t){this._inertiaOptions=t||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ao{constructor(t,a,c){this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=a,this._mousePitch=c}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class et{constructor(t,a,c,u){this._el=t,this._touchZoom=a,this._touchRotate=c,this._tapDragZoom=u,this._rotationDisabled=!1,this._enabled=!0}enable(t){this._touchZoom.enable(t),this._rotationDisabled||this._touchRotate.enable(t),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class nt{constructor(t,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=t,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const t=this._map.getCanvasContainer();t.classList.add("maplibregl-cooperative-gestures"),this._container=U.create("div","maplibregl-cooperative-gesture-screen",t);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const c=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),u=document.createElement("div");u.className="maplibregl-desktop-message",u.textContent=a,this._container.appendChild(u);const m=document.createElement("div");m.className="maplibregl-mobile-message",m.textContent=c,this._container.appendChild(m),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(U.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(t){this._onCooperativeGesture(t.touches.length===1)}wheel(t){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!t[this._bypassKey])}_onCooperativeGesture(t){this._enabled&&t&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const vs=f=>f.zoom||f.drag||f.pitch||f.rotate;class Ic extends d.k{}function oo(f){return f.panDelta&&f.panDelta.mag()||f.zoomDelta||f.bearingDelta||f.pitchDelta}class ur{constructor(t,a){this.handleWindowEvent=u=>{this.handleEvent(u,`${u.type}Window`)},this.handleEvent=(u,m)=>{if(u.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=u.type==="renderFrame"?void 0:u,S={needsRenderFrame:!1},C={},k={},z=u.touches,A=z?this._getMapTouches(z):void 0,B=A?U.touchPos(this._map.getCanvas(),A):U.mousePos(this._map.getCanvas(),u);for(const{handlerName:X,handler:j,allowed:ie}of this._handlers){if(!j.isEnabled())continue;let fe;this._blockedByActive(k,ie,X)?j.reset():j[m||u.type]&&(fe=j[m||u.type](u,B,A),this.mergeHandlerResult(S,C,fe,X,w),fe&&fe.needsRenderFrame&&this._triggerRenderFrame()),(fe||j.isActive())&&(k[X]=j)}const G={};for(const X in this._previousActiveHandlers)k[X]||(G[X]=w);this._previousActiveHandlers=k,(Object.keys(G).length||oo(S))&&(this._changes.push([S,C,G]),this._triggerRenderFrame()),(Object.keys(k).length||oo(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=S;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))},this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ph(t),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const c=this._el;this._listeners=[[c,"touchstart",{passive:!0}],[c,"touchmove",{passive:!1}],[c,"touchend",void 0],[c,"touchcancel",void 0],[c,"mousedown",void 0],[c,"mousemove",void 0],[c,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[c,"mouseover",void 0],[c,"mouseout",void 0],[c,"dblclick",void 0],[c,"click",void 0],[c,"keydown",{capture:!1}],[c,"keyup",void 0],[c,"wheel",{passive:!1}],[c,"contextmenu",void 0],[window,"blur",void 0]];for(const[u,m,w]of this._listeners)U.addEventListener(u,m,u===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[t,a,c]of this._listeners)U.removeEventListener(t,a,t===document?this.handleWindowEvent:this.handleEvent,c)}_addDefaultHandlers(t){const a=this._map,c=a.getCanvasContainer();this._add("mapEvent",new _n(a,t));const u=a.boxZoom=new la(a,t);this._add("boxZoom",u),t.interactive&&t.boxZoom&&u.enable();const m=a.cooperativeGestures=new nt(a,t.cooperativeGestures);this._add("cooperativeGestures",m),t.cooperativeGestures&&m.enable();const w=new Ah(a),S=new Lh(a);a.doubleClickZoom=new kc(S,w),this._add("tapZoom",w),this._add("clickZoom",S),t.interactive&&t.doubleClickZoom&&a.doubleClickZoom.enable();const C=new sf;this._add("tapDragZoom",C);const k=a.touchPitch=new Dh(a);this._add("touchPitch",k),t.interactive&&t.touchPitch&&a.touchPitch.enable(t.touchPitch);const z=ca(t),A=bc(t);a.dragRotate=new ao(t,z,A),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",A,["mouseRotate"]),t.interactive&&t.dragRotate&&a.dragRotate.enable();const B=(({enable:fe,clickTolerance:Y})=>{const ue=new Ge({checkCorrectEvent:me=>U.mouseButton(me)===0&&!me.ctrlKey});return new An({clickTolerance:Y,move:(me,ge)=>({around:ge,panDelta:ge.sub(me)}),activateOnStart:!0,moveStateManager:ue,enable:fe,assignEvents:ys})})(t),G=new qe(t,a);a.dragPan=new Jr(c,B,G),this._add("mousePan",B),this._add("touchPan",G,["touchZoom","touchRotate"]),t.interactive&&t.dragPan&&a.dragPan.enable(t.dragPan);const q=new Tc,X=new el;a.touchZoomRotate=new et(c,X,q,C),this._add("touchRotate",q,["touchPan","touchZoom"]),this._add("touchZoom",X,["touchPan","touchRotate"]),t.interactive&&t.touchZoomRotate&&a.touchZoomRotate.enable(t.touchZoomRotate);const j=a.scrollZoom=new Ec(a,()=>this._triggerRenderFrame());this._add("scrollZoom",j,["mousePan"]),t.interactive&&t.scrollZoom&&a.scrollZoom.enable(t.scrollZoom);const ie=a.keyboard=new Ht(a);this._add("keyboard",ie),t.interactive&&t.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new zh(a))}_add(t,a,c){this._handlers.push({handlerName:t,handler:a,allowed:c}),this._handlersById[t]=a}stop(t){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},t),this._changes=[]}}isActive(){for(const{handler:t}of this._handlers)if(t.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!vs(this._eventsInProgress)||this.isZooming()}_blockedByActive(t,a,c){for(const u in t)if(u!==c&&(!a||a.indexOf(u)<0))return!0;return!1}_getMapTouches(t){const a=[];for(const c of t)this._el.contains(c.target)&&a.push(c);return a}mergeHandlerResult(t,a,c,u,m){if(!c)return;d.e(t,c);const w={handlerName:u,originalEvent:c.originalEvent||m};c.zoomDelta!==void 0&&(a.zoom=w),c.panDelta!==void 0&&(a.drag=w),c.pitchDelta!==void 0&&(a.pitch=w),c.bearingDelta!==void 0&&(a.rotate=w)}_applyChanges(){const t={},a={},c={};for(const[u,m,w]of this._changes)u.panDelta&&(t.panDelta=(t.panDelta||new d.P(0,0))._add(u.panDelta)),u.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+u.zoomDelta),u.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+u.bearingDelta),u.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+u.pitchDelta),u.around!==void 0&&(t.around=u.around),u.pinchAround!==void 0&&(t.pinchAround=u.pinchAround),u.noInertia&&(t.noInertia=u.noInertia),d.e(a,m),d.e(c,w);this._updateMapTransform(t,a,c),this._changes=[]}_updateMapTransform(t,a,c){const u=this._map,m=u._getTransformForUpdate(),w=u.terrain;if(!(oo(t)||w&&this._terrainMovement))return this._fireEvents(a,c,!0);let{panDelta:S,zoomDelta:C,bearingDelta:k,pitchDelta:z,around:A,pinchAround:B}=t;B!==void 0&&(A=B),u._stop(!0),A=A||u.transform.centerPoint;const G=m.pointLocation(S?A.sub(S):A);k&&(m.bearing+=k),z&&(m.pitch+=z),C&&(m.zoom+=C),w?this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?m.center=m.pointLocation(m.centerPoint.sub(S)):m.setLocationAtPoint(G,A):(this._terrainMovement=!0,this._map._elevationFreeze=!0,m.setLocationAtPoint(G,A),this._map.once("moveend",()=>{this._map._elevationFreeze=!1,this._terrainMovement=!1,m.recalculateZoom(u.terrain)})):m.setLocationAtPoint(G,A),u._applyUpdatedTransform(m),this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(a,c,!0)}_fireEvents(t,a,c){const u=vs(this._eventsInProgress),m=vs(t),w={};for(const z in t){const{originalEvent:A}=t[z];this._eventsInProgress[z]||(w[`${z}start`]=A),this._eventsInProgress[z]=t[z]}!u&&m&&this._fireEvent("movestart",m.originalEvent);for(const z in w)this._fireEvent(z,w[z]);m&&this._fireEvent("move",m.originalEvent);for(const z in t){const{originalEvent:A}=t[z];this._fireEvent(z,A)}const S={};let C;for(const z in this._eventsInProgress){const{handlerName:A,originalEvent:B}=this._eventsInProgress[z];this._handlersById[A].isActive()||(delete this._eventsInProgress[z],C=a[A]||B,S[`${z}end`]=C)}for(const z in S)this._fireEvent(z,S[z]);const k=vs(this._eventsInProgress);if(c&&(u||m)&&!k){this._updatingCamera=!0;const z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),A=B=>B!==0&&-this._bearingSnap<B&&B<this._bearingSnap;!z||!z.essential&&K.prefersReducedMotion?(this._map.fire(new d.k("moveend",{originalEvent:C})),A(this._map.getBearing())&&this._map.resetNorth()):(A(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:C})),this._updatingCamera=!1}}_fireEvent(t,a){this._map.fire(new d.k(t,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(t=>{delete this._frameId,this.handleEvent(new Ic("renderFrame",{timeStamp:t})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Rh extends d.E{constructor(t,a){super(),this._renderFrameCallback=()=>{const c=Math.min((K.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(c)),c<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=a.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new d.M(this.transform.center.lng,this.transform.center.lat)}setCenter(t,a){return this.jumpTo({center:t},a)}panBy(t,a,c){return t=d.P.convert(t).mult(-1),this.panTo(this.transform.center,d.e({offset:t},a),c)}panTo(t,a,c){return this.easeTo(d.e({center:t},a),c)}getZoom(){return this.transform.zoom}setZoom(t,a){return this.jumpTo({zoom:t},a),this}zoomTo(t,a,c){return this.easeTo(d.e({zoom:t},a),c)}zoomIn(t,a){return this.zoomTo(this.getZoom()+1,t,a),this}zoomOut(t,a){return this.zoomTo(this.getZoom()-1,t,a),this}getBearing(){return this.transform.bearing}setBearing(t,a){return this.jumpTo({bearing:t},a),this}getPadding(){return this.transform.padding}setPadding(t,a){return this.jumpTo({padding:t},a),this}rotateTo(t,a,c){return this.easeTo(d.e({bearing:t},a),c)}resetNorth(t,a){return this.rotateTo(0,d.e({duration:1e3},t),a),this}resetNorthPitch(t,a){return this.easeTo(d.e({bearing:0,pitch:0,duration:1e3},t),a),this}snapToNorth(t,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,a):this}getPitch(){return this.transform.pitch}setPitch(t,a){return this.jumpTo({pitch:t},a),this}cameraForBounds(t,a){t=Si.convert(t);const c=a&&a.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),c,a)}_cameraForBoxAndBearing(t,a,c,u){const m={top:0,bottom:0,right:0,left:0};if(typeof(u=d.e({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},u)).padding=="number"){const Ze=u.padding;u.padding={top:Ze,bottom:Ze,right:Ze,left:Ze}}u.padding=d.e(m,u.padding);const w=this.transform,S=w.padding,C=new Si(t,a),k=w.project(C.getNorthWest()),z=w.project(C.getNorthEast()),A=w.project(C.getSouthEast()),B=w.project(C.getSouthWest()),G=d.b8(-c),q=k.rotate(G),X=z.rotate(G),j=A.rotate(G),ie=B.rotate(G),fe=new d.P(Math.max(q.x,X.x,ie.x,j.x),Math.max(q.y,X.y,ie.y,j.y)),Y=new d.P(Math.min(q.x,X.x,ie.x,j.x),Math.min(q.y,X.y,ie.y,j.y)),ue=fe.sub(Y),me=(w.width-(S.left+S.right+u.padding.left+u.padding.right))/ue.x,ge=(w.height-(S.top+S.bottom+u.padding.top+u.padding.bottom))/ue.y;if(ge<0||me<0)return void d.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const ye=Math.min(w.scaleZoom(w.scale*Math.min(me,ge)),u.maxZoom),Pe=d.P.convert(u.offset),Ce=new d.P((u.padding.left-u.padding.right)/2,(u.padding.top-u.padding.bottom)/2).rotate(d.b8(c)),Ie=Pe.add(Ce).mult(w.scale/w.zoomScale(ye));return{center:w.unproject(k.add(A).div(2).sub(Ie)),zoom:ye,bearing:c}}fitBounds(t,a,c){return this._fitInternal(this.cameraForBounds(t,a),a,c)}fitScreenCoordinates(t,a,c,u,m){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(d.P.convert(t)),this.transform.pointLocation(d.P.convert(a)),c,u),u,m)}_fitInternal(t,a,c){return t?(delete(a=d.e(t,a)).padding,a.linear?this.easeTo(a,c):this.flyTo(a,c)):this}jumpTo(t,a){this.stop();const c=this._getTransformForUpdate();let u=!1,m=!1,w=!1;return"zoom"in t&&c.zoom!==+t.zoom&&(u=!0,c.zoom=+t.zoom),t.center!==void 0&&(c.center=d.M.convert(t.center)),"bearing"in t&&c.bearing!==+t.bearing&&(m=!0,c.bearing=+t.bearing),"pitch"in t&&c.pitch!==+t.pitch&&(w=!0,c.pitch=+t.pitch),t.padding==null||c.isPaddingEqual(t.padding)||(c.padding=t.padding),this._applyUpdatedTransform(c),this.fire(new d.k("movestart",a)).fire(new d.k("move",a)),u&&this.fire(new d.k("zoomstart",a)).fire(new d.k("zoom",a)).fire(new d.k("zoomend",a)),m&&this.fire(new d.k("rotatestart",a)).fire(new d.k("rotate",a)).fire(new d.k("rotateend",a)),w&&this.fire(new d.k("pitchstart",a)).fire(new d.k("pitch",a)).fire(new d.k("pitchend",a)),this.fire(new d.k("moveend",a))}calculateCameraOptionsFromTo(t,a,c,u=0){const m=d.Y.fromLngLat(t,a),w=d.Y.fromLngLat(c,u),S=w.x-m.x,C=w.y-m.y,k=w.z-m.z,z=Math.hypot(S,C,k);if(z===0)throw new Error("Can't calculate camera options with same From and To");const A=Math.hypot(S,C),B=this.transform.scaleZoom(this.transform.cameraToCenterDistance/z/this.transform.tileSize),G=180*Math.atan2(S,-C)/Math.PI;let q=180*Math.acos(A/z)/Math.PI;return q=k<0?90-q:90+q,{center:w.toLngLat(),zoom:B,pitch:q,bearing:G}}easeTo(t,a){var c;this._stop(!1,t.easeId),((t=d.e({offset:[0,0],duration:500,easing:d.b7},t)).animate===!1||!t.essential&&K.prefersReducedMotion)&&(t.duration=0);const u=this._getTransformForUpdate(),m=this.getZoom(),w=this.getBearing(),S=this.getPitch(),C=this.getPadding(),k="bearing"in t?this._normalizeBearing(t.bearing,w):w,z="pitch"in t?+t.pitch:S,A="padding"in t?t.padding:u.padding,B=d.P.convert(t.offset);let G=u.centerPoint.add(B);const q=u.pointLocation(G),{center:X,zoom:j}=u.getConstrained(d.M.convert(t.center||q),(c=t.zoom)!==null&&c!==void 0?c:m);this._normalizeCenter(X);const ie=u.project(q),fe=u.project(X).sub(ie),Y=u.zoomScale(j-m);let ue,me;t.around&&(ue=d.M.convert(t.around),me=u.locationPoint(ue));const ge={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||j!==m,this._rotating=this._rotating||w!==k,this._pitching=this._pitching||z!==S,this._padding=!u.isPaddingEqual(A),this._easeId=t.easeId,this._prepareEase(a,t.noMoveStart,ge),this.terrain&&this._prepareElevation(X),this._ease(ye=>{if(this._zooming&&(u.zoom=d.z.number(m,j,ye)),this._rotating&&(u.bearing=d.z.number(w,k,ye)),this._pitching&&(u.pitch=d.z.number(S,z,ye)),this._padding&&(u.interpolatePadding(C,A,ye),G=u.centerPoint.add(B)),this.terrain&&!t.freezeElevation&&this._updateElevation(ye),ue)u.setLocationAtPoint(ue,me);else{const Pe=u.zoomScale(u.zoom-m),Ce=j>m?Math.min(2,Y):Math.max(.5,Y),Ie=Math.pow(Ce,1-ye),Ze=u.unproject(ie.add(fe.mult(ye*Ie)).mult(Pe));u.setLocationAtPoint(u.renderWorldCopies?Ze.wrap():Ze,G)}this._applyUpdatedTransform(u),this._fireMoveEvents(a)},ye=>{this.terrain&&this._finalizeElevation(),this._afterEase(a,ye)},t),this}_prepareEase(t,a,c={}){this._moving=!0,a||c.moving||this.fire(new d.k("movestart",t)),this._zooming&&!c.zooming&&this.fire(new d.k("zoomstart",t)),this._rotating&&!c.rotating&&this.fire(new d.k("rotatestart",t)),this._pitching&&!c.pitching&&this.fire(new d.k("pitchstart",t))}_prepareElevation(t){this._elevationCenter=t,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(t,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(t){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(t<1&&a!==this._elevationTarget){const c=this._elevationTarget-this._elevationStart;this._elevationStart+=t*(c-(a-(c*t+this._elevationStart))/(1-t)),this._elevationTarget=a}this.transform.elevation=d.z.number(this._elevationStart,this._elevationTarget,t)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(t){if(!this.transformCameraUpdate)return;const a=t.clone(),{center:c,zoom:u,pitch:m,bearing:w,elevation:S}=this.transformCameraUpdate(a);c&&(a.center=c),u!==void 0&&(a.zoom=u),m!==void 0&&(a.pitch=m),w!==void 0&&(a.bearing=w),S!==void 0&&(a.elevation=S),this.transform.apply(a)}_fireMoveEvents(t){this.fire(new d.k("move",t)),this._zooming&&this.fire(new d.k("zoom",t)),this._rotating&&this.fire(new d.k("rotate",t)),this._pitching&&this.fire(new d.k("pitch",t))}_afterEase(t,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const c=this._zooming,u=this._rotating,m=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,c&&this.fire(new d.k("zoomend",t)),u&&this.fire(new d.k("rotateend",t)),m&&this.fire(new d.k("pitchend",t)),this.fire(new d.k("moveend",t))}flyTo(t,a){var c;if(!t.essential&&K.prefersReducedMotion){const St=d.L(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(St,a)}this.stop(),t=d.e({offset:[0,0],speed:1.2,curve:1.42,easing:d.b7},t);const u=this._getTransformForUpdate(),m=this.getZoom(),w=this.getBearing(),S=this.getPitch(),C=this.getPadding(),k="bearing"in t?this._normalizeBearing(t.bearing,w):w,z="pitch"in t?+t.pitch:S,A="padding"in t?t.padding:u.padding,B=d.P.convert(t.offset);let G=u.centerPoint.add(B);const q=u.pointLocation(G),{center:X,zoom:j}=u.getConstrained(d.M.convert(t.center||q),(c=t.zoom)!==null&&c!==void 0?c:m);this._normalizeCenter(X);const ie=u.zoomScale(j-m),fe=u.project(q),Y=u.project(X).sub(fe);let ue=t.curve;const me=Math.max(u.width,u.height),ge=me/ie,ye=Y.mag();if("minZoom"in t){const St=d.ac(Math.min(t.minZoom,m,j),u.minZoom,u.maxZoom),lt=me/u.zoomScale(St-m);ue=Math.sqrt(lt/ye*2)}const Pe=ue*ue;function Ce(St){const lt=(ge*ge-me*me+(St?-1:1)*Pe*Pe*ye*ye)/(2*(St?ge:me)*Pe*ye);return Math.log(Math.sqrt(lt*lt+1)-lt)}function Ie(St){return(Math.exp(St)-Math.exp(-St))/2}function Ze(St){return(Math.exp(St)+Math.exp(-St))/2}const ut=Ce(!1);let Be=function(St){return Ze(ut)/Ze(ut+ue*St)},at=function(St){return me*((Ze(ut)*(Ie(lt=ut+ue*St)/Ze(lt))-Ie(ut))/Pe)/ye;var lt},gt=(Ce(!0)-ut)/ue;if(Math.abs(ye)<1e-6||!isFinite(gt)){if(Math.abs(me-ge)<1e-6)return this.easeTo(t,a);const St=ge<me?-1:1;gt=Math.abs(Math.log(ge/me))/ue,at=function(){return 0},Be=function(lt){return Math.exp(St*ue*lt)}}return t.duration="duration"in t?+t.duration:1e3*gt/("screenSpeed"in t?+t.screenSpeed/ue:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=w!==k,this._pitching=z!==S,this._padding=!u.isPaddingEqual(A),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(X),this._ease(St=>{const lt=St*gt,_t=1/Be(lt);u.zoom=St===1?j:m+u.scaleZoom(_t),this._rotating&&(u.bearing=d.z.number(w,k,St)),this._pitching&&(u.pitch=d.z.number(S,z,St)),this._padding&&(u.interpolatePadding(C,A,St),G=u.centerPoint.add(B)),this.terrain&&!t.freezeElevation&&this._updateElevation(St);const vt=St===1?X:u.unproject(fe.add(Y.mult(at(lt))).mult(_t));u.setLocationAtPoint(u.renderWorldCopies?vt.wrap():vt,G),this._applyUpdatedTransform(u),this._fireMoveEvents(a)},()=>{this.terrain&&this._finalizeElevation(),this._afterEase(a)},t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(t,a){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const c=this._onEaseEnd;delete this._onEaseEnd,c.call(this,a)}if(!t){const c=this.handlers;c&&c.stop(!1)}return this}_ease(t,a,c){c.animate===!1||c.duration===0?(t(1),a()):(this._easeStart=K.now(),this._easeOptions=c,this._onEaseFrame=t,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(t,a){t=d.b1(t,-180,180);const c=Math.abs(t-a);return Math.abs(t-360-a)<c&&(t-=360),Math.abs(t+360-a)<c&&(t+=360),t}_normalizeCenter(t){const a=this.transform;if(!a.renderWorldCopies||a.lngRange)return;const c=t.lng-a.center.lng;t.lng+=c>180?-360:c<-180?360:0}queryTerrainElevation(t){return this.terrain?this.terrain.getElevationForLngLatZoom(d.M.convert(t),this.transform.tileZoom)-this.transform.elevation:null}}const Qr={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Fh{constructor(t=Qr){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=t}getDefaultPosition(){return"bottom-right"}onAdd(t){return this._map=t,this._compact=this.options.compact,this._container=U.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=U.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=U.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){U.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(t,a){const c=this._map._getUIString(`AttributionControl.${a}`);t.title=c,t.setAttribute("aria-label",c)}_updateAttributions(){if(!this._map.style)return;let t=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?t=t.concat(this.options.customAttribution.map(u=>typeof u!="string"?"":u)):typeof this.options.customAttribution=="string"&&t.push(this.options.customAttribution)),this._map.style.stylesheet){const u=this._map.style.stylesheet;this.styleOwner=u.owner,this.styleId=u.id}const a=this._map.style.sourceCaches;for(const u in a){const m=a[u];if(m.used||m.usedForTerrain){const w=m.getSource();w.attribution&&t.indexOf(w.attribution)<0&&t.push(w.attribution)}}t=t.filter(u=>String(u).trim()),t.sort((u,m)=>u.length-m.length),t=t.filter((u,m)=>{for(let w=m+1;w<t.length;w++)if(t[w].indexOf(u)>=0)return!1;return!0});const c=t.join(" | ");c!==this._attribHTML&&(this._attribHTML=c,t.length?(this._innerContainer.innerHTML=c,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ua{constructor(t={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const c=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&c.classList.add("maplibregl-compact"):c.classList.remove("maplibregl-compact")}},this.options=t}getDefaultPosition(){return"bottom-left"}onAdd(t){this._map=t,this._compact=this.options&&this.options.compact,this._container=U.create("div","maplibregl-ctrl");const a=U.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){U.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class ti{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(t){const a=++this._id;return this._queue.push({callback:t,id:a,cancelled:!1}),a}remove(t){const a=this._currentlyRunning,c=a?this._queue.concat(a):this._queue;for(const u of c)if(u.id===t)return void(u.cancelled=!0)}run(t=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const c of a)if(!c.cancelled&&(c.callback(t),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var di=d.X([{name:"a_pos3d",type:"Int16",components:3}]);class Bh extends d.E{constructor(t){super(),this.sourceCache=t,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,t.usedForTerrain=!0,t.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(t,a){this.sourceCache.update(t,a),this._renderableTilesKeys=[];const c={};for(const u of t.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a}))c[u.key]=!0,this._renderableTilesKeys.push(u.key),this._tiles[u.key]||(u.posMatrix=new Float64Array(16),d.aN(u.posMatrix,0,d.W,0,d.W,0,1),this._tiles[u.key]=new or(u,this.tileSize));for(const u in this._tiles)c[u]||delete this._tiles[u]}freeRtt(t){for(const a in this._tiles){const c=this._tiles[a];(!t||c.tileID.equals(t)||c.tileID.isChildOf(t)||t.isChildOf(c.tileID))&&(c.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(t=>this.getTileByID(t))}getTileByID(t){return this._tiles[t]}getTerrainCoords(t){const a={};for(const c of this._renderableTilesKeys){const u=this._tiles[c].tileID;if(u.canonical.equals(t.canonical)){const m=t.clone();m.posMatrix=new Float64Array(16),d.aN(m.posMatrix,0,d.W,0,d.W,0,1),a[c]=m}else if(u.canonical.isChildOf(t.canonical)){const m=t.clone();m.posMatrix=new Float64Array(16);const w=u.canonical.z-t.canonical.z,S=u.canonical.x-(u.canonical.x>>w<<w),C=u.canonical.y-(u.canonical.y>>w<<w),k=d.W>>w;d.aN(m.posMatrix,0,k,0,k,0,1),d.H(m.posMatrix,m.posMatrix,[-S*k,-C*k,0]),a[c]=m}else if(t.canonical.isChildOf(u.canonical)){const m=t.clone();m.posMatrix=new Float64Array(16);const w=t.canonical.z-u.canonical.z,S=t.canonical.x-(t.canonical.x>>w<<w),C=t.canonical.y-(t.canonical.y>>w<<w),k=d.W>>w;d.aN(m.posMatrix,0,d.W,0,d.W,0,1),d.H(m.posMatrix,m.posMatrix,[S*k,C*k,0]),d.J(m.posMatrix,m.posMatrix,[1/2**w,1/2**w,0]),a[c]=m}}return a}getSourceTile(t,a){const c=this.sourceCache._source;let u=t.overscaledZ-this.deltaZoom;if(u>c.maxzoom&&(u=c.maxzoom),u<c.minzoom)return null;this._sourceTileCache[t.key]||(this._sourceTileCache[t.key]=t.scaledTo(u).key);let m=this.sourceCache.getTileByID(this._sourceTileCache[t.key]);if((!m||!m.dem)&&a)for(;u>=c.minzoom&&(!m||!m.dem);)m=this.sourceCache.getTileByID(t.scaledTo(u--).key);return m}tilesAfterTime(t=Date.now()){return Object.values(this._tiles).filter(a=>a.timeAdded>=t)}}class lo{constructor(t,a,c){this.painter=t,this.sourceCache=new Bh(a),this.options=c,this.exaggeration=typeof c.exaggeration=="number"?c.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(t,a,c,u=d.W){var m;if(!(a>=0&&a<u&&c>=0&&c<u))return 0;const w=this.getTerrainData(t),S=(m=w.tile)===null||m===void 0?void 0:m.dem;if(!S)return 0;const C=function(q,X,j){var ie=X[0],fe=X[1];return q[0]=j[0]*ie+j[4]*fe+j[12],q[1]=j[1]*ie+j[5]*fe+j[13],q}([],[a/u*d.W,c/u*d.W],w.u_terrain_matrix),k=[C[0]*S.dim,C[1]*S.dim],z=Math.floor(k[0]),A=Math.floor(k[1]),B=k[0]-z,G=k[1]-A;return S.get(z,A)*(1-B)*(1-G)+S.get(z+1,A)*B*(1-G)+S.get(z,A+1)*(1-B)*G+S.get(z+1,A+1)*B*G}getElevationForLngLatZoom(t,a){const{tileID:c,mercatorX:u,mercatorY:m}=this._getOverscaledTileIDFromLngLatZoom(t,a);return this.getElevation(c,u%d.W,m%d.W,d.W)}getElevation(t,a,c,u=d.W){return this.getDEMElevation(t,a,c,u)*this.exaggeration}getTerrainData(t){if(!this._emptyDemTexture){const u=this.painter.context,m=new d.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Nt(u,m,u.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Nt(u,new d.R({width:1,height:1}),u.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=d.an([])}const a=this.sourceCache.getSourceTile(t,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const u=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new Nt(u,a.dem.getPixels(),u.gl.RGBA,{premultiply:!1}),a.demTexture.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const c=a&&a+a.tileID.key+t.key;if(c&&!this._demMatrixCache[c]){const u=this.sourceCache.sourceCache._source.maxzoom;let m=t.canonical.z-a.tileID.canonical.z;t.overscaledZ>t.canonical.z&&(t.canonical.z>=u?m=t.canonical.z-u:d.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=t.canonical.x-(t.canonical.x>>m<<m),S=t.canonical.y-(t.canonical.y>>m<<m),C=d.b9(new Float64Array(16),[1/(d.W<<m),1/(d.W<<m),0]);d.H(C,C,[w*d.W,S*d.W,0]),this._demMatrixCache[t.key]={matrix:C,coord:t}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:c?this._demMatrixCache[t.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(t){const a=this.painter,c=a.width/devicePixelRatio,u=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===c&&this._fbo.height===u||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Nt(a.context,{width:c,height:u,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Nt(a.context,{width:c,height:u,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(c,u,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,c,u))),this._fbo.colorAttachment.set(t==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const t=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let m=0,w=0;m<this._coordsTextureSize;m++)for(let S=0;S<this._coordsTextureSize;S++,w+=4)a[w+0]=255&S,a[w+1]=255&m,a[w+2]=S>>8<<4|m>>8,a[w+3]=0;const c=new d.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),u=new Nt(t,c,t.gl.RGBA,{premultiply:!1});return u.bind(t.gl.NEAREST,t.gl.CLAMP_TO_EDGE),this._coordsTexture=u,u}pointCoordinate(t){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),c=this.painter.context,u=c.gl;c.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),u.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,u.RGBA,u.UNSIGNED_BYTE,a),c.bindFramebuffer.set(null);const m=a[0]+(a[2]>>4<<8),w=a[1]+((15&a[2])<<8),S=this.coordsIndex[255-a[3]],C=S&&this.sourceCache.getTileByID(S);if(!C)return null;const k=this._coordsTextureSize,z=(1<<C.tileID.canonical.z)*k;return new d.Y((C.tileID.canonical.x*k+m)/z+C.tileID.wrap,(C.tileID.canonical.y*k+w)/z,this.getElevation(C.tileID,m,w,k))}depthAtPoint(t){const a=new Uint8Array(4),c=this.painter.context,u=c.gl;return c.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),u.readPixels(t.x,this.painter.height/devicePixelRatio-t.y-1,1,1,u.RGBA,u.UNSIGNED_BYTE,a),c.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const t=this.painter.context,a=new d.ba,c=new d.aX,u=this.meshSize,m=d.W/u,w=u*u;for(let A=0;A<=u;A++)for(let B=0;B<=u;B++)a.emplaceBack(B*m,A*m,0);for(let A=0;A<w;A+=u+1)for(let B=0;B<u;B++)c.emplaceBack(B+A,u+B+A+1,u+B+A+2),c.emplaceBack(B+A,u+B+A+2,B+A+1);const S=a.length,C=S+2*(u+1);for(const A of[0,1])for(let B=0;B<=u;B++)for(const G of[0,1])a.emplaceBack(B*m,A*d.W,G);for(let A=0;A<2*u;A+=2)c.emplaceBack(C+A,C+A+1,C+A+3),c.emplaceBack(C+A,C+A+3,C+A+2),c.emplaceBack(S+A,S+A+3,S+A+1),c.emplaceBack(S+A,S+A+2,S+A+3);const k=a.length,z=k+2*(u+1);for(const A of[0,1])for(let B=0;B<=u;B++)for(const G of[0,1])a.emplaceBack(A*d.W,B*m,G);for(let A=0;A<2*u;A+=2)c.emplaceBack(k+A,k+A+1,k+A+3),c.emplaceBack(k+A,k+A+3,k+A+2),c.emplaceBack(z+A,z+A+3,z+A+1),c.emplaceBack(z+A,z+A+2,z+A+3);return this._mesh={indexBuffer:t.createIndexBuffer(c),vertexBuffer:t.createVertexBuffer(a,di.members),segments:d.$.simpleSegment(0,0,a.length,c.length)},this._mesh}getMeshFrameDelta(t){return 2*Math.PI*d.bb/Math.pow(2,t)/5}getMinTileElevationForLngLatZoom(t,a){var c;const{tileID:u}=this._getOverscaledTileIDFromLngLatZoom(t,a);return(c=this.getMinMaxElevation(u).minElevation)!==null&&c!==void 0?c:0}getMinMaxElevation(t){const a=this.getTerrainData(t).tile,c={minElevation:null,maxElevation:null};return a&&a.dem&&(c.minElevation=a.dem.min*this.exaggeration,c.maxElevation=a.dem.max*this.exaggeration),c}_getOverscaledTileIDFromLngLatZoom(t,a){const c=d.Y.fromLngLat(t.wrap()),u=(1<<a)*d.W,m=c.x*u,w=c.y*u,S=Math.floor(m/d.W),C=Math.floor(w/d.W);return{tileID:new d.Q(a,0,a,S,C),mercatorX:m,mercatorY:w}}}class rl{constructor(t,a,c){this._context=t,this._size=a,this._tileSize=c,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const t of this._objects)t.texture.destroy(),t.fbo.destroy()}_createObject(t){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),c=new Nt(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return c.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(c.texture),{id:t,fbo:a,texture:c,stamp:-1,inUse:!1}}getObjectForId(t){return this._objects[t]}useObject(t){t.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>t.id!==a),this._recentlyUsed.push(t.id)}stampObject(t){t.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const t=this._createObject(this._objects.length);return this._objects.push(t),t}freeObject(t){t.inUse=!1}freeAllObjects(){for(const t of this._objects)this.freeObject(t)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(t=>!t.inUse)===!1}}const Jn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Pc{constructor(t,a){this.painter=t,this.terrain=a,this.pool=new rl(t.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(t){return this.pool.getObjectForId(t.rtt[this._stacks.length-1].id).texture}prepareForRender(t,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=t._order.filter(c=>!t._layers[c].isHidden(a)),this._coordsDescendingInv={};for(const c in t.sourceCaches){this._coordsDescendingInv[c]={};const u=t.sourceCaches[c].getVisibleCoordinates();for(const m of u){const w=this.terrain.sourceCache.getTerrainCoords(m);for(const S in w)this._coordsDescendingInv[c][S]||(this._coordsDescendingInv[c][S]=[]),this._coordsDescendingInv[c][S].push(w[S])}}this._coordsDescendingInvStr={};for(const c of t._order){const u=t._layers[c],m=u.source;if(Jn[u.type]&&!this._coordsDescendingInvStr[m]){this._coordsDescendingInvStr[m]={};for(const w in this._coordsDescendingInv[m])this._coordsDescendingInvStr[m][w]=this._coordsDescendingInv[m][w].map(S=>S.key).sort().join()}}for(const c of this._renderableTiles)for(const u in this._coordsDescendingInvStr){const m=this._coordsDescendingInvStr[u][c.tileID.key];m&&m!==c.rttCoords[u]&&(c.rtt=[])}}renderLayer(t){if(t.isHidden(this.painter.transform.zoom))return!1;const a=t.type,c=this.painter,u=this._renderableLayerIds[this._renderableLayerIds.length-1]===t.id;if(Jn[a]&&(this._prevType&&Jn[this._prevType]||this._stacks.push([]),this._prevType=a,this._stacks[this._stacks.length-1].push(t.id),!u))return!0;if(Jn[this._prevType]||Jn[a]&&u){this._prevType=a;const m=this._stacks.length-1,w=this._stacks[m]||[];for(const S of this._renderableTiles){if(this.pool.isFull()&&(mc(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(S),S.rtt[m]){const k=this.pool.getObjectForId(S.rtt[m].id);if(k.stamp===S.rtt[m].stamp){this.pool.useObject(k);continue}}const C=this.pool.getOrCreateFreeObject();this.pool.useObject(C),this.pool.stampObject(C),S.rtt[m]={id:C.id,stamp:C.stamp},c.context.bindFramebuffer.set(C.fbo.framebuffer),c.context.clear({color:d.aO.transparent,stencil:0}),c.currentStencilSource=void 0;for(let k=0;k<w.length;k++){const z=c.style._layers[w[k]],A=z.source?this._coordsDescendingInv[z.source][S.tileID.key]:[S.tileID];c.context.viewport.set([0,0,C.fbo.width,C.fbo.height]),c._renderTileClippingMasks(z,A),c.renderLayer(c,c.style.sourceCaches[z.source],z,A),z.source&&(S.rttCoords[z.source]=this._coordsDescendingInvStr[z.source][S.tileID.key])}}return mc(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Jn[a]}return!1}}const zc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},co=R,Ac={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:Qr,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:d.a.MAX_TILE_CACHE_ZOOM_LEVELS,localIdeographFontFamily:"sans-serif",transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,validateStyle:!0,maxCanvasSize:[4096,4096]},nl=f=>{f.touchstart=f.dragStart,f.touchmoveWindow=f.dragMove,f.touchend=f.dragEnd},Mc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Dc{constructor(t,a,c=!1){this.mousedown=w=>{this.startMouse(d.e({},w,{ctrlKey:!0,preventDefault:()=>w.preventDefault()}),U.mousePos(this.element,w)),U.addEventListener(window,"mousemove",this.mousemove),U.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.moveMouse(w,U.mousePos(this.element,w))},this.mouseup=w=>{this.mouseRotate.dragEnd(w),this.mousePitch&&this.mousePitch.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=U.touchPos(this.element,w.targetTouches)[0],this.startTouch(w,this._startPos),U.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),U.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=U.touchPos(this.element,w.targetTouches)[0],this.moveTouch(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const u=t.dragRotate._mouseRotate.getClickTolerance(),m=t.dragRotate._mousePitch.getClickTolerance();this.element=a,this.mouseRotate=ca({clickTolerance:u,enable:!0}),this.touchRotate=(({enable:w,clickTolerance:S,bearingDegreesPerPixelMoved:C=.8})=>{const k=new wc;return new An({clickTolerance:S,move:(z,A)=>({bearingDelta:(A.x-z.x)*C}),moveStateManager:k,enable:w,assignEvents:nl})})({clickTolerance:u,enable:!0}),this.map=t,c&&(this.mousePitch=bc({clickTolerance:m,enable:!0}),this.touchPitch=(({enable:w,clickTolerance:S,pitchDegreesPerPixelMoved:C=-.5})=>{const k=new wc;return new An({clickTolerance:S,move:(z,A)=>({pitchDelta:(A.y-z.y)*C}),moveStateManager:k,enable:w,assignEvents:nl})})({clickTolerance:m,enable:!0})),U.addEventListener(a,"mousedown",this.mousedown),U.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),U.addEventListener(a,"touchcancel",this.reset)}startMouse(t,a){this.mouseRotate.dragStart(t,a),this.mousePitch&&this.mousePitch.dragStart(t,a),U.disableDrag()}startTouch(t,a){this.touchRotate.dragStart(t,a),this.touchPitch&&this.touchPitch.dragStart(t,a),U.disableDrag()}moveMouse(t,a){const c=this.map,{bearingDelta:u}=this.mouseRotate.dragMove(t,a)||{};if(u&&c.setBearing(c.getBearing()+u),this.mousePitch){const{pitchDelta:m}=this.mousePitch.dragMove(t,a)||{};m&&c.setPitch(c.getPitch()+m)}}moveTouch(t,a){const c=this.map,{bearingDelta:u}=this.touchRotate.dragMove(t,a)||{};if(u&&c.setBearing(c.getBearing()+u),this.touchPitch){const{pitchDelta:m}=this.touchPitch.dragMove(t,a)||{};m&&c.setPitch(c.getPitch()+m)}}off(){const t=this.element;U.removeEventListener(t,"mousedown",this.mousedown),U.removeEventListener(t,"touchstart",this.touchstart,{passive:!1}),U.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),U.removeEventListener(window,"touchend",this.touchend),U.removeEventListener(t,"touchcancel",this.reset),this.offTemp()}offTemp(){U.enableDrag(),U.removeEventListener(window,"mousemove",this.mousemove),U.removeEventListener(window,"mouseup",this.mouseup),U.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),U.removeEventListener(window,"touchend",this.touchend)}}let Mn;function sl(f,t,a){const c=new d.M(f.lng,f.lat);if(f=new d.M(f.lng,f.lat),t){const u=new d.M(f.lng-360,f.lat),m=new d.M(f.lng+360,f.lat),w=a.locationPoint(f).distSqr(t);a.locationPoint(u).distSqr(t)<w?f=u:a.locationPoint(m).distSqr(t)<w&&(f=m)}for(;Math.abs(f.lng-a.center.lng)>180;){const u=a.locationPoint(f);if(u.x>=0&&u.y>=0&&u.x<=a.width&&u.y<=a.height)break;f.lng>a.center.lng?f.lng-=360:f.lng+=360}return f.lng!==c.lng&&a.locationPoint(f).y>a.height/2-a.getHorizon()?f:c}const uo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function al(f,t,a){const c=f.classList;for(const u in uo)c.remove(`maplibregl-${a}-anchor-${u}`);c.add(`maplibregl-${a}-anchor-${t}`)}class ha extends d.E{constructor(t){if(super(),this._onKeyPress=a=>{const c=a.code,u=a.charCode||a.keyCode;c!=="Space"&&c!=="Enter"&&u!==32&&u!==13||this.togglePopup()},this._onMapClick=a=>{const c=a.originalEvent.target,u=this._element;this._popup&&(c===u||u.contains(c))&&this.togglePopup()},this._update=a=>{var c;if(!this._map)return;const u=this._map.loaded()&&!this._map.isMoving();((a==null?void 0:a.type)==="terrain"||(a==null?void 0:a.type)==="render"&&!u)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?sl(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),a&&a.type!=="moveend"||(this._pos=this._pos.round()),U.setTransform(this._element,`${uo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${m}`),K.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const c=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=c}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new d.k("dragstart"))),this.fire(new d.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new d.k("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment!=="auto"?t.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(t==null?void 0:t.opacity,t==null?void 0:t.opacityWhenCovered),t&&t.element)this._element=t.element,this._offset=d.P.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=U.create("div"),this._element.setAttribute("aria-label","Map marker");const a=U.createNS("http://www.w3.org/2000/svg","svg"),c=41,u=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${c}px`),a.setAttributeNS(null,"width",`${u}px`),a.setAttributeNS(null,"viewBox",`0 0 ${u} ${c}`);const m=U.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"stroke","none"),m.setAttributeNS(null,"stroke-width","1"),m.setAttributeNS(null,"fill","none"),m.setAttributeNS(null,"fill-rule","evenodd");const w=U.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const S=U.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(3.0, 29.0)"),S.setAttributeNS(null,"fill","#000000");const C=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ie of C){const fe=U.createNS("http://www.w3.org/2000/svg","ellipse");fe.setAttributeNS(null,"opacity","0.04"),fe.setAttributeNS(null,"cx","10.5"),fe.setAttributeNS(null,"cy","5.80029008"),fe.setAttributeNS(null,"rx",ie.rx),fe.setAttributeNS(null,"ry",ie.ry),S.appendChild(fe)}const k=U.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill",this._color);const z=U.createNS("http://www.w3.org/2000/svg","path");z.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),k.appendChild(z);const A=U.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"opacity","0.25"),A.setAttributeNS(null,"fill","#000000");const B=U.createNS("http://www.w3.org/2000/svg","path");B.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),A.appendChild(B);const G=U.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(6.0, 7.0)"),G.setAttributeNS(null,"fill","#FFFFFF");const q=U.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(8.0, 8.0)");const X=U.createNS("http://www.w3.org/2000/svg","circle");X.setAttributeNS(null,"fill","#000000"),X.setAttributeNS(null,"opacity","0.25"),X.setAttributeNS(null,"cx","5.5"),X.setAttributeNS(null,"cy","5.5"),X.setAttributeNS(null,"r","5.4999962");const j=U.createNS("http://www.w3.org/2000/svg","circle");j.setAttributeNS(null,"fill","#FFFFFF"),j.setAttributeNS(null,"cx","5.5"),j.setAttributeNS(null,"cy","5.5"),j.setAttributeNS(null,"r","5.4999962"),q.appendChild(X),q.appendChild(j),w.appendChild(S),w.appendChild(k),w.appendChild(A),w.appendChild(G),w.appendChild(q),a.appendChild(w),a.setAttributeNS(null,"height",c*this._scale+"px"),a.setAttributeNS(null,"width",u*this._scale+"px"),this._element.appendChild(a),this._offset=d.P.convert(t&&t.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),al(this._element,this._anchor,"marker"),t&&t.className)for(const a of t.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),t.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),U.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=d.M.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(t){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),t){if(!("offset"in t.options)){const u=Math.abs(13.5)/Math.SQRT2;t.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[u,-1*(38.1-13.5+u)],"bottom-right":[-u,-1*(38.1-13.5+u)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=t,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const t=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:t?(t.isOpen()?t.remove():(t.setLngLat(this._lngLat),t.addTo(this._map)),this):this}_updateOpacity(t=!1){var a,c;if(!(!((a=this._map)===null||a===void 0)&&a.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(t)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const u=this._map,m=u.terrain.depthAtPoint(this._pos),w=u.terrain.getElevationForLngLatZoom(this._lngLat,u.transform.tileZoom);if(u.transform.lngLatToCameraDepth(this._lngLat,w)-m<.006)return void(this._element.style.opacity=this._opacity);const S=-this._offset.y/u.transform._pixelPerMeter,C=Math.sin(u.getPitch()*Math.PI/180)*S,k=u.terrain.depthAtPoint(new d.P(this._pos.x,this._pos.y-this._offset.y)),z=u.transform.lngLatToCameraDepth(this._lngLat,w+C)-k>.006;!((c=this._popup)===null||c===void 0)&&c.isOpen()&&z&&this._popup.remove(),this._element.style.opacity=z?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(t){return this._offset=d.P.convert(t),this._update(),this}addClassName(t){this._element.classList.add(t)}removeClassName(t){this._element.classList.remove(t)}toggleClassName(t){return this._element.classList.toggle(t)}setDraggable(t){return this._draggable=!!t,this._map&&(t?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(t){return this._rotation=t||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(t){return this._rotationAlignment=t||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(t){return this._pitchAlignment=t&&t!=="auto"?t:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(t,a){return t===void 0&&a===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),t!==void 0&&(this._opacity=t),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const Lc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let da=0,Qn=!1;const Rc={maxWidth:100,unit:"metric"};function ol(f,t,a){const c=a&&a.maxWidth||100,u=f._container.clientHeight/2,m=f.unproject([0,u]),w=f.unproject([c,u]),S=m.distanceTo(w);if(a&&a.unit==="imperial"){const C=3.2808*S;C>5280?xs(t,c,C/5280,f._getUIString("ScaleControl.Miles")):xs(t,c,C,f._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?xs(t,c,S/1852,f._getUIString("ScaleControl.NauticalMiles")):S>=1e3?xs(t,c,S/1e3,f._getUIString("ScaleControl.Kilometers")):xs(t,c,S,f._getUIString("ScaleControl.Meters"))}function xs(f,t,a,c){const u=function(m){const w=Math.pow(10,`${Math.floor(m)}`.length-1);let S=m/w;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(C){const k=Math.pow(10,Math.ceil(-Math.log(C)/Math.LN10));return Math.round(C*k)/k}(S),w*S}(a);f.style.width=t*(u/a)+"px",f.innerHTML=`${u}&nbsp;${c}`}const Fc={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Bc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Oc(f){if(f){if(typeof f=="number"){const t=Math.round(Math.abs(f)/Math.SQRT2);return{center:new d.P(0,0),top:new d.P(0,f),"top-left":new d.P(t,t),"top-right":new d.P(-t,t),bottom:new d.P(0,-f),"bottom-left":new d.P(t,-t),"bottom-right":new d.P(-t,-t),left:new d.P(f,0),right:new d.P(-f,0)}}if(f instanceof d.P||Array.isArray(f)){const t=d.P.convert(f);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:d.P.convert(f.center||[0,0]),top:d.P.convert(f.top||[0,0]),"top-left":d.P.convert(f["top-left"]||[0,0]),"top-right":d.P.convert(f["top-right"]||[0,0]),bottom:d.P.convert(f.bottom||[0,0]),"bottom-left":d.P.convert(f["bottom-left"]||[0,0]),"bottom-right":d.P.convert(f["bottom-right"]||[0,0]),left:d.P.convert(f.left||[0,0]),right:d.P.convert(f.right||[0,0])}}return Oc(new d.P(0,0))}const Oh=R;x.AJAXError=d.be,x.Evented=d.E,x.LngLat=d.M,x.MercatorCoordinate=d.Y,x.Point=d.P,x.addProtocol=d.bf,x.config=d.a,x.removeProtocol=d.bg,x.AttributionControl=Fh,x.BoxZoomHandler=la,x.CanvasSource=Zs,x.CooperativeGesturesHandler=nt,x.DoubleClickZoomHandler=kc,x.DragPanHandler=Jr,x.DragRotateHandler=ao,x.EdgeInsets=io,x.FullscreenControl=class extends d.E{constructor(f={}){super(),this._onFullscreenChange=()=>{var t;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((t=a==null?void 0:a.shadowRoot)===null||t===void 0)&&t.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,f&&f.container&&(f.container instanceof HTMLElement?this._container=f.container:d.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(f){return this._map=f,this._container||(this._container=this._map.getContainer()),this._controlContainer=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){U.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const f=this._fullscreenButton=U.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);U.create("span","maplibregl-ctrl-icon",f).setAttribute("aria-hidden","true"),f.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const f=this._getTitle();this._fullscreenButton.setAttribute("aria-label",f),this._fullscreenButton.title=f}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new d.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new d.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},x.GeoJSONSource=Ct,x.GeolocateControl=class extends d.E{constructor(f){super(),this._onSuccess=t=>{if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new d.k("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(t),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new d.k("geolocate",t)),this._finish()}},this._updateCamera=t=>{const a=new d.M(t.coords.longitude,t.coords.latitude),c=t.coords.accuracy,u=this._map.getBearing(),m=d.e({bearing:u},this.options.fitBoundsOptions),w=Si.fromLngLat(a,c);this._map.fitBounds(w,m,{geolocateSource:!0})},this._updateMarker=t=>{if(t){const a=new d.M(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=t=>{if(this._map){if(this.options.trackUserLocation)if(t.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(t.code===3&&Qn)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new d.k("error",t)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=t=>{if(this._map){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=U.create("button","maplibregl-ctrl-geolocate",this._container),U.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",t===!1){d.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=U.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ha({element:this._dotElement}),this._circleElement=U.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ha({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new d.k("trackuserlocationend")))})}},this.options=d.e({},Lc,f)}onAdd(f){return this._map=f,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return d._(this,arguments,void 0,function*(t=!1){if(Mn!==void 0&&!t)return Mn;if(window.navigator.permissions===void 0)return Mn=!!window.navigator.geolocation,Mn;try{Mn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Mn=!!window.navigator.geolocation}return Mn})}().then(t=>this._setupUI(t)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),U.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,da=0,Qn=!1}_isOutOfMapMaxBounds(f){const t=this._map.getMaxBounds(),a=f.coords;return t&&(a.longitude<t.getWest()||a.longitude>t.getEast()||a.latitude<t.getSouth()||a.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const f=this._map.getBounds(),t=f.getSouthEast(),a=f.getNorthEast(),c=t.distanceTo(a),u=Math.ceil(this._accuracy/(c/this._map._container.clientHeight)*2);this._circleElement.style.width=`${u}px`,this._circleElement.style.height=`${u}px`}trigger(){if(!this._setup)return d.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new d.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":da--,Qn=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new d.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new d.k("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let f;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),da++,da>1?(f={maximumAge:6e5,timeout:0},Qn=!0):(f=this.options.positionOptions,Qn=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,f)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},x.Hash=_c,x.ImageSource=fn,x.KeyboardHandler=Ht,x.LngLatBounds=Si,x.LogoControl=ua,x.Map=class extends Rh{constructor(f){if(d.bc.mark(d.bd.create),(f=d.e({},Ac,f)).minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Jo(f.minZoom,f.maxZoom,f.minPitch,f.maxPitch,f.renderWorldCopies),{bearingSnap:f.bearingSnap}),this._contextLost=t=>{t.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new d.k("webglcontextlost",{originalEvent:t}))},this._contextRestored=t=>{this._setupPainter(),this.resize(),this._update(),this.fire(new d.k("webglcontextrestored",{originalEvent:t}))},this._onMapScroll=t=>{if(t.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=f.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=f.preserveDrawingBuffer,this._antialias=f.antialias,this._trackResize=f.trackResize,this._bearingSnap=f.bearingSnap,this._refreshExpiredTiles=f.refreshExpiredTiles,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=f.collectResourceTiming,this._renderTaskQueue=new ti,this._controls=[],this._mapId=d.a3(),this._locale=d.e({},zc,f.locale),this._clickTolerance=f.clickTolerance,this._overridePixelRatio=f.pixelRatio,this._maxCanvasSize=f.maxCanvasSize,this.transformCameraUpdate=f.transformCameraUpdate,this._imageQueueHandle=le.addThrottleControl(()=>this.isMoving()),this._requestManager=new je(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let t=!1;const a=yc(c=>{this._trackResize&&!this._removed&&this.resize(c)._update()},50);this._resizeObserver=new ResizeObserver(c=>{t?a(c):t=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ur(this,f),this._hash=f.hash&&new _c(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,d.e({},f.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new Fh(typeof f.attributionControl=="boolean"?void 0:f.attributionControl)),f.maplibreLogo&&this.addControl(new ua,f.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",t=>{this._update(t.dataType==="style"),this.fire(new d.k(`${t.dataType}data`,t))}),this.on("dataloading",t=>{this.fire(new d.k(`${t.dataType}dataloading`,t))}),this.on("dataabort",t=>{this.fire(new d.k("sourcedataabort",t))})}_getMapId(){return this._mapId}addControl(f,t){if(t===void 0&&(t=f.getDefaultPosition?f.getDefaultPosition():"top-right"),!f||!f.onAdd)return this.fire(new d.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=f.onAdd(this);this._controls.push(f);const c=this._controlPositions[t];return t.indexOf("bottom")!==-1?c.insertBefore(a,c.firstChild):c.appendChild(a),this}removeControl(f){if(!f||!f.onRemove)return this.fire(new d.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const t=this._controls.indexOf(f);return t>-1&&this._controls.splice(t,1),f.onRemove(this),this}hasControl(f){return this._controls.indexOf(f)>-1}calculateCameraOptionsFromTo(f,t,a,c){return c==null&&this.terrain&&(c=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(f,t,a,c)}resize(f){var t;const a=this._containerDimensions(),c=a[0],u=a[1],m=this._getClampedPixelRatio(c,u);if(this._resizeCanvas(c,u,m),this.painter.resize(c,u,m),this.painter.overLimit()){const S=this.painter.context.gl;this._maxCanvasSize=[S.drawingBufferWidth,S.drawingBufferHeight];const C=this._getClampedPixelRatio(c,u);this._resizeCanvas(c,u,C),this.painter.resize(c,u,C)}this.transform.resize(c,u),(t=this._requestedCameraState)===null||t===void 0||t.resize(c,u);const w=!this._moving;return w&&(this.stop(),this.fire(new d.k("movestart",f)).fire(new d.k("move",f))),this.fire(new d.k("resize",f)),w&&this.fire(new d.k("moveend",f)),this}_getClampedPixelRatio(f,t){const{0:a,1:c}=this._maxCanvasSize,u=this.getPixelRatio(),m=f*u,w=t*u;return Math.min(m>a?a/m:1,w>c?c/w:1)*u}getPixelRatio(){var f;return(f=this._overridePixelRatio)!==null&&f!==void 0?f:devicePixelRatio}setPixelRatio(f){this._overridePixelRatio=f,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(f){return this.transform.setMaxBounds(Si.convert(f)),this._update()}setMinZoom(f){if((f=f??-2)>=-2&&f<=this.transform.maxZoom)return this.transform.minZoom=f,this._update(),this.getZoom()<f&&this.setZoom(f),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(f){if((f=f??22)>=this.transform.minZoom)return this.transform.maxZoom=f,this._update(),this.getZoom()>f&&this.setZoom(f),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(f){if((f=f??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(f>=0&&f<=this.transform.maxPitch)return this.transform.minPitch=f,this._update(),this.getPitch()<f&&this.setPitch(f),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(f){if((f=f??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(f>=this.transform.minPitch)return this.transform.maxPitch=f,this._update(),this.getPitch()>f&&this.setPitch(f),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(f){return this.transform.renderWorldCopies=f,this._update()}project(f){return this.transform.locationPoint(d.M.convert(f),this.style&&this.terrain)}unproject(f){return this.transform.pointLocation(d.P.convert(f),this.terrain)}isMoving(){var f;return this._moving||((f=this.handlers)===null||f===void 0?void 0:f.isMoving())}isZooming(){var f;return this._zooming||((f=this.handlers)===null||f===void 0?void 0:f.isZooming())}isRotating(){var f;return this._rotating||((f=this.handlers)===null||f===void 0?void 0:f.isRotating())}_createDelegatedListener(f,t,a){if(f==="mouseenter"||f==="mouseover"){let c=!1;return{layer:t,listener:a,delegates:{mousemove:m=>{const w=this.getLayer(t)?this.queryRenderedFeatures(m.point,{layers:[t]}):[];w.length?c||(c=!0,a.call(this,new Di(f,this,m.originalEvent,{features:w}))):c=!1},mouseout:()=>{c=!1}}}}if(f==="mouseleave"||f==="mouseout"){let c=!1;return{layer:t,listener:a,delegates:{mousemove:w=>{(this.getLayer(t)?this.queryRenderedFeatures(w.point,{layers:[t]}):[]).length?c=!0:c&&(c=!1,a.call(this,new Di(f,this,w.originalEvent)))},mouseout:w=>{c&&(c=!1,a.call(this,new Di(f,this,w.originalEvent)))}}}}{const c=u=>{const m=this.getLayer(t)?this.queryRenderedFeatures(u.point,{layers:[t]}):[];m.length&&(u.features=m,a.call(this,u),delete u.features)};return{layer:t,listener:a,delegates:{[f]:c}}}}on(f,t,a){if(a===void 0)return super.on(f,t);const c=this._createDelegatedListener(f,t,a);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[f]=this._delegatedListeners[f]||[],this._delegatedListeners[f].push(c);for(const u in c.delegates)this.on(u,c.delegates[u]);return this}once(f,t,a){if(a===void 0)return super.once(f,t);const c=this._createDelegatedListener(f,t,a);for(const u in c.delegates)this.once(u,c.delegates[u]);return this}off(f,t,a){return a===void 0?super.off(f,t):(this._delegatedListeners&&this._delegatedListeners[f]&&(c=>{const u=this._delegatedListeners[f];for(let m=0;m<u.length;m++){const w=u[m];if(w.layer===t&&w.listener===a){for(const S in w.delegates)this.off(S,w.delegates[S]);return u.splice(m,1),this}}})(),this)}queryRenderedFeatures(f,t){if(!this.style)return[];let a;const c=f instanceof d.P||Array.isArray(f),u=c?f:[[0,0],[this.transform.width,this.transform.height]];if(t=t||(c?{}:f)||{},u instanceof d.P||typeof u[0]=="number")a=[d.P.convert(u)];else{const m=d.P.convert(u[0]),w=d.P.convert(u[1]);a=[m,new d.P(w.x,m.y),w,new d.P(m.x,w.y),m]}return this.style.queryRenderedFeatures(a,t,this.transform)}querySourceFeatures(f,t){return this.style.querySourceFeatures(f,t)}setStyle(f,t){return(t=d.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},t)).diff!==!1&&t.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&f?(this._diffStyle(f,t),this):(this._localIdeographFontFamily=t.localIdeographFontFamily,this._updateStyle(f,t))}setTransformRequest(f){return this._requestManager.setTransformRequest(f),this}_getUIString(f){const t=this._locale[f];if(t==null)throw new Error(`Missing UI string '${f}'`);return t}_updateStyle(f,t){if(t.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(f,t));const a=this.style&&t.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!f)),f?(this.style=new Ro(this,t||{}),this.style.setEventedParent(this,{style:this.style}),typeof f=="string"?this.style.loadURL(f,t,a):this.style.loadJSON(f,t,a),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ro(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(f,t){if(typeof f=="string"){const a=this._requestManager.transformRequest(f,xe.Style);d.h(a,new AbortController).then(c=>{this._updateDiff(c.data,t)}).catch(c=>{c&&this.fire(new d.j(c))})}else typeof f=="object"&&this._updateDiff(f,t)}_updateDiff(f,t){try{this.style.setState(f,t)&&this._update(!0)}catch(a){d.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(f,t)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():d.w("There is no style added to the map.")}addSource(f,t){return this._lazyInitEmptyStyle(),this.style.addSource(f,t),this._update(!0)}isSourceLoaded(f){const t=this.style&&this.style.sourceCaches[f];if(t!==void 0)return t.loaded();this.fire(new d.j(new Error(`There is no source with ID '${f}'`)))}setTerrain(f){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),f){const t=this.style.sourceCaches[f.source];if(!t)throw new Error(`cannot load terrain, because there exists no source with ID: ${f.source}`);this.terrain===null&&t.reload();for(const a in this.style._layers){const c=this.style._layers[a];c.type==="hillshade"&&c.source===f.source&&d.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new lo(this.painter,t,f),this.painter.renderToTexture=new Pc(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=a=>{a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==f.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new d.k("terrain",{terrain:f})),this}getTerrain(){var f,t;return(t=(f=this.terrain)===null||f===void 0?void 0:f.options)!==null&&t!==void 0?t:null}areTilesLoaded(){const f=this.style&&this.style.sourceCaches;for(const t in f){const a=f[t]._tiles;for(const c in a){const u=a[c];if(u.state!=="loaded"&&u.state!=="errored")return!1}}return!0}removeSource(f){return this.style.removeSource(f),this._update(!0)}getSource(f){return this.style.getSource(f)}addImage(f,t,a={}){const{pixelRatio:c=1,sdf:u=!1,stretchX:m,stretchY:w,content:S}=a;if(this._lazyInitEmptyStyle(),!(t instanceof HTMLImageElement||d.b(t))){if(t.width===void 0||t.height===void 0)return this.fire(new d.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:C,height:k,data:z}=t,A=t;return this.style.addImage(f,{data:new d.R({width:C,height:k},new Uint8Array(z)),pixelRatio:c,stretchX:m,stretchY:w,content:S,sdf:u,version:0,userImage:A}),A.onAdd&&A.onAdd(this,f),this}}{const{width:C,height:k,data:z}=K.getImageData(t);this.style.addImage(f,{data:new d.R({width:C,height:k},z),pixelRatio:c,stretchX:m,stretchY:w,content:S,sdf:u,version:0})}}updateImage(f,t){const a=this.style.getImage(f);if(!a)return this.fire(new d.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const c=t instanceof HTMLImageElement||d.b(t)?K.getImageData(t):t,{width:u,height:m,data:w}=c;if(u===void 0||m===void 0)return this.fire(new d.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(u!==a.data.width||m!==a.data.height)return this.fire(new d.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const S=!(t instanceof HTMLImageElement||d.b(t));return a.data.replace(w,S),this.style.updateImage(f,a),this}getImage(f){return this.style.getImage(f)}hasImage(f){return f?!!this.style.getImage(f):(this.fire(new d.j(new Error("Missing required image id"))),!1)}removeImage(f){this.style.removeImage(f)}loadImage(f){return le.getImage(this._requestManager.transformRequest(f,xe.Image),new AbortController)}listImages(){return this.style.listImages()}addLayer(f,t){return this._lazyInitEmptyStyle(),this.style.addLayer(f,t),this._update(!0)}moveLayer(f,t){return this.style.moveLayer(f,t),this._update(!0)}removeLayer(f){return this.style.removeLayer(f),this._update(!0)}getLayer(f){return this.style.getLayer(f)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(f,t,a){return this.style.setLayerZoomRange(f,t,a),this._update(!0)}setFilter(f,t,a={}){return this.style.setFilter(f,t,a),this._update(!0)}getFilter(f){return this.style.getFilter(f)}setPaintProperty(f,t,a,c={}){return this.style.setPaintProperty(f,t,a,c),this._update(!0)}getPaintProperty(f,t){return this.style.getPaintProperty(f,t)}setLayoutProperty(f,t,a,c={}){return this.style.setLayoutProperty(f,t,a,c),this._update(!0)}getLayoutProperty(f,t){return this.style.getLayoutProperty(f,t)}setGlyphs(f,t={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(f,t),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(f,t,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(f,t,a,c=>{c||this._update(!0)}),this}removeSprite(f){return this._lazyInitEmptyStyle(),this.style.removeSprite(f),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(f,t={}){return this._lazyInitEmptyStyle(),this.style.setSprite(f,t,a=>{a||this._update(!0)}),this}setLight(f,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(f,t),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(f,t){return this.style.setFeatureState(f,t),this._update()}removeFeatureState(f,t){return this.style.removeFeatureState(f,t),this._update()}getFeatureState(f){return this.style.getFeatureState(f)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let f=0,t=0;return this._container&&(f=this._container.clientWidth||400,t=this._container.clientHeight||300),[f,t]}_setupContainer(){const f=this._container;f.classList.add("maplibregl-map");const t=this._canvasContainer=U.create("div","maplibregl-canvas-container",f);this._interactive&&t.classList.add("maplibregl-interactive"),this._canvas=U.create("canvas","maplibregl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),c=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],c);const u=this._controlContainer=U.create("div","maplibregl-control-container",f),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{m[w]=U.create("div",`maplibregl-ctrl-${w} `,u)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(f,t,a){this._canvas.width=Math.floor(a*f),this._canvas.height=Math.floor(a*t),this._canvas.style.width=`${f}px`,this._canvas.style.height=`${t}px`}_setupPainter(){const f={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let t=null;this._canvas.addEventListener("webglcontextcreationerror",c=>{t={requestedAttributes:f},c&&(t.statusMessage=c.statusMessage,t.type=c.type)},{once:!0});const a=this._canvas.getContext("webgl2",f)||this._canvas.getContext("webgl",f);if(!a){const c="Failed to initialize WebGL";throw t?(t.message=c,new Error(JSON.stringify(t))):new Error(c)}this.painter=new sa(a,this.transform),Te.testSupport(a)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(f){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||f,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(f){return this._update(),this._renderTaskQueue.add(f)}_cancelRenderFrame(f){this._renderTaskQueue.remove(f)}_render(f){const t=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(f),this._removed)return;let a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const u=this.transform.zoom,m=K.now();this.style.zoomHistory.update(u,m);const w=new d.a8(u,{now:m,fadeDuration:t,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),S=w.crossFadingFactor();S===1&&S===this._crossFadingFactor||(a=!0,this._crossFadingFactor=S),this.style.update(w)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,t,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:t,showPadding:this.showPadding}),this.fire(new d.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,d.bc.mark(d.bd.load),this.fire(new d.k("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const c=this._sourcesDirty||this._styleDirty||this._placementDirty;return c||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new d.k("idle")),!this._loaded||this._fullyLoaded||c||(this._fullyLoaded=!0,d.bc.mark(d.bd.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var f;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),le.removeThrottleControl(this._imageQueueHandle),(f=this._resizeObserver)===null||f===void 0||f.disconnect();const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),U.remove(this._canvasContainer),U.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),d.bc.clearMetrics(),this._removed=!0,this.fire(new d.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,K.frameAsync(this._frameRequest).then(f=>{d.bc.frame(f),this._frameRequest=null,this._render(f)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(f){this._showTileBoundaries!==f&&(this._showTileBoundaries=f,this._update())}get showPadding(){return!!this._showPadding}set showPadding(f){this._showPadding!==f&&(this._showPadding=f,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(f){this._showCollisionBoxes!==f&&(this._showCollisionBoxes=f,f?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(f){this._showOverdrawInspector!==f&&(this._showOverdrawInspector=f,this._update())}get repaint(){return!!this._repaint}set repaint(f){this._repaint!==f&&(this._repaint=f,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(f){this._vertices=f,this._update()}get version(){return co}getCameraTargetElevation(){return this.transform.elevation}},x.MapMouseEvent=Di,x.MapTouchEvent=oa,x.MapWheelEvent=Ur,x.Marker=ha,x.NavigationControl=class{constructor(f){this._updateZoomButtons=()=>{const t=this._map.getZoom(),a=t===this._map.getMaxZoom(),c=t===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=c,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",c.toString())},this._rotateCompassArrow=()=>{const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=t},this._setButtonTitle=(t,a)=>{const c=this._map._getUIString(`NavigationControl.${a}`);t.title=c,t.setAttribute("aria-label",c)},this.options=d.e({},Mc,f),this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",t=>t.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",t=>this._map.zoomIn({},{originalEvent:t})),U.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",t=>this._map.zoomOut({},{originalEvent:t})),U.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",t=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:t}):this._map.resetNorth({},{originalEvent:t})}),this._compassIcon=U.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(f){return this._map=f,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Dc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){U.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(f,t){const a=U.create("button",f,this._container);return a.type="button",a.addEventListener("click",t),a}},x.Popup=class extends d.E{constructor(f){super(),this.remove=()=>(this._content&&U.remove(this._content),this._container&&(U.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new d.k("close"))),this),this._onMouseUp=t=>{this._update(t.point)},this._onMouseMove=t=>{this._update(t.point)},this._onDrag=t=>{this._update(t.point)},this._update=t=>{var a;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=U.create("div","maplibregl-popup",this._map.getContainer()),this._tip=U.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const S of this.options.className.split(" "))this._container.classList.add(S);this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?sl(this._lngLat,this._flatPos,this._map.transform):(a=this._lngLat)===null||a===void 0?void 0:a.wrap(),this._trackPointer&&!t)return;const c=this._flatPos=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&t?t:this._map.transform.locationPoint(this._lngLat));let u=this.options.anchor;const m=Oc(this.options.offset);if(!u){const S=this._container.offsetWidth,C=this._container.offsetHeight;let k;k=c.y+m.bottom.y<C?["top"]:c.y>this._map.transform.height-C?["bottom"]:[],c.x<S/2?k.push("left"):c.x>this._map.transform.width-S/2&&k.push("right"),u=k.length===0?"bottom":k.join("-")}let w=c.add(m[u]);this.options.subpixelPositioning||(w=w.round()),U.setTransform(this._container,`${uo[u]} translate(${w.x}px,${w.y}px)`),al(this._container,u,"popup")},this._onClose=()=>{this.remove()},this.options=d.e(Object.create(Fc),f)}addTo(f){return this._map&&this.remove(),this._map=f,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new d.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(f){return this._lngLat=d.M.convert(f),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(f){return this.setDOMContent(document.createTextNode(f))}setHTML(f){const t=document.createDocumentFragment(),a=document.createElement("body");let c;for(a.innerHTML=f;c=a.firstChild,c;)t.appendChild(c);return this.setDOMContent(t)}getMaxWidth(){var f;return(f=this._container)===null||f===void 0?void 0:f.style.maxWidth}setMaxWidth(f){return this.options.maxWidth=f,this._update(),this}setDOMContent(f){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=U.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(f),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(f){this._container&&this._container.classList.add(f)}removeClassName(f){this._container&&this._container.classList.remove(f)}setOffset(f){return this.options.offset=f,this._update(),this}toggleClassName(f){if(this._container)return this._container.classList.toggle(f)}setSubpixelPositioning(f){this.options.subpixelPositioning=f}_createCloseButton(){this.options.closeButton&&(this._closeButton=U.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const f=this._container.querySelector(Bc);f&&f.focus()}},x.RasterDEMTileSource=Za,x.RasterTileSource=ls,x.ScaleControl=class{constructor(f){this._onMove=()=>{ol(this._map,this._container,this.options)},this.setUnit=t=>{this.options.unit=t,ol(this._map,this._container,this.options)},this.options=d.e({},Rc,f)}getDefaultPosition(){return"bottom-left"}onAdd(f){return this._map=f,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-scale",f.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){U.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},x.ScrollZoomHandler=Ec,x.Style=Ro,x.TerrainControl=class{constructor(f){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=f}onAdd(f){return this._map=f,this._container=U.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=U.create("button","maplibregl-ctrl-terrain",this._container),U.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){U.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},x.TwoFingersTouchPitchHandler=Dh,x.TwoFingersTouchRotateHandler=Tc,x.TwoFingersTouchZoomHandler=el,x.TwoFingersTouchZoomRotateHandler=et,x.VectorTileSource=_e,x.VideoSource=qs,x.addSourceType=(f,t)=>d._(void 0,void 0,void 0,function*(){if(cs(f))throw new Error(`A source type called "${f}" already exists.`);((a,c)=>{Gs[a]=c})(f,t)}),x.clearPrewarmedResources=function(){const f=Fi;f&&(f.isPreloaded()&&f.numActive()===1?(f.release(Or),Fi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},x.getMaxParallelImageRequests=function(){return d.a.MAX_PARALLEL_IMAGE_REQUESTS},x.getRTLTextPluginStatus=function(){return Sr().getRTLTextPluginStatus()},x.getVersion=function(){return Oh},x.getWorkerCount=function(){return Ai.workerCount},x.getWorkerUrl=function(){return d.a.WORKER_URL},x.importScriptInWorkers=function(f){return qn().broadcast("importScript",f)},x.prewarm=function(){Xr().acquire(Or)},x.setMaxParallelImageRequests=function(f){d.a.MAX_PARALLEL_IMAGE_REQUESTS=f},x.setRTLTextPlugin=function(f,t){return Sr().setRTLTextPlugin(f,t)},x.setWorkerCount=function(f){Ai.workerCount=f},x.setWorkerUrl=function(f){d.a.WORKER_URL=f}});var b=l;return b})})(Qx);var _6=Qx.exports;const g_=y_(_6);function v6(){const i=Ae.useRef(null),n=Ae.useRef(null),[l]=Ae.useState(0),[p]=Ae.useState(45),[_]=Ae.useState(2),[b]=Ae.useState("W5lV2tLMxZAza9GGxomX");return Ae.useEffect(()=>{n.current||(n.current=new g_.Map({container:i.current,style:`https://api.maptiler.com/maps/satellite/style.json?key=${b}`,center:[l,p],zoom:_,geolocateControl:!0,attributionControl:!1,minimap:{containerStyle:{width:"200px",height:"150px"}}}),new g_.Marker({color:"#FF0000"}).setLngLat([-76.552,3.379]).addTo(n.current))},[b,l,p,_]),ae.jsx("div",{className:"map-wrap",children:ae.jsx("div",{ref:i,className:"mapa"})})}function x6(){return ae.jsxs(ae.Fragment,{children:[ae.jsx(v6,{}),ae.jsx("main",{className:"main",children:ae.jsxs(f5,{children:[ae.jsx(y6,{}),ae.jsxs(a5,{children:[ae.jsx(yu,{path:"/",element:ae.jsx(k5,{})}),ae.jsx(yu,{path:"/about",element:ae.jsx(f6,{})}),ae.jsx(yu,{path:"/servicios",element:ae.jsx(m6,{})}),ae.jsx(yu,{path:"*",element:ae.jsx(g6,{})})]})]})})]})}vm.createRoot(document.getElementById("root")).render(ae.jsx(Rs.StrictMode,{children:ae.jsx(x6,{})}));
